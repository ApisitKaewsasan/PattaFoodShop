require.config({"config": {
        "jsbuild":{"Magezon_Builder/js/modal/clearLayout.js":"define([\n\t'jquery',\n\t'angular'\n], function($, angular) {\n\n\treturn {\n\t\ttemplateUrl: 'Magezon_Builder/js/templates/modal/clear-layout.html',\n\t\tcontroller: function(\n\t\t\t$rootScope, \n\t\t\t$scope, \n\t\t\t$uibModalInstance, \n\t\t\t$controller,\n\t\t\tform, \n\t\t\tmodal\n\t\t) {\n\t\t\tvar parent = $controller('modalBaseController', {$scope: $scope, $uibModalInstance: $uibModalInstance, modal: modal, form: form});\n\t\t\tangular.extend(this, parent);\n\n\t\t\tvar self = this;\n\n\t\t\tself.onSubmit = function() {\n\t\t\t\t$rootScope.profile.elements = [];\n\t\t\t\t$rootScope.$broadcast('addHistory', {\n\t\t\t\t\ttype: 'cleared_layout'\n\t\t\t\t});\n\t\t\t\t$uibModalInstance.close(self.model);\n\t\t\t}\n\t\t}\n\t}\n});","Magezon_Builder/js/modal/settings.js":"define([\n\t'jquery',\n\t'angular'\n], function($, angular) {\n\n\treturn {\n\t\ttemplateUrl: 'Magezon_Builder/js/templates/modal/form.html',\n\t\tcontroller: function(\n\t\t\t$rootScope, \n\t\t\t$scope, \n\t\t\t$uibModalInstance, \n\t\t\t$controller, \n\t\t\tform,\n\t\t\tmodal,\n\t\t\tmagezonBuilderForm\n\t\t) {\n\t\t\tvar parent = $controller('modalBaseController', {$scope: $scope, $uibModalInstance: $uibModalInstance, modal: modal, form: form});\n\t\t\tangular.extend(this, parent);\n\n\t\t\tvar self = this;\n\n\t\t\t$scope.$emit('enableModalSpinner');\n\t\t\tmagezonBuilderForm.getForm('modals.settings', function(tabs) {\n\t\t\t\tself.tabs = tabs;\n\t\t\t\tself.model = angular.copy($rootScope.profile);\n\t\t\t\t$scope.$emit('disableModalSpinner');\n\t\t\t});\n\n\t\t\tself.onSubmit = function() {\n\t\t\t\tangular.merge($rootScope.profile, self.model);\n\t\t\t\t$rootScope.$broadcast('exportShortcode');\n\t\t\t\t$uibModalInstance.close(self.model);\n\t\t\t}\n\t\t}\n\t}\n});","Magezon_Builder/js/modal/templates.js":"define([\n\t'jquery',\n\t'angular'\n], function($, angular) {\n\n\treturn {\n\t\ttemplateUrl: 'Magezon_Builder/js/templates/modal/form.html',\n\t\tcontroller: function(\n\t\t\t$scope, \n\t\t\t$uibModalInstance, \n\t\t\t$controller,\n\t\t\tform, \n\t\t\tmodal,\n\t\t\tmagezonBuilderForm\n\t\t) {\n\t\t\tvar parent = $controller('modalBaseController', {$scope: $scope, $uibModalInstance: $uibModalInstance, modal: modal, form: form});\n\t\t\tangular.extend(this, parent);\n\t\t\t\n\t\t\tvar self = this;\n\n\t\t\t$scope.$emit('enableModalSpinner');\n\t\t\tmagezonBuilderForm.getForm('modals.templates', function(tabs) {\n\t\t\t\tself.tabs = tabs;\n\t\t\t\t$scope.$emit('disableModalSpinner');\n\t\t\t});\n\t\t}\n\t}\n});","Magezon_Builder/js/modal/button/save.js":"define([\n\t'jquery',\n\t'angular'\n], function($, angular) {\n\n\tvar directive = function(magezonBuilderUrl) {\n\t\treturn {\n\t\t\treplace: true,\n\t\t\ttemplateUrl: function(elem) {\n\t\t\t\treturn magezonBuilderUrl.getTemplateUrl(elem, 'Magezon_Builder/js/templates/modal/button/save.html');\n\t\t\t},\n\t\t\tcontroller: function($scope) {\n\t\t\t\t$scope.disabled = false;\n\n\t\t\t\t$scope.$on('disableSaveBtn', function() {\n\t\t\t\t\t$scope.disabled = true;\n\t\t\t\t});\n\n\t\t\t\t$scope.$on('enableSaveBtn', function() {\n\t\t\t\t\t$scope.disabled = false;\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\n\treturn directive;\n});","Magezon_Builder/js/modal/button/replace.js":"define([\n\t'jquery',\n\t'angular'\n], function($, angular) {\n\n\tvar directive = function(magezonBuilderUrl) {\n\t\treturn {\n\t\t\treplace: true,\n\t\t\ttemplateUrl: function(elem) {\n\t\t\t\treturn magezonBuilderUrl.getTemplateUrl(elem, 'Magezon_Builder/js/templates/modal/button/replace.html');\n\t\t\t},\n\t\t\tcontroller: function($rootScope, $scope, elementManager) {\n\n\t\t\t\t$scope.replace = function() {\n\t\t\t\t\t$rootScope.$broadcast('addElement', {elem: $scope.$parent.mgz.element, action: 'replace' });\n\t\t\t\t}\n\n\t\t\t\t$scope.canReplace = function() {\n\t\t\t\t\treturn elementManager.canReplace($scope.$parent.mgz.element);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn directive;\n});","Magezon_Builder/js/modal/button/minimize.js":"define([\n\t'jquery',\n\t'angular'\n], function($, angular) {\n\n\tvar directive = function(magezonBuilderUrl) {\n\t\treturn {\n\t\t\treplace: true,\n\t\t\ttemplateUrl: function(elem) {\n\t\t\t\treturn magezonBuilderUrl.getTemplateUrl(elem, 'Magezon_Builder/js/templates/modal/button/minimize.html');\n\t\t\t},\n\t\t\tcontroller: function($scope) {\n\t\t\t\t$scope.minimized = false;\n\t\t\t\t$scope.minimize = function() {\n\t\t\t\t\tvar modalSelector = $scope.$parent.mgz.getModalSelector();\n\t\t\t\t\tvar headerHeight  = $scope.$parent.mgz.getHeaderHeight();\n\t\t\t\t\tmodalSelector.stop();\n\t\t\t\t\tif ($scope.minimized) {\n\t\t\t\t\t\tvar height = parseFloat(modalSelector.css('max-height'));\n\t\t\t\t\t\tif (height) {\n\t\t\t\t\t\t\tmodalSelector.animate({\"height\": height}, \"medium\", function() {\n\t\t\t\t\t\t\t\tmodalSelector.css('height', '');\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tmodalSelector.css('height', '');\n\t\t\t\t\t\t\t$scope.$parent.mgz.resizeInner();\n\t\t\t\t\t\t}\n\t\t\t\t\t\tmodalSelector.removeClass('mgz-minimized');\n\t\t\t\t\t} else {\n\t\t\t\t\t\tmodalSelector.animate({\"height\": headerHeight}, \"medium\");\n\t\t\t\t\t\tmodalSelector.addClass('mgz-minimized');\n\t\t\t\t\t}\n\t\t\t\t\t$scope.minimized = !$scope.minimized;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn directive;\n});","Magezon_Builder/js/modal/button/navigator_toggle.js":"define([\n\t'jquery',\n\t'angular'\n], function($, angular) {\n\n\tvar directive = function(magezonBuilderUrl) {\n\t\treturn {\n\t\t\treplace: true,\n\t\t\ttemplateUrl: function(elem) {\n\t\t\t\treturn magezonBuilderUrl.getTemplateUrl(elem, 'Magezon_Builder/js/templates/modal/button/navigator_toggle.html');\n\t\t\t},\n\t\t\tcontroller: function($rootScope, $scope) {\n\t\t\t\t$scope.listVisible = $rootScope.builderConfig.navigatorListVisible;\n\t\t\t\t$scope.toggle = function() {\n\t\t\t\t\t$scope.listVisible = !$scope.listVisible;\n\t\t\t\t\t$rootScope.builderConfig.navigatorListVisible = $scope.listVisible;\n\t\t\t\t\tvar parents = {};\n\t\t\t\t\tvar activeListControl = function(elements, status) {\n\t\t\t\t\t\tangular.forEach(elements, function(element) {\n\t\t\t\t\t\t\telement.builder.navigator.listVisible = status;\n\t\t\t\t\t\t\tif (element.elements) {\n\t\t\t\t\t\t\t\tactiveListControl(element.elements, status);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tactiveListControl($rootScope.profile.elements, $scope.listVisible);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn directive;\n});","Magezon_Builder/js/modal/block/title.js":"define([\n\t'jquery',\n\t'angular'\n], function($, angular) {\n\n\tvar directive = function(magezonBuilderUrl) {\n\t\treturn {\n\t\t\treplace: true,\n\t\t\ttemplateUrl: function(elem) {\n\t\t\t\treturn magezonBuilderUrl.getTemplateUrl(elem, 'Magezon_Builder/js/templates/modal/block/title.html');\n\t\t\t},\n\t\t\tcontroller: function($rootScope, $scope) {\n\t\t\t\tvar loaded = false;\n\t\t\t\t$scope.title    = $scope.$parent.title;\n\t\t\t\t$scope.subtitle = $scope.$parent.subtitle;\n\t\t\t\t$scope.$watch('title', function(title) {\n\t\t\t\t\tif (loaded) {\n\t\t\t\t\t\t$scope.$parent.mgz.element.builder.name = title;\n\t\t\t\t\t\t$rootScope.$broadcast('exportShortcode');\n\t\t\t\t\t}\n\t\t\t\t\tloaded = true;\n\t\t\t\t});\n\t\t\t},\n\t\t\tlink: function(scope, element) {\n\t\t\t\tif (scope.$parent.mgz.element) {\n\t\t\t\t\telement.find('.mgz-icon-edit').click(function(event) {\n\t\t\t\t\t\tvar span = element.find('.mgz-modal-title-inner');\n\t\t\t\t\t\tvar t = document.createRange();\n\t\t\t\t\t\tvar i = window.getSelection();\n\t\t\t\t\t\tt.selectNodeContents(span[0]);\n\t\t\t\t\t\ti.removeAllRanges();\n\t\t\t\t\t\ti.addRange(t);\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\telement.find('span').eq(0).removeAttr('contenteditable').removeClass('mgz-contenteditable-element');\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn directive;\n});","Magezon_Builder/js/modal/block/elements_search.js":"define([\n\t'jquery',\n\t'angular'\n], function($, angular) {\n\n\tvar directive = function(magezonBuilderUrl) {\n\t\treturn {\n\t\t\treplace: true,\n\t\t\ttemplateUrl: function(elem) {\n\t\t\t\treturn magezonBuilderUrl.getTemplateUrl(elem, 'Magezon_Builder/js/templates/modal/block/elements_search.html');\n\t\t\t},\n\t\t\tcontroller: function($scope) {\n\t\t\t\tvar $parent = $scope.$parent;\n\n\t\t\t\t$scope.filterElements = function() {\n\t\t\t\t\tvar q = $parent.mgz.search;\n\t\t\t\t\t$parent.mgz.active = 0;\n\t\t\t\t\t$parent.mgz.tabs['all']['elements'] = _.filter(angular.copy($parent.mgz.allTab.elements), function(element) {\n\t\t\t\t\t\tvar description = element.description;\n\t\t\t\t\t\tvar search = element.search;\n\t\t\t\t\t\tvar group = element.group;\n\t\t\t\t\t\treturn (element.name.toLowerCase().indexOf(q.toLowerCase()) !== -1) \n\t\t\t\t\t\t|| (description && description.toLowerCase().indexOf(q.toLowerCase()) !== -1) \n\t\t\t\t\t\t|| (search && search.toLowerCase().indexOf(q.toLowerCase()) !== -1\n\t\t\t\t\t\t|| (group && group.toLowerCase().indexOf(q.toLowerCase()) !== -1))\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\t$scope.clearSearch = function() {\n\t\t\t\t\t$('.mgz-elements-filter').trigger('focus');\n\t\t\t\t\t$parent.mgz.clearSearch();\n\t\t\t\t}\n\t\t\t\t$('.mgz-elements-filter').trigger('focus');\n\t\t\t}\n\t\t}\n\t}\n\n\treturn directive;\n});","Magezon_Builder/js/waypoints/jquery.waypoints.min.js":"/*!\nWaypoints - 4.0.1\nCopyright \u00a9 2011-2016 Caleb Troughton\nLicensed under the MIT license.\nhttps://github.com/imakewebthings/waypoints/blob/master/licenses.txt\n*/\n!function(){\"use strict\";function t(o){if(!o)throw new Error(\"No options passed to Waypoint constructor\");if(!o.element)throw new Error(\"No element option passed to Waypoint constructor\");if(!o.handler)throw new Error(\"No handler option passed to Waypoint constructor\");this.key=\"waypoint-\"+e,this.options=t.Adapter.extend({},t.defaults,o),this.element=this.options.element,this.adapter=new t.Adapter(this.element),this.callback=o.handler,this.axis=this.options.horizontal?\"horizontal\":\"vertical\",this.enabled=this.options.enabled,this.triggerPoint=null,this.group=t.Group.findOrCreate({name:this.options.group,axis:this.axis}),this.context=t.Context.findOrCreateByElement(this.options.context),t.offsetAliases[this.options.offset]&&(this.options.offset=t.offsetAliases[this.options.offset]),this.group.add(this),this.context.add(this),i[this.key]=this,e+=1}var e=0,i={};t.prototype.queueTrigger=function(t){this.group.queueTrigger(this,t)},t.prototype.trigger=function(t){this.enabled&&this.callback&&this.callback.apply(this,t)},t.prototype.destroy=function(){this.context.remove(this),this.group.remove(this),delete i[this.key]},t.prototype.disable=function(){return this.enabled=!1,this},t.prototype.enable=function(){return this.context.refresh(),this.enabled=!0,this},t.prototype.next=function(){return this.group.next(this)},t.prototype.previous=function(){return this.group.previous(this)},t.invokeAll=function(t){var e=[];for(var o in i)e.push(i[o]);for(var n=0,r=e.length;r>n;n++)e[n][t]()},t.destroyAll=function(){t.invokeAll(\"destroy\")},t.disableAll=function(){t.invokeAll(\"disable\")},t.enableAll=function(){t.Context.refreshAll();for(var e in i)i[e].enabled=!0;return this},t.refreshAll=function(){t.Context.refreshAll()},t.viewportHeight=function(){return window.innerHeight||document.documentElement.clientHeight},t.viewportWidth=function(){return document.documentElement.clientWidth},t.adapters=[],t.defaults={context:window,continuous:!0,enabled:!0,group:\"default\",horizontal:!1,offset:0},t.offsetAliases={\"bottom-in-view\":function(){return this.context.innerHeight()-this.adapter.outerHeight()},\"right-in-view\":function(){return this.context.innerWidth()-this.adapter.outerWidth()}},window.Waypoint=t}(),function(){\"use strict\";function t(t){window.setTimeout(t,1e3/60)}function e(t){this.element=t,this.Adapter=n.Adapter,this.adapter=new this.Adapter(t),this.key=\"waypoint-context-\"+i,this.didScroll=!1,this.didResize=!1,this.oldScroll={x:this.adapter.scrollLeft(),y:this.adapter.scrollTop()},this.waypoints={vertical:{},horizontal:{}},t.waypointContextKey=this.key,o[t.waypointContextKey]=this,i+=1,n.windowContext||(n.windowContext=!0,n.windowContext=new e(window)),this.createThrottledScrollHandler(),this.createThrottledResizeHandler()}var i=0,o={},n=window.Waypoint,r=window.onload;e.prototype.add=function(t){var e=t.options.horizontal?\"horizontal\":\"vertical\";this.waypoints[e][t.key]=t,this.refresh()},e.prototype.checkEmpty=function(){var t=this.Adapter.isEmptyObject(this.waypoints.horizontal),e=this.Adapter.isEmptyObject(this.waypoints.vertical),i=this.element==this.element.window;t&&e&&!i&&(this.adapter.off(\".waypoints\"),delete o[this.key])},e.prototype.createThrottledResizeHandler=function(){function t(){e.handleResize(),e.didResize=!1}var e=this;this.adapter.on(\"resize.waypoints\",function(){e.didResize||(e.didResize=!0,n.requestAnimationFrame(t))})},e.prototype.createThrottledScrollHandler=function(){function t(){e.handleScroll(),e.didScroll=!1}var e=this;this.adapter.on(\"scroll.waypoints\",function(){(!e.didScroll||n.isTouch)&&(e.didScroll=!0,n.requestAnimationFrame(t))})},e.prototype.handleResize=function(){n.Context.refreshAll()},e.prototype.handleScroll=function(){var t={},e={horizontal:{newScroll:this.adapter.scrollLeft(),oldScroll:this.oldScroll.x,forward:\"right\",backward:\"left\"},vertical:{newScroll:this.adapter.scrollTop(),oldScroll:this.oldScroll.y,forward:\"down\",backward:\"up\"}};for(var i in e){var o=e[i],n=o.newScroll>o.oldScroll,r=n?o.forward:o.backward;for(var s in this.waypoints[i]){var a=this.waypoints[i][s];if(null!==a.triggerPoint){var l=o.oldScroll<a.triggerPoint,h=o.newScroll>=a.triggerPoint,p=l&&h,u=!l&&!h;(p||u)&&(a.queueTrigger(r),t[a.group.id]=a.group)}}}for(var c in t)t[c].flushTriggers();this.oldScroll={x:e.horizontal.newScroll,y:e.vertical.newScroll}},e.prototype.innerHeight=function(){return this.element==this.element.window?n.viewportHeight():this.adapter.innerHeight()},e.prototype.remove=function(t){delete this.waypoints[t.axis][t.key],this.checkEmpty()},e.prototype.innerWidth=function(){return this.element==this.element.window?n.viewportWidth():this.adapter.innerWidth()},e.prototype.destroy=function(){var t=[];for(var e in this.waypoints)for(var i in this.waypoints[e])t.push(this.waypoints[e][i]);for(var o=0,n=t.length;n>o;o++)t[o].destroy()},e.prototype.refresh=function(){var t,e=this.element==this.element.window,i=e?void 0:this.adapter.offset(),o={};this.handleScroll(),t={horizontal:{contextOffset:e?0:i.left,contextScroll:e?0:this.oldScroll.x,contextDimension:this.innerWidth(),oldScroll:this.oldScroll.x,forward:\"right\",backward:\"left\",offsetProp:\"left\"},vertical:{contextOffset:e?0:i.top,contextScroll:e?0:this.oldScroll.y,contextDimension:this.innerHeight(),oldScroll:this.oldScroll.y,forward:\"down\",backward:\"up\",offsetProp:\"top\"}};for(var r in t){var s=t[r];for(var a in this.waypoints[r]){var l,h,p,u,c,d=this.waypoints[r][a],f=d.options.offset,w=d.triggerPoint,y=0,g=null==w;d.element!==d.element.window&&(y=d.adapter.offset()[s.offsetProp]),\"function\"==typeof f?f=f.apply(d):\"string\"==typeof f&&(f=parseFloat(f),d.options.offset.indexOf(\"%\")>-1&&(f=Math.ceil(s.contextDimension*f/100))),l=s.contextScroll-s.contextOffset,d.triggerPoint=Math.floor(y+l-f),h=w<s.oldScroll,p=d.triggerPoint>=s.oldScroll,u=h&&p,c=!h&&!p,!g&&u?(d.queueTrigger(s.backward),o[d.group.id]=d.group):!g&&c?(d.queueTrigger(s.forward),o[d.group.id]=d.group):g&&s.oldScroll>=d.triggerPoint&&(d.queueTrigger(s.forward),o[d.group.id]=d.group)}}return n.requestAnimationFrame(function(){for(var t in o)o[t].flushTriggers()}),this},e.findOrCreateByElement=function(t){return e.findByElement(t)||new e(t)},e.refreshAll=function(){for(var t in o)o[t].refresh()},e.findByElement=function(t){return o[t.waypointContextKey]},window.onload=function(){r&&r(),e.refreshAll()},n.requestAnimationFrame=function(e){var i=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||t;i.call(window,e)},n.Context=e}(),function(){\"use strict\";function t(t,e){return t.triggerPoint-e.triggerPoint}function e(t,e){return e.triggerPoint-t.triggerPoint}function i(t){this.name=t.name,this.axis=t.axis,this.id=this.name+\"-\"+this.axis,this.waypoints=[],this.clearTriggerQueues(),o[this.axis][this.name]=this}var o={vertical:{},horizontal:{}},n=window.Waypoint;i.prototype.add=function(t){this.waypoints.push(t)},i.prototype.clearTriggerQueues=function(){this.triggerQueues={up:[],down:[],left:[],right:[]}},i.prototype.flushTriggers=function(){for(var i in this.triggerQueues){var o=this.triggerQueues[i],n=\"up\"===i||\"left\"===i;o.sort(n?e:t);for(var r=0,s=o.length;s>r;r+=1){var a=o[r];(a.options.continuous||r===o.length-1)&&a.trigger([i])}}this.clearTriggerQueues()},i.prototype.next=function(e){this.waypoints.sort(t);var i=n.Adapter.inArray(e,this.waypoints),o=i===this.waypoints.length-1;return o?null:this.waypoints[i+1]},i.prototype.previous=function(e){this.waypoints.sort(t);var i=n.Adapter.inArray(e,this.waypoints);return i?this.waypoints[i-1]:null},i.prototype.queueTrigger=function(t,e){this.triggerQueues[e].push(t)},i.prototype.remove=function(t){var e=n.Adapter.inArray(t,this.waypoints);e>-1&&this.waypoints.splice(e,1)},i.prototype.first=function(){return this.waypoints[0]},i.prototype.last=function(){return this.waypoints[this.waypoints.length-1]},i.findOrCreate=function(t){return o[t.axis][t.name]||new i(t)},n.Group=i}(),function(){\"use strict\";function t(t){this.$element=e(t)}var e=window.jQuery,i=window.Waypoint;e.each([\"innerHeight\",\"innerWidth\",\"off\",\"offset\",\"on\",\"outerHeight\",\"outerWidth\",\"scrollLeft\",\"scrollTop\"],function(e,i){t.prototype[i]=function(){var t=Array.prototype.slice.call(arguments);return this.$element[i].apply(this.$element,t)}}),e.each([\"extend\",\"inArray\",\"isEmptyObject\"],function(i,o){t[o]=e[o]}),i.adapters.push({name:\"jquery\",Adapter:t}),i.Adapter=t}(),function(){\"use strict\";function t(t){return function(){var i=[],o=arguments[0];return t.isFunction(arguments[0])&&(o=t.extend({},arguments[1]),o.handler=arguments[0]),this.each(function(){var n=t.extend({},o,{element:this});\"string\"==typeof n.context&&(n.context=t(this).closest(n.context)[0]),i.push(new e(n))}),i}}var e=window.Waypoint;window.jQuery&&(window.jQuery.fn.waypoint=t(window.jQuery)),window.Zepto&&(window.Zepto.fn.waypoint=t(window.Zepto))}();","Magezon_Builder/js/waypoints/zepto.waypoints.min.js":"/*!\nWaypoints - 4.0.1\nCopyright \u00a9 2011-2016 Caleb Troughton\nLicensed under the MIT license.\nhttps://github.com/imakewebthings/waypoints/blob/master/licenses.txt\n*/\n!function(){\"use strict\";function t(o){if(!o)throw new Error(\"No options passed to Waypoint constructor\");if(!o.element)throw new Error(\"No element option passed to Waypoint constructor\");if(!o.handler)throw new Error(\"No handler option passed to Waypoint constructor\");this.key=\"waypoint-\"+e,this.options=t.Adapter.extend({},t.defaults,o),this.element=this.options.element,this.adapter=new t.Adapter(this.element),this.callback=o.handler,this.axis=this.options.horizontal?\"horizontal\":\"vertical\",this.enabled=this.options.enabled,this.triggerPoint=null,this.group=t.Group.findOrCreate({name:this.options.group,axis:this.axis}),this.context=t.Context.findOrCreateByElement(this.options.context),t.offsetAliases[this.options.offset]&&(this.options.offset=t.offsetAliases[this.options.offset]),this.group.add(this),this.context.add(this),i[this.key]=this,e+=1}var e=0,i={};t.prototype.queueTrigger=function(t){this.group.queueTrigger(this,t)},t.prototype.trigger=function(t){this.enabled&&this.callback&&this.callback.apply(this,t)},t.prototype.destroy=function(){this.context.remove(this),this.group.remove(this),delete i[this.key]},t.prototype.disable=function(){return this.enabled=!1,this},t.prototype.enable=function(){return this.context.refresh(),this.enabled=!0,this},t.prototype.next=function(){return this.group.next(this)},t.prototype.previous=function(){return this.group.previous(this)},t.invokeAll=function(t){var e=[];for(var o in i)e.push(i[o]);for(var n=0,r=e.length;r>n;n++)e[n][t]()},t.destroyAll=function(){t.invokeAll(\"destroy\")},t.disableAll=function(){t.invokeAll(\"disable\")},t.enableAll=function(){t.Context.refreshAll();for(var e in i)i[e].enabled=!0;return this},t.refreshAll=function(){t.Context.refreshAll()},t.viewportHeight=function(){return window.innerHeight||document.documentElement.clientHeight},t.viewportWidth=function(){return document.documentElement.clientWidth},t.adapters=[],t.defaults={context:window,continuous:!0,enabled:!0,group:\"default\",horizontal:!1,offset:0},t.offsetAliases={\"bottom-in-view\":function(){return this.context.innerHeight()-this.adapter.outerHeight()},\"right-in-view\":function(){return this.context.innerWidth()-this.adapter.outerWidth()}},window.Waypoint=t}(),function(){\"use strict\";function t(t){window.setTimeout(t,1e3/60)}function e(t){this.element=t,this.Adapter=n.Adapter,this.adapter=new this.Adapter(t),this.key=\"waypoint-context-\"+i,this.didScroll=!1,this.didResize=!1,this.oldScroll={x:this.adapter.scrollLeft(),y:this.adapter.scrollTop()},this.waypoints={vertical:{},horizontal:{}},t.waypointContextKey=this.key,o[t.waypointContextKey]=this,i+=1,n.windowContext||(n.windowContext=!0,n.windowContext=new e(window)),this.createThrottledScrollHandler(),this.createThrottledResizeHandler()}var i=0,o={},n=window.Waypoint,r=window.onload;e.prototype.add=function(t){var e=t.options.horizontal?\"horizontal\":\"vertical\";this.waypoints[e][t.key]=t,this.refresh()},e.prototype.checkEmpty=function(){var t=this.Adapter.isEmptyObject(this.waypoints.horizontal),e=this.Adapter.isEmptyObject(this.waypoints.vertical),i=this.element==this.element.window;t&&e&&!i&&(this.adapter.off(\".waypoints\"),delete o[this.key])},e.prototype.createThrottledResizeHandler=function(){function t(){e.handleResize(),e.didResize=!1}var e=this;this.adapter.on(\"resize.waypoints\",function(){e.didResize||(e.didResize=!0,n.requestAnimationFrame(t))})},e.prototype.createThrottledScrollHandler=function(){function t(){e.handleScroll(),e.didScroll=!1}var e=this;this.adapter.on(\"scroll.waypoints\",function(){(!e.didScroll||n.isTouch)&&(e.didScroll=!0,n.requestAnimationFrame(t))})},e.prototype.handleResize=function(){n.Context.refreshAll()},e.prototype.handleScroll=function(){var t={},e={horizontal:{newScroll:this.adapter.scrollLeft(),oldScroll:this.oldScroll.x,forward:\"right\",backward:\"left\"},vertical:{newScroll:this.adapter.scrollTop(),oldScroll:this.oldScroll.y,forward:\"down\",backward:\"up\"}};for(var i in e){var o=e[i],n=o.newScroll>o.oldScroll,r=n?o.forward:o.backward;for(var s in this.waypoints[i]){var a=this.waypoints[i][s];if(null!==a.triggerPoint){var l=o.oldScroll<a.triggerPoint,h=o.newScroll>=a.triggerPoint,p=l&&h,u=!l&&!h;(p||u)&&(a.queueTrigger(r),t[a.group.id]=a.group)}}}for(var c in t)t[c].flushTriggers();this.oldScroll={x:e.horizontal.newScroll,y:e.vertical.newScroll}},e.prototype.innerHeight=function(){return this.element==this.element.window?n.viewportHeight():this.adapter.innerHeight()},e.prototype.remove=function(t){delete this.waypoints[t.axis][t.key],this.checkEmpty()},e.prototype.innerWidth=function(){return this.element==this.element.window?n.viewportWidth():this.adapter.innerWidth()},e.prototype.destroy=function(){var t=[];for(var e in this.waypoints)for(var i in this.waypoints[e])t.push(this.waypoints[e][i]);for(var o=0,n=t.length;n>o;o++)t[o].destroy()},e.prototype.refresh=function(){var t,e=this.element==this.element.window,i=e?void 0:this.adapter.offset(),o={};this.handleScroll(),t={horizontal:{contextOffset:e?0:i.left,contextScroll:e?0:this.oldScroll.x,contextDimension:this.innerWidth(),oldScroll:this.oldScroll.x,forward:\"right\",backward:\"left\",offsetProp:\"left\"},vertical:{contextOffset:e?0:i.top,contextScroll:e?0:this.oldScroll.y,contextDimension:this.innerHeight(),oldScroll:this.oldScroll.y,forward:\"down\",backward:\"up\",offsetProp:\"top\"}};for(var r in t){var s=t[r];for(var a in this.waypoints[r]){var l,h,p,u,c,d=this.waypoints[r][a],f=d.options.offset,w=d.triggerPoint,y=0,g=null==w;d.element!==d.element.window&&(y=d.adapter.offset()[s.offsetProp]),\"function\"==typeof f?f=f.apply(d):\"string\"==typeof f&&(f=parseFloat(f),d.options.offset.indexOf(\"%\")>-1&&(f=Math.ceil(s.contextDimension*f/100))),l=s.contextScroll-s.contextOffset,d.triggerPoint=Math.floor(y+l-f),h=w<s.oldScroll,p=d.triggerPoint>=s.oldScroll,u=h&&p,c=!h&&!p,!g&&u?(d.queueTrigger(s.backward),o[d.group.id]=d.group):!g&&c?(d.queueTrigger(s.forward),o[d.group.id]=d.group):g&&s.oldScroll>=d.triggerPoint&&(d.queueTrigger(s.forward),o[d.group.id]=d.group)}}return n.requestAnimationFrame(function(){for(var t in o)o[t].flushTriggers()}),this},e.findOrCreateByElement=function(t){return e.findByElement(t)||new e(t)},e.refreshAll=function(){for(var t in o)o[t].refresh()},e.findByElement=function(t){return o[t.waypointContextKey]},window.onload=function(){r&&r(),e.refreshAll()},n.requestAnimationFrame=function(e){var i=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||t;i.call(window,e)},n.Context=e}(),function(){\"use strict\";function t(t,e){return t.triggerPoint-e.triggerPoint}function e(t,e){return e.triggerPoint-t.triggerPoint}function i(t){this.name=t.name,this.axis=t.axis,this.id=this.name+\"-\"+this.axis,this.waypoints=[],this.clearTriggerQueues(),o[this.axis][this.name]=this}var o={vertical:{},horizontal:{}},n=window.Waypoint;i.prototype.add=function(t){this.waypoints.push(t)},i.prototype.clearTriggerQueues=function(){this.triggerQueues={up:[],down:[],left:[],right:[]}},i.prototype.flushTriggers=function(){for(var i in this.triggerQueues){var o=this.triggerQueues[i],n=\"up\"===i||\"left\"===i;o.sort(n?e:t);for(var r=0,s=o.length;s>r;r+=1){var a=o[r];(a.options.continuous||r===o.length-1)&&a.trigger([i])}}this.clearTriggerQueues()},i.prototype.next=function(e){this.waypoints.sort(t);var i=n.Adapter.inArray(e,this.waypoints),o=i===this.waypoints.length-1;return o?null:this.waypoints[i+1]},i.prototype.previous=function(e){this.waypoints.sort(t);var i=n.Adapter.inArray(e,this.waypoints);return i?this.waypoints[i-1]:null},i.prototype.queueTrigger=function(t,e){this.triggerQueues[e].push(t)},i.prototype.remove=function(t){var e=n.Adapter.inArray(t,this.waypoints);e>-1&&this.waypoints.splice(e,1)},i.prototype.first=function(){return this.waypoints[0]},i.prototype.last=function(){return this.waypoints[this.waypoints.length-1]},i.findOrCreate=function(t){return o[t.axis][t.name]||new i(t)},n.Group=i}(),function(){\"use strict\";function t(t){this.element=t,this.$element=e(t)}var e=window.Zepto,i=window.Waypoint;e.each([\"off\",\"on\",\"scrollLeft\",\"scrollTop\"],function(e,i){t.prototype[i]=function(){var t=Array.prototype.slice.call(arguments);return this.$element[i].apply(this.$element,t)}}),t.prototype.offset=function(){return this.element!==this.element.window?this.$element.offset():void 0},e.each([\"width\",\"height\"],function(i,o){function n(t,i){return function(t){var n=this.$element,r=n[o](),s={width:[\"left\",\"right\"],height:[\"top\",\"bottom\"]};return e.each(s[o],function(e,o){r+=parseInt(n.css(\"padding-\"+o),10),i&&(r+=parseInt(n.css(\"border-\"+o+\"-width\"),10)),t&&(r+=parseInt(n.css(\"margin-\"+o),10))}),r}}var r=e.camelCase(\"inner-\"+o),s=e.camelCase(\"outer-\"+o);t.prototype[r]=n(!1),t.prototype[s]=n(!0)}),e.each([\"extend\",\"inArray\"],function(i,o){t[o]=e[o]}),t.isEmptyObject=function(t){for(var e in t)return!1;return!0},i.adapters.push({name:\"zepto\",Adapter:t}),i.Adapter=t}(),function(){\"use strict\";function t(t){return function(){var i=[],o=arguments[0];return t.isFunction(arguments[0])&&(o=t.extend({},arguments[1]),o.handler=arguments[0]),this.each(function(){var n=t.extend({},o,{element:this});\"string\"==typeof n.context&&(n.context=t(this).closest(n.context)[0]),i.push(new e(n))}),i}}var e=window.Waypoint;window.jQuery&&(window.jQuery.fn.waypoint=t(window.jQuery)),window.Zepto&&(window.Zepto.fn.waypoint=t(window.Zepto))}();","Magezon_Builder/js/waypoints/waypoints.debug.js":"/*!\nWaypoints Debug - 4.0.1\nCopyright \u00a9 2011-2016 Caleb Troughton\nLicensed under the MIT license.\nhttps://github.com/imakewebthings/waypoints/blob/master/licenses.txt\n*/\n(function() {\n  'use strict'\n\n  var displayNoneMessage = [\n    'You have a Waypoint element with display none. For more information on ',\n    'why this is a bad idea read ',\n    'http://imakewebthings.com/waypoints/guides/debugging/#display-none'\n  ].join('')\n  var fixedMessage = [\n    'You have a Waypoint element with fixed positioning. For more ',\n    'information on why this is a bad idea read ',\n    'http://imakewebthings.com/waypoints/guides/debugging/#fixed-position'\n  ].join('')\n\n  function checkWaypointStyles() {\n    var originalRefresh = window.Waypoint.Context.prototype.refresh\n\n    window.Waypoint.Context.prototype.refresh = function() {\n      for (var axis in this.waypoints) {\n        for (var key in this.waypoints[axis]) {\n          var waypoint = this.waypoints[axis][key]\n          var style = window.getComputedStyle(waypoint.element)\n          if (!waypoint.enabled) {\n            continue\n          }\n          if (style && style.display === 'none') {\n            console.error(displayNoneMessage)\n          }\n          if (style && style.position === 'fixed') {\n            console.error(fixedMessage)\n          }\n        }\n      }\n      return originalRefresh.call(this)\n    }\n  }\n\n  checkWaypointStyles()\n}())\n;","Magezon_Builder/js/waypoints/noframework.waypoints.min.js":"/*!\nWaypoints - 4.0.1\nCopyright \u00a9 2011-2016 Caleb Troughton\nLicensed under the MIT license.\nhttps://github.com/imakewebthings/waypoints/blob/master/licenses.txt\n*/\n!function(){\"use strict\";function t(n){if(!n)throw new Error(\"No options passed to Waypoint constructor\");if(!n.element)throw new Error(\"No element option passed to Waypoint constructor\");if(!n.handler)throw new Error(\"No handler option passed to Waypoint constructor\");this.key=\"waypoint-\"+e,this.options=t.Adapter.extend({},t.defaults,n),this.element=this.options.element,this.adapter=new t.Adapter(this.element),this.callback=n.handler,this.axis=this.options.horizontal?\"horizontal\":\"vertical\",this.enabled=this.options.enabled,this.triggerPoint=null,this.group=t.Group.findOrCreate({name:this.options.group,axis:this.axis}),this.context=t.Context.findOrCreateByElement(this.options.context),t.offsetAliases[this.options.offset]&&(this.options.offset=t.offsetAliases[this.options.offset]),this.group.add(this),this.context.add(this),i[this.key]=this,e+=1}var e=0,i={};t.prototype.queueTrigger=function(t){this.group.queueTrigger(this,t)},t.prototype.trigger=function(t){this.enabled&&this.callback&&this.callback.apply(this,t)},t.prototype.destroy=function(){this.context.remove(this),this.group.remove(this),delete i[this.key]},t.prototype.disable=function(){return this.enabled=!1,this},t.prototype.enable=function(){return this.context.refresh(),this.enabled=!0,this},t.prototype.next=function(){return this.group.next(this)},t.prototype.previous=function(){return this.group.previous(this)},t.invokeAll=function(t){var e=[];for(var n in i)e.push(i[n]);for(var o=0,r=e.length;r>o;o++)e[o][t]()},t.destroyAll=function(){t.invokeAll(\"destroy\")},t.disableAll=function(){t.invokeAll(\"disable\")},t.enableAll=function(){t.Context.refreshAll();for(var e in i)i[e].enabled=!0;return this},t.refreshAll=function(){t.Context.refreshAll()},t.viewportHeight=function(){return window.innerHeight||document.documentElement.clientHeight},t.viewportWidth=function(){return document.documentElement.clientWidth},t.adapters=[],t.defaults={context:window,continuous:!0,enabled:!0,group:\"default\",horizontal:!1,offset:0},t.offsetAliases={\"bottom-in-view\":function(){return this.context.innerHeight()-this.adapter.outerHeight()},\"right-in-view\":function(){return this.context.innerWidth()-this.adapter.outerWidth()}},window.Waypoint=t}(),function(){\"use strict\";function t(t){window.setTimeout(t,1e3/60)}function e(t){this.element=t,this.Adapter=o.Adapter,this.adapter=new this.Adapter(t),this.key=\"waypoint-context-\"+i,this.didScroll=!1,this.didResize=!1,this.oldScroll={x:this.adapter.scrollLeft(),y:this.adapter.scrollTop()},this.waypoints={vertical:{},horizontal:{}},t.waypointContextKey=this.key,n[t.waypointContextKey]=this,i+=1,o.windowContext||(o.windowContext=!0,o.windowContext=new e(window)),this.createThrottledScrollHandler(),this.createThrottledResizeHandler()}var i=0,n={},o=window.Waypoint,r=window.onload;e.prototype.add=function(t){var e=t.options.horizontal?\"horizontal\":\"vertical\";this.waypoints[e][t.key]=t,this.refresh()},e.prototype.checkEmpty=function(){var t=this.Adapter.isEmptyObject(this.waypoints.horizontal),e=this.Adapter.isEmptyObject(this.waypoints.vertical),i=this.element==this.element.window;t&&e&&!i&&(this.adapter.off(\".waypoints\"),delete n[this.key])},e.prototype.createThrottledResizeHandler=function(){function t(){e.handleResize(),e.didResize=!1}var e=this;this.adapter.on(\"resize.waypoints\",function(){e.didResize||(e.didResize=!0,o.requestAnimationFrame(t))})},e.prototype.createThrottledScrollHandler=function(){function t(){e.handleScroll(),e.didScroll=!1}var e=this;this.adapter.on(\"scroll.waypoints\",function(){(!e.didScroll||o.isTouch)&&(e.didScroll=!0,o.requestAnimationFrame(t))})},e.prototype.handleResize=function(){o.Context.refreshAll()},e.prototype.handleScroll=function(){var t={},e={horizontal:{newScroll:this.adapter.scrollLeft(),oldScroll:this.oldScroll.x,forward:\"right\",backward:\"left\"},vertical:{newScroll:this.adapter.scrollTop(),oldScroll:this.oldScroll.y,forward:\"down\",backward:\"up\"}};for(var i in e){var n=e[i],o=n.newScroll>n.oldScroll,r=o?n.forward:n.backward;for(var s in this.waypoints[i]){var l=this.waypoints[i][s];if(null!==l.triggerPoint){var a=n.oldScroll<l.triggerPoint,h=n.newScroll>=l.triggerPoint,p=a&&h,u=!a&&!h;(p||u)&&(l.queueTrigger(r),t[l.group.id]=l.group)}}}for(var d in t)t[d].flushTriggers();this.oldScroll={x:e.horizontal.newScroll,y:e.vertical.newScroll}},e.prototype.innerHeight=function(){return this.element==this.element.window?o.viewportHeight():this.adapter.innerHeight()},e.prototype.remove=function(t){delete this.waypoints[t.axis][t.key],this.checkEmpty()},e.prototype.innerWidth=function(){return this.element==this.element.window?o.viewportWidth():this.adapter.innerWidth()},e.prototype.destroy=function(){var t=[];for(var e in this.waypoints)for(var i in this.waypoints[e])t.push(this.waypoints[e][i]);for(var n=0,o=t.length;o>n;n++)t[n].destroy()},e.prototype.refresh=function(){var t,e=this.element==this.element.window,i=e?void 0:this.adapter.offset(),n={};this.handleScroll(),t={horizontal:{contextOffset:e?0:i.left,contextScroll:e?0:this.oldScroll.x,contextDimension:this.innerWidth(),oldScroll:this.oldScroll.x,forward:\"right\",backward:\"left\",offsetProp:\"left\"},vertical:{contextOffset:e?0:i.top,contextScroll:e?0:this.oldScroll.y,contextDimension:this.innerHeight(),oldScroll:this.oldScroll.y,forward:\"down\",backward:\"up\",offsetProp:\"top\"}};for(var r in t){var s=t[r];for(var l in this.waypoints[r]){var a,h,p,u,d,f=this.waypoints[r][l],c=f.options.offset,w=f.triggerPoint,y=0,g=null==w;f.element!==f.element.window&&(y=f.adapter.offset()[s.offsetProp]),\"function\"==typeof c?c=c.apply(f):\"string\"==typeof c&&(c=parseFloat(c),f.options.offset.indexOf(\"%\")>-1&&(c=Math.ceil(s.contextDimension*c/100))),a=s.contextScroll-s.contextOffset,f.triggerPoint=Math.floor(y+a-c),h=w<s.oldScroll,p=f.triggerPoint>=s.oldScroll,u=h&&p,d=!h&&!p,!g&&u?(f.queueTrigger(s.backward),n[f.group.id]=f.group):!g&&d?(f.queueTrigger(s.forward),n[f.group.id]=f.group):g&&s.oldScroll>=f.triggerPoint&&(f.queueTrigger(s.forward),n[f.group.id]=f.group)}}return o.requestAnimationFrame(function(){for(var t in n)n[t].flushTriggers()}),this},e.findOrCreateByElement=function(t){return e.findByElement(t)||new e(t)},e.refreshAll=function(){for(var t in n)n[t].refresh()},e.findByElement=function(t){return n[t.waypointContextKey]},window.onload=function(){r&&r(),e.refreshAll()},o.requestAnimationFrame=function(e){var i=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||t;i.call(window,e)},o.Context=e}(),function(){\"use strict\";function t(t,e){return t.triggerPoint-e.triggerPoint}function e(t,e){return e.triggerPoint-t.triggerPoint}function i(t){this.name=t.name,this.axis=t.axis,this.id=this.name+\"-\"+this.axis,this.waypoints=[],this.clearTriggerQueues(),n[this.axis][this.name]=this}var n={vertical:{},horizontal:{}},o=window.Waypoint;i.prototype.add=function(t){this.waypoints.push(t)},i.prototype.clearTriggerQueues=function(){this.triggerQueues={up:[],down:[],left:[],right:[]}},i.prototype.flushTriggers=function(){for(var i in this.triggerQueues){var n=this.triggerQueues[i],o=\"up\"===i||\"left\"===i;n.sort(o?e:t);for(var r=0,s=n.length;s>r;r+=1){var l=n[r];(l.options.continuous||r===n.length-1)&&l.trigger([i])}}this.clearTriggerQueues()},i.prototype.next=function(e){this.waypoints.sort(t);var i=o.Adapter.inArray(e,this.waypoints),n=i===this.waypoints.length-1;return n?null:this.waypoints[i+1]},i.prototype.previous=function(e){this.waypoints.sort(t);var i=o.Adapter.inArray(e,this.waypoints);return i?this.waypoints[i-1]:null},i.prototype.queueTrigger=function(t,e){this.triggerQueues[e].push(t)},i.prototype.remove=function(t){var e=o.Adapter.inArray(t,this.waypoints);e>-1&&this.waypoints.splice(e,1)},i.prototype.first=function(){return this.waypoints[0]},i.prototype.last=function(){return this.waypoints[this.waypoints.length-1]},i.findOrCreate=function(t){return n[t.axis][t.name]||new i(t)},o.Group=i}(),function(){\"use strict\";function t(t){return t===t.window}function e(e){return t(e)?e:e.defaultView}function i(t){this.element=t,this.handlers={}}var n=window.Waypoint;i.prototype.innerHeight=function(){var e=t(this.element);return e?this.element.innerHeight:this.element.clientHeight},i.prototype.innerWidth=function(){var e=t(this.element);return e?this.element.innerWidth:this.element.clientWidth},i.prototype.off=function(t,e){function i(t,e,i){for(var n=0,o=e.length-1;o>n;n++){var r=e[n];i&&i!==r||t.removeEventListener(r)}}var n=t.split(\".\"),o=n[0],r=n[1],s=this.element;if(r&&this.handlers[r]&&o)i(s,this.handlers[r][o],e),this.handlers[r][o]=[];else if(o)for(var l in this.handlers)i(s,this.handlers[l][o]||[],e),this.handlers[l][o]=[];else if(r&&this.handlers[r]){for(var a in this.handlers[r])i(s,this.handlers[r][a],e);this.handlers[r]={}}},i.prototype.offset=function(){if(!this.element.ownerDocument)return null;var t=this.element.ownerDocument.documentElement,i=e(this.element.ownerDocument),n={top:0,left:0};return this.element.getBoundingClientRect&&(n=this.element.getBoundingClientRect()),{top:n.top+i.pageYOffset-t.clientTop,left:n.left+i.pageXOffset-t.clientLeft}},i.prototype.on=function(t,e){var i=t.split(\".\"),n=i[0],o=i[1]||\"__default\",r=this.handlers[o]=this.handlers[o]||{},s=r[n]=r[n]||[];s.push(e),this.element.addEventListener(n,e)},i.prototype.outerHeight=function(e){var i,n=this.innerHeight();return e&&!t(this.element)&&(i=window.getComputedStyle(this.element),n+=parseInt(i.marginTop,10),n+=parseInt(i.marginBottom,10)),n},i.prototype.outerWidth=function(e){var i,n=this.innerWidth();return e&&!t(this.element)&&(i=window.getComputedStyle(this.element),n+=parseInt(i.marginLeft,10),n+=parseInt(i.marginRight,10)),n},i.prototype.scrollLeft=function(){var t=e(this.element);return t?t.pageXOffset:this.element.scrollLeft},i.prototype.scrollTop=function(){var t=e(this.element);return t?t.pageYOffset:this.element.scrollTop},i.extend=function(){function t(t,e){if(\"object\"==typeof t&&\"object\"==typeof e)for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t}for(var e=Array.prototype.slice.call(arguments),i=1,n=e.length;n>i;i++)t(e[0],e[i]);return e[0]},i.inArray=function(t,e,i){return null==e?-1:e.indexOf(t,i)},i.isEmptyObject=function(t){for(var e in t)return!1;return!0},n.adapters.push({name:\"noframework\",Adapter:i}),n.Adapter=i}();","Magezon_Builder/js/waypoints/shortcuts/sticky.min.js":"/*!\nWaypoints Sticky Element Shortcut - 4.0.1\nCopyright \u00a9 2011-2016 Caleb Troughton\nLicensed under the MIT license.\nhttps://github.com/imakewebthings/waypoints/blob/master/licenses.txt\n*/\n!function(){\"use strict\";function t(s){this.options=e.extend({},i.defaults,t.defaults,s),this.element=this.options.element,this.$element=e(this.element),this.createWrapper(),this.createWaypoint()}var e=window.jQuery,i=window.Waypoint;t.prototype.createWaypoint=function(){var t=this.options.handler;this.waypoint=new i(e.extend({},this.options,{element:this.wrapper,handler:e.proxy(function(e){var i=this.options.direction.indexOf(e)>-1,s=i?this.$element.outerHeight(!0):\"\";this.$wrapper.height(s),this.$element.toggleClass(this.options.stuckClass,i),t&&t.call(this,e)},this)}))},t.prototype.createWrapper=function(){this.options.wrapper&&this.$element.wrap(this.options.wrapper),this.$wrapper=this.$element.parent(),this.wrapper=this.$wrapper[0]},t.prototype.destroy=function(){this.$element.parent()[0]===this.wrapper&&(this.waypoint.destroy(),this.$element.removeClass(this.options.stuckClass),this.options.wrapper&&this.$element.unwrap())},t.defaults={wrapper:'<div class=\"sticky-wrapper\" />',stuckClass:\"stuck\",direction:\"down right\"},i.Sticky=t}();","Magezon_Builder/js/waypoints/shortcuts/inview.min.js":"/*!\nWaypoints Inview Shortcut - 4.0.1\nCopyright \u00a9 2011-2016 Caleb Troughton\nLicensed under the MIT license.\nhttps://github.com/imakewebthings/waypoints/blob/master/licenses.txt\n*/\n!function(){\"use strict\";function t(){}function e(t){this.options=i.Adapter.extend({},e.defaults,t),this.axis=this.options.horizontal?\"horizontal\":\"vertical\",this.waypoints=[],this.element=this.options.element,this.createWaypoints()}var i=window.Waypoint;e.prototype.createWaypoints=function(){for(var t={vertical:[{down:\"enter\",up:\"exited\",offset:\"100%\"},{down:\"entered\",up:\"exit\",offset:\"bottom-in-view\"},{down:\"exit\",up:\"entered\",offset:0},{down:\"exited\",up:\"enter\",offset:function(){return-this.adapter.outerHeight()}}],horizontal:[{right:\"enter\",left:\"exited\",offset:\"100%\"},{right:\"entered\",left:\"exit\",offset:\"right-in-view\"},{right:\"exit\",left:\"entered\",offset:0},{right:\"exited\",left:\"enter\",offset:function(){return-this.adapter.outerWidth()}}]},e=0,i=t[this.axis].length;i>e;e++){var n=t[this.axis][e];this.createWaypoint(n)}},e.prototype.createWaypoint=function(t){var e=this;this.waypoints.push(new i({context:this.options.context,element:this.options.element,enabled:this.options.enabled,handler:function(t){return function(i){e.options[t[i]].call(e,i)}}(t),offset:t.offset,horizontal:this.options.horizontal}))},e.prototype.destroy=function(){for(var t=0,e=this.waypoints.length;e>t;t++)this.waypoints[t].destroy();this.waypoints=[]},e.prototype.disable=function(){for(var t=0,e=this.waypoints.length;e>t;t++)this.waypoints[t].disable()},e.prototype.enable=function(){for(var t=0,e=this.waypoints.length;e>t;t++)this.waypoints[t].enable()},e.defaults={context:window,enabled:!0,enter:t,entered:t,exit:t,exited:t},i.Inview=e}();","Magezon_Builder/js/waypoints/shortcuts/infinite.min.js":"/*!\nWaypoints Infinite Scroll Shortcut - 4.0.1\nCopyright \u00a9 2011-2016 Caleb Troughton\nLicensed under the MIT license.\nhttps://github.com/imakewebthings/waypoints/blob/master/licenses.txt\n*/\n!function(){\"use strict\";function t(n){this.options=i.extend({},t.defaults,n),this.container=this.options.element,\"auto\"!==this.options.container&&(this.container=this.options.container),this.$container=i(this.container),this.$more=i(this.options.more),this.$more.length&&(this.setupHandler(),this.waypoint=new o(this.options))}var i=window.jQuery,o=window.Waypoint;t.prototype.setupHandler=function(){this.options.handler=i.proxy(function(){this.options.onBeforePageLoad(),this.destroy(),this.$container.addClass(this.options.loadingClass),i.get(i(this.options.more).attr(\"href\"),i.proxy(function(t){var n=i(i.parseHTML(t)),e=n.find(this.options.more),s=n.find(this.options.items);s.length||(s=n.filter(this.options.items)),this.$container.append(s),this.$container.removeClass(this.options.loadingClass),e.length||(e=n.filter(this.options.more)),e.length?(this.$more.replaceWith(e),this.$more=e,this.waypoint=new o(this.options)):this.$more.remove(),this.options.onAfterPageLoad(s)},this))},this)},t.prototype.destroy=function(){this.waypoint&&this.waypoint.destroy()},t.defaults={container:\"auto\",items:\".infinite-item\",more:\".infinite-more-link\",offset:\"bottom-in-view\",loadingClass:\"infinite-loading\",onBeforePageLoad:i.noop,onAfterPageLoad:i.noop},o.Infinite=t}();","Magezon_Builder/js/navigator/element/base.js":"define([\n\t'jquery',\n\t'angular'\n], function($, angular) {\n\n\tvar directive = function(magezonBuilderUrl) {\n\t\treturn {\n\t\t\treplace: true,\n\t\t\ttemplateUrl: function(elem) {\n\t\t\t\treturn magezonBuilderUrl.getTemplateUrl(elem, 'Magezon_Builder/js/templates/navigator/element/default.html');\n\t\t\t},\n\t\t\tcontroller: function($rootScope, $scope, $controller) {\n\t\t\t\tvar parent = $controller('baseController', {$scope: $scope});\n\t\t\t\tangular.extend(this, parent);\n\t\t\t\tvar self = this;\n\n\t\t\t\tthis.getWrapperClasses = function() {\n\t\t\t\t\tvar element = $scope.element;\n\t\t\t\t\tvar classes = [];\n\t\t\t\t\tclasses.push('mgz-navigator-element');\n\t\t\t\t\tclasses.push('mgz-navigator-element-' + element.id);\n\t\t\t\t\tif (element.disable_element) classes.push('mgz-element-disabled');\n\t\t\t\t\tif (element.builder.actived) classes.push('mgz-element-actived');\n\t\t\t\t\tif (element.hidden_default) classes.push('mgz-element-hide-default');\n\t\t\t\t\tif (element.disable_element) classes.push('mgz-element-disabled');\n\t\t\t\t\treturn classes;\n\t\t\t\t}\n\n\t\t\t\tthis.getStype = function() {\n\t\t\t\t\tvar level = self.getParents().length;\n\t\t\t\t\tvar paddingLeft = ((level + 1) * 1.6) + 'rem';\n\t\t\t\t\tif (!$scope.element.builder.is_collection) {\n\t\t\t\t\t\tpaddingLeft = ((level + 1) * 1.8) + 'rem';\n\t\t\t\t\t}\n\t\t\t\t\treturn {\n\t\t\t\t\t\t'padding-left': paddingLeft\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t$scope.toggleElementList = function() {\n\t\t\t\t\t$scope.element.builder.navigator.listVisible = !$scope.element.builder.navigator.listVisible;\n\t\t\t\t}\n\n\t\t\t\t$scope.$on('addNewElment', function(event, item) {\n\t\t\t\t\tif ((item.action == 'before' || item.action == 'after' || item.action == 'replace')) {\n\t\t\t\t\t\tif ($scope.isChildren(item.elem)) {\n\t\t\t\t\t\t\t$scope.listVisible = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (item.action == 'append' && item.elem.id == $scope.element.id) {\n\t\t\t\t\t\t$scope.listVisible = true;\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tvar loaded = false;\n\t\t\t\t$scope.$watch('element.builder.name', function(name) {\n\t\t\t\t\tif (loaded) {\n\t\t\t\t\t\t$rootScope.$broadcast('exportShortcode');\n\t\t\t\t\t}\n\t\t\t\t\tloaded = true;\n\t\t\t\t});\n\t\t\t},\n\t\t\tcontrollerAs: 'mgz'\n\t\t}\n\t}\n\n\treturn directive;\n});","Magezon_Builder/js/controllers/toolbar.js":"define([\n\t'jquery',\n\t'angular'\n], function($, angular) {\n\n\tvar baseCtrl = function(\n\t\t$scope,\n\t\t$timeout\n\t) {\n\t\tvar self = this;\n\t\t$scope.headingTypes = ['h1', 'h2', 'h3', 'h4', 'h5', 'h6'];\n\t\t$scope.alignTypes   = ['left', 'center', 'right'];\n\n\t\t$scope.colorPickerConfig = {\n\t\t\tappendTo: \"parent\"\n\t\t}\n\n\t\t$scope.changeToolbar = function(e, value, key) {\n\t\t\tif (angular.isFunction($scope.updatedkey)) {\n\t\t\t\t$scope.updatedkey(key, value);\n\t\t\t}\n\t\t\t$('.' + $scope.element.id).find('.mgz-contenteditable-element').trigger('focus');\n\t\t\te.stopPropagation();\n\t\t}\n\n\t\t$scope.outsideClick = function() {\n\t\t\t$scope.element.builder.editing = false;\n\t\t}\n\t\t\n\t\treturn angular.copy(this);\n\t};\n\n\treturn baseCtrl;\n});","Magezon_Builder/js/controllers/list.js":"define([\n\t'jquery',\n\t'angular'\n], function($, angular) {\n\n\tvar listCtrl = function(\n\t\t$scope,\n\t\t$rootScope,\n\t\tmagezonBuilderService,\n\t\telementManager,\n\t\t$sce,\n\t\t$controller,\n\t\t$timeout,\n\t\tmagezonBuilderUrl\n\t) {\n\n\tvar parent = $controller('baseController', {$scope: $scope});\n\tangular.extend(this, parent);\n\n\tvar self = this;\n\n\tself.getElemName = function(type) {\n        if (!$.isArray($scope.elementCache[type])) {\n            $scope.elementCache[type] = [];\n        }\n\n        var elemName = type + '-' + $scope.getRandomInt();\n        elemName = elemName.replace('bfb_', '');\n\n        while (($.inArray(elemName, $scope.elementCache[type]) !== -1)) {\n            elemName = type + '-' + $scope.getRandomInt();\n        }\n        $scope.elementCache[type].push(elemName);\n\n        return elemName;\n    }\n\n\t// ADD\n\tself.addElement = function(type, parent, openModal, data, index, replace) {\n\t\tvar builderElement = self.getBuilderElement(type);\n\t\tvar elem = elementManager.getNewElement(type);\n\t\tif (data) elem = angular.extend(elem, data);\n\n\t\tif (builderElement.children) {\n\t\t\tvar childrenCount = builderElement.childrenCount ? builderElement.childrenCount : 1;\n\t\t\tfor (var i = 0; i < childrenCount; i++) {\n\t\t\t\tvar newElement = self.addElement(builderElement.children, elem, false);\n\t\t\t\tif (newElement && newElement.hasOwnProperty('title')) {\n\t\t\t\t\tnewElement['title'] = newElement['title'] + ' ' + (i+1);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (parent) {\n\t\t\tif (_.isNumber(index)) {\n\t\t\t\tif (replace) {\n\t\t\t\t\tparent.elements.splice(index, 1, elem);\n\t\t\t\t} else {\n\t\t\t\t\tparent.elements.splice(index, 0, elem);\t\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tparent.elements.push(elem);\t\n\t\t\t}\n\t\t} else {\n\t\t\tif (_.isNumber(index)) {\n\t\t\t\tif (replace) {\n\t\t\t\t\t$scope.element.elements.splice(index, 1, elem);\n\t\t\t\t} else {\n\t\t\t\t\t$scope.element.elements.splice(index, 0, elem);\t\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t$scope.element.elements.push(elem);\t\n\t\t\t}\n\t\t}\n\n\t\tif (openModal && (builderElement.hasOwnProperty('newOpenModal') && builderElement.newOpenModal || !builderElement.hasOwnProperty('newOpenModal'))) {\n\t\t\tself.editElement(elem);\t\n\t\t}\n\n\t\t$scope.addAddBlock();\n\n\t\treturn elem;\n\t}\n\n\t$scope.$on('addNewElment', function(e, item) {\n\t\tvar type           = item.type;\n\t\tvar mainElement    = $rootScope.builderConfig.mainElement;\n\t\tvar builderElement = self.getBuilderElement(type);\n\t\tvar openModal      = builderElement.hasOwnProperty('openModal') ? builderElement.openModal : true;\n\t\tif (!_.isNull(item.openModal) && !_.isUndefined(item.openModal)) openModal = item.openModal;\n\t\tvar data = item.data ? item.data : {};\n\t\tvar elem, historyType;\n\t\tif (item.elem) {\n\t\t\tif ((item.action == 'before' || item.action == 'after' || item.action == 'replace')) {\n\t\t\t\tvar index = $scope.getElemIndex(item.elem);\n\t\t\t\tif (index !== -1) {\n\t\t\t\t\tswitch(item.action) {\n\t\t\t\t\t\tcase 'before':\n\t\t\t\t\t\t\thistoryType = 'inserted_before';\n\t\t\t\t\t\t\tif (self.isProfile() && type != mainElement) {\n\t\t\t\t\t\t\t\tvar row = self.addElement(mainElement, null, false, {}, index);\n\t\t\t\t\t\t\t\telem = self.addElement(type, row['elements'][0], openModal, data);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\telem = self.addElement(type, null, openModal, data, index);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'after':\n\t\t\t\t\t\t\thistoryType = 'inserted_after';\n\t\t\t\t\t\t\tif (self.isProfile() && type != mainElement) {\n\t\t\t\t\t\t\t\tvar row = self.addElement(mainElement, null, false, {}, index + 1);\n\t\t\t\t\t\t\t\telem = self.addElement(type, row['elements'][0], openModal, data);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\telem = self.addElement(type, null, openModal, data, index + 1);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'replace':\n\t\t\t\t\t\t\thistoryType = 'replaced';\n\t\t\t\t\t\t\tif (self.isProfile() && type != mainElement) {\n\t\t\t\t\t\t\t\tvar row = self.addElement(mainElement, null, false, {}, index, true);\n\t\t\t\t\t\t\t\telem = self.addElement(type, row['elements'][0], openModal, data);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\telem = self.addElement(type, null, openModal, data, index, true);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (item.action == 'append' && item.elem.id == $scope.element.id) {\n\t\t\t\telem = self.addElement(type, null, openModal, data);\n\t\t\t\thistoryType = 'added';\n\t\t\t}\n\t\t} else {\n\t\t\tif (self.isProfile()) {\n\t\t\t\thistoryType = 'added';\n\t\t\t\tif (type === mainElement) {\n\t\t\t\t\telem = self.addElement(type, null, openModal, data);\t\n\t\t\t\t} else {\n\t\t\t\t\tvar row = self.addElement(mainElement, null, false, {}, index, true);\n\t\t\t\t\telem = self.addElement(type, row['elements'][0], openModal, data);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif (elem && historyType && (!data.hasOwnProperty('history') || (data.hasOwnProperty('history') && data.history))) {\n\t\t\t$rootScope.$broadcast('addHistory', {\n\t\t\t\ttype: historyType,\n\t\t\t\ttitle: elem.builder.name\n\t\t\t});\n\t\t\t$rootScope.$broadcast('afterAddElement', elem);\n\t\t}\n\t});\n\n\t// REMOVE\n\t$scope.$on('removeElement', function(e, elem, data) {\n\t\tself.removeElement(elem, data);\n\t});\n\n\tself.removeElement = function(elem, data) {\n\t\tif ($scope.isChildren(elem)) {\n\t\t\tvar index = $scope.getElemIndex(elem);\n\t\t\t$rootScope.$broadcast('beforeRemoveElement', elem);\n\t\t\tvar _elem = $scope.element.elements.splice(index, 1)[0];\n\t\t\t$rootScope.$broadcast('removeParentElement', $scope.element);\n\t\t\tif (!data || (data && (data.hasOwnProperty('history') && data.history) || !data.hasOwnProperty('history'))) {\n\t\t\t\t$rootScope.$broadcast('addHistory', {\n\t\t\t\t\ttype: 'removed',\n\t\t\t\t\ttitle: _elem.builder.name\n\t\t\t\t});\n\t\t\t}\n\t\t\t$rootScope.$broadcast('afterRemoveElement', _elem);\n\t\t\t$scope.addAddBlock();\n\t\t}\n\t}\n\n\t$scope.$on('removeParentElement', function(e, elem) {\n\t\tself.removeParentElement(elem);\n\t});\n\n\tself.removeParentElement = function(parent) {\n\t\tif ($scope.isChildren(parent)) {\n\t\t\tvar index = $scope.getElemIndex(parent);\n\t\t\tif (parent.builder.children && !parent.elements.length) {\n\t\t\t\t$scope.element.elements.splice(index, 1);\n\t\t\t}\n\t\t}\n\t}\n\n\t// CLONE\n\t$scope.$on('cloneElement', function(e, elem) {\n\t\tself.cloneElement(elem);\n\t});\n\n\tself.cloneElement = function(elem) {\n\t\tif ($scope.isChildren(elem)) {\n\t\t\tvar index   = $scope.getElemIndex(elem);\n\t\t\tvar newElem = angular.copy(elem);\n\t\t\telementManager.prepareElement(newElem, true);\n\t\t\t$scope.element.elements.splice(index + 1, 0, newElem);\n\t\t\t$rootScope.$broadcast('addHistory', {\n\t\t\t\ttype: 'duplicated',\n\t\t\t\ttitle: newElem.builder.name\n\t\t\t});\n\t\t\t$rootScope.$broadcast('afterCloneElement', newElem);\n\t\t}\n\t}\n\n\t// CHANGE ELEMENT LAYOUT\n\t$scope.$on('changeElementLayout', function(e, data) {\n\t\tself.changeElementLayout(data);\n\t});\n\n\tself.changeElementLayout = function(data) {\n\t\tif ($scope.element.id === data.elem.id) {\n\t\t\tvar types = data.type.split('_');\n\t\t\tfor (var i = 0; i < types.length; i++) {\n\t\t\t\tvar _type = types[i].split('');\n\t\t\t\tvar elem  = $scope.element.elements[i];\n\t\t\t\tif (!elem) {\n\t\t\t\t\telem = self.addElement($scope.element.builder.children, $scope.element);\n\t\t\t\t}\n\t\t\t\tvar width;\n\t\t\t\tif (_type[1]==5) {\n\t\t\t\t\twidth = 15\n\t\t\t\t} else {\n\t\t\t\t\twidth = 12 * _type[0] / _type[1];\n\t\t\t\t}\n\t\t\t\tmagezonBuilderService.setResponiveValue(elem, 'size', width);\n\t\t\t}\n\t\t\t$rootScope.$broadcast('addHistory', {\n\t\t\t\ttype: 'changed',\n\t\t\t\ttitle: $scope.element.builder.name + ' Layout'\n\t\t\t});\n\t\t}\n\t}\n\n\t// Open Navigator Modal\n\t$scope.$on('openElementNavigator', function(e, elem) {\n\t\tif ($scope.isChildren(elem)) {\n\t\t\t$rootScope.activedElement = elem;\n\t\t\telem.builder.actived = true;\n\t\t\tvar parents = self.getParents();\n\t\t\tif ($scope.element.id) parents.push($scope.element);\n\t\t\tangular.forEach(parents, function(_elem) {\n\t\t\t\t_elem.builder.navigator.listVisible = true;\n\t\t\t});\n\t\t\t$rootScope.builderConfig.navigatorListVisible = true;\n\t\t\t$rootScope.$broadcast('openNavigatorModal');\n\t\t}\n\t});\n\n\t$scope.$on('editedElement', function(e, elem) {\n\t\tif ($scope.isChildren(elem)) {\n\t\t\tself.loadLiveElement(elem);\n\t\t}\n\t});\n\n\t// REMOVE\n\tvar move = function (origin, destination) {\n        var temp = $scope.element.elements[destination];\n        $scope.element.elements[destination] = $scope.element.elements[origin];\n        $scope.element.elements[origin] = temp;\n    };\n\n\t$scope.$on('moveUpElement', function(e, elem) {\n\t\tself.moveUpElement(elem);\n\t\t$rootScope.$broadcast('resetElement');\n\t});\n\n\tself.moveUpElement = function(elem) {\n\t\tif ($scope.isChildren(elem)) {\n\t\t\tvar index = $scope.getElemIndex(elem);\n\t\t\tif (index>0) {\n\t\t\t\tmove(index, index - 1);\n\t\t\t\t$rootScope.$broadcast('addHistory', {\n\t\t\t\t\ttype: 'move_up',\n\t\t\t\t\ttitle: elem.builder.name\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\n\t$scope.$on('moveDownElement', function(e, elem) {\n\t\tself.moveDownElement(elem);\n\t});\n\n\tself.moveDownElement = function(elem) {\n\t\tif ($scope.isChildren(elem)) {\n\t\t\tvar index = $scope.getElemIndex(elem);\n\t\t\tif (index<$scope.element.elements.length-1) {\n\t\t\t\tmove(index, index + 1);\n\t\t\t\t$rootScope.$broadcast('addHistory', {\n\t\t\t\t\ttype: 'move_down',\n\t\t\t\t\ttitle: elem.builder.name\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\n\t$timeout(function() {\n\t\t$scope.addAddBlock();\n\t}, 100);\n\n\treturn angular.copy(self);\n};\n\nreturn listCtrl;\n\n});","Magezon_Builder/js/controllers/modal.js":"define([\n\t'jquery',\n\t'angular',\n  \t'mgzcodemirror'\n], function($, angular, CodeMirror) {\n\twindow.mgzCodeMirror = CodeMirror;\n\n\tvar baseCtrl = function(\n\t\t$scope,\n\t\t$uibModalInstance,\n\t\tmagezonBuilderModal,\n\t\tmodal,\n\t\tmagezonBuilderService\n\t) {\n\t\tvar self = this;\n\t\tself.id  = '.' + magezonBuilderModal.getModalId(modal.key);\n\n\t\t$scope.modal    = modal;\n\t\t$scope.title    = modal.title ? modal.title : modal.name;\n\t\t$scope.subtitle = modal.subtitle;\n\t\tvar localStorageKey = 'modal.' + modal.key;\n\n\t\tif (magezonBuilderService.getFromLocalStorage(localStorageKey + '.sizes')) $scope.modal.sizes = magezonBuilderService.getFromLocalStorage(localStorageKey + '.sizes');\n\t\tif (magezonBuilderService.getFromLocalStorage(localStorageKey + '.position')) {\n\t\t\tvar position = magezonBuilderService.getFromLocalStorage(localStorageKey + '.position');\n\t\t\tif (position.top < 0) position.top = 0;\n\t\t\t$scope.modal.position = position;\n\t\t}\n\n\t\tself.cancel = function() {\n\t\t\t$uibModalInstance.dismiss('cancel');\n\t\t}\n\n\t\tself.getModalSelector = function() {\n\t\t\treturn $(self.id);\n\t\t}\n\n\t\tself.getModalWidth = function() {\n\t\t\tvar windowWidth = $(window).width();\n\t\t\tvar modalWidth  = '80%';\n\t\t\tif (modal.size.width) modalWidth = modal.size.width;\n\t\t\tif (angular.isString(modalWidth) && modalWidth.indexOf('%') !== -1) modalWidth = windowWidth / 100 * modalWidth.replace(\"%\", \"\");\n\t\t\treturn modalWidth;\n\t\t}\n\n\t\tself.getModalHeight = function() {\n\t\t\tvar windowHeight = $(window).height();\n\t\t\tvar modalHeight  = '90%';\n\t\t\tif (modal.size.height) modalHeight = modal.size.height;\n\t\t\tif (angular.isString(modalHeight) && modalHeight.indexOf('%') !== -1) modalHeight = windowHeight / 100 * modalHeight.replace(\"%\", \"\");\n\t\t\tif (modal.position.top && modal.position.bottom) {\n\t\t\t\tself.getModalSelector().css('max-height', '');\n\t\t\t\tself.getModalSelector().css('height', '');\n\t\t\t}\n\t\t\treturn modalHeight;\n\t\t}\n\n\t\tself.getMinHeight = function() {\n\t\t\treturn modal.size.minHeight ? modal.size.minHeight : '';\n\t\t}\n\n\t\tself.getModalTop = function() {\n\t\t\tvar top;\n\t\t\tif (modal.position.top) {\n\t\t\t\ttop = modal.position.top;\n\t\t\t} else {\n\t\t\t\ttop = ($(window).height() - self.getModalHeight()) / 2;\n\t\t\t}\n\t\t\treturn top;\n\t\t}\n\n\t\tself.getModalRight = function() {\n\t\t\tvar right = 'auto';\n\t\t\tif (modal.position.right) {\n\t\t\t\tright = modal.position.right;\n\t\t\t}\n\t\t\treturn right;\n\t\t}\n\n\t\tself.getModalBottom = function() {\n\t\t\tvar bottom;\n\t\t\tif (modal.position.bottom) {\n\t\t\t\tbottom = modal.position.bottom;\n\t\t\t}\n\t\t\treturn bottom;\n\t\t}\n\n\t\tself.getModalLeft = function() {\n\t\t\tvar left = 'auto';\n\t\t\tif (modal.position.left) {\n\t\t\t\tleft = modal.position.left;\n\t\t\t} else {\n\t\t\t\tif (!modal.position.right) {\n\t\t\t\t\tleft = ($(window).width() - self.getModalWidth()) / 2;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn left;\n\t\t}\n\n\t\tself.getModalMaxWidth = function() {\n\t\t\tvar maxWidth;\n\t\t\tif (modal.size.maxWidth) {\n\t\t\t\tmaxWidth = parseFloat(modal.size.maxWidth) + 'px';\n\t\t\t} else {\n\t\t\t\tmaxWidth = parseFloat(modal.size.maxWidth) + 'px';\n\t\t\t}\n\t\t\treturn maxWidth;\n\t\t}\n\n\t\tself.getHeaderSelector = function() {\n\t\t\treturn $(self.id + ' .mgz-modal-header');\n\t\t}\n\n\t\tself.getHeaderHeight = function() {\n\t\t\treturn self.getHeaderSelector().length ? self.getHeaderSelector().outerHeight() : 0;\n\t\t}\n\n\t\tself.getContentSelector = function() {\n\t\t\treturn $(self.id + ' .mgz-modal-content');\n\t\t}\n\n\t\tself.getFooterSelector = function() {\n\t\t\treturn $(self.id + ' .mgz-modal-footer');\n\t\t}\n\n\t\tself.getFooterHeight = function() {\n\t\t\treturn self.getFooterSelector().length ? self.getFooterSelector().outerHeight() : 0;\n\t\t}\n\n\t\tself.isTabsModal = function() {\n\t\t\treturn self.getModalSelector().find('.mgz-modal-tab > .tab-content').length ? true : false;\n\t\t}\n\n\t\tself.resizeInner = function() {\n\t\t\tvar headerHeight = self.getHeaderHeight();\n\t\t\tvar footerHeight = self.getFooterHeight();\n\t\t\tvar modalHeight  = self.getModalHeight();\n\t\t\tvar height       = modalHeight - headerHeight - footerHeight;\n\t\t\tif (self.isTabsModal()) {\n\t\t\t\theight -= self.getModalSelector().find('.mgz-modal-tab > .nav-tabs').outerHeight();\n\t\t\t\tself.getModalSelector().find('.mgz-modal-tab > .tab-content').css('max-height', height);\n\t\t\t\tself.getModalSelector().find('.mgz-modal-content').css('overflow', 'visible');\n\t\t\t\tself.getModalSelector().addClass('mgz-modal-form');\n\t\t\t} else {\n\t\t\t\tself.getModalSelector().css('height', modalHeight);\n\t\t\t\tself.getModalSelector().removeClass('mgz-modal-form');\n\t\t\t}\n\t\t}\n\n\t\t$scope.$on('afterLoadModalTabs', function() {\n\t\t\tself.resizeInner();\n\t\t\tsetTimeout(function() {\n\t\t\t\tself.resizeInner();\n\t\t\t}, 500);\n\t\t});\n\n\t\t$uibModalInstance.rendered.then(function() {\n\t\t\tif (modal.resizable) {\n\t\t\t\tvar minHeight = 150 + self.getHeaderSelector().outerHeight() + self.getFooterSelector().outerHeight();\n\t\t\t\tsetTimeout(function() {\n\t\t\t    \tself.getModalSelector().resizable({\n\t\t\t    \t\tminHeight: minHeight,\n\t\t\t    \t\tminWidth: 380,\n\t\t\t    \t\thandles: \"all\",\n\t\t\t    \t\tresize: function( event, ui ) {\n\t\t\t    \t\t\tmodal.size.width = ui.size.width;\n\t\t\t\t\t\t\tif (!self.getModalSelector().hasClass('mgz-minimized')) {\n\t\t\t    \t\t\t\tmodal.size.height = ui.size.height;\n\t\t\t    \t\t\t}\n\t\t\t    \t\t\tself.resizeInner();\n\t\t\t    \t\t\tmagezonBuilderService.saveToLocalStorage(localStorageKey + '.sizes', ui.size);\n\t\t\t    \t\t}\n\t\t\t    \t});\n\t\t\t\t}, 2000);\n\t    \t\tself.getModalSelector().draggable({\n\t    \t\t\tcontainment: \"window\",\n\t    \t\t\thandle: \".mgz-modal-header\",\n\t    \t\t\tscroll: false,\n\t    \t\t\tdrag: function( event, ui ) {\n\t    \t\t\t\tif (modal.position.top >= 0) {\n\t\t    \t\t\t\tmodal.position = ui.position;\n\t\t\t\t    \t\tmagezonBuilderService.saveToLocalStorage(localStorageKey + '.position', ui.position);\n\t\t\t\t    \t}\n\t    \t\t\t}\n\t    \t\t});\n\t    \t\tself.getHeaderSelector().addClass('mgz-draggable-handle');\n\t\t    }\n\t\t    self.resizeInner();\n\t\t    self.getModalSelector().find('.mgz-modal-tab > .nav.nav-tabs > li > a').click(function(e) {\n\t\t\t\tself.resizeInner();\n\t\t\t});\n\t\t\tsetTimeout(function() {\n\t\t\t\tself.getModalSelector().find('.mgz-modal-tab > .tab-content').scroll(function(e) {\n\t\t\t\t\t$('.sp-active').siblings('.colorpicker-spectrum').spectrum(\"hide\");\n\t\t\t\t});\n\t\t\t}, 2000);\n\t\t});\n\n\t\tself.getModalStyle = function($topModalIndex) {\n\t\t\tvar style = {\n\t\t\t\t'z-index': 800 + $topModalIndex * 10,\n\t\t\t\t'display': 'block'\n\t\t\t};\n\t\t\tstyle['width'] = self.getModalWidth();\n\t\t\tif ($scope.modal.form) {\n\t\t\t\tstyle['max-height'] = self.getModalHeight();\n\t\t\t} else {\n\t\t\t\tstyle['height'] = self.getModalHeight();\n\t\t\t}\n\t\t\tstyle['top']        = self.getModalTop();\n\t\t\tstyle['right']      = self.getModalRight();\n\t\t\tstyle['left']       = self.getModalLeft();\n\t\t\tstyle['max-width']  = self.getModalMaxWidth();\n\t\t\tstyle['min-height'] = self.getMinHeight();\n\t\t\treturn style;\n\t\t}\n\n\t\t$(window).resize(function(event) {\n\t    \tif (self.getModalSelector().is(':visible')) {\n\t    \t\tself.resizeInner();\n\t    \t}\n\t    });\n\n\t    $scope.$on('enableModalSpinner', function() {\n\t\t\t$scope.spinner = true;\n\t\t});\n\n\t    $scope.$on('disableModalSpinner', function() {\n\t\t\t$scope.spinner = false;\n\t\t});\n\n\t\treturn angular.copy(self);\n\t};\n\n\treturn baseCtrl;\n});","Magezon_Builder/js/controllers/base.js":"define([\n\t'jquery',\n\t'underscore',\n\t'angular',\n\t'Magezon_Builder/js/apply/main',\n\t'Magezon_Builder/js/parallax'\n], function($, _, angular, mage, parallax) {\n\n\tvar isMobile = /Android|iPhone|iPad|iPod|BlackBerry|Windows Phone/g.test(navigator.userAgent || navigator.vendor || window.opera);\n\n\tvar baseCtrl = function(\n\t\t$scope,\n\t\t$rootScope,\n\t\t$timeout,\n\t\tmagezonBuilderService,\n\t\tmagezonBuilderUrl,\n\t\tmagezonBuilderFilter,\n\t\telementManager,\n\t\t$sce,\n\t\t$interpolate,\n\t\tmagezonBuilderModal,\n\t\t$compile\n\t) {\n\n\t\tvar self = this;\n\t\tvar element = $scope.element;\n\n\t\tself.getBuilderElement = function(type) {\n\t\t\treturn elementManager.getElement(type);\n\t\t}\n\n\t\t$scope.controls            = [];\n\t\t$scope.controlsTemplateUrl = magezonBuilderUrl.getViewFileUrl('Magezon_Builder/js/templates/builder/controls.html');\n\t\t$scope.headingTypes        = ['h1', 'h2', 'h3', 'h4', 'h5', 'h6'];\n\t\t$scope.alignTypes          = ['left', 'center', 'right'];\n\t\t$scope.loaded              = false;\n\t\t$scope.toolbarLoaded       = false;\n\t\t$scope.toolbar             = true;\n\t\t$scope.resizableLoaded     = false;\n\t\t$scope.resizable           = true;\n\t\t$scope.addBlock            = true;\n\n\t\t$scope.$on('loadElements', function(event, elem) {\n\t\t\tself.afterRender();\n\t\t});\n\t\t$scope.loadElement = function() {}\n\n\t\t$scope.getEl = function() {\n\t\t\treturn elementManager.getEl(element);\n\t\t}\n\n\t\tself.isProfile = function() {\n\t\t\tif (!element.id || element.type == 'profile') {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn false;\n\t\t}\n\n\t\t$scope.getElemIndex = function(elem) {\n\t\t\treturn _.findIndex(element.elements, function(_elem) {\n\t\t\t\treturn _elem.id == elem.id;\n\t\t\t});\n\t\t}\n\n\t\t$scope.isChildren = function(elem) {\n\t\t\tvar index = $scope.getElemIndex(elem);\n\t\t\treturn (index !== -1) ? true : false;\n\t\t}\n\n\t\tself.onDragstart = function(elem) {\n\t\t\t$rootScope.draggingElement = elem;\n\t\t\t$rootScope.$broadcast('onDragstart', elem);\n\t\t}\n\n\t\tself.onDragend = function(elem) {\n\t\t\t$rootScope.draggingElement = '';\n\t\t\t$scope.controls = [];\n\t\t\t$rootScope.$broadcast('onDragend', elem);\n\t\t\t$('.mgz-element-collection-dragover').removeClass('mgz-element-collection-dragover');\n\t\t}\n\n\t\tself.onCanceled = function(elem) {\n\t\t\t$rootScope.draggingElement = '';\n\t\t\t$scope.controls = [];\n\t\t\t$rootScope.$broadcast('onCanceled', elem);\n\t\t}\n\n\t\tself.onMoved = function(elem) {\n\t\t\t$rootScope.draggingElement = '';\n\t\t\t$scope.controls = [];\n\t\t\t$rootScope.$broadcast('onMoved', elem);\n\t\t}\n\n\t\tself.getWrapperClasses = function() {\n\t\t\tvar classes = [];\n\t\t\tif (element.animation_in) {\n\t\t\t\tclasses.push('mgz-animated');\n\t\t\t\tclasses.push(element.animation_in);\n\t\t\t\t// classes.push('mgz_start_animation');\n\t\t\t\t// classes.push('animated');\n\t\t\t\tif (element.animation_infinite) {\n\t\t\t\t\tclasses.push('mgz-animated-infinite');\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (element.el_class) classes.push(element.el_class);\n\t\t\tif (element.hidden_default) classes.push('mgz-element-hide-default');\n\t\t\tif (element.title_align) classes.push('mgz-element-title-align-' + element.title_align);\n\t\t\tif (element.el_float) {\n\t\t\t\tvar _float = magezonBuilderService.getDesignValue(element, 'el_float');\n\t\t\t\tif (_float) classes.push('f-' + _float);\n\t\t\t}\n\t\t\tclasses.push(element.id);\n\t\t\tclasses.push('mgz-element');\n\t\t\tif (!element.builder.is_collection) classes.push('mgz-child');\n\t\t\tclasses.push('mgz-element-' + element.type);\n\t\t\tif (element.builder.is_collection) classes.push('mgz-element-collection');\n\t\t\tif (element.builder.is_collection && !element.elements.length) {\n\t\t\t\tclasses.push('mgz-element-empty');\n\t\t\t}\n\t\t\tif (element.disable_element) classes.push('mgz-element-disabled');\n\t\t\tif (element.builder.actived || ($rootScope.editingElement && element.id == $rootScope.editingElement.id)) classes.push('mgz-element-actived');\n\t\t\tif (element.builder.editing) classes.push('mgz-element-editing');\n\t\t\tif (element.builder.hovered) classes.push('mgz-element-hover');\n\t\t\tif (element.elements && element.elements.length) {\n\t\t\t\tclasses.push('has-children');\t\n\t\t\t}\n\t\t\tvar viewMode = magezonBuilderService.getViewMode();\n\t\t\tif (element[viewMode + '_hide']) classes.push('mgz-hidden');\n\t\t\tclasses = classes.concat(self.getViewModeClass(element));\n\t\t\tif (element.builder.additionalClasses) {\n\t\t\t\tclasses = classes.concat(element.builder.additionalClasses);\n\t\t\t}\n\t\t\treturn classes;\n\t\t}\n\n\t\tself.getInnerClasses = function() {\n\t\t\tvar classes = [];\n\t\t\tclasses.push('mgz-element-inner');\n\t\t\tclasses.push(self.getStyleHtmlId());\n\t\t\tif (element.el_inner_class) classes.push(element.el_inner_class);\n\t\t\treturn classes;\n\t\t}\n\n\t\tself.getViewModeClass = function(elem) {\n\t\t\tvar classes = [];\n\t\t\tif (elem.builder && elem.builder.resizable) {\n\t\t\t\tvar responsiveClass = magezonBuilderService.getResponiveValue(elem, 'size');\n\t\t\t\tif (responsiveClass) {\n\t\t\t\t\tclasses.push('mgz-col-xs-' + responsiveClass);\n\t\t\t\t} else {\n\t\t\t\t\tclasses.push('mgz-col-xs-12');\n\t\t\t\t}\n\t\t\t\tvar modeOffset = magezonBuilderService.getResponiveValue(elem,'offset_size');\n\t\t\t\tif (modeOffset) classes.push('mgz-col-xs-offset-' +  modeOffset);\n\t\t\t}\n\t\t\treturn classes;\n\t\t}\n\n\t\t$scope.getTrustedHtml = function(html) {\n\t\t\treturn $sce.trustAsHtml(magezonBuilderFilter.encodeContent(html));\n\t\t}\n\n\t\t$scope.trustAsResourceUrl = function(url) {\n\t\t\treturn $sce.valueOf($sce.trustAsResourceUrl(url));\n\t\t}\n\n\t\t$scope.getBuilderElementDescription = function() {\n\t\t\tvar builderElement = element.builder;\n\t\t\treturn builderElement.builder_description ? $interpolate(builderElement.builder_description)($scope) : '';\n\t\t}\n\n\t\t$scope.getPlaceHolderClassess = function() {\n\t\t\tvar classes;\n\t\t\tif ($rootScope.draggingElement) {\n\t\t\t\tvar elem = $rootScope.draggingElement;\n\t\t\t\tvar classes = self.getViewModeClass(elem);\n\t\t\t\tif (elem.el_float) classes += ' f-' + elem.el_float;\n\t\t\t}\n\t\t\treturn classes;\n\t\t}\n\n\t\t$scope.getTitleHtml = function() {\n\t\t\tif (!element.title_tag) element.title_tag = 'h4';\n\t\t\t\tvar html = '<' + element.title_tag + ' class=\"title\">';\n\t\t\tif (element.add_icon && element.icon_position == 'left') {\n\t\t\t\thtml += '<i class=\"mgz-icon-element ' + element.icon + '\"></i>';\n\t\t\t}\n\t\t\tif (element.title) {\n\t\t\t\thtml += '<span>' + element.title + '</span>';\n\t\t\t}\n\t\t\tif (element.add_icon && element.icon_position == 'right') {\n\t\t\t\thtml += '<i class=\"mgz-icon-element ' + element.icon + '\"></i>';\n\t\t\t}\n\t\t\thtml += '</' + element.title_tag + '>';\n\t\t\treturn html;\n\t\t}\n\n\t\tself.getParallaxId = function() {\n\t\t\treturn element.id ? element.id + '-p' : '';\n\t\t}\n\n\t\tself.getStyleHtmlId = function() {\n\t\t\treturn element.id ? element.id + '-s' : '';\n\t\t}\n\n\t\tself.onMouseEnter = function(e) {\n\t\t\tif (!$rootScope.draggingElement || ($('.mgz-element-editing').length && $('.mgz-element-editing') !== $scope.getEl())) {\n\t\t\t\tif (!$scope.toolbarLoaded && $scope.toolbar) {\n\t\t\t\t\tvar html = $compile('<magezon-builder-element-actions></magezon-builder-element-actions>')($scope);\n\t\t\t\t\t$scope.getEl().prepend(html);\n\t\t\t\t\t$scope.toolbarLoaded = true;\n\t\t\t\t}\n\t\t\t\tif (!$scope.resizableLoaded && $scope.resizable && element.builder.resizable) {\n\t\t\t\t\tvar html = $compile('<magezon-builder-element-resizable></magezon-builder-element-resizable>')($scope);\n\t\t\t\t\t$scope.getEl().append(html);\n\t\t\t\t\t$scope.resizableLoaded = true;\n\t\t\t\t}\n\n\t\t\t\telement.builder.hovered = true;\n\t\t\t\tvar target = $(e.currentTarget);\n\t\t\t\t$scope.controls = self.getControls();\n\t\t\t\tangular.forEach($scope.controls, function(elem, index) {\n\t\t\t\t\telem.builder.controlsVisible = false;\n\t\t\t\t});\n\t\t\t\t$timeout(function() {\n\t\t\t\t\tvar controlSelector = target.children('.mgz-element-wrap-top').children('.mgz-element-controls');\n\t\t\t\t\tif (target.find('.mgz-element-hover').length) {\n\t\t\t\t\t\telement.builder.controlsVisible = false;\n\t\t\t\t\t} else {\n\t\t\t\t\t\telement.builder.controlsVisible = true;\n\t\t\t\t\t}\n\t\t\t\t\tsetTimeout(function() {\n\t\t\t\t\t\tif (controlSelector.length) {\n\t\t\t\t\t\t\tvar navSelector    = $('#' + $rootScope.builderConfig.htmlId + ' .mgz-navbar');\n\t\t\t\t\t\t\tif (navSelector.length) {\n\t\t\t\t\t\t\t\tvar navOffsetRight = navSelector.offset().left + navSelector.width();\n\t\t\t\t\t\t\t\tvar controlSelectorOffsetRight = controlSelector.offset().left + controlSelector.width() + 2;\n\t\t\t\t\t\t\t\tif (controlSelectorOffsetRight > navOffsetRight) {\n\t\t\t\t\t\t\t\t\tcontrolSelector.css('right', '0');\n\t\t\t\t\t\t\t\t\tcontrolSelector.css('left', 'auto');\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tcontrolSelector.css('right', 'auto');\n\t\t\t\t\t\t\t\t\tif (target.css('position') == 'static') {\n\t\t\t\t\t\t\t\t\t\tcontrolSelector.css('left', target.position().left);\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\tcontrolSelector.css('left', '0');\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}, 200);\n\t\t\t}\n\t\t}\n\n\t\tself.onMouseLeave = function(e) {\n\t\t\telement.builder.hovered = false;\n\t\t\tif (!$rootScope.draggingElement) {\n\t\t\t\tvar target = $(e.currentTarget);\n\t\t\t\t$scope.controls = [];\n\t\t\t\telement.builder.controlsVisible = false;\n\t\t\t}\n\t\t}\n\n\t\tself.getParents = function() {\n\t\t\tvar parents = {};\n\t\t\tvar prepareParents = function(_scope, _parents) {\n\t\t\t\tif (_scope.$parent) {\n\t\t\t\t\tvar _element = _scope.element;\n\t\t\t\t\tif (_element && _element.id && !_parents.hasOwnProperty(_element.id)) {\n\t\t\t\t\t\t_parents[_element.id] = _element;\n\t\t\t\t\t}\n\t\t\t\t\tprepareParents(_scope.$parent, _parents);\n\t\t\t\t}\n\t\t\t}\n\t\t\tprepareParents($scope.$parent, parents);\n\t\t\treturn _.values(parents).reverse();\n\t\t}\n\n\t\tself.getControls = function() {\n\t\t\tvar parents = self.getParents();\n\t\t\treturn parents;\n\t\t}\n\n\t\tself.getControlClasses = function(elem, $last) {\n\t\t\tvar classes = [];\n\t\t\tclasses.push('mgz-element-control');\n\t\t\tclasses.push('mgz-element-' + elem.type + '-control');\n\t\t\tif ($last) classes.push('mgz-element-control-last mgz-element-control-green');\n\t\t\treturn classes;\n\t\t}\n\n\t\t$scope.$on('editElement', function($e, elem, activeTab) {\n\t\t\tif (elem.id == element.id) {\n\t\t\t\tself.editElement(elem, activeTab);\n\t\t\t\t$rootScope.$broadcast('elementReloaded', element);\n\t\t\t}\n\t\t})\n\n\t\tself.editElement = function(elem, activeTab) {\n\t\t\telem.builder.editing = false;\n\t\t\telem.builder.hovered = false;\n\t\t\t$rootScope.editingElement = elem;\n\t\t\tvar modal = magezonBuilderModal.open('element', {\n\t\t\t\twindowClass: 'mgz-modal-' + elem.type,\n\t\t\t\tresolve: {\n\t\t\t\t\tform: {\n\t\t\t\t\t\telement: elem,\n\t\t\t\t\t\tactiveTab: activeTab\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}, function() {\n\t\t\t\tself.deactiveElement(elem);\n\t\t\t\t$rootScope.editingElement = '';\n\t\t\t}, function() {\n\t\t\t\tself.deactiveElement(elem);\n\t\t\t\t$rootScope.editingElement = '';\n\t\t\t});\n\t\t}\n\n\t\tself.dropElement = function(elem, index, parent) {\n\t\t\t$rootScope.$broadcast('removeElement', elem, {history: false});\n\t\t\t$rootScope.$broadcast('beforeDropElement', elem);\n\t\t\t$scope.$apply(function() {\n\t\t\t\tparent.elements.splice(index, 0, elem);\n\t\t\t\tself.deactiveElement(elem);\n\t\t\t\t$rootScope.$broadcast('addHistory', {\n\t\t\t\t\ttype: 'moved',\n\t\t\t\t\ttitle: elem.builder.name\n\t\t\t\t});\n\t\t\t});\n\t\t\tself.onDragend();\n\t\t\t$rootScope.$broadcast('afterDropElement', elem);\n\t\t\treturn true;\n\t\t}\n\n\t\t$scope.$on('activeElement', function(event, elem) {\n\t\t\tif (elem.id == element.id) {\n\t\t\t\tself.activeElement(element);\n\t\t\t} else {\n\t\t\t\telement.builder.actived = false;\n\t\t\t}\n\t\t});\n\n\t\tself.activeElement = function(elem) {\n\t\t\telem.builder.actived = true;\n\t\t\t$rootScope.activedElement = elem;\n\t\t}\n\n\t\t$scope.$on('deactiveElement', function(event, elem) {\n\t\t\tself.deactiveElement(element);\n\t\t});\n\n\t\tself.deactiveElement = function(elem) {\n\t\t\telem.builder.actived = false;\n\t\t\t$rootScope.activedElement = '';\n\t\t}\n\n\t\t$scope.$on('gotoElement', function(event, elem) {\n\t\t\tif (elem.id == element.id) {\n\t\t\t\tvar height = $('.page-main-actions > .page-actions._fixed').outerHeight() + 5;\n\t\t\t\tvar _elem  = $(\".mgz-builder .mgz-element.\" + element.id);\n\t\t\t\tif (_elem.is(':visible')) {\n\t\t\t\t\t$('html, body').stop().animate({\n\t\t\t\t\t\tscrollTop: _elem.offset().top - height\n\t\t\t\t\t}, 1000);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\t$scope.removeSpinner = function() {\n\t\t\t$scope.getEl().children('.mgz-spinner').remove();\n\t\t}\n\n\t\tvar addAddBlock = function() {\n\t\t\tif ($scope.addBlock && !self.isProfile()) {\n\t\t\t\tvar _elem = element;\n\t\t\t\tif (_elem.builder.is_collection) {\n\t\t\t\t\t$scope.removeSpinner();\n\t\t\t\t\tif (!_elem.elements.length) {\n\t\t\t\t\t\tvar html = $compile('<i class=\"mgz-icon mgz-icon-add\" ng-if=\"element.builder.is_collection&&!element.elements.length\" ng-click=\"$root.$broadcast(\\'addElement\\', {elem: element, action: \\'append\\' })\"></i>')($scope);\n\t\t\t\t\t\t$scope.getEl().prepend(html);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t$scope.addAddBlock = function() {\n\t\t\taddAddBlock();\n\t\t\tif ($scope.getEl().find('.mgz-icon-add')) {\n\t\t\t\tsetTimeout(function() {\n\t\t\t\t\taddAddBlock();\n\t\t\t\t}, 500);\n\t\t\t}\n\t\t}\n\n\t\tself.loadLiveElement = function(elem) {\n\t\t\tif (elem.builder.livePreview) {\n\t\t\t\tmagezonBuilderService.elemPost(elem, $rootScope.builderConfig.loadElementUrl, {\n\t\t\t\t\telement: angular.toJson(elem)\n\t\t\t\t}, false, function(res) {\n\t\t\t\t\tvar _elem = $('.' + elem.id);\n\t\t\t\t\tvar _inner = _elem.children('.mgz-element-inner');\n\t\t\t\t\tif (res) {\n\t\t\t\t\t\t_inner.html(res);\n\t\t\t\t\t\t$(mage.apply);\n\t\t\t\t\t\t_inner.on('click', '.action.tocart,.action.towishlist,.action.tocompare', function (e) {\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t});\n\t\t\t\t\t\t_inner.find('a').attr('target', '_blank');\n\t\t\t\t\t\t_inner.find('form[data-role=tocart-form]').removeAttr('action');\n\t\t\t\t\t\t_inner.find('form[data-role=tocart-form]').removeAttr('method');\n\t\t\t\t\t\t_inner.find('*').addClass('mgz-builder-dnd-disable');\n\t\t\t\t\t\t$('body').trigger('magezonPageBuilderUpdated');\n\t\t\t\t\t\tsetTimeout(function() {\n\t\t\t\t\t\t\t_elem.find('.mgz-waypoint').trigger('mgz:animation:run');\n\t\t\t\t\t\t}, 1000);\n\t\t\t\t\t\t$rootScope.$broadcast('loadElements');\n\t\t\t\t\t}\n\t\t\t\t}, function() {}, function() {\n\t\t\t\t\t$scope.removeSpinner();\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\tsetTimeout(function() {\n\t\t\tself.loadLiveElement(element);\t\n\t\t});\n\n\t\tself.getParallaxClasses = function() {\n\t\t\tvar parallax      = magezonBuilderService.getDesignValue(element, 'parallax_type');\n\t\t\tvar mouseParallax = magezonBuilderService.getDesignValue(element, 'mouse_parallax');\n\t\t\tvar classes  = [];\n\t\t\tclasses.push('mgz-parallax');\n\t\t\tclasses.push(self.getParallaxId());\n\t\t\tif (parallax && mouseParallax) classes.push('mgz-parallax-mouse-parallax');\n\t\t\treturn classes;\n\t\t}\n\n\t\tself.afterParallaxRender = function(e) {\n\t\t\tsetTimeout(function() {\n\t\t\t\tself.initParallax();\n\t\t\t}, 1000);\n\t\t}\n\n\t\tself.initParallax = function() {\n\t\t\tvar parallax   = magezonBuilderService.getDesignValue(element, 'parallax_type');\n\t\t\tvar elParallax = $scope.getEl().children('.mgz-element-inner').children('.mgz-parallax').children('.mgz-parallax-inner');\n\n\t\t\tjarallax(elParallax, 'destroy');\n\t\t\tif (parallax) {\n\t\t\t\telParallax.css('background-image', 'none');\t\n\t\t\t} else {\n\t\t\t\telParallax.css('background-image', '');\t\n\t\t\t}\n\t\t\tif (!self.isEnabledParallax()) return;\n\t\t\tvar _elem           = element;\n\t\t\tvar backgroundType  = magezonBuilderService.getDesignValue(_elem, 'background_type');\n\t\t\tvar imageBgSize     = '';\n\t\t\tvar imageBgPosition = magezonBuilderService.getDesignValue(_elem, 'background_position').replace(/-/g, ' ');\n\t\t\tvar video           = false;\n\t\t\tvar videoStartTime  = 0;\n\t\t\tvar videoEndTime    = 0;\n\t\t\tvar videoVolume     = 0;\n\t\t\tvar videoLoop       = true;\n\t\t\tvar videoAlwaysPlay = true;\n\t\t\tvar videoMobile     = false;\n\t\t\tvar parallax        = magezonBuilderService.getDesignValue(_elem, 'parallax_type');\n\t\t\tvar parallaxSpeed   = magezonBuilderService.getDesignValue(_elem, 'parallax_speed');\n\t\t\tvar parallaxMobile  = magezonBuilderService.getDesignValue(_elem, 'parallax_mobile');\n\n\t        // video type\n\t        if ( backgroundType === 'yt_vm_video' || backgroundType === 'video' ) {\n\t        \tvideo           = magezonBuilderService.getDesignValue(_elem, 'background_video');\n\t        \tvideoStartTime  = parseFloat( magezonBuilderService.getDesignValue(_elem, 'video_start_time') ) || 0;\n\t        \tvideoEndTime    = parseFloat( magezonBuilderService.getDesignValue(_elem, 'video_end_time') ) || 0;\n\t        \tvideoVolume     = parseFloat( magezonBuilderService.getDesignValue(_elem, 'video_volume') ) || 0;\n\t        \tvideoLoop       = true;\n\t        \tvideoAlwaysPlay = true;\n\t        \tvideoMobile     = magezonBuilderService.getDesignValue(_elem, 'video_mobile');\n\n\t        \tif ( video && ! parallax && ! parallaxSpeed ) {\n\t        \t\tparallax       = 'scroll';\n\t        \t\tparallaxSpeed  = 1;\n\t        \t\tparallaxMobile = videoMobile;\n\t        \t}\n\t        }\n\n\t        // prevent if no parallax and no video\n\t        if ( !parallax && !video ) return;\n\n\t        var jarallaxParams = {\n\t        \tautomaticResize: true,\n\t        \ttype: parallax,\n\t        \tspeed: parallaxSpeed,\n\t        \tdisableParallax() {\n\t        \t\treturn parallaxMobile ? false : isMobile;\n\t        \t},\n\t        \tdisableVideo() {\n\t        \t\treturn videoMobile ? false : isMobile;\n\t        \t},\n\t        \timgSize: imageBgSize || 'cover',\n\t        \timgPosition: imageBgPosition || '50% 50%',\n\t        };\n\n\t        if ( imageBgSize === 'pattern' ) {\n\t        \tjarallaxParams.imgSize   = 'auto';\n\t        \tjarallaxParams.imgRepeat = 'repeat';\n\t        }\n\n\t        if ( video ) {\n\t\t\t\tjarallaxParams.speed                = parallax ? parallaxSpeed : 1;\n\t\t\t\tjarallaxParams.videoSrc             = video;\n\t\t\t\tjarallaxParams.videoStartTime       = videoStartTime;\n\t\t\t\tjarallaxParams.videoEndTime         = videoEndTime;\n\t\t\t\tjarallaxParams.videoVolume          = videoVolume;\n\t\t\t\tjarallaxParams.videoLoop            = videoLoop;\n\t\t\t\tjarallaxParams.videoPlayOnlyVisible = !videoAlwaysPlay;\n\t        }\n\n\t        var backgroundImage = magezonBuilderService.getDesignValue(element, 'background_image');\n\t        if (backgroundImage) jarallaxParams.imgSrc = magezonBuilderUrl.getImageUrl(backgroundImage);\n\t        var elParallax = $scope.getEl().children('.mgz-element-inner').children('.mgz-parallax').children('.mgz-parallax-inner');\n\t        jarallax(elParallax, jarallaxParams);\n\t        window.mgzParallaxMouse(true);\n\t\t}\n\n\t\tself.processParallax = function() {\n\t\t\t$scope.getEl().children('.mgz-element-inner').children('.mgz-parallax').remove();\n\t\t\tif (self.isEnabledParallax()) {\n\t\t\t\tvar html = $compile(self.getParallaxHtml())($scope);\n\t\t\t\t$scope.getEl().children('.mgz-element-inner').prepend(html);\n\t\t\t}\n\t\t}\n\n\t\t$scope.$on('editedElement', function(event, elem) {\n\t\t\tif (element.id === elem.id) {\n\t\t\t\tself.afterRender();\n\t\t\t}\n\t\t});\n\n\t\t$scope.$on('resetElement', function(event) {\n\t\t\telement.builder.hovered = false;\n\t\t\telement.builder.editing = false;\n\t\t\telement.builder.actived = false;\n\t\t});\n\n\t\tself.isEnabledParallax = function() {\n\t\t\tvar _elem           = element;\n\t\t\tvar parallax        = magezonBuilderService.getDesignValue(_elem, 'parallax_type');\n\t\t\tvar backgroundType  = magezonBuilderService.getDesignValue(_elem, 'background_type');\n\t\t\tvar backgroundImage = magezonBuilderService.getDesignValue(_elem, 'background_image');\n\t\t\tvar backgroundColor = magezonBuilderService.getDesignValue(_elem, 'background_color');\n\t\t\tvar video           = magezonBuilderService.getDesignValue(_elem, 'background_video');\n\t\t\treturn (backgroundColor || backgroundImage || (backgroundType === 'yt_vm_video' && video));\n\t\t}\n\n\t\tself.processWaypoints = function() {\n\t\t\t$scope.getEl().waypoint(function() {\n\t\t\t\tvar self = this;\n\t\t\t\tvar delayTime = 0;\n\t\t\t\tif ($(this.element).data('animation-delay')) {\n\t\t\t\t\tdelayTime = $(this.element).data('animation-delay');\n\t\t\t\t}\n\t\t\t\tvar durationTime = 0;\n\t\t\t\tif ($(this.element).data('animation-duration')) {\n\t\t\t\t\tdurationTime = $(this.element).data('animation-duration');\n\t\t\t\t}\n\t\t\t\tif (durationTime) $(self.element).css(\"animation-duration\", durationTime + 's');\n\n\t\t\t\tsetTimeout(function() {\n\t\t\t\t\t$(self.element).addClass(\"mgz_start_animation animated\")\n\t\t\t\t}, delayTime * 1000);\n\t\t\t}, {\n\t\t\t\toffset: \"85%\"\n\t\t\t});\n\t\t}\n\n\t\tself.afterRender = function() {\n\t\t\t$scope.loadElement();\n\t\t\tself.processParallax();\n\t\t\tself.processWaypoints();\n\t\t\t$scope.loaded = true;\n\t\t\t$rootScope.$broadcast('elementReloaded', element);\n\t\t\tif (element.el_id) {\n\t\t\t\t$scope.getEl().attr('id', element.el_id);\n\t\t\t} else {\n\t\t\t\t$scope.getEl().removeAttr('id');\n\t\t\t}\n\t\t}\n\n\t\tself.getStyles = function() {\n\t\t\tvar _elem = element;\n\t\t\tvar styles = {};\n\t\t\tif (_elem.animation_in && _elem.animation_duration) {\n\t\t\t\tstyles['animation-duration'] = _elem.animation_duration + 's';\n\t\t\t}\n\t\t\treturn styles;\n\t\t}\n\n\t\tself.getParallaxHtml = function() {\n\t\t\treturn '<div ng-if=\"mgz.isEnabledParallax()\" ng-class=\"mgz.getParallaxClasses()\" data-parallax-mouse-parallax-size=\"{{ $root.magezonBuilderService.getDesignValue(element, \\'mouse_parallax_size\\') }}\" data-parallax-mouse-parallax-speed=\"{{ $root.magezonBuilderService.getDesignValue(element, \\'mouse_parallax_speed\\') }}\"><div class=\"mgz-parallax-inner\" after-render=\"mgz.afterParallaxRender()\"></div></div>';\n\t\t}\n\n\t\t$scope.addHistory = function(type, subtitle) {\n\t\t\t$rootScope.$broadcast('addHistory', {\n\t\t\t\ttype: type,\n\t\t\t\ttitle: element.builder.name,\n\t\t\t\tsubtitle: subtitle\n\t\t\t});\n\t\t}\n\n\t\t$scope.isLoaded = function() {\n\t\t\treturn $scope.loaded;\n\t\t}\n\n\t\t$scope.getDesignValue = function(key) {\n\t\t\treturn magezonBuilderService.getDesignValue(element, key);\t\n\t\t}\n\n\t\t$timeout(function() {\n\t\t\t$scope.loaded = true;\n\t\t\tself.afterRender();\n\t\t}, 500);\n\n\t\tsetTimeout(function() {\n\t\t\twindow.mgzParallaxMouse(true);\n\t\t}, 3000);\n\t\t\n\t\treturn angular.copy(this);\n\t};\n\n\treturn baseCtrl;\n});","Magezon_Builder/js/js/builder/element/row.js":"","Magezon_Builder/js/ui/form/element/wysiwyg.js":"define([\n    'jquery',\n    'underscore',\n    'Magento_Ui/js/form/element/textarea'\n], function ($, _, Textarea) {\n    'use strict';\n\n    return Textarea.extend({\n\n        defaults: {\n            elementTmpl: 'Magezon_Builder/ui/form/element/builder'\n        },\n\n        initialize: function () {\n            this._super();\n\n            return this;\n        }\n    })\n});","Magezon_Builder/js/ui/form/element/builder.js":"define([\n    'jquery',\n    'underscore',\n    'Magento_Ui/js/form/element/textarea'\n], function ($, _, Textarea) {\n    'use strict';\n\n    return Textarea.extend({\n\n        defaults: {\n            elementTmpl: 'Magezon_Builder/ui/form/element/builder'\n        },\n\n        initialize: function () {\n            this._super();\n\n            return this;\n        }\n    })\n});","Magezon_Builder/js/ui/form/element/color-picker-palette.js":"/**\n * Copyright \u00a9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n/**\n * @api\n */\ndefine([], function () {\n    'use strict';\n\n    return [\n        [\n            'rgb(0,0,0)', 'rgb(52,52,52)', 'rgb(83,83,83)', 'rgb(135,135,135)', 'rgb(193,193,193)',\n            'rgb(234,234,234)', 'rgb(240,240,240)', 'rgb(255,255,255)'\n        ],\n        [\n            'rgb(252,0,9)', 'rgb(253,135,10)', 'rgb(255,255,13)', 'rgb(35,255,9)', 'rgb(33,255,255)',\n            'rgb(0,0,254)', 'rgb(132,0,254)', 'rgb(251,0,255)'\n        ],\n        [\n            'rgb(240,192,194)', 'rgb(251,223,194)', 'rgb(255,241,193)', 'rgb(210,230,201)',\n            'rgb(199,217,220)', 'rgb(197,219,240)', 'rgb(208,200,227)', 'rgb(229,199,212)'\n        ],\n        [\n            'rgb(228,133,135)', 'rgb(246,193,139)', 'rgb(254,225,136)', 'rgb(168,208,152)',\n            'rgb(146,184,190)', 'rgb(143,184,227)', 'rgb(165,148,204)', 'rgb(202,147,175)'\n        ],\n        [\n            'rgb(214,78,83)', 'rgb(243,163,88)', 'rgb(254,211,83)', 'rgb(130,187,106)',\n            'rgb(99,149,159)', 'rgb(93,150,211)', 'rgb(123,100,182)', 'rgb(180,100,142)'\n        ],\n        [\n            'rgb(190,0,5)', 'rgb(222,126,44)', 'rgb(236,183,39)', 'rgb(89,155,61)', 'rgb(55,110,123)',\n            'rgb(49,112,185)', 'rgb(83,55,150)', 'rgb(147,55,101)'\n        ],\n        [\n            'rgb(133,0,3)', 'rgb(163,74,10)', 'rgb(177,127,7)', 'rgb(45,101,23)', 'rgb(18,62,74)',\n            'rgb(14,62,129)', 'rgb(40,15,97)', 'rgb(95,16,55)'\n        ],\n        [\n            'rgb(81,0,1)', 'rgb(100,48,7)', 'rgb(107,78,3)', 'rgb(31,63,16)',\n            'rgb(13,39,46)', 'rgb(10,40,79)', 'rgb(24,12,59)', 'rgb(59,10,36)'\n        ]\n    ];\n});\n","Magezon_Builder/js/directives/modalElement.js":"define([\n\t'angular'\n], function (angular) {\n\n\tvar directive = function(magezonBuilderUrl) {\n\t\treturn {\n\t\t\tscope: {\n\t\t\t\telement: '=element'\n\t\t\t},\n\t\t\ttemplateUrl: function(elem) {\n\t\t\t\treturn magezonBuilderUrl.getTemplateUrl(elem, 'Magezon_Builder/js/templates/modal/elements_element.html')\n\t\t\t}\n\t\t}\n\t}\n\n\treturn directive;\n});","Magezon_Builder/js/directives/magezonBuilder.js":"define([\n\t'jquery',\n\t'waypoints'\n], function ($) {\n\n\tvar magezonBuilderDir = function(profileManager, $timeout, magezonBuilderUrl, $templateRequest) {\n\t\treturn {\n\t\t\tscope: {\n\t\t\t\tprofile: '='\n\t\t\t},\n    \t\treplace: true,\n\t\t\ttemplateUrl: function(elem) {\n\t\t\t\treturn magezonBuilderUrl.getTemplateUrl(elem, 'Magezon_Builder/js/templates/builder.html')\n\t\t\t},\n\t\t\tcontroller: function($rootScope, $scope, magezonBuilderModal, historyManager, magezonBuilderService, magezonBuilderConfig) {\n\t\t\t\t$rootScope.builderId = magezonBuilderService.getUniqueId();\n\n\t\t\t\t$scope.$on('openElementsModal', function(event) {\n\t\t\t\t\t$scope.openModal();\n\t\t\t\t});\n\n\t\t\t\t$scope.openModal = function() {\n\t\t\t\t\tmagezonBuilderModal.open('elements').result.then(function() {}, function() {\n\t\t\t\t\t\tmagezonBuilderModal.setElement(null);\n\t\t\t\t\t\tmagezonBuilderModal.setAction(null);\n\t\t\t\t\t\tmagezonBuilderModal.setData(null);\n\t\t\t\t\t\tmagezonBuilderModal.setOpenModal(null);\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\t$rootScope.$on('loadStyles', function(e, draggingElement) {\n\t\t\t\t\t$scope.loadStyles();\n\t\t\t\t});\n\n\t\t        $scope.loadStyles = function() {\n\t\t        \tif ($rootScope.builderConfig.loadStylesUrl && $rootScope.profile.elements && $rootScope.profile.elements.length) {\n\t\t        \t\tmagezonBuilderService.post($rootScope.builderConfig.loadStylesUrl, {\n\t\t        \t\t\tprofile: profileManager.toString()\n\t\t        \t\t}, true, function(res) {\n\t\t        \t\t\tif (res.message) {\n\t\t        \t\t\t\talert(res.message);\n\t\t        \t\t\t}\n\t\t        \t\t\tif (res.status) {\n\t\t        \t\t\t\t$('#' + $rootScope.builderConfig.targetId + '-styles').html(res.html);\n\t\t        \t\t\t}\n\t\t        \t\t});\n\t\t\t        }\n\t\t        }\n\n\t\t        $templateRequest(magezonBuilderUrl.getViewFileUrl('Magezon_Builder/js/templates/navigator/element/list.html')).then(function(html) {\n\t\t        \t$timeout(function() {\n\t\t\t\t\t\t$('.' + $rootScope.builderConfig.htmlId + '-spinner').remove();\n\t\t\t\t\t\tif (profileManager.getKey()) {\n\t\t\t\t\t\t\tif (magezonBuilderService.isJSON(profileManager.getContent())) {\n\t\t\t\t\t\t\t\t$('.' + $rootScope.rootId).addClass('mgz-deactive-builder');\n\t\t\t\t\t\t\t\t$('.' + $rootScope.rootId).removeClass('mgz-active-builder');\n\t\t\t\t\t\t\t\t$rootScope.$broadcast('importShortcode');\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tif (profileManager.getContent()) {\n\t\t\t\t\t\t\t\t\t$('.' + $rootScope.rootId).addClass('mgz-active-builder');\n\t\t\t\t\t\t\t\t\t$('.' + $rootScope.rootId).removeClass('mgz-deactive-builder');\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t$('.' + $rootScope.rootId).addClass('mgz-deactive-builder');\n\t\t\t\t\t\t\t\t\t$('.' + $rootScope.rootId).removeClass('mgz-active-builder');\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t$rootScope.$broadcast('importShortcode');\n\t\t\t\t\t\t}\n\t\t\t        }, 100);\n\t\t        });\n\n\t\t        $scope.$on('addElement', function(e, item) {\n\t\t        \tvar elem, action, openModal, data, type;\n\t\t        \tif (item && item.hasOwnProperty('elem')) elem = item.elem;\n\t\t        \tif (item && item.hasOwnProperty('action')) action = item.action;\n\t\t        \tif (item && item.hasOwnProperty('openModal')) openModal = item.openModal;\n\t\t        \tif (item && item.hasOwnProperty('data')) data = item.data;\n\t\t        \tif (item && item.hasOwnProperty('type')) type = item.type;\n\t\t        \tif (type) {\n\t\t        \t\t$rootScope.$broadcast('addNewElment', {\n\t\t\t\t\t\t\telem: elem,\n\t\t\t\t\t\t\ttype: type,\n\t\t\t\t\t\t\taction: 'append',\n\t\t\t\t\t\t\topenModal: openModal,\n\t\t\t\t\t\t\tdata: data\n\t\t\t\t\t\t});\n\t\t        \t} else {\n\t\t        \t\tif (elem) magezonBuilderModal.setElement(elem);\n\t\t\t\t\t\tif (action) magezonBuilderModal.setAction(action);\n\t\t\t\t\t\tif (openModal) magezonBuilderModal.setOpenModal(openModal);\n\t\t\t\t\t\tif (data) magezonBuilderModal.setData(data);\n\t\t\t\t\t\t$rootScope.$broadcast('openElementsModal');\n\t\t        \t}\n\t\t\t\t});\n\n\t\t\t\tvar loadAnimation = function() {\n\t\t\t\t\tif ($(\".mgz-animated:not(.mgz_start_animation)\").length) {\n\t\t\t\t\t\t$(\".mgz-animated:not(.mgz_start_animation)\").waypoint(function() {\n\t\t\t\t\t\t\tvar self = this;\n\t\t\t\t\t\t\tvar delayTime = 0;\n\t\t\t\t\t\t\tif ($(this.element).data('animation-delay')) {\n\t\t\t\t\t\t\t\tdelayTime = $(this.element).data('animation-delay');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tvar durationTime = 0;\n\t\t\t\t\t\t\tif ($(this.element).data('animation-duration')) {\n\t\t\t\t\t\t\t\tdurationTime = $(this.element).data('animation-duration');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (durationTime) $(self.element).css(\"animation-duration\", durationTime + 's');\n\n\t\t\t\t\t\t\tsetTimeout(function() {\n\t\t\t\t\t\t\t\t$(self.element).addClass(\"mgz_start_animation animated\")\n\t\t\t\t\t\t\t}, delayTime * 1000);\n\t\t\t\t\t\t}, {\n\t\t\t\t\t\t\toffset: \"85%\"\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t$scope.$on('editedElement', function(e, elem) {\n\t\t\t\t\tloadAnimation();\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t};\n\n\treturn magezonBuilderDir;\n});","Magezon_Builder/js/directives/navigator.js":"define([\n\t'angular'\n], function (angular) {\n\n\tvar directive = function(magezonBuilderUrl) {\n\t\treturn {\n\t\t\treplace: true,\n\t\t\tscope: {\n\t\t\t\telement: '='\n\t\t\t},\n\t\t\ttemplateUrl: function(elem) {\n\t\t\t\treturn magezonBuilderUrl.getTemplateUrl(elem, 'Magezon_Builder/js/templates/navigator_item.html')\n\t\t\t}\n\t\t}\n\t}\n\n\treturn directive;\n});","Magezon_Builder/js/directives/builderDirectiveList.js":"define([\n\t'jquery',\n\t'angular'\n], function ($, angular) {\n\n\tvar directive = function(magezonBuilderService, $compile) {\n\t\treturn {\n\t\t\tscope: {\n\t\t\t\tgroup: '@',\n\t\t\t\ttag: '@',\n\t\t\t\thtmlTag: '@',\n\t\t\t\telement: '=?'\n\t\t\t},\n\t\t\tlink: function(scope, element, attrs) {\n\t\t\t\tvar parent    = scope.$parent;\n\t\t\t\tvar htmlTag   = scope.htmlTag ? scope.htmlTag : 'div';\n\t\t\t\tvar deferreds = [];\n\t\t\t\tvar items     = {};\n\t\t\t\tangular.forEach(magezonBuilderService.directives, function(directive, index) {\n\t\t\t\t\tvar tags = directive.tag ? directive.tag : '';\n\t\t\t\t\tvar groups  = directive.group ? directive.group : '';\n\t\t\t\t\tif (angular.isString(tags)) tags = tags.split(',');\n\t\t\t\t\tif (angular.isObject(tags)) tags = Object.values(tags);\n\t\t\t\t\tif (angular.isString(groups)) groups = groups.split(',');\n\t\t\t\t\tif (angular.isObject(groups)) groups = Object.values(groups);\n\t\t\t\t\tif ($.inArray(scope.tag, tags) !== -1 || $.inArray(scope.group, groups) !== -1) {\n\t\t\t\t\t\tif (!directive.hasOwnProperty('disabled') || !directive.disabled) {\n\t\t\t\t\t\t\tvar additionalClasses = directive.additionalClasses ? ' ' + directive.additionalClasses : '';\n\t\t\t\t\t\t\tadditionalClasses += ' magezon-builder-directive-' + directive.type;\n\t\t\t\t\t\t\tif (directive.group) additionalClasses += ' magezon-builder-directive-group-' + directive.group;\n\t\t\t\t\t\t\tif (directive['element']) {\n\t\t\t\t\t\t\t\tvar deferred;\n\t\t\t\t\t\t\t\tdeferred = $.Deferred();\n\t\t\t\t\t\t\t\tdeferreds.push(deferred);\n\t\t\t\t\t\t\t\trequire([directive['element']], function(Directive) {\n\t\t\t\t\t\t\t\t\tvar html = '<' + htmlTag + ' class=\"magezon-builder-directive' + additionalClasses + '\" ' + (directive.templateUrl ? 'templateUrl=\"' + directive.templateUrl + '\"' : '') + ' element=\"element\" dynamic-directive element-name=\"mgz-directive-' + directive.type + '\" sort-order=\"' + (directive['sortOrder'] ? directive['sortOrder'] : 0) + '\"></' + htmlTag + '>';\n\t\t\t\t\t\t\t\t\titems[index] = html;\n\t\t\t\t\t\t\t\t\tdeferred.resolve();\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tvar html = '<' + htmlTag + ' class=\"magezon-builder-directive' + additionalClasses + '\" ' + (directive.templateUrl ? 'templateUrl=\"' + directive.templateUrl + '\"' : '') + ' element=\"element\" dynamic-directive element-name=\"mgz-directive-' + directive.type + '\" sort-order=\"' + (directive['sortOrder'] ? directive['sortOrder'] : 0) + '\"></' + htmlTag + '>';\n\t\t\t\t\t\t\t\titems[index] = html;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\t$.when.apply($, deferreds).done(function () {\n\t\t\t\t\tif (!Object.keys(items).length) element.remove();\n\t\t\t\t\tangular.forEach(items, function(item) {\n\t\t\t\t\t\tif (parent.$parent) {\n\t\t\t\t\t\t\tvar template = angular.element(item);\n\t\t\t\t\t\t\tvar newScope = parent.$parent.$new(true);\n\t\t\t\t\t\t\tnewScope.element = scope.element;\n\t\t\t\t\t\t\tvar html = $compile(template)(newScope);\n\t\t\t\t\t\t\telement.append(html);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}.bind(this));\n\t\t\t}\n\t\t}\n\t}\n\treturn directive;\n});","Magezon_Builder/js/directives/tooltip.js":"define([\n\t'jquery'\n\t], function ($) {\n\n\t\t// https://embed.plnkr.co/plunk/amkxZc\n\t\tvar directive = function($compile, $timeout) {\n\t\t\tvar template =  '<div class=\"mgz-tooltip tooltip {{placement}}\" ng-class=\"{ in: isOpen, fade: animation() }\"><div class=\"tooltip-arrow\"></div><div class=\"tooltip-inner\" ng-bind=\"tooltipTitle\"></div></div>';\n\n\t\t\treturn {\n\t\t\t\tscope: { tooltipTitle: '@mgzTooltip', placement: '@tooltipPlacement', animation: '&tooltipAnimation' },\n\t\t\t\tlink: function ( scope, element, attr ) {\n\t\t\t\t\tvar tooltip = $compile( template )( scope ), \n\t\t\t\t\ttransitionTimeout;\n\t\t\t\t\tvar hoverd;\n\n      \t\t\t\t// Calculate the current position and size of the directive element.\n      \t\t\t\tfunction getPosition() {\n      \t\t\t\t\treturn {\n      \t\t\t\t\t\twidth: element.prop( 'offsetWidth' ),\n      \t\t\t\t\t\theight: element.prop( 'offsetHeight' ),\n      \t\t\t\t\t\ttop: element.prop( 'offsetTop' ),\n      \t\t\t\t\t\tleft: element.prop( 'offsetLeft' )\n      \t\t\t\t\t};\n      \t\t\t\t}\n\n      \t\t\t\t// Show the tooltip popup element.\n      \t\t\t\tfunction show() {\n      \t\t\t\t\tvar position,\n      \t\t\t\t\tttWidth,\n      \t\t\t\t\tttHeight,\n      \t\t\t\t\tttPosition;\n\n        \t\t\t\t// If no placement was provided, default to 'top'.\n        \t\t\t\tscope.placement = scope.placement || 'top';\n\n\t\t\t\t        // If there is a pending remove transition, we must cancel it, lest the\n\t\t\t\t        // toolip be mysteriously removed.\n\t\t\t\t        if ( transitionTimeout ) $timeout.cancel( transitionTimeout );\n\n\t\t\t\t        // Lazy compile the tooltip element\n\t\t\t\t        // FIXME: For some reason, this does *not* always work correctly on the \n\t\t\t\t        // *first* run, but does so on all subsequent runs.\n\t\t\t\t        //tooltip = tooltip ||  $compile( template )( scope );\n\n        \t\t\t\t// Set the initial positioning.\n        \t\t\t\ttooltip.css({ top: 0, left: 0, display: 'block' });\n\n\t\t\t\t        // Now we add it to the DOM because need some info about it. But it's not \n\t\t\t\t        // visible yet anyway.\n\t\t\t\t        element.after( tooltip );\n\n\t\t\t\t        // Get the position of the directive element.\n\t\t\t\t        position = getPosition();\n\t\t\t\t        \n\t\t\t\t        // Get the height and width of the tooltip so we can center it.\n\t\t\t\t        ttWidth = tooltip.prop( 'offsetWidth' );\n\t\t\t\t        ttHeight = tooltip.prop( 'offsetHeight' );\n\n\t\t\t\t        // Calculate the tooltip's top and left coordinates to center it with\n\t\t\t\t        // this directive.\n\t\t\t\t        switch ( scope.placement ) {\n\t\t\t\t        \tcase 'right':\n\t\t\t\t        \tttPosition = {\n\t\t\t\t        \t\ttop: (position.top + position.height / 2 - ttHeight / 2) + 'px',\n\t\t\t\t        \t\tleft: (position.left + position.width) + 'px'\n\t\t\t\t        \t};\n\t\t\t\t        \tbreak;\n\t\t\t\t        \tcase 'bottom':\n\t\t\t\t        \tttPosition = {\n\t\t\t\t        \t\ttop: (position.top + position.height) + 'px',\n\t\t\t\t        \t\tleft: (position.left + position.width / 2 - ttWidth / 2) + 'px'\n\t\t\t\t        \t};\n\t\t\t\t        \tbreak;\n\t\t\t\t        \tcase 'left':\n\t\t\t\t        \tttPosition = {\n\t\t\t\t        \t\ttop: (position.top + position.height / 2 - ttHeight / 2) + 'px',\n\t\t\t\t        \t\tleft: (position.left - ttWidth) + 'px'\n\t\t\t\t        \t};\n\t\t\t\t        \tbreak;\n\t\t\t\t        \tdefault:\n\t\t\t\t        \tttPosition = {\n\t\t\t\t        \t\ttop: (position.top - ttHeight) + 'px',\n\t\t\t\t        \t\tleft: (position.left + position.width / 2 - ttWidth / 2) + 'px'\n\t\t\t\t        \t};\n\t\t\t\t        \tbreak;\n\t\t\t\t        }\n\n\t\t\t\t        // Now set the calculated positioning.\n\t\t\t\t        tooltip.css( ttPosition );\n\n\t\t\t\t        if (scope.placement == 'top' || scope.placement == 'bottom') {\n\t\t\t\t        \tvar arrowSel = tooltip.find('.tooltip-arrow');\n\t\t\t\t        \tarrowSel.css('left', (tooltip.width() - arrowSel.outerWidth(true)) / 2);\n\t\t\t\t    \t}\n\n\t\t\t\t        // And show the tooltip.\n\t\t\t\t        scope.isOpen = true;\n\t\t\t\t    }\n\n      \t\t\t\t// Hide the tooltip popup element.\n      \t\t\t\tfunction hide() {\n\t\t\t\t        transitionTimeout = $timeout( function () {\n\t\t\t\t        \tif (!hoverd) {\n\t\t\t\t        \t\tscope.isOpen = false;\n\t\t\t\t        \t\t//tooltip.remove();\n\t\t\t\t        \t}\n\t\t\t\t        }, 500);\n\t\t\t\t    }\n\n\t\t\t\t    \n\t\t\t\t    tooltip.hover(function() {\n\t\t\t\t    \tscope.$apply( show );\n\t\t\t\t    \thoverd = true;\n\t\t\t\t    }, function() {\n\t\t\t\t    \thoverd = false;\n\t\t\t\t    \tscope.$apply( hide );\n\t\t\t\t    })\n\n\t\t\t      \t// Register the event listeners.\n\t\t\t      \telement.bind( 'mouseenter', function() {\n\t\t\t      \t\t$('.mgz-tooltip').remove();\n\t\t\t      \t\tscope.$apply( show );\n\t\t\t      \t\thoverd = true;\n\t\t\t      \t});\n\t\t\t      \telement.bind( 'mouseleave', function() {\n\t\t\t      \t\thoverd = false;\n\t\t\t      \t\tscope.$apply( hide );\n\t\t\t      \t});\n\t\t\t      }\n\t\t\t  };\n\t\t\t}\n\n\t\t\treturn directive;\n\t\t});","Magezon_Builder/js/directives/elementIcon.js":"define([\n\t'jquery',\n\t'angular'\n], function ($, angular) {\n\n\tvar directive = function(magezonBuilderUrl) {\n\t\treturn {\n\t\t\treplace: true,\n\t\t\tscope: {\n\t\t\t\telement: '='\n\t\t\t},\n\t\t\ttemplateUrl: function(elem) {\n\t\t\t\treturn magezonBuilderUrl.getTemplateUrl(elem, 'Magezon_Builder/js/templates/builder/element_icon.html');\n\t\t\t}\n\t\t}\n\t}\n\n\treturn directive;\n});","Magezon_Builder/js/directives/elementResizable.js":"define([\n\t'jquery',\n\t'angular'\n], function ($, angular) {\n\n\tvar directive = function(magezonBuilderUrl) {\n\t\treturn {\n\t\t\treplace: true,\n\t\t\ttemplateUrl: function(elem) {\n\t\t\t\treturn magezonBuilderUrl.getViewFileUrl('Magezon_Builder/js/templates/directives/element-resizable.html');\n\t\t\t}\n\t\t}\n\t}\n\n\treturn directive;\n});","Magezon_Builder/js/directives/elementActions.js":"define([\n\t'jquery',\n\t'angular'\n], function ($, angular) {\n\n\tvar directive = function(magezonBuilderUrl) {\n\t\treturn {\n\t\t\treplace: true,\n\t\t\ttemplateUrl: function(elem) {\n\t\t\t\treturn magezonBuilderUrl.getViewFileUrl('Magezon_Builder/js/templates/directives/element-actions.html');\n\t\t\t}\n\t\t}\n\t}\n\n\treturn directive;\n});","Magezon_Builder/js/directives/resizable.js":"define([\n    'jquery'\n], function ($) {\n\n\tvar resizableDir = function(magezonBuilderService, $rootScope) {\n\t\treturn {\n            restrict: 'AE',\n            scope: {\n            \trElement: '=',\n                rDirections: '=',\n                rCenteredX: '=',\n                rCenteredY: '=',\n                rWidth: '=',\n                rHeight: '=',\n                rFlex: '=',\n                rGrabber: '@',\n                rDisabled: '@'\n            },\n            link: function(scope, element, attr) {\n                scope.sizes = [];\n                magezonBuilderService.getBuilderConfig('resizableSizes', function(resizableSizes) {\n                    scope.sizes = resizableSizes;\n                });\n\n            \tscope.currentSize = scope.sizes[scope.sizes.length-1];\n\n                var flexBasis = 'flexBasis' in document.documentElement.style ? 'flexBasis' :\n                    'webkitFlexBasis' in document.documentElement.style ? 'webkitFlexBasis' :\n                    'msFlexPreferredSize' in document.documentElement.style ? 'msFlexPreferredSize' : 'flexBasis';\n\n                // register watchers on width and height attributes if they are set\n                scope.$watch('rWidth', function(value){\n                    element[0].style.width = scope.rWidth + 'px';\n                });\n                scope.$watch('rHeight', function(value){\n                    element[0].style.height = scope.rHeight + 'px';\n                });\n\n                element.addClass('resizable');\n\n                var style = window.getComputedStyle(element[0], null),\n                    w,\n                    h,\n                    dir = scope.rDirections,\n                    vx = scope.rCenteredX ? 2 : 1, // if centered double velocity\n                    vy = scope.rCenteredY ? 2 : 1, // if centered double velocity\n                    inner = scope.rGrabber ? scope.rGrabber : '<span></span>',\n                    start,\n                    dragDir,\n                    axis,\n                    info = {};\n\n                var oldSize;\n\n                var updateInfo = function(e) {\n                    info.width = false; info.height = false;\n                    if(axis === 'x')\n                        info.width = parseInt(element[0].style[scope.rFlex ? flexBasis : 'width']);\n                    else\n                        info.height = parseInt(element[0].style[scope.rFlex ? flexBasis : 'height']);\n                    info.id = element[0].id;\n                    info.evt = e;\n\n                    var size = scope.currentSize;\n                    if (size && oldSize!=size) {\n                        magezonBuilderService.setResponiveValue(scope.rElement, 'size', size['value']);\n                        scope.$parent.$parent.$digest();\n                    \toldSize = size;\n                \t\telement[0].style['width'] = '';\n                \t\telement.parent().children('.mgz-column-resize').html(size.shortLabel);\n                        $rootScope.$broadcast('exportShortcode');\n\t                }\n                };\n\n                var getSize = function(percent) {\n\n                \tif (percent <= scope.sizes[0]['percent']) {\n                \t\treturn scope.sizes[0];\n                \t}\n\n                \tif (percent >= scope.sizes[scope.sizes.length-1]['percent']) {\n                \t\treturn scope.sizes[scope.sizes.length-1];\n                \t}\n\n                    scope.sizes.sort(function(a,b){\n                        return a['percent'] - b['percent'];\n                    });\n\n                    var newSizes = [];\n                    var size, a, b;\n                \tfor (var i = 0; i < scope.sizes.length; i++) {\n                        var row = scope.sizes[i];\n\n                        if (!size) {\n                            size = scope.sizes[i];\n                            continue;\n                        }\n\n                        a = Math.abs(percent - scope.sizes[i]['percent']);\n                        b = Math.abs(percent - size['percent']);\n\n                        if (a < b) {\n                            size = scope.sizes[i];\n                        }\n                \t}\n\n                    if (size) {\n                        return size;\n                    }\n\n                \treturn scope.currentSize;\n                }\n\n                var dragging = function(e) {\n                    var _width       = $(element).width();\n                    var _parentWidth = $(element).parents('.mgz-element-collection').eq(1).width() + 30;\n                    if (isNaN(_width) || !_width) return;\n                \tif (_width > _parentWidth) {\n\t\t\t\t\t\tpercent = 100;\n                \t} else {\n\t\t\t\t\t\tvar prop, offset = axis === 'x' ? start - e.clientX : start - e.clientY;\n\t\t\t\t\t\tvar percent      = (_width / _parentWidth) * 100;\n\t                }\n\t\t\t\t\tscope.currentSize = getSize(percent);\n                    switch(dragDir) {\n                        case 'right':\n                            prop = scope.rFlex ? flexBasis : 'width';\n                            element[0].style[prop] = (w - offset) + 'px';\n                            break;\n                        case 'left':\n                            prop = scope.rFlex ? flexBasis : 'width';\n                            element[0].style[prop] = w + (offset * vx) + 'px';\n                            break;\n                    }\n                    updateInfo(e);\n                };\n\n                var dragEnd = function(e) {\n                \telement.parent().removeClass('mgz-resizing');\n                \telement[0].style['width'] = '';\n                    updateInfo();\n                    document.removeEventListener('mouseup', dragEnd, false);\n                    document.removeEventListener('mousemove', dragging, false);\n                    element.removeClass('no-transition');\n                };\n                var dragStart = function(e, direction) {\n                    var width = element.closest('.mgz-element').outerWidth();\n\t\t\t\t\telement.parent().addClass('mgz-resizing');\n                    element.width(width);\n\t\t\t\t\tdragDir = direction;\n\t\t\t\t\taxis    = dragDir === 'left' || dragDir === 'right' ? 'x' : 'y';\n\t\t\t\t\tstart   = axis === 'x' ? e.clientX : e.clientY;\n                    w = parseInt(style.getPropertyValue('width'));\n                    h = parseInt(style.getPropertyValue('height'));\n\n                    //prevent transition while dragging\n                    element.addClass('no-transition');\n\n                    document.addEventListener('mouseup', dragEnd, false);\n                    document.addEventListener('mousemove', dragging, false);\n\n                    // Disable highlighting while dragging\n                    if(e.stopPropagation) e.stopPropagation();\n                    if(e.preventDefault) e.preventDefault();\n                    e.cancelBubble = true;\n                    e.returnValue = false;\n                    updateInfo(e);\n                };\n\n                dir.forEach(function (direction) {\n                    var grabber = document.createElement('div');\n\n                    // add class for styling purposes\n                    grabber.setAttribute('class', 'mgz-resize');\n                    grabber.innerHTML = inner;\n                    element[0].appendChild(grabber);\n                    grabber.ondragstart = function() { return false; };\n                    grabber.addEventListener('mousedown', function(e) {\n                        var disabled = (scope.rDisabled === 'true');\n                        if (!disabled && e.which === 1) {\n                            // left mouse click\n                            dragStart(e, direction);\n                        }\n                    }, false);\n\n                    if(!element.parent().children('.mgz-column-resize').length) {\n                    \telement.parent().append('<div class=\"mgz-column-resize\"></div>');\n                    }\n                });\n            }\n        };\n\t};\n\n\treturn resizableDir;\n});","Magezon_Builder/js/directives/navigatorProfile.js":"define([\n\t'jquery',\n\t'angular'\n], function ($, angular) {\n\n\tvar directive = function(magezonBuilderUrl) {\n\t\treturn {\n\t\t\treplace: true,\n\t\t\tscope: {\n\t\t\t\telement: '='\n\t\t\t},\n\t\t\ttemplateUrl: function(elem) {\n\t\t\t\treturn magezonBuilderUrl.getTemplateUrl(elem, 'Magezon_Builder/js/templates/navigator/element/profile.html');\n\t\t\t},\n\t\t\tcontroller: function($scope, $controller) {\n\t\t\t\tvar parent = $controller('baseController', {$scope: $scope});\n\t\t\t\tangular.extend(this, parent);\n\t\t\t\t$scope.listVisible = true;\n\t\t\t},\n\t\t\tcontrollerAs: 'mgz'\n\t\t}\n\t}\n\n\treturn directive;\n});","Magezon_Builder/js/directives/colorPicker.js":"define([\n\t'jquery',\n\t'angular',\n    'Magezon_Builder/js/ui/form/element/color-picker-palette'\n], function ($, angular, palette) {\n\n\tvar directive = function(magezonBuilderUrl, $timeout, $rootScope) {\n\t\treturn {\n\t\t\treplace: true,\n\t\t\trequire: \"ngModel\",\n\t\t\tscope: {\n\t\t\t\tconfig: '='\n\t\t\t},\n\t\t\ttemplateUrl: function(elem) {\n\t\t\t\treturn magezonBuilderUrl.getTemplateUrl(elem, 'Magezon_Builder/js/templates/directives/color.html');\n\t\t\t},\n\t\t\tlink: function(scope, element, attrs, ngModel) {\n\t\t\t\tvar initColorPicker = function() {\n\t\t\t\t\tvar config = {\n\t\t\t\t\t\tcontainerClassName: 'mgz-spectrum',\n\t\t                chooseText: 'Apply',\n\t\t                cancelText: 'Cancel',\n\t\t                maxSelectionSize: 8,\n\t\t                clickoutFiresChange: true,\n\t\t                allowEmpty: true,\n\t\t                localStorageKey: 'magezon.spectrum',\n\t\t                palette: palette,\n\t\t                showInput: true,\n\t\t                showInitial: false,\n\t\t                showPalette: true,\n\t\t                showAlpha: true,\n\t\t                showSelectionPalette: true,\n\t\t                preferredFormat: 'hex',\n\t\t                color: ngModel.$viewValue,\n\t\t                hide : function(c) {\n\t\t                \t$timeout(function() {\n\t\t                \t\tif (c) ngModel.$setViewValue(c.toString());\n\t\t                \t});\n\t\t                }\n\t\t            };\n\t\t            config = angular.extend(config, scope.config);\n\t\t            element.spectrum(config);\n\t\t        }\n\t            setTimeout(function() {\n\t            \tinitColorPicker();\n\t            });\n\t\t\t}\n\t\t}\n\t}\n\n\treturn directive;\n});","Magezon_Builder/js/modules/dynamicDirective.js":"// Source Blog: https://weblogs.thinktecture.com/pawel/2014/07/angularjs-dynamic-directives.html\n// https://jsfiddle.net/Pawel_Gerr/y22ZK/\n\n/**\n * Dynamic directive\n */\n(function(dynamicDirective) {\n    'use strict';\n\n    /**\n     * @param $scope\n     */\n    function Controller($scope) {\n\n    }\n\n    /**\n     * @constructor\n     * @param $compile\n     * @param {DynamicDirectiveManager} dynamicDirectiveManager\n     */\n    function Directive($compile, dynamicDirectiveManager) {\n\n        function safeApply(scope, fn) {\n            var phase = scope.$root.$$phase;\n\n            if (phase === '$apply' || phase === '$digest') {\n                if (fn && (typeof(fn) === 'function')) {\n                    fn();\n                }\n            } else {\n                scope.$apply(fn);\n            }\n        }\n\n        return {\n            restrict: 'AE',\n            require: 'dynamicDirective',\n            controller: Controller,\n            compile: function () {\n\n                var currentSuffix;\n                var ctx = new DummyDynamicDirectiveContext();\n\n                return {\n                    post: function (scope, element, attrs, controller) {\n\n                        controller.recompile = function (suffix) {\n                            if (currentSuffix === suffix) {\n                                return;\n                            }\n\n                            currentSuffix = suffix;\n\n                            // safeApply(scope, function () {\n                            //     ctx.recompileInnerElement(scope, element, currentSuffix, attrs);\n                            // });\n                        };\n\n                        ctx.register();\n                        //ctx.recompileInnerElement(scope, element, currentSuffix, attrs);\n\n                        scope.$on('$destroy', function () {\n                            ctx.unregister();\n                        });\n\n                        attrs.$observe('elementName', function (newName, oldName) {\n                            if (newName !== oldName) {\n                                ctx.unregister();\n                                ctx.destroyInnerElement(scope, element);\n\n                                if (newName) {\n                                    ctx = new DynamicDirectiveContext($compile, dynamicDirectiveManager, controller, newName, attrs);\n                                } else {\n                                    ctx = new DummyDynamicDirectiveContext();\n                                }\n\n                                ctx.register();\n                                ctx.recompileInnerElement(scope, element, currentSuffix, attrs);\n                            }\n                        });\n\n                    }\n                };\n            }\n        };\n    }\n\n    function DynamicDirectiveContext($compile, dynamicDirectiveManager, controller, elementName, attrs) {\n\n        if (!elementName) {\n            throw new Error('Element name must not null nor empty.');\n        }\n\n        var normalizedName = attrs.$normalize(elementName);\n        var currentInnerElement;\n\n        // taken from angular.js\n        var SNAKE_CASE_REGEXP = /[A-Z]/g;\n\n        function snakeCase(name, separator) {\n            separator = separator || '_';\n            return name.replace(SNAKE_CASE_REGEXP, function (letter, pos) {\n                return (pos ? separator : '') + letter.toLowerCase();\n            });\n        }\n\n        function createElement(currentSuffix) {\n\n            var name = elementName;\n\n            if (angular.isDefined(currentSuffix) && (currentSuffix !== null)) {\n                name = name + '-' + currentSuffix;\n            }\n\n            var directiveElem = angular.element(document.createElement(name));\n            var attrsToOmit = ['elementName', '$attr'];\n\n            angular.forEach(attrs, function (value, key) {\n                if (attrs.hasOwnProperty(key) && (attrsToOmit.indexOf(key) < 0) && (key.indexOf('$$') !== 0)) {\n                  if (snakeCase(key, '-')!='ng-repeat') {\n                    //directiveElem.attr(snakeCase(key, '-'), value);\n                  }\n                }\n            });\n            return directiveElem;\n        }\n\n        this.recompileInnerElement = function (scope, element, suffix, attrs) {\n            this.destroyInnerElement(scope, element);\n            currentInnerElement = createElement(suffix);\n            if (attrs.elementName == 'mgz-element-menu_item') {\n                element.replaceWith(currentInnerElement);\n            } else {\n                element.append(currentInnerElement);\n            }\n            $compile(currentInnerElement)(scope);\n        };\n\n        this.destroyInnerElement = function (scope, element) {\n            destroyInnerScope(scope);\n            //element.html(null);\n        };\n\n        function destroyInnerScope(scope) {\n            if (currentInnerElement) {\n                var innerScope = currentInnerElement.isolateScope() || currentInnerElement.scope();\n\n                if (innerScope && (innerScope !== scope)) {\n                  //innerScope.$destroy();\n                }\n            }\n        }\n\n        this.register = function () {\n            dynamicDirectiveManager.add(normalizedName, controller);\n        };\n\n        this.unregister = function () {\n            dynamicDirectiveManager.remove(normalizedName, controller);\n        };\n    }\n\n    function DummyDynamicDirectiveContext() {\n\n        this.register = function () {\n        };\n\n        this.unregister = function () {\n        };\n\n        this.recompileInnerElement = function () {\n        };\n\n        this.destroyInnerElement = function () {\n        };\n    }\n\n    /**\n     * @constructor\n     * @param $compileProvider\n     * @param {DynamicDirectiveSuffixGenerator} dynamicDirectiveSuffixGenerator\n     */\n    function DynamicDirectiveManager($compileProvider, dynamicDirectiveSuffixGenerator) {\n        if (!$compileProvider) {\n            throw new Error('Compile provider must not be null.');\n        }\n\n        var defaultSuffixGenerator = dynamicDirectiveSuffixGenerator;\n        var dynDirectives = {};\n        var registeredDirectives = {};\n        var regex = /^[a-z0-9]+$/;\n\n        /**\n         * Adds a dynamic directive controller instance to the manager.\n         * @param {string} normalizedElementName Pascal-cased name of the directive.\n         * @param {*} dynamicDirectiveController A dynamic directive controller.\n         */\n        this.add = function (normalizedElementName, dynamicDirectiveController) {\n            if (!normalizedElementName) {\n                throw new Error('Name must not be empty.');\n            }\n\n            if (!dynamicDirectiveController) {\n                throw new Error('Dynamic directive controller must not be null.');\n            }\n\n            var directives = dynDirectives[normalizedElementName];\n\n            if (!directives) {\n                directives = [];\n                dynDirectives[normalizedElementName] = directives;\n\n            } else if (directives.indexOf(dynamicDirectiveController) >= 0) {\n                return;\n            }\n\n            directives.push(dynamicDirectiveController);\n\n            var suffixes = registeredDirectives[normalizedElementName];\n            if (suffixes) {\n                dynamicDirectiveController.recompile(suffixes._last);\n            }\n        };\n\n        /**\n         * Removes a dynamic directive controller from the manager.\n         * @param {string} normalizedElementName Pascal-cased name of the directive.\n         * @param {*} dynamicDirectiveController A dynamic directive controller.\n         */\n        this.remove = function (normalizedElementName, dynamicDirectiveController) {\n            if (!normalizedElementName) {\n                throw new Error('Name must not be empty.');\n            }\n\n            if (!dynamicDirectiveController) {\n                throw new Error('Dynamic directive controller must not be null.');\n            }\n\n            var directives = dynDirectives[normalizedElementName];\n\n            if (directives) {\n                var index = directives.indexOf(dynamicDirectiveController);\n\n                if (index >= 0) {\n                    directives.splice(index, 1);\n                }\n            }\n\n        };\n\n        /**\n         * Registers a new directive.\n         * @param {string} normalizedName Pascal-cased directive name.\n         * @param {function} constructor Directive constructor\n         * @param {*} [suffix] If suffix equals false than no suffix is appended; if suffix is undefined than a random suffix is generated; otherwise the suffix is converted to string.\n         */\n        this.registerDirective = function (normalizedName, constructor, suffix) {\n            var nameWithSuffix = normalizedName;\n            suffix = prepareSuffix(normalizedName, suffix);\n\n            if (!angular.isUndefined(suffix)) {\n                nameWithSuffix = nameWithSuffix + suffix;\n            }\n\n            var registerDirective = true;\n            var suffixes = registeredDirectives[normalizedName];\n\n            if (!suffixes) {\n                suffixes = {};\n                registeredDirectives[normalizedName] = suffixes;\n            }\n\n            if (suffixes[suffix]) {\n                registerDirective = false;\n            } else {\n                suffixes[suffix] = true;\n            }\n\n            suffixes._last = suffix;\n\n            if (!$compileProvider) {\n                dynamicDirective.directive(nameWithSuffix, constructor);\n            } else {\n                if (registerDirective) {\n                    $compileProvider.directive.apply(null, [nameWithSuffix, constructor]);\n                }\n\n                recompile(normalizedName, suffix);\n            }\n        };\n\n        /**\n         * Changes the suffix generator.\n         * @param {{generateSuffix:Function}} suffixGenerator\n         */\n        this.changeSuffixGenerator = function (suffixGenerator) {\n            if (angular.isUndefined(suffixGenerator) || (suffixGenerator === null)) {\n                dynamicDirectiveSuffixGenerator = defaultSuffixGenerator;\n                return;\n            }\n\n            if (!angular.isFunction(suffixGenerator.generateSuffix)) {\n                throw new Error('Suffix generator must have a function \"generateSuffix\".');\n            }\n\n            dynamicDirectiveSuffixGenerator = suffixGenerator;\n        };\n\n        /**\n         * Changes the suffix of all dynamic directives.\n         * @param {*} [suffix] If suffix equals false than no suffix is appended; if suffix is undefined than a random suffix is generated; otherwise the suffix is converted to string.\n         */\n        this.changeSuffix = function (suffix) {\n\n            _.each(dynDirectives, function (directives, normalizedName) {\n\n                var preparedSuffix = prepareSuffix(normalizedName, suffix);\n                var suffixes = registeredDirectives[normalizedName];\n\n                if (suffixes) {\n                    suffixes._last = preparedSuffix;\n                }\n\n                angular.forEach(directives, function (dynamicDirective) {\n                    dynamicDirective.recompile(preparedSuffix);\n                });\n            });\n        };\n\n        function prepareSuffix(normalizedName, suffix) {\n            if (suffix === false) {\n                return undefined;\n            }\n\n            if (angular.isUndefined(suffix)) {\n                suffix = dynamicDirectiveSuffixGenerator.generateSuffix(normalizedName);\n            }\n\n            if (!regex.test(suffix)) {\n                throw new Error('Suffix must consist of lowercased characters (a-z) and number (0-9) only.');\n            } else {\n                suffix = suffix + '';\n                suffix = suffix.substr(0, 1).toUpperCase() + suffix.substr(1);\n            }\n\n            return suffix;\n        }\n\n        function recompile(normalizedElementName, suffix) {\n            var directives = dynDirectives[normalizedElementName];\n\n            if (directives) {\n                angular.forEach(directives, function (dynamicDirective) {\n                    dynamicDirective.recompile(suffix);\n                });\n            }\n        }\n    }\n\n    /**\n     * @constructor\n     */\n    function DynamicDirectiveManagerProvider() {\n        var $compileProvider;\n\n        this.setCompileProvider = function (compileProvider) {\n            if (!compileProvider) {\n                throw new Error('Compile provider must not be null.');\n            }\n\n            $compileProvider = compileProvider;\n        };\n\n        this.$get = function ($injector) {\n            return $injector.instantiate(DynamicDirectiveManager, { $compileProvider: $compileProvider });\n        };\n    }\n\n    /**\n     * @constructor\n     */\n    function DynamicDirectiveSuffixGenerator() {\n\n        /**\n         * @param {string} normalizedName\n         * @returns {string}\n         */\n        this.generateSuffix = function (normalizedName) {\n            return new Date().getTime() + '';\n        };\n\n    }\n\n    dynamicDirective.provider('dynamicDirectiveManager', DynamicDirectiveManagerProvider);\n    dynamicDirective.service('dynamicDirectiveSuffixGenerator', DynamicDirectiveSuffixGenerator);\n    dynamicDirective.directive('dynamicDirective', Directive);\n\n    /* grab the $compileProvider */\n    dynamicDirective\n        .config(function ($compileProvider, dynamicDirectiveManagerProvider) {\n            dynamicDirectiveManagerProvider.setCompileProvider($compileProvider);\n        })\n        .run(function (dynamicDirectiveManager) {\n            dynamicDirective.dynamicDirectiveManager = dynamicDirectiveManager;\n        });\n\n})(angular.module('dynamicDirective', []));\n","Magezon_Builder/js/modules/contentEditable.js":"define([\n\t'jquery',\n\t'angular'\n], function ($, angular) {\n\n\tvar directive = function($document, $rootScope, $timeout) {\n\t\treturn {\n\t\t\trequire: \"ngModel\",\n\t\t\tlink: function(scope, element, attrs, ngModel) {\n\t\t\t\telement.addClass('mgz-contenteditable-element');\n\t\t\t\telement.attr('contenteditable', true);\n\n\t\t\t\tvar type = attrs.type ? attrs.type : 'inline';\n\n\t\t\t\tfunction read() {\n\t\t\t\t\tngModel.$setViewValue(element.html());\n\t\t\t\t}\n\n\t\t\t\tfunction updatePlaceHolder() {\n\t\t\t\t\tif (element.data('placeholder') && !ngModel.$viewValue) {\n\t\t\t\t\t\telement.addClass('placeholder-text');\n\t\t\t\t\t} else {\n\t\t\t\t\t\telement.removeClass('placeholder-text');\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tngModel.$render = function() {\n\t\t\t\t\telement.html(ngModel.$viewValue || \"\");\n\t\t\t\t};\n\n\t\t\t\tscope.enableEditing = function() {\n\t\t\t\t\tif(scope.element) {\n\t\t\t\t\t\t$rootScope.$broadcast('disableEditing', scope.element);\n\t\t\t\t\t\t$timeout(function () {\n\t\t\t\t\t\t\tscope.element.builder.editing = true;\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\telement.bind(\"click\", function(e) {\n\t\t\t\t\tvar draggableParent = element.closest('.ui-draggable');\n\t\t\t\t\tif (draggableParent.length) {\n\t\t\t\t\t\tdraggableParent.draggable({ disabled: true });\n\t\t\t\t\t}\n\t\t\t\t\tscope.enableEditing();\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t});\n\n\t\t\t\telement.bind(\"focus\", function(e) {\n\t\t\t\t\telement.trigger('click');\n\t\t\t\t\telement.trigger('mouseenter');\n\t\t\t\t});\n\n\t\t\t\telement.bind(\"blur\", function(e) {\n\t\t\t\t\tvar draggableParent = element.closest('.ui-draggable');\n\t\t\t\t\tif (draggableParent.length) {\n\t\t\t\t\t\tdraggableParent.draggable({ disabled: false });\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\telement.bind(\"blur keyup keypress change\", function() {\n\t\t\t\t\tupdatePlaceHolder();\n\t\t\t\t\tscope.$apply(read);\n\t\t\t\t});\n\n\t\t\t\telement.bind(\"keydown keypress\", function (e) {\n\t\t\t\t\tif(e.which === 13 && type == 'inline') {\n\t                    element[0].blur();\n\t                    e.preventDefault();\n\t                }\n\t\t\t\t});\n\n\t\t\t\tscope.$on('disableEditing', function(e, elem) {\n\t\t\t\t\tif (scope.element) {\n\t\t\t\t\t\tif (elem.id !== scope.element.id) {\n\t\t\t\t\t\t\tscope.element.builder.editing = false;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\n\treturn directive;\n});","Magezon_Builder/js/modules/outside-click.js":"require(['jquery'], function($) {\n\n// https://github.com/abrkt/ng-outside-click\n(function(){\n  'use strict';\n\n  var contains = function (parent, child) {\n    var node = child;\n    while ((node = node.parentNode) !== null && node !== parent);\n    return node !== null;\n  };\n\n  angular.module('ngOutsideClick', []).directive('outsideClick', ['$document', function ($document) {\n    return {\n      restrict: 'A',\n      link: function ($scope, $element, $attrs) {\n        var scopeExpression = $attrs.outsideClick;\n        var onDocumentClick = function (event) {\n          if ($element[0] !== event.target && !contains($element[0], event.target) && !$(event.target).parents('.mgz-element-controls').length) {\n            $scope.$apply(scopeExpression);\n          }\n        };\n        $document.on('click', onDocumentClick);\n        $element.on('$destroy', function () {\n          $document.off('click', onDocumentClick);\n        });\n      }\n    };\n  }]);\n\n})();\n\n});","Magezon_Builder/js/modules/inlineEditor.js":"define([\n\t'jquery',\n\t'angular'\n], function ($, angular) {\n\n\tvar directive = function($rootScope, magezonBuilderEditor, magezonBuilderService, magezonBuilderFilter, $document, $timeout) {\n\t\treturn {\n\t\t\trequire: \"ngModel\",\n\t\t\tlink: function(scope, element, attrs, ngModel) {\n\t\t\t\telement.addClass('mgz-inline-editor');\n\t\t\t\telement.attr('contenteditable', true);\n\n\t\t\t\tscope.id = magezonBuilderService.uniqueid();\n\t\t\t\tscope.wysiwyg = Object.extend(angular.copy($rootScope.builderConfig.wysiwyg), scope.wysiwyg);\n\t\t\t\tscope.wysiwyg['inline'] = true;\n\t\t\t\tscope.wysiwyg['fixed_toolbar_container'] = '.' + scope.element.id + ' .mgz-element-inner';\n\t\t\t\telement.attr('id', scope.id);\n\n\t\t\t\tngModel.$render = function() {\n\t\t\t\t\telement.html(magezonBuilderFilter.encodeContent(ngModel.$viewValue) || \"\");\n\t\t\t\t};\n\n\t\t\t\telement.bind(\"click\", function(e) {\n\t\t\t\t\t$rootScope.$broadcast('disableEditing', scope.element);\n\t\t\t\t\t$timeout(function () {\n\t\t\t\t\t\tscope.element.builder.editing = true;\n\t\t\t\t\t}, 1000);\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t});\n\n\t\t\t\tif ($rootScope.builderConfig.wysiwyg.tinymce4) {\n\t\t\t\t\telement.on('mouseenter', function() {\n\t\t\t\t\t\tmagezonBuilderEditor.initTinymce(scope.id, scope.wysiwyg, function(value) {\n\t\t\t\t\t\t\tngModel.$setViewValue(magezonBuilderFilter.decodeContent(value));\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\telement.bind(\"blur\", function(e) {\n\t\t\t\t\tif (scope.element) {\n\t\t\t\t\t\t$timeout(function () {\n\t\t\t\t\t\t\tscope.element.builder.editing = false;\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tscope.$on('disableEditing', function(e, elem) {\n\t\t\t\t\tif (scope.element) {\n\t\t\t\t\t\tif (elem.id !== scope.element.id) {\n\t\t\t\t\t\t\tscope.element.builder.editing = false;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\n\treturn directive;\n});","Magezon_Builder/js/modules/afterRender.js":"define([\n\t'jquery',\n\t'angular'\n], function ($, angular) {\n\n\tvar directive = function($timeout) {\n\t\treturn {\n\t\t\treplace: true,\n\t\t\trestrict: 'A',\n\t        terminal: true,\n\t        transclude: false,\n\t        link: function (scope, element, attrs) {\n\t            $timeout(function() {\n\t            \tscope.$eval(attrs.afterRender);\n\t            }, 100);\n\t        }\n\t\t}\n\t}\n\n\treturn directive;\n});","Magezon_Builder/js/jarallax/jarallax-video.js":"/*!\n * Name    : Video Background Extension for Jarallax\n * Version : 1.0.1\n * Author  : nK <https://nkdev.info>\n * GitHub  : https://github.com/nk-o/jarallax\n */\n!function(o) {\n    var i = {};\n    function n(e) {\n        if (i[e])\n            return i[e].exports;\n        var t = i[e] = {\n            i: e,\n            l: !1,\n            exports: {}\n        };\n        return o[e].call(t.exports, t, t.exports, n),\n        t.l = !0,\n        t.exports\n    }\n    n.m = o,\n    n.c = i,\n    n.d = function(e, t, o) {\n        n.o(e, t) || Object.defineProperty(e, t, {\n            enumerable: !0,\n            get: o\n        })\n    }\n    ,\n    n.r = function(e) {\n        \"undefined\" != typeof Symbol && Symbol.toStringTag && Object.defineProperty(e, Symbol.toStringTag, {\n            value: \"Module\"\n        }),\n        Object.defineProperty(e, \"__esModule\", {\n            value: !0\n        })\n    }\n    ,\n    n.t = function(t, e) {\n        if (1 & e && (t = n(t)),\n        8 & e)\n            return t;\n        if (4 & e && \"object\" == typeof t && t && t.__esModule)\n            return t;\n        var o = Object.create(null);\n        if (n.r(o),\n        Object.defineProperty(o, \"default\", {\n            enumerable: !0,\n            value: t\n        }),\n        2 & e && \"string\" != typeof t)\n            for (var i in t)\n                n.d(o, i, function(e) {\n                    return t[e]\n                }\n                .bind(null, i));\n        return o\n    }\n    ,\n    n.n = function(e) {\n        var t = e && e.__esModule ? function() {\n            return e.default\n        }\n        : function() {\n            return e\n        }\n        ;\n        return n.d(t, \"a\", t),\n        t\n    }\n    ,\n    n.o = function(e, t) {\n        return Object.prototype.hasOwnProperty.call(e, t)\n    }\n    ,\n    n.p = \"\",\n    n(n.s = 6)\n}([, , function(e, t, o) {\n    \"use strict\";\n    e.exports = function(e) {\n        \"complete\" === document.readyState || \"interactive\" === document.readyState ? e.call() : document.attachEvent ? document.attachEvent(\"onreadystatechange\", function() {\n            \"interactive\" === document.readyState && e.call()\n        }) : document.addEventListener && document.addEventListener(\"DOMContentLoaded\", e)\n    }\n}\n, , function(o, e, t) {\n    \"use strict\";\n    (function(e) {\n        var t;\n        t = \"undefined\" != typeof window ? window : void 0 !== e ? e : \"undefined\" != typeof self ? self : {},\n        o.exports = t\n    }\n    ).call(this, t(5))\n}\n, function(e, t, o) {\n    \"use strict\";\n    var i, n = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function(e) {\n        return typeof e\n    }\n    : function(e) {\n        return e && \"function\" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? \"symbol\" : typeof e\n    }\n    ;\n    i = function() {\n        return this\n    }();\n    try {\n        i = i || Function(\"return this\")() || (0,\n        eval)(\"this\")\n    } catch (e) {\n        \"object\" === (\"undefined\" == typeof window ? \"undefined\" : n(window)) && (i = window)\n    }\n    e.exports = i\n}\n, function(e, t, o) {\n    e.exports = o(7)\n}\n, function(e, t, o) {\n    \"use strict\";\n    var i = l(o(8))\n      , n = l(o(4))\n      , a = l(o(2))\n      , r = l(o(10));\n    function l(e) {\n        return e && e.__esModule ? e : {\n            default: e\n        }\n    }\n    n.default.VideoWorker = n.default.VideoWorker || i.default,\n    (0,\n    r.default)(),\n    (0,\n    a.default)(function() {\n        \"undefined\" != typeof jarallax && jarallax(document.querySelectorAll(\"[data-jarallax-video]\"))\n    })\n}\n, function(e, t, o) {\n    \"use strict\";\n    e.exports = o(9)\n}\n, function(e, t, o) {\n    \"use strict\";\n    Object.defineProperty(t, \"__esModule\", {\n        value: !0\n    });\n    var n = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function(e) {\n        return typeof e\n    }\n    : function(e) {\n        return e && \"function\" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? \"symbol\" : typeof e\n    }\n      , a = function() {\n        function i(e, t) {\n            for (var o = 0; o < t.length; o++) {\n                var i = t[o];\n                i.enumerable = i.enumerable || !1,\n                i.configurable = !0,\n                \"value\"in i && (i.writable = !0),\n                Object.defineProperty(e, i.key, i)\n            }\n        }\n        return function(e, t, o) {\n            return t && i(e.prototype, t),\n            o && i(e, o),\n            e\n        }\n    }();\n    function i() {\n        this._done = [],\n        this._fail = []\n    }\n    i.prototype = {\n        execute: function(e, t) {\n            var o = e.length;\n            for (t = Array.prototype.slice.call(t); o--; )\n                e[o].apply(null, t)\n        },\n        resolve: function() {\n            this.execute(this._done, arguments)\n        },\n        reject: function() {\n            this.execute(this._fail, arguments)\n        },\n        done: function(e) {\n            this._done.push(e)\n        },\n        fail: function(e) {\n            this._fail.push(e)\n        }\n    };\n    var r = 0\n      , l = 0\n      , u = 0\n      , p = 0\n      , d = 0\n      , s = new i\n      , y = new i\n      , c = function() {\n        function i(e, t) {\n            !function(e, t) {\n                if (!(e instanceof t))\n                    throw new TypeError(\"Cannot call a class as a function\")\n            }(this, i);\n            var o = this;\n            o.url = e,\n            o.options_default = {\n                autoplay: !1,\n                loop: !1,\n                mute: !1,\n                volume: 100,\n                showContols: !0,\n                startTime: 0,\n                endTime: 0\n            },\n            o.options = o.extend({}, o.options_default, t),\n            o.videoID = o.parseURL(e),\n            o.videoID && (o.ID = r++,\n            o.loadAPI(),\n            o.init())\n        }\n        return a(i, [{\n            key: \"extend\",\n            value: function(o) {\n                var i = arguments;\n                return o = o || {},\n                Object.keys(arguments).forEach(function(t) {\n                    i[t] && Object.keys(i[t]).forEach(function(e) {\n                        o[e] = i[t][e]\n                    })\n                }),\n                o\n            }\n        }, {\n            key: \"parseURL\",\n            value: function(e) {\n                var t, o, i, n, a, r = !(!(t = e.match(/.*(?:youtu.be\\/|v\\/|u\\/\\w\\/|embed\\/|watch\\?v=)([^#\\&\\?]*).*/)) || 11 !== t[1].length) && t[1], l = !(!(o = e.match(/https?:\\/\\/(?:www\\.|player\\.)?vimeo.com\\/(?:channels\\/(?:\\w+\\/)?|groups\\/([^\\/]*)\\/videos\\/|album\\/(\\d+)\\/video\\/|video\\/|)(\\d+)(?:$|\\/|\\?)/)) || !o[3]) && o[3], u = (i = e.split(/,(?=mp4\\:|webm\\:|ogv\\:|ogg\\:)/),\n                n = {},\n                a = 0,\n                i.forEach(function(e) {\n                    var t = e.match(/^(mp4|webm|ogv|ogg)\\:(.*)/);\n                    t && t[1] && t[2] && (n[\"ogv\" === t[1] ? \"ogg\" : t[1]] = t[2],\n                    a = 1)\n                }),\n                !!a && n);\n                return r ? (this.type = \"youtube\",\n                r) : l ? (this.type = \"vimeo\",\n                l) : !!u && (this.type = \"local\",\n                u)\n            }\n        }, {\n            key: \"isValid\",\n            value: function() {\n                return !!this.videoID\n            }\n        }, {\n            key: \"on\",\n            value: function(e, t) {\n                this.userEventsList = this.userEventsList || [],\n                (this.userEventsList[e] || (this.userEventsList[e] = [])).push(t)\n            }\n        }, {\n            key: \"off\",\n            value: function(o, i) {\n                var n = this;\n                this.userEventsList && this.userEventsList[o] && (i ? this.userEventsList[o].forEach(function(e, t) {\n                    e === i && (n.userEventsList[o][t] = !1)\n                }) : delete this.userEventsList[o])\n            }\n        }, {\n            key: \"fire\",\n            value: function(e) {\n                var t = this\n                  , o = [].slice.call(arguments, 1);\n                this.userEventsList && void 0 !== this.userEventsList[e] && this.userEventsList[e].forEach(function(e) {\n                    e && e.apply(t, o)\n                })\n            }\n        }, {\n            key: \"play\",\n            value: function(e) {\n                var t = this;\n                t.player && (\"youtube\" === t.type && t.player.playVideo && (void 0 !== e && t.player.seekTo(e || 0),\n                YT.PlayerState.PLAYING !== t.player.getPlayerState() && t.player.playVideo()),\n                \"vimeo\" === t.type && (void 0 !== e && t.player.setCurrentTime(e),\n                t.player.getPaused().then(function(e) {\n                    e && t.player.play()\n                })),\n                \"local\" === t.type && (void 0 !== e && (t.player.currentTime = e),\n                t.player.paused && t.player.play()))\n            }\n        }, {\n            key: \"pause\",\n            value: function() {\n                var t = this;\n                t.player && (\"youtube\" === t.type && t.player.pauseVideo && YT.PlayerState.PLAYING === t.player.getPlayerState() && t.player.pauseVideo(),\n                \"vimeo\" === t.type && t.player.getPaused().then(function(e) {\n                    e || t.player.pause()\n                }),\n                \"local\" === t.type && (t.player.paused || t.player.pause()))\n            }\n        }, {\n            key: \"mute\",\n            value: function() {\n                var e = this;\n                e.player && (\"youtube\" === e.type && e.player.mute && e.player.mute(),\n                \"vimeo\" === e.type && e.player.setVolume && e.player.setVolume(0),\n                \"local\" === e.type && (e.$video.muted = !0))\n            }\n        }, {\n            key: \"unmute\",\n            value: function() {\n                var e = this;\n                e.player && (\"youtube\" === e.type && e.player.mute && e.player.unMute(),\n                \"vimeo\" === e.type && e.player.setVolume && e.player.setVolume(e.options.volume),\n                \"local\" === e.type && (e.$video.muted = !1))\n            }\n        }, {\n            key: \"setVolume\",\n            value: function() {\n                var e = 0 < arguments.length && void 0 !== arguments[0] && arguments[0]\n                  , t = this;\n                t.player && e && (\"youtube\" === t.type && t.player.setVolume && t.player.setVolume(e),\n                \"vimeo\" === t.type && t.player.setVolume && t.player.setVolume(e),\n                \"local\" === t.type && (t.$video.volume = e / 100))\n            }\n        }, {\n            key: \"getVolume\",\n            value: function(t) {\n                var e = this;\n                e.player ? (\"youtube\" === e.type && e.player.getVolume && t(e.player.getVolume()),\n                \"vimeo\" === e.type && e.player.getVolume && e.player.getVolume().then(function(e) {\n                    t(e)\n                }),\n                \"local\" === e.type && t(100 * e.$video.volume)) : t(!1)\n            }\n        }, {\n            key: \"getMuted\",\n            value: function(t) {\n                var e = this;\n                e.player ? (\"youtube\" === e.type && e.player.isMuted && t(e.player.isMuted()),\n                \"vimeo\" === e.type && e.player.getVolume && e.player.getVolume().then(function(e) {\n                    t(!!e)\n                }),\n                \"local\" === e.type && t(e.$video.muted)) : t(null)\n            }\n        }, {\n            key: \"getImageURL\",\n            value: function(t) {\n                var o = this;\n                if (o.videoImage)\n                    t(o.videoImage);\n                else {\n                    if (\"youtube\" === o.type) {\n                        var e = [\"maxresdefault\", \"sddefault\", \"hqdefault\", \"0\"]\n                          , i = 0\n                          , n = new Image;\n                        n.onload = function() {\n                            120 !== (this.naturalWidth || this.width) || i === e.length - 1 ? (o.videoImage = \"https://img.youtube.com/vi/\" + o.videoID + \"/\" + e[i] + \".jpg\",\n                            t(o.videoImage)) : (i++,\n                            this.src = \"https://img.youtube.com/vi/\" + o.videoID + \"/\" + e[i] + \".jpg\")\n                        }\n                        ,\n                        n.src = \"https://img.youtube.com/vi/\" + o.videoID + \"/\" + e[i] + \".jpg\"\n                    }\n                    if (\"vimeo\" === o.type) {\n                        var a = new XMLHttpRequest;\n                        a.open(\"GET\", \"https://vimeo.com/api/v2/video/\" + o.videoID + \".json\", !0),\n                        a.onreadystatechange = function() {\n                            if (4 === this.readyState && 200 <= this.status && this.status < 400) {\n                                var e = JSON.parse(this.responseText);\n                                o.videoImage = e[0].thumbnail_large,\n                                t(o.videoImage)\n                            }\n                        }\n                        ,\n                        a.send(),\n                        a = null\n                    }\n                }\n            }\n        }, {\n            key: \"getIframe\",\n            value: function(e) {\n                this.getVideo(e)\n            }\n        }, {\n            key: \"getVideo\",\n            value: function(u) {\n                var p = this;\n                p.$video ? u(p.$video) : p.onAPIready(function() {\n                    var e = void 0;\n                    if (p.$video || ((e = document.createElement(\"div\")).style.display = \"none\"),\n                    \"youtube\" === p.type) {\n                        p.playerOptions = {},\n                        p.playerOptions.videoId = p.videoID,\n                        p.playerOptions.playerVars = {\n                            autohide: 1,\n                            rel: 0,\n                            autoplay: 0,\n                            playsinline: 1\n                        },\n                        p.options.showContols || (p.playerOptions.playerVars.iv_load_policy = 3,\n                        p.playerOptions.playerVars.modestbranding = 1,\n                        p.playerOptions.playerVars.controls = 0,\n                        p.playerOptions.playerVars.showinfo = 0,\n                        p.playerOptions.playerVars.disablekb = 1);\n                        var t = void 0\n                          , o = void 0;\n                        p.playerOptions.events = {\n                            onReady: function(t) {\n                                if (p.options.mute ? t.target.mute() : p.options.volume && t.target.setVolume(p.options.volume),\n                                p.options.autoplay && p.play(p.options.startTime),\n                                p.fire(\"ready\", t),\n                                p.options.loop && !p.options.endTime) {\n                                    p.options.endTime = p.player.getDuration() - .1\n                                }\n                                setInterval(function() {\n                                    p.getVolume(function(e) {\n                                        p.options.volume !== e && (p.options.volume = e,\n                                        p.fire(\"volumechange\", t))\n                                    })\n                                }, 150)\n                            },\n                            onStateChange: function(e) {\n                                p.options.loop && e.data === YT.PlayerState.ENDED && p.play(p.options.startTime),\n                                t || e.data !== YT.PlayerState.PLAYING || (t = 1,\n                                p.fire(\"started\", e)),\n                                e.data === YT.PlayerState.PLAYING && p.fire(\"play\", e),\n                                e.data === YT.PlayerState.PAUSED && p.fire(\"pause\", e),\n                                e.data === YT.PlayerState.ENDED && p.fire(\"ended\", e),\n                                e.data === YT.PlayerState.PLAYING ? o = setInterval(function() {\n                                    p.fire(\"timeupdate\", e),\n                                    p.options.endTime && p.player.getCurrentTime() >= p.options.endTime && (p.options.loop ? p.play(p.options.startTime) : p.pause())\n                                }, 150) : clearInterval(o)\n                            }\n                        };\n                        var i = !p.$video;\n                        if (i) {\n                            var n = document.createElement(\"div\");\n                            n.setAttribute(\"id\", p.playerID),\n                            e.appendChild(n),\n                            document.body.appendChild(e)\n                        }\n                        p.player = p.player || new window.YT.Player(p.playerID,p.playerOptions),\n                        i && (p.$video = document.getElementById(p.playerID),\n                        p.videoWidth = parseInt(p.$video.getAttribute(\"width\"), 10) || 1280,\n                        p.videoHeight = parseInt(p.$video.getAttribute(\"height\"), 10) || 720)\n                    }\n                    if (\"vimeo\" === p.type) {\n                        if (p.playerOptions = {\n                            id: p.videoID,\n                            autopause: 0,\n                            transparent: 0,\n                            autoplay: p.options.autoplay ? 1 : 0,\n                            loop: p.options.loop ? 1 : 0,\n                            muted: p.options.mute ? 1 : 0\n                        },\n                        p.options.volume && (p.playerOptions.volume = p.options.volume),\n                        p.options.showContols || (p.playerOptions.badge = 0,\n                        p.playerOptions.byline = 0,\n                        p.playerOptions.portrait = 0,\n                        p.playerOptions.title = 0),\n                        !p.$video) {\n                            var a = \"\";\n                            Object.keys(p.playerOptions).forEach(function(e) {\n                                \"\" !== a && (a += \"&\"),\n                                a += e + \"=\" + encodeURIComponent(p.playerOptions[e])\n                            }),\n                            p.$video = document.createElement(\"iframe\"),\n                            p.$video.setAttribute(\"id\", p.playerID),\n                            p.$video.setAttribute(\"src\", \"https://player.vimeo.com/video/\" + p.videoID + \"?\" + a),\n                            p.$video.setAttribute(\"frameborder\", \"0\"),\n                            p.$video.setAttribute(\"mozallowfullscreen\", \"\"),\n                            p.$video.setAttribute(\"allowfullscreen\", \"\"),\n                            e.appendChild(p.$video),\n                            document.body.appendChild(e)\n                        }\n                        p.player = p.player || new Vimeo(p.$video,p.playerOptions),\n                        p.options.startTime && p.options.autoplay && p.player.setCurrentTime(p.options.startTime),\n                        p.player.getVideoWidth().then(function(e) {\n                            p.videoWidth = e || 1280\n                        }),\n                        p.player.getVideoHeight().then(function(e) {\n                            p.videoHeight = e || 720\n                        });\n                        var r = void 0;\n                        p.player.on(\"timeupdate\", function(e) {\n                            r || (p.fire(\"started\", e),\n                            r = 1),\n                            p.fire(\"timeupdate\", e),\n                            p.options.endTime && p.options.endTime && e.seconds >= p.options.endTime && (p.options.loop ? p.play(p.options.startTime) : p.pause())\n                        }),\n                        p.player.on(\"play\", function(e) {\n                            p.fire(\"play\", e),\n                            p.options.startTime && 0 === e.seconds && p.play(p.options.startTime)\n                        }),\n                        p.player.on(\"pause\", function(e) {\n                            p.fire(\"pause\", e)\n                        }),\n                        p.player.on(\"ended\", function(e) {\n                            p.fire(\"ended\", e)\n                        }),\n                        p.player.on(\"loaded\", function(e) {\n                            p.fire(\"ready\", e)\n                        }),\n                        p.player.on(\"volumechange\", function(e) {\n                            p.fire(\"volumechange\", e)\n                        })\n                    }\n                    if (\"local\" === p.type) {\n                        p.$video || (p.$video = document.createElement(\"video\"),\n                        p.options.showContols && (p.$video.controls = !0),\n                        p.options.mute ? p.$video.muted = !0 : p.$video.volume && (p.$video.volume = p.options.volume / 100),\n                        p.options.loop && (p.$video.loop = !0),\n                        p.$video.setAttribute(\"playsinline\", \"\"),\n                        p.$video.setAttribute(\"webkit-playsinline\", \"\"),\n                        p.$video.setAttribute(\"id\", p.playerID),\n                        e.appendChild(p.$video),\n                        document.body.appendChild(e),\n                        Object.keys(p.videoID).forEach(function(e) {\n                            var t, o, i, n;\n                            t = p.$video,\n                            o = p.videoID[e],\n                            i = \"video/\" + e,\n                            (n = document.createElement(\"source\")).src = o,\n                            n.type = i,\n                            t.appendChild(n)\n                        })),\n                        p.player = p.player || p.$video;\n                        var l = void 0;\n                        p.player.addEventListener(\"playing\", function(e) {\n                            l || p.fire(\"started\", e),\n                            l = 1\n                        }),\n                        p.player.addEventListener(\"timeupdate\", function(e) {\n                            p.fire(\"timeupdate\", e),\n                            p.options.endTime && p.options.endTime && this.currentTime >= p.options.endTime && (p.options.loop ? p.play(p.options.startTime) : p.pause())\n                        }),\n                        p.player.addEventListener(\"play\", function(e) {\n                            p.fire(\"play\", e)\n                        }),\n                        p.player.addEventListener(\"pause\", function(e) {\n                            p.fire(\"pause\", e)\n                        }),\n                        p.player.addEventListener(\"ended\", function(e) {\n                            p.fire(\"ended\", e)\n                        }),\n                        p.player.addEventListener(\"loadedmetadata\", function() {\n                            p.videoWidth = this.videoWidth || 1280,\n                            p.videoHeight = this.videoHeight || 720,\n                            p.fire(\"ready\"),\n                            p.options.autoplay && p.play(p.options.startTime)\n                        }),\n                        p.player.addEventListener(\"volumechange\", function(e) {\n                            p.getVolume(function(e) {\n                                p.options.volume = e\n                            }),\n                            p.fire(\"volumechange\", e)\n                        })\n                    }\n                    u(p.$video)\n                })\n            }\n        }, {\n            key: \"init\",\n            value: function() {\n                this.playerID = \"VideoWorker-\" + this.ID\n            }\n        }, {\n            key: \"loadAPI\",\n            value: function() {\n            \tif (this.type == \"vimeo\") {\n\t            \trequire(['https://player.vimeo.com/api/player.js'], function(Vimeo) {\n\t\t                if (!l || !u) {\n\t\t                \twindow.Vimeo = Vimeo;\n\t\t                }\n\t            \t});\n            \t} else {\n            \t\tif (!l || !u) {\n\t                    var e = \"\";\n\t                    if (\"youtube\" !== this.type || l || (l = 1,\n\t                    e = \"https://www.youtube.com/iframe_api\"),\n\t                    \"vimeo\" !== this.type || u || (u = 1,\n\t                    e = \"https://player.vimeo.com/api/player.js\"),\n\t                    e) {\n\t                        var t = document.createElement(\"script\")\n\t                          , o = document.getElementsByTagName(\"head\")[0];\n\t                        t.src = e,\n\t                        o.appendChild(t),\n\t                        t = o = null\n\t                    }\n\t                }\n            \t}\n            }\n        }, {\n            key: \"onAPIready\",\n            value: function(e) {\n                if (\"youtube\" === this.type && (\"undefined\" != typeof YT && 0 !== YT.loaded || p ? \"object\" === (\"undefined\" == typeof YT ? \"undefined\" : n(YT)) && 1 === YT.loaded ? e() : s.done(function() {\n                    e()\n                }) : (p = 1,\n                window.onYouTubeIframeAPIReady = function() {\n                    window.onYouTubeIframeAPIReady = null,\n                    s.resolve(\"done\"),\n                    e()\n                }\n                )),\n                \"vimeo\" === this.type)\n                    if (\"undefined\" != typeof Vimeo || d)\n                        \"undefined\" != typeof Vimeo ? e() : y.done(function() {\n                            e()\n                        });\n                    else {\n                        d = 1;\n                        var t = setInterval(function() {\n                            \"undefined\" != typeof Vimeo && (clearInterval(t),\n                            y.resolve(\"done\"),\n                            e())\n                        }, 20)\n                    }\n                \"local\" === this.type && e()\n            }\n        }]),\n        i\n    }();\n    t.default = c\n}\n, function(e, t, o) {\n    \"use strict\";\n    Object.defineProperty(t, \"__esModule\", {\n        value: !0\n    }),\n    t.default = function() {\n        var e = 0 < arguments.length && void 0 !== arguments[0] ? arguments[0] : u.default.jarallax;\n        if (void 0 === e)\n            return;\n        var t = e.constructor\n          , i = t.prototype.init;\n        t.prototype.init = function() {\n            var o = this;\n            i.apply(o),\n            o.video && !o.options.disableVideo() && o.video.getVideo(function(e) {\n                var t = e.parentNode;\n                o.css(e, {\n                    position: o.image.position,\n                    top: \"0px\",\n                    left: \"0px\",\n                    right: \"0px\",\n                    bottom: \"0px\",\n                    width: \"100%\",\n                    height: \"100%\",\n                    maxWidth: \"none\",\n                    maxHeight: \"none\",\n                    margin: 0,\n                    zIndex: -1\n                }),\n                o.$video = e,\n                o.image.$container.appendChild(e),\n                t.parentNode.removeChild(t)\n            })\n        }\n        ;\n        var l = t.prototype.coverImage;\n        t.prototype.coverImage = function() {\n            var e = this\n              , t = l.apply(e)\n              , o = !!e.image.$item && e.image.$item.nodeName;\n            if (t && e.video && o && (\"IFRAME\" === o || \"VIDEO\" === o)) {\n                var i = t.image.height\n                  , n = i * e.image.width / e.image.height\n                  , a = (t.container.width - n) / 2\n                  , r = t.image.marginTop;\n                t.container.width > n && (n = t.container.width,\n                i = n * e.image.height / e.image.width,\n                a = 0,\n                r += (t.image.height - i) / 2),\n                \"IFRAME\" === o && (i += 400,\n                r -= 200),\n                e.css(e.$video, {\n                    width: n + \"px\",\n                    marginLeft: a + \"px\",\n                    height: i + \"px\",\n                    marginTop: r + \"px\"\n                })\n            }\n            return t\n        }\n        ;\n        var o = t.prototype.initImg;\n        t.prototype.initImg = function() {\n            var e = this\n              , t = o.apply(e);\n            return e.options.videoSrc || (e.options.videoSrc = e.$item.getAttribute(\"data-jarallax-video\") || null),\n            e.options.videoSrc ? (e.defaultInitImgResult = t,\n            !0) : t\n        }\n        ;\n        var n = t.prototype.canInitParallax;\n        t.prototype.canInitParallax = function() {\n            var o = this\n              , e = n.apply(o);\n            if (!o.options.videoSrc)\n                return e;\n            var t = new r.default(o.options.videoSrc,{\n                autoplay: !0,\n                loop: o.options.videoLoop,\n                showContols: !1,\n                startTime: o.options.videoStartTime || 0,\n                endTime: o.options.videoEndTime || 0,\n                mute: o.options.videoVolume ? 0 : 1,\n                volume: o.options.videoVolume || 0\n            });\n            if (t.isValid())\n                if (e) {\n                    if (t.on(\"ready\", function() {\n                        if (o.options.videoPlayOnlyVisible) {\n                            var e = o.onScroll;\n                            o.onScroll = function() {\n                                e.apply(o),\n                                (o.options.videoLoop || !o.options.videoLoop && !o.videoEnded) && (o.isVisible() ? t.play() : t.pause())\n                            }\n                        } else\n                            t.play()\n                    }),\n                    t.on(\"started\", function() {\n                        o.image.$default_item = o.image.$item,\n                        o.image.$item = o.$video,\n                        o.image.width = o.video.videoWidth || 1280,\n                        o.image.height = o.video.videoHeight || 720,\n                        o.coverImage(),\n                        o.clipContainer(),\n                        o.onScroll(),\n                        o.image.$default_item && (o.image.$default_item.style.display = \"none\")\n                    }),\n                    t.on(\"ended\", function() {\n                        o.videoEnded = !0,\n                        o.options.videoLoop || o.image.$default_item && (o.image.$item = o.image.$default_item,\n                        o.image.$item.style.display = \"block\",\n                        o.coverImage(),\n                        o.clipContainer(),\n                        o.onScroll())\n                    }),\n                    o.video = t,\n                    !o.defaultInitImgResult)\n                        return \"local\" !== t.type ? (t.getImageURL(function(e) {\n                            o.image.src = e,\n                            o.init()\n                        }),\n                        !1) : (o.image.src = \"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7\",\n                        !0)\n                } else\n                    o.defaultInitImgResult || t.getImageURL(function(e) {\n                        var t = o.$item.getAttribute(\"style\");\n                        t && o.$item.setAttribute(\"data-jarallax-original-styles\", t),\n                        o.css(o.$item, {\n                            \"background-image\": 'url(\"' + e + '\")',\n                            \"background-position\": \"center\",\n                            \"background-size\": \"cover\"\n                        })\n                    });\n            return e\n        }\n        ;\n        var a = t.prototype.destroy;\n        t.prototype.destroy = function() {\n            var e = this;\n            e.image.$default_item && (e.image.$item = e.image.$default_item,\n            delete e.image.$default_item),\n            a.apply(e)\n        }\n    }\n    ;\n    var r = i(o(8))\n      , u = i(o(4));\n    function i(e) {\n        return e && e.__esModule ? e : {\n            default: e\n        }\n    }\n}\n]);","Magezon_Builder/js/jarallax/jarallax.min.js":"/*!\n * Name    : Just Another Parallax [Jarallax]\n * Version : 1.10.7\n * Author  : nK <https://nkdev.info>\n * GitHub  : https://github.com/nk-o/jarallax\n */!function(o){var n={};function i(e){if(n[e])return n[e].exports;var t=n[e]={i:e,l:!1,exports:{}};return o[e].call(t.exports,t,t.exports,i),t.l=!0,t.exports}i.m=o,i.c=n,i.d=function(e,t,o){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},i.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&\"object\"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(i.r(o),Object.defineProperty(o,\"default\",{enumerable:!0,value:t}),2&e&&\"string\"!=typeof t)for(var n in t)i.d(o,n,function(e){return t[e]}.bind(null,n));return o},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,\"a\",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p=\"\",i(i.s=11)}([,,function(e,t,o){\"use strict\";e.exports=function(e){\"complete\"===document.readyState||\"interactive\"===document.readyState?e.call():document.attachEvent?document.attachEvent(\"onreadystatechange\",function(){\"interactive\"===document.readyState&&e.call()}):document.addEventListener&&document.addEventListener(\"DOMContentLoaded\",e)}},,function(o,e,t){\"use strict\";(function(e){var t;t=\"undefined\"!=typeof window?window:void 0!==e?e:\"undefined\"!=typeof self?self:{},o.exports=t}).call(this,t(5))},function(e,t,o){\"use strict\";var n,i=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e};n=function(){return this}();try{n=n||Function(\"return this\")()||(0,eval)(\"this\")}catch(e){\"object\"===(\"undefined\"==typeof window?\"undefined\":i(window))&&(n=window)}e.exports=n},,,,,,function(e,t,o){e.exports=o(12)},function(e,t,o){\"use strict\";var n=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e},i=l(o(2)),a=o(4),r=l(o(13));function l(e){return e&&e.__esModule?e:{default:e}}var s=a.window.jarallax;if(a.window.jarallax=r.default,a.window.jarallax.noConflict=function(){return a.window.jarallax=s,this},void 0!==a.jQuery){var c=function(){var e=arguments||[];Array.prototype.unshift.call(e,this);var t=r.default.apply(a.window,e);return\"object\"!==(void 0===t?\"undefined\":n(t))?t:this};c.constructor=r.default.constructor;var u=a.jQuery.fn.jarallax;a.jQuery.fn.jarallax=c,a.jQuery.fn.jarallax.noConflict=function(){return a.jQuery.fn.jarallax=u,this}}(0,i.default)(function(){(0,r.default)(document.querySelectorAll(\"[data-jarallax]\"))})},function(e,j,S){\"use strict\";(function(e){Object.defineProperty(j,\"__esModule\",{value:!0});var d=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var o=[],n=!0,i=!1,a=void 0;try{for(var r,l=e[Symbol.iterator]();!(n=(r=l.next()).done)&&(o.push(r.value),!t||o.length!==t);n=!0);}catch(e){i=!0,a=e}finally{try{!n&&l.return&&l.return()}finally{if(i)throw a}}return o}(e,t);throw new TypeError(\"Invalid attempt to destructure non-iterable instance\")},t=function(){function n(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,o){return t&&n(e.prototype,t),o&&n(e,o),e}}(),p=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e},o=a(S(2)),n=a(S(14)),i=S(4);function a(e){return e&&e.__esModule?e:{default:e}}var s=-1<navigator.userAgent.indexOf(\"MSIE \")||-1<navigator.userAgent.indexOf(\"Trident/\")||-1<navigator.userAgent.indexOf(\"Edge/\"),r=function(){for(var e=\"transform WebkitTransform MozTransform\".split(\" \"),t=document.createElement(\"div\"),o=0;o<e.length;o++)if(t&&void 0!==t.style[e[o]])return e[o];return!1}(),b=void 0,v=void 0,l=void 0,c=!1,u=!1;function m(e){b=i.window.innerWidth||document.documentElement.clientWidth,v=i.window.innerHeight||document.documentElement.clientHeight,\"object\"!==(void 0===e?\"undefined\":p(e))||\"load\"!==e.type&&\"dom-loaded\"!==e.type||(c=!0)}m(),i.window.addEventListener(\"resize\",m),i.window.addEventListener(\"orientationchange\",m),i.window.addEventListener(\"load\",m),(0,o.default)(function(){m({type:\"dom-loaded\"})});var f=[],y=!1;function g(){if(f.length){l=void 0!==i.window.pageYOffset?i.window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop;var t=c||!y||y.width!==b||y.height!==v,o=u||t||!y||y.y!==l;u=c=!1,(t||o)&&(f.forEach(function(e){t&&e.onResize(),o&&e.onScroll()}),y={width:b,height:v,y:l}),(0,n.default)(g)}}var h=!!e.ResizeObserver&&new e.ResizeObserver(function(e){e&&e.length&&(0,n.default)(function(){e.forEach(function(e){e.target&&e.target.jarallax&&(c||e.target.jarallax.onResize(),u=!0)})})}),x=0,w=function(){function u(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,u);var o=this;o.instanceID=x++,o.$item=e,o.defaults={type:\"scroll\",speed:.5,imgSrc:null,imgElement:\".jarallax-img\",imgSize:\"cover\",imgPosition:\"50% 50%\",imgRepeat:\"no-repeat\",keepImg:!1,elementInViewport:null,zIndex:-100,disableParallax:!1,disableVideo:!1,automaticResize:!0,videoSrc:null,videoStartTime:0,videoEndTime:0,videoVolume:0,videoLoop:!0,videoPlayOnlyVisible:!0,onScroll:null,onInit:null,onDestroy:null,onCoverImage:null};var n=o.$item.getAttribute(\"data-jarallax\"),i=JSON.parse(n||\"{}\");n&&console.warn(\"Detected usage of deprecated data-jarallax JSON options, you should use pure data-attribute options. See info here - https://github.com/nk-o/jarallax/issues/53\");var a=o.$item.dataset||{},r={};if(Object.keys(a).forEach(function(e){var t=e.substr(0,1).toLowerCase()+e.substr(1);t&&void 0!==o.defaults[t]&&(r[t]=a[e])}),o.options=o.extend({},o.defaults,i,r,t),o.pureOptions=o.extend({},o.options),Object.keys(o.options).forEach(function(e){\"true\"===o.options[e]?o.options[e]=!0:\"false\"===o.options[e]&&(o.options[e]=!1)}),o.options.speed=Math.min(2,Math.max(-1,parseFloat(o.options.speed))),(o.options.noAndroid||o.options.noIos)&&(console.warn(\"Detected usage of deprecated noAndroid or noIos options, you should use disableParallax option. See info here - https://github.com/nk-o/jarallax/#disable-on-mobile-devices\"),o.options.disableParallax||(o.options.noIos&&o.options.noAndroid?o.options.disableParallax=/iPad|iPhone|iPod|Android/:o.options.noIos?o.options.disableParallax=/iPad|iPhone|iPod/:o.options.noAndroid&&(o.options.disableParallax=/Android/))),\"string\"==typeof o.options.disableParallax&&(o.options.disableParallax=new RegExp(o.options.disableParallax)),o.options.disableParallax instanceof RegExp){var l=o.options.disableParallax;o.options.disableParallax=function(){return l.test(navigator.userAgent)}}if(\"function\"!=typeof o.options.disableParallax&&(o.options.disableParallax=function(){return!1}),\"string\"==typeof o.options.disableVideo&&(o.options.disableVideo=new RegExp(o.options.disableVideo)),o.options.disableVideo instanceof RegExp){var s=o.options.disableVideo;o.options.disableVideo=function(){return s.test(navigator.userAgent)}}\"function\"!=typeof o.options.disableVideo&&(o.options.disableVideo=function(){return!1});var c=o.options.elementInViewport;c&&\"object\"===(void 0===c?\"undefined\":p(c))&&void 0!==c.length&&(c=d(c,1)[0]);c instanceof Element||(c=null),o.options.elementInViewport=c,o.image={src:o.options.imgSrc||null,$container:null,useImgTag:!1,position:/iPad|iPhone|iPod|Android/.test(navigator.userAgent)?\"absolute\":\"fixed\"},o.initImg()&&o.canInitParallax()&&o.init()}return t(u,[{key:\"css\",value:function(t,o){return\"string\"==typeof o?i.window.getComputedStyle(t).getPropertyValue(o):(o.transform&&r&&(o[r]=o.transform),Object.keys(o).forEach(function(e){t.style[e]=o[e]}),t)}},{key:\"extend\",value:function(o){var n=arguments;return o=o||{},Object.keys(arguments).forEach(function(t){n[t]&&Object.keys(n[t]).forEach(function(e){o[e]=n[t][e]})}),o}},{key:\"getWindowData\",value:function(){return{width:b,height:v,y:l}}},{key:\"initImg\",value:function(){var e=this,t=e.options.imgElement;return t&&\"string\"==typeof t&&(t=e.$item.querySelector(t)),t instanceof Element||(t=null),t&&(e.options.keepImg?e.image.$item=t.cloneNode(!0):(e.image.$item=t,e.image.$itemParent=t.parentNode),e.image.useImgTag=!0),!!e.image.$item||(null===e.image.src&&(e.image.src=e.css(e.$item,\"background-image\").replace(/^url\\(['\"]?/g,\"\").replace(/['\"]?\\)$/g,\"\")),!(!e.image.src||\"none\"===e.image.src))}},{key:\"canInitParallax\",value:function(){return r&&!this.options.disableParallax()}},{key:\"init\",value:function(){var e=this,t={position:\"absolute\",top:0,left:0,width:\"100%\",height:\"100%\",overflow:\"hidden\",pointerEvents:\"none\"},o={};if(!e.options.keepImg){var n=e.$item.getAttribute(\"style\");if(n&&e.$item.setAttribute(\"data-jarallax-original-styles\",n),e.image.useImgTag){var i=e.image.$item.getAttribute(\"style\");i&&e.image.$item.setAttribute(\"data-jarallax-original-styles\",i)}}if(\"static\"===e.css(e.$item,\"position\")&&e.css(e.$item,{position:\"relative\"}),\"auto\"===e.css(e.$item,\"z-index\")&&e.css(e.$item,{zIndex:0}),e.image.$container=document.createElement(\"div\"),e.css(e.image.$container,t),e.css(e.image.$container,{\"z-index\":e.options.zIndex}),s&&e.css(e.image.$container,{opacity:.9999}),e.image.$container.setAttribute(\"id\",\"jarallax-container-\"+e.instanceID),e.$item.appendChild(e.image.$container),e.image.useImgTag?o=e.extend({\"object-fit\":e.options.imgSize,\"object-position\":e.options.imgPosition,\"font-family\":\"object-fit: \"+e.options.imgSize+\"; object-position: \"+e.options.imgPosition+\";\",\"max-width\":\"none\"},t,o):(e.image.$item=document.createElement(\"div\"),e.image.src&&(o=e.extend({\"background-position\":e.options.imgPosition,\"background-size\":e.options.imgSize,\"background-repeat\":e.options.imgRepeat,\"background-image\":'url(\"'+e.image.src+'\")'},t,o))),\"opacity\"!==e.options.type&&\"scale\"!==e.options.type&&\"scale-opacity\"!==e.options.type&&1!==e.options.speed||(e.image.position=\"absolute\"),\"fixed\"===e.image.position)for(var a=0,r=e.$item;null!==r&&r!==document&&0===a;){var l=e.css(r,\"-webkit-transform\")||e.css(r,\"-moz-transform\")||e.css(r,\"transform\");l&&\"none\"!==l&&(a=1,e.image.position=\"absolute\"),r=r.parentNode}o.position=e.image.position,e.css(e.image.$item,o),e.image.$container.appendChild(e.image.$item),e.onResize(),e.onScroll(!0),e.options.automaticResize&&h&&h.observe(e.$item),e.options.onInit&&e.options.onInit.call(e),\"none\"!==e.css(e.$item,\"background-image\")&&e.css(e.$item,{\"background-image\":\"none\"}),e.addToParallaxList()}},{key:\"addToParallaxList\",value:function(){f.push(this),1===f.length&&g()}},{key:\"removeFromParallaxList\",value:function(){var o=this;f.forEach(function(e,t){e.instanceID===o.instanceID&&f.splice(t,1)})}},{key:\"destroy\",value:function(){var e=this;e.removeFromParallaxList();var t=e.$item.getAttribute(\"data-jarallax-original-styles\");if(e.$item.removeAttribute(\"data-jarallax-original-styles\"),t?e.$item.setAttribute(\"style\",t):e.$item.removeAttribute(\"style\"),e.image.useImgTag){var o=e.image.$item.getAttribute(\"data-jarallax-original-styles\");e.image.$item.removeAttribute(\"data-jarallax-original-styles\"),o?e.image.$item.setAttribute(\"style\",t):e.image.$item.removeAttribute(\"style\"),e.image.$itemParent&&e.image.$itemParent.appendChild(e.image.$item)}e.$clipStyles&&e.$clipStyles.parentNode.removeChild(e.$clipStyles),e.image.$container&&e.image.$container.parentNode.removeChild(e.image.$container),e.options.onDestroy&&e.options.onDestroy.call(e),delete e.$item.jarallax}},{key:\"clipContainer\",value:function(){if(\"fixed\"===this.image.position){var e=this,t=e.image.$container.getBoundingClientRect(),o=t.width,n=t.height;if(!e.$clipStyles)e.$clipStyles=document.createElement(\"style\"),e.$clipStyles.setAttribute(\"type\",\"text/css\"),e.$clipStyles.setAttribute(\"id\",\"jarallax-clip-\"+e.instanceID),(document.head||document.getElementsByTagName(\"head\")[0]).appendChild(e.$clipStyles);var i=\"#jarallax-container-\"+e.instanceID+\" {\\n           clip: rect(0 \"+o+\"px \"+n+\"px 0);\\n           clip: rect(0, \"+o+\"px, \"+n+\"px, 0);\\n        }\";e.$clipStyles.styleSheet?e.$clipStyles.styleSheet.cssText=i:e.$clipStyles.innerHTML=i}}},{key:\"coverImage\",value:function(){var e=this,t=e.image.$container.getBoundingClientRect(),o=t.height,n=e.options.speed,i=\"scroll\"===e.options.type||\"scroll-opacity\"===e.options.type,a=0,r=o,l=0;return i&&(n<0?(a=n*Math.max(o,v),v<o&&(a-=n*(o-v))):a=n*(o+v),1<n?r=Math.abs(a-v):n<0?r=a/n+Math.abs(a):r+=(v-o)*(1-n),a/=2),e.parallaxScrollDistance=a,l=i?(v-r)/2:(o-r)/2,e.css(e.image.$item,{height:r+\"px\",marginTop:l+\"px\",left:\"fixed\"===e.image.position?t.left+\"px\":\"0\",width:t.width+\"px\"}),e.options.onCoverImage&&e.options.onCoverImage.call(e),{image:{height:r,marginTop:l},container:t}}},{key:\"isVisible\",value:function(){return this.isElementInViewport||!1}},{key:\"onScroll\",value:function(e){var t=this,o=t.$item.getBoundingClientRect(),n=o.top,i=o.height,a={},r=o;if(t.options.elementInViewport&&(r=t.options.elementInViewport.getBoundingClientRect()),t.isElementInViewport=0<=r.bottom&&0<=r.right&&r.top<=v&&r.left<=b,e||t.isElementInViewport){var l=Math.max(0,n),s=Math.max(0,i+n),c=Math.max(0,-n),u=Math.max(0,n+i-v),d=Math.max(0,i-(n+i-v)),p=Math.max(0,-n+v-i),m=1-2*(v-n)/(v+i),f=1;if(i<v?f=1-(c||u)/i:s<=v?f=s/v:d<=v&&(f=d/v),\"opacity\"!==t.options.type&&\"scale-opacity\"!==t.options.type&&\"scroll-opacity\"!==t.options.type||(a.transform=\"translate3d(0,0,0)\",a.opacity=f),\"scale\"===t.options.type||\"scale-opacity\"===t.options.type){var y=1;t.options.speed<0?y-=t.options.speed*f:y+=t.options.speed*(1-f),a.transform=\"scale(\"+y+\") translate3d(0,0,0)\"}if(\"scroll\"===t.options.type||\"scroll-opacity\"===t.options.type){var g=t.parallaxScrollDistance*m;\"absolute\"===t.image.position&&(g-=n),a.transform=\"translate3d(0,\"+g+\"px,0)\"}t.css(t.image.$item,a),t.options.onScroll&&t.options.onScroll.call(t,{section:o,beforeTop:l,beforeTopEnd:s,afterTop:c,beforeBottom:u,beforeBottomEnd:d,afterBottom:p,visiblePercent:f,fromViewportCenter:m})}}},{key:\"onResize\",value:function(){this.coverImage(),this.clipContainer()}}]),u}(),$=function(e){(\"object\"===(\"undefined\"==typeof HTMLElement?\"undefined\":p(HTMLElement))?e instanceof HTMLElement:e&&\"object\"===(void 0===e?\"undefined\":p(e))&&null!==e&&1===e.nodeType&&\"string\"==typeof e.nodeName)&&(e=[e]);for(var t=arguments[1],o=Array.prototype.slice.call(arguments,2),n=e.length,i=0,a=void 0;i<n;i++)if(\"object\"===(void 0===t?\"undefined\":p(t))||void 0===t?e[i].jarallax||(e[i].jarallax=new w(e[i],t)):e[i].jarallax&&(a=e[i].jarallax[t].apply(e[i].jarallax,o)),void 0!==a)return a;return e};$.constructor=w,j.default=$}).call(this,S(5))},function(e,t,o){\"use strict\";var n=o(4),i=n.requestAnimationFrame||n.webkitRequestAnimationFrame||n.mozRequestAnimationFrame||function(e){var t=+new Date,o=Math.max(0,16-(t-a)),n=setTimeout(e,o);return a=t,n},a=+new Date;var r=n.cancelAnimationFrame||n.webkitCancelAnimationFrame||n.mozCancelAnimationFrame||clearTimeout;Function.prototype.bind&&(i=i.bind(n),r=r.bind(n)),(e.exports=i).cancel=r}]);","Magezon_Builder/js/form/element/dynamic-rows.js":"define([\n\t'angular'\n], function(angular) {\n\n\treturn {\n\t\tcontroller: function($scope) {\n\t\t\t$scope.formOptions = {formState: $scope.formState};\n\t\t\t$scope.addNew = addNew;\n\n\t\t\tvar unique = 1;\n\n\t\t\tangular.forEach($scope.model[$scope.options.key], function(_item, index) {\n\t\t\t\t_item['position'] = index + 1;\n\t\t\t});\n\n\t\t\t$scope.copyFields = copyFields;\n\n\t\t\t$scope.$on('removeDynamicItem', function(event, item) {\n\t\t\t\tvar index = $scope.model[$scope.options.key].indexOf(item);\n\t\t\t\tif (index !== -1) {\n\t\t\t\t\t$scope.model[$scope.options.key].splice(index, 1);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t$scope.$on('radioDefaultDynamicItem', function(event, data) {\n\t\t\t\tvar index = $scope.model[$scope.options.key].indexOf(data.item);\n\t\t\t\tif (index !== -1) {\n\t\t\t\t\tangular.forEach($scope.model[$scope.options.key], function(_item, index) {\n\t\t\t\t\t\tif (_item===data.item) {\n\t\t\t\t\t\t\t_item[data.key] = 1;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t_item[data.key] = 0;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t$scope.$on('sortDynamicItems', function(event, data) {\n\t\t\t\t$scope.model[$scope.options.key] = _.sortBy($scope.model[$scope.options.key], data.key);\n\t\t\t});\n\n\t\t\tfunction copyFields(fields) {\n\t\t\t\tfields = angular.copy(fields);\n\t\t\t\taddRandomIds(fields);\n\t\t\t\treturn fields;\n\t\t\t}\n\n\t\t\tfunction addNew() {\n\t\t\t\t$scope.model[$scope.options.key] = $scope.model[$scope.options.key] || [];\n\t\t\t\tvar repeatsection = $scope.model[$scope.options.key];\n\t\t\t\tvar lastSection   = repeatsection[repeatsection.length - 1];\n\t\t\t\tvar newsection    = {};\n\t\t\t\tif (lastSection) {\n\t\t\t\t\tnewsection = angular.copy(lastSection);\n\t\t\t\t}\n\t\t\t\tvar newsection = {};\n\t\t\t\tnewsection['position'] = repeatsection.length + 1;\n\t\t\t\trepeatsection.push(newsection);\n\t\t\t}\n\n\t\t\tfunction addRandomIds(fields) {\n\t\t\t\tunique++;\n\t\t\t\tangular.forEach(fields, function(field, index) {\n\t\t\t\t\tif (field.fieldGroup) {\n\t\t\t\t\t\taddRandomIds(field.fieldGroup);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tif (field.children) {\n\t\t\t\t\t\taddRandomIds(field.children);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tif (field.templateOptions && field.templateOptions.children) {\n\t\t\t\t\t\taddRandomIds(field.templateOptions.children);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tif (field.key) {\n\t\t\t\t\t\tfield.id = field.key.replace(/\\./g,'_') + '_' + index + '_' + unique + getRandomInt(0, 9999);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tfunction getRandomInt(min, max) {\n\t\t\t\treturn Math.floor(Math.random() * (max - min)) + min;\n\t\t\t}\n\t\t}\n\t}\n})","Magezon_Builder/js/form/element/color.js":"define([\n\t'jquery',\n\t'mgzspectrum',\n    'mgztinycolor',\n    'Magezon_Builder/js/ui/form/element/color-picker-palette'\n], function($, spectrum, tinycolor, palette) {\n\n\treturn {\n\t\tcontroller: function($scope, $timeout) {\n\n\t\t\t$scope.value = $scope.model[$scope.options.key];\n\t\t\tvar element = $('#' + $scope.id);\n\n\t\t\tvar getColor = function(color) {\n\t\t\t\tif (!color) color = $('#' + $scope.id).spectrum('get').toString();\n\t\t\t\treturn $scope.to.hex ? tinycolor(color).toHexString() : tinycolor(color).toString();\n\t\t\t}\n\n\t\t\tvar config = {\n\t\t\t\tcontainerClassName: 'mgz-spectrum',\n                chooseText: 'Apply',\n                cancelText: 'Cancel',\n                maxSelectionSize: 8,\n                clickoutFiresChange: true,\n                allowEmpty: true,\n                localStorageKey: 'magezon.spectrum',\n                palette: palette,\n                showInput: true,\n                showInitial: false,\n                showPalette: true,\n                showAlpha: $scope.to.hex ? false : true,\n                showSelectionPalette: true,\n                preferredFormat: 'hex',\n                color: $scope.value,\n                hide : function(c) {\n            \t\t$timeout(function() {\n                \t\tif ($('#' + $scope.id).spectrum('get')) {\n                \t\t\t$scope.model[$scope.options.key] = $scope.value = getColor();\n                \t\t\t$('#' + $scope.id).spectrum('set', $scope.value);\n                \t\t} else {\n                \t\t\t$scope.model[$scope.options.key] = $scope.value = '';\n                \t\t}\n                \t});\n                }\n            };\n            config = angular.extend(config, $scope.to.colorPickerConfig);\n\n\t\t\t$timeout(function() {\n\t\t\t\t$('#' + $scope.id).spectrum(config);\n\t\t\t\t$('#' + $scope.id + '-input').change(function(event) {\n\t\t\t\t\tvar value = $(this).val();\n\t\t\t\t\tif (value) {\n                        if (tinycolor(value).isValid()) {\n    \t\t\t\t\t\tvalue = getColor(value);\n    \t\t\t\t\t\t$('#' + $scope.id).spectrum('set', value);\n    \t\t\t\t\t\t$scope.model[$scope.options.key] = $scope.value = getColor();\n    \t\t\t\t\t\t$(this).val(value);\n                        }\n\t\t\t\t\t} else {\n                        $scope.model[$scope.options.key] = '';\n                    }\n\t\t\t\t});\n\t\t\t}, 200);\n\t\t}\n\t}\n});","Magezon_Builder/js/form/element/hide_on.js":"define([\n\t'jquery'\n], function($) {\n\n\treturn {\n\t\tcontroller: function($scope) {\n\t\t\t$scope.toggleHide = function(type) {\n\t\t\t\t$scope.model[type + '_hide'] = !$scope.model[type + '_hide'];\n\t\t\t}\n\t\t}\n\t}\n});","Magezon_Builder/js/form/element/condition.js":"define([\n\t'jquery'\n], function($) {\n\n\t$(document).on('click', '.rule-param-remove', function() {\n\t\t$('.rule-tree').trigger('change');\n\t});\n\n\treturn {\n\t\tcontroller: function($rootScope, $scope, $sce, magezonBuilderService) {\n\t\t\t$scope.to.loading = true;\n\t\t\t$scope.id         = magezonBuilderService.uniqueid();\n\t\t\t$scope.status     = true;\n\n\t\t\t$scope.loadConditionsValue = function() {\n\t\t\t\tif ($scope.status) {\n\t\t\t\t\t$scope.status = false;\n\t\t\t\t\t$rootScope.$broadcast('disableSaveBtn');\n\t\t\t\t\tmagezonBuilderService.post('mgzbuilder/ajax/conditionsValue', {\n\t\t\t\t\t\tvalues: $('.mgz-modal-form form').serialize(),\n\t\t\t\t\t\tfield: $scope.options.key\n\t\t\t\t\t}, true, function(res) {\n\t\t\t\t\t\tif (res.status) {\n\t\t\t\t\t\t\t$scope.$apply(function() {\n\t\t\t\t\t\t\t\t$scope.model[$scope.options.key] = res.value;\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t\t$rootScope.$broadcast('enableSaveBtn');\n\t\t\t\t\t\t$scope.status = true;\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tmagezonBuilderService.post('mgzbuilder/ajax/conditions', {\n\t\t\t\tconditions: $scope.model[$scope.options.key],\n\t\t\t\tid: $scope.id\n\t\t\t}, true, function(res) {\n\t\t\t\tif (res.message) {\n\t\t\t\t\talert(res.message);\n\t\t\t\t}\n\t\t\t\tif (res.status) {\n\t\t\t\t\t$scope.$apply(function() {\n\t\t\t\t\t\t$scope.html       = $sce.trustAsHtml(res.html);\n\t\t\t\t\t\t$scope.to.loading = false;\n\n\t\t\t\t\t\t$('#' + $scope.id).on('click', '.rule-param-remove,.rule-param-apply,.data-grid ._clickable,#select_widget_type', function() {\n\t\t\t\t\t\t\t$scope.loadConditionsValue();\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\t$('#' + $scope.id).on('change', '.element-value-changer,.rule-tree', function() {\n\t\t\t\t\t\t\t$scope.loadConditionsValue();\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n});","Magezon_Builder/js/form/element/code.js":"define([\n\t'jquery'\n], function($) {\n\n\treturn {\n\t\tcontroller: function($scope, $timeout) {\n\t\t\t$timeout(function() {\n\t\t\t\t$scope.refreshEditor = true;\n\t\t\t}, 200);\n\t\t}\n\t}\n});","Magezon_Builder/js/form/element/magento-widget.js":"define([\n\t'jquery'\n], function($) {\n\n\treturn {\n\t\tcontroller: function($rootScope, $scope, magezonBuilderService, magezonBuilderFilter, $sce) {\n\t\t\t$scope.ajax = true;\n\t\t\t$rootScope.$broadcast('disableSaveBtn');\n\t\t\tmagezonBuilderService.post('mgzbuilder/widget/index', {}, false, function(res) {\n\t\t\t\t$scope.$apply(function() {\n\t\t\t\t\t$scope.html = $sce.trustAsHtml(res);\n\t\t\t\t\t$rootScope.$broadcast('enableSaveBtn');\n\t\t\t\t});\n\t\t\t});\n\n\t\t\t$scope.$watch('html', function(value) {\n\t\t\t\tif ($scope.model[$scope.options.key] && value) {\n\t\t\t\t\tvar widgetCode   = angular.copy($scope.model[$scope.options.key]);\n\t\t\t\t\tvar optionValues = new Hash({});\n\t\t\t\t\tvar widgetValue;\n\n\t\t\t\t\t// mage/adminhtml/wysiwyg/widget.js - line 287\n\t                widgetCode.gsub(/([a-z0-9\\_]+)\\s*\\=\\s*[\\\"]{1}([^\\\"]+)[\\\"]{1}/i, function (match) {\n\t                    if (match[1] == 'type') { //eslint-disable-line eqeqeq\n\t                        widgetValue = match[2];\n\t                    } else {\n\t                        optionValues.set(match[1], match[2]);\n\t                    }\n\t                });\n\n\t                if (widgetValue) {\n\t                \t$rootScope.$broadcast('disableSaveBtn');\n\t                \tvar params = {\n\t\t\t                'widget_type': widgetValue,\n\t\t\t                values: optionValues\n\t\t\t            };\n\t\t\t            magezonBuilderService.post('mgzbuilder/widget/loadOptions', {\n\t\t\t            \twidget: Object.toJSON(params)\n\t\t\t            }, false, function(res) {\n\t\t\t            \t$rootScope.$broadcast('enableSaveBtn');\n\t\t\t            \tvar widgetCode = widgetValue.gsub(/\\//, '_');\n\t\t\t            \t$('#select_widget_type').val(widgetCode);\n\t\t\t            \tvar optionsContainerId = 'widget_options_' + widgetCode;\n\t\t\t            \tvar optionsContainer   = $('#' + optionsContainerId);\n\t\t\t            \tif (optionsContainer.length) {\n\t\t\t            \t\toptionsContainer.html(res);\n\t\t\t            \t} else {\n\t\t\t            \t\tvar html = '<div id=\"' + optionsContainerId + '\">';\n\t\t\t            \t\thtml += res;\n\t\t\t            \t\thtml += '</div>';\n\t\t\t            \t\t$('#widget_options').append(html);\n\t\t\t            \t}\n\t\t\t            });\n\t                }\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t$scope.updateValue = function() {\n\t\t\t\tvar form  = $('#widget_options_form');\n\t\t\t\tvar valid = true;\n\t\t\t\tform.find('.error').each(function(index, el) {\n\t\t\t\t\tif ($(this).is(':visible')) {\n\t\t\t\t\t\tvalid = false;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tif (form.valid() && $scope.ajax) {\n\t\t\t\t\t$scope.ajax = false;\n\t\t\t\t\t$rootScope.$broadcast('disableSaveBtn');\n\t\t\t\t\tmagezonBuilderService.post('mgzbuilder/widget/buildWidget', form.serialize(), false, function(res) {\n\t\t\t\t\t\t$scope.$apply(function() {\n\t\t\t\t\t\t\t$scope.ajax = true;\n\t\t\t\t\t\t\t$rootScope.$broadcast('enableSaveBtn');\n\t\t\t\t\t\t\t$scope.model[$scope.options.key] = magezonBuilderFilter.decodeContent(res);\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t$(document).on('click', '.rule-param-apply,.rule-param-remove,.data-grid ._clickable,#select_widget_type,.x-tree-node-el', function() {\n\t\t\t\t$scope.updateValue();\n\t\t\t});\n\n\t\t\t$(document).on('change', \"#widget_options_form *[name^='parameters'],#select_widget_type\", function() {\n\t\t\t\tif ($(this).parents('.mgz-modal-form').length) {\n\t               $scope.updateValue();\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n});","Magezon_Builder/js/form/element/link_entity.js":"define([\n\t'angular',\n\t'underscore',\n], function(angular, _) {\n\n\treturn {\n\t\tcontroller: function($scope, magezonBuilderService, $timeout) {\n\t\t\tvar initializing = true;\n\t\t\t$scope.to.options = [];\n\n\t\t\t$scope.$watch('model.type', function(type) {\n\t\t\t\tif (type !== 'custom') {\n\t\t\t\t\t$scope.to.label = magezonBuilderService.capitalize(type);\n\t\t\t\t}\n\t\t\t\tif (initializing) {\n\t\t\t\t\t$timeout(function() { initializing = false; });\n\t\t\t\t} else {\n\t\t\t\t\t$scope.model.id = '';\n\t\t\t\t\t$scope.to.options = [];\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t$scope.$watch('model.id', function(id) {\n\t\t\t\tif (id) {\n\t\t\t\t\tvar item = _.findWhere($scope.to.options, {value: id});\n\t\t\t\t\tif (!$scope.model.title) $scope.model.title = item.label;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t$scope.refresh = function($select) {\n\t\t\t\tvar type = $scope.model.type;\n\t\t\t\tvar search = $select.search ? $select.search : $scope.model[$scope.options.key];\n\t\t\t\tif (search && ($select.search.length >= 2 || $scope.model[$scope.options.key])) {\n\t\t\t\t\t$scope.to.loading = true;\n\t\t\t\t\tmagezonBuilderService.post('mgzbuilder/ajax/itemList', {\n\t\t\t\t\t\ttype: $scope.model.type,\n\t\t\t\t\t\tq: search\n\t\t\t\t\t}, true, function(res) {\n\t\t\t\t\t\t$scope.$apply(function() {\n\t\t\t\t\t\t\t$scope.to.options = res;\n\t\t\t\t\t\t\t$scope.to.loading = false;\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n})","Magezon_Builder/js/form/element/tab.js":"define([\n\t'angular',\n    'jquery'\n], function(angular, $) {\n\n    return {\n        controller: function($scope) {\n\n\t\t\t$scope.tabs   = $scope.to.children;\n\t\t\t$scope.length = $scope.tabs.length;\n\n\t\t\t// Copy from forly.js\n        \tfunction formlyEval(scope, expression, $modelValue, $viewValue, extraLocals) {\n        \t\tif (angular.isFunction(expression)) {\n        \t\t\treturn expression($viewValue, $modelValue, scope, extraLocals);\n        \t\t} else {\n        \t\t\treturn scope.$eval(expression, angular.extend({ $viewValue: $viewValue, $modelValue: $modelValue }, extraLocals));\n        \t\t}\n        \t}\n\n        \t// Copy from forly.js\n        \tfunction getFormlyFieldLikeLocals(field, index) {\n        \t\treturn {\n        \t\t\tmodel: field.model,\n        \t\t\toptions: field,\n        \t\t\tindex: index,\n        \t\t\tformState: $scope.options.formState,\n        \t\t\toriginalModel: $scope.model,\n        \t\t\tformOptions: $scope.options,\n        \t\t\tformId: $scope.formId\n        \t\t};\n        \t}\n\n        \t// Copy from forly.js\n        \tfunction evalCloseToFormlyExpression(expression, val, field, index) {\n        \t\tvar extraLocals = arguments.length <= 4 || arguments[4] === undefined ? {} : arguments[4];\n        \t\textraLocals = angular.extend(getFormlyFieldLikeLocals(field, index), extraLocals);\n        \t\treturn formlyEval($scope, expression, val, val, extraLocals);\n        \t}\n\n\t\t\t$scope.$watch('model', function() {\n\t\t\t\tvar length = $scope.tabs.length;\n\t\t\t\tangular.forEach($scope.tabs, function (field, index) {\n\t\t\t\t\t// Copy from forly.js\n\t\t\t\t\tvar model = field.model || $scope.model;\n\t\t\t\t\tvar promise = field.runExpressions && field.runExpressions();\n\t\t\t\t\tif (field.hideExpression) {\n\t\t\t\t\t\tvar val = model[field.key];\n\t\t\t\t\t\tfield.hide = evalCloseToFormlyExpression(field.hideExpression, val, field, index, { model: model });\n\t\t\t\t\t\tif (field.hide) {\n\t\t\t\t\t\t\tlength--;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\t$scope.length = length;\n\t\t\t}, true);\n\t\t}\n\t}\n});","Magezon_Builder/js/form/element/animation-out.js":"define(function() {\n\n\treturn {\n\t\tcontroller: function($scope, $timeout, magezonBuilderService) {\n\t\t\t$scope.to.loading = true;\n\t\t\tmagezonBuilderService.getBuilderConfig('animationOut', function(options) {\n\t\t\t\t$scope.styles = angular.copy(options);\n\t\t\t\t$timeout(function() {\n\t\t\t\t\t$scope.to.loading = false;\n\t\t\t\t})\n\t\t\t});\n\t\t\t$scope.loadAnimate = function() {\n\t\t\t\t$scope.animateClass = $scope.fc.$viewValue + ' animated';\n\t\t\t\t$timeout(function() {\n\t\t\t\t\t$scope.animateClass = '';\n\t\t\t\t}, 1000);\n\t\t\t};\n\t\t}\n\t}\n});","Magezon_Builder/js/form/element/select.js":"define([\n\t'angular'\n], function(angular) {\n\n\treturn {\n\t\ttemplateOptions: {\n\t\t\tlabelProp: 'label',\n\t\t\tvalueProp: 'value'\n\t\t},\n\t\tcontroller: function($scope, $timeout, magezonBuilderService) {\n\t\t\t$scope.to.loading = false;\n\t\t\tif ($scope.to.lazyOptions) {\n\t\t\t\t$scope.to.options = eval($scope.to.lazyOptions);\n\t\t\t}\n\t\t\tif ($scope.to.builderConfig) {\n\t\t\t\t$scope.to.loading = true;\n\t\t\t\tmagezonBuilderService.getBuilderConfig($scope.to.builderConfig, function(options) {\n\t\t\t\t\t$timeout(function() {\n\t\t\t\t\t\t$scope.to.options = options;\n\t\t\t\t\t\t$scope.to.loading = false;\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif ($scope.to.url) {\n\t\t\t\t$scope.to.loading = true;\n\t\t\t\tmagezonBuilderService.post($scope.to.url, {\n\t\t\t\t\tfield: $scope.options.key\n\t\t\t\t}, true, function(res) {\n\t\t\t\t\t$scope.$apply(function() {\n\t\t\t\t\t\t$scope.to.options = res;\n\t\t\t\t\t\t$scope.to.loading = false;\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t} else if ($scope.to.source) {\n\t\t\t\t$scope.to.loading = true;\n\t\t\t\tmagezonBuilderService.post('mgzbuilder/ajax/itemList', {\n\t\t\t\t\ttype: $scope.to.source,\n\t\t\t\t\tfield: $scope.options.key\n\t\t\t\t}, true, function(res) {\n\t\t\t\t\t$scope.$apply(function() {\n\t\t\t\t\t\t$scope.to.options = res;\n\t\t\t\t\t\t$scope.to.loading = false;\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n})","Magezon_Builder/js/form/element/dependency.js":"define([\n\t'angular',\n\t'jquery'\n], function(angular, $) {\n\n\treturn {\n\t\tcontroller: function($scope, $timeout) {\n\t\t\tvar initializing = true;\n\t\t\t$scope.$watch('model.' + $scope.options.key, function(value) {\n\t\t\t\tif (initializing) {\n\t\t\t\t\t$timeout(function() { initializing = false; });\n\t\t\t\t} else {\n\t\t\t\t\tif ($scope.to.values && $scope.to.values.hasOwnProperty(value)) {\n\t\t\t\t\t\tangular.forEach($scope.to.values[value], function(value, key) {\n\t\t\t\t\t\t\t$scope.model[key] = value;\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n});","Magezon_Builder/js/form/element/multicheckbox.js":"define([\n\t'underscore'\n\t], function(_) {\n\n\t\treturn {\n\t\t\ttemplateOptions: {\n\t\t\t\tlabelProp: 'label',\n\t\t\t\tvalueProp: 'value'\n\t\t\t},\n\t\t\tcontroller: function($scope) {\n\t\t\t\tconst to = $scope.to;\n\t\t\t\tconst opts = $scope.options;\n\t\t\t\t$scope.multiCheckbox = {\n\t\t\t\t\tchecked: [],\n\t\t\t\t\tchange: setModel\n\t\t\t\t};\n\n        // initialize the checkboxes check property\n        $scope.$watch('model', function modelWatcher(newModelValue) {\n        \tvar modelValue, valueProp;\n\n        \tif (Object.keys(newModelValue).length) {\n        \t\tmodelValue = newModelValue[opts.key];\n\n        \t\t$scope.$watch('to.options', function optionsWatcher(newOptionsValues) {\n        \t\t\tif (newOptionsValues && Array.isArray(newOptionsValues) && Array.isArray(modelValue)) {\n        \t\t\t\tvalueProp = to.valueProp || 'value';\n        \t\t\t\tfor (var index = 0; index < newOptionsValues.length; index++) {\n        \t\t\t\t\t$scope.multiCheckbox.checked[index] = modelValue.indexOf(newOptionsValues[index][valueProp]) !== -1;\n        \t\t\t\t}\n        \t\t\t}\n        \t\t});\n        \t}\n        }, true);\n\n        function checkValidity(expressionValue) {\n        \tvar valid;\n\n        \tif ($scope.to.required) {\n        \t\tvalid = angular.isArray($scope.model[opts.key]) &&\n        \t\t$scope.model[opts.key].length > 0 &&\n        \t\texpressionValue;\n\n        \t\t$scope.fc.$setValidity('required', valid);\n        \t}\n        }\n\n        function setModel() {\n        \t$scope.model[opts.key] = [];\n        \tangular.forEach($scope.multiCheckbox.checked, (checkbox, index) => {\n        \t\tif (checkbox) {\n        \t\t\t$scope.model[opts.key].push(to.options[index][to.valueProp || 'value']);\n        \t\t}\n        \t});\n\n          // Must make sure we mark as touched because only the last checkbox due to a bug in angular.\n          $scope.fc.$setTouched();\n          checkValidity(true);\n          \n          if ($scope.to.onChange) {\n          \t$scope.to.onChange();\n          }\n      }\n\n      if (opts.expressionProperties && opts.expressionProperties['templateOptions.required']) {\n      \t$scope.$watch(function() {\n      \t\treturn $scope.to.required;\n      \t}, function(newValue) {\n      \t\tcheckValidity(newValue);\n      \t});\n      }\n\n      if ($scope.to.required) {\n      \tvar unwatchFormControl = $scope.$watch('fc', function(newValue) {\n      \t\tif (!newValue) {\n      \t\t\treturn;\n      \t\t}\n      \t\tcheckValidity(true);\n      \t\tunwatchFormControl();\n      \t});\n      }\n  }\n}\n})","Magezon_Builder/js/form/element/simply.js":"define([\n\t'jquery'\n], function($) {\n\n\treturn {\n\t\texpressionProperties: {\n\t\t\t'templateOptions.disabled': function(viewValue, modelValue, scope) {\n\t\t\t\tif (viewValue) {\n\t\t\t\t\tvar prefix = scope.to.prefix;\n\t\t\t\t\t$('.mgz-design-layout').addClass('mgz-design-simply');\n\t\t\t\t\tscope.model[prefix + 'border_top_left_radius'] = scope.model[prefix + 'border_bottom_right_radius'] = scope.model[prefix + 'border_bottom_left_radius'] = scope.model[prefix + 'border_top_right_radius'];\n\t\t\t\t\tscope.model[prefix + 'margin_right'] = scope.model[prefix + 'margin_bottom'] = scope.model[prefix + 'margin_left'] = scope.model[prefix + 'margin_top'];\n\t\t\t\t\tscope.model[prefix + 'border_right_width'] = scope.model[prefix + 'border_bottom_width'] = scope.model[prefix + 'border_left_width'] = scope.model[prefix + 'border_top_width'];\n\t\t\t\t\tscope.model[prefix + 'padding_right'] = scope.model[prefix + 'padding_bottom'] = scope.model[prefix + 'padding_left'] = scope.model[prefix + 'padding_top'];\n\t\t\t\t} else {\n\t\t\t\t\t$('.mgz-design-layout').removeClass('mgz-design-simply');\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n})","Magezon_Builder/js/form/element/image.js":"define([\n\t'angular',\n\t'Magezon_Core/js/mage/browser'\n], function(angular) {\n\n\treturn {\n\t\tcontroller: function($scope, $rootScope) {\n\t\t\t$scope.openFileManager =  function() {\n\t            var fileManagerUrl = $rootScope.builderConfig.fileManagerUrl.replace('UID', $scope.id);\n\t            MgzMediabrowserUtility.openDialog(fileManagerUrl);\n\t        }\n\n\t        $scope.getSrc = function() {\n\t        \tif ($scope.model[$scope.options.key]) {\n\t\t\t\t\treturn $rootScope.builderConfig.mediaUrl + $scope.model[$scope.options.key];\n\t\t\t\t}\n\t        }\n\t\t}\n\t}\n})","Magezon_Builder/js/form/element/ui-select.js":"define([\n\t'angular',\n\t'jquery'\n], function(angular, $) {\n\n\treturn {\n\t\ttemplateOptions: {\n\t\t\tlabelProp: 'label',\n\t\t\tvalueProp: 'value'\n\t\t},\n\t\tcontroller: function($scope, $timeout, magezonBuilderService) {\n\t\t\t$scope.to.loading = false;\n\n\t\t\tif ($scope.to.builderConfig) {\n\t\t\t\t$scope.to.loading = true;\n\t\t\t\tmagezonBuilderService.getBuilderConfig($scope.to.builderConfig, function(options) {\n\t\t\t\t\t$timeout(function() {\n\t\t\t\t\t\t$scope.to.options = options;\n\t\t\t\t\t\t$scope.to.loading = false;\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t$scope.refresh = function($select) {\n\t\t\t\tvar search = $select.search ? $select.search : $scope.model[$scope.options.key];\n\t\t\t\tif (search && (search.length >= 2 || !isNaN(search))) {\n\t\t\t\t\tif ($scope.to.url) {\n\t\t\t\t\t\t$scope.to.loading = true;\n\t\t\t\t\t\tmagezonBuilderService.post($scope.to.url, {\n\t\t\t\t\t\t\tfield: $scope.options.key,\n\t\t\t\t\t\t\tq: search\n\t\t\t\t\t\t}, true, function(res) {\n\t\t\t\t\t\t\t$scope.$apply(function() {\n\t\t\t\t\t\t\t\t$scope.to.options = res;\n\t\t\t\t\t\t\t\t$scope.to.loading = false;\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\t\t\t\t\t} else if ($scope.to.source) {\n\t\t\t\t\t\t$scope.to.loading = true;\n\t\t\t\t\t\tmagezonBuilderService.post('mgzbuilder/ajax/itemList', {\n\t\t\t\t\t\t\ttype: $scope.to.source,\n\t\t\t\t\t\t\tfield: $scope.options.key,\n\t\t\t\t\t\t\tq: search\n\t\t\t\t\t\t}, true, function(res) {\n\t\t\t\t\t\t\t$scope.$apply(function() {\n\t\t\t\t\t\t\t\t$scope.to.options = res;\n\t\t\t\t\t\t\t\t$scope.to.loading = false;\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n})","Magezon_Builder/js/form/element/link.js":"define([\n\t'jquery',\n\t'underscore',\n    'uiRegistry'\n], function($, _, registry) {\n\n\treturn {\n\t\tcontroller: function($scope, magezonBuilderModal, magezonBuilderService, magezonBuilderFilter) {\n\t\t\t$scope.type = 'Custom';\n\n            $scope.getLinkParams = function(link) {\n\t\t\t\tvar params = {\n\t\t\t\t\ttype: 'custom',\n\t\t\t\t\turl: '',\n\t\t\t\t\tid: 0,\n\t\t\t\t\ttitle: '',\n\t\t\t\t\textra: '',\n\t\t\t\t\tnofollow: 0,\n\t\t\t\t\tblank: 0\n\t\t    \t};\n\t\t    \tif (link) {\n\t\t\t\t\tif (link.indexOf('{{mgzlink') === -1) {\n\t\t\t\t\t\tparams['url']  = link;\n\t\t\t\t\t\tparams['type'] = 'custom';\n\t\t\t\t\t} else {\n\t\t\t\t\t\tlink.gsub(/\\{\\{mgzlink(.*?)\\}\\}/i, function (match) {\n\t\t\t\t\t\t\tparams = magezonBuilderFilter.parseAttributesString(match[1]);\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (params['url']) params['url'] = magezonBuilderService.removeslashes(params['url']);\n\t\t\t\treturn params;\n            }\n\n\t\t\t$scope.selectUrl = function() {\n\t\t\t\tmagezonBuilderModal.open('link', {\n\t\t\t\t\tbackdrop: true,\n\t\t\t\t\tresolve: {\n\t\t\t\t\t\tform: {\n\t\t\t\t\t\t\tmodel: $scope.getLinkParams($scope.model[$scope.options.key])\t\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}, function(model) {\n\t\t\t\t\tvar link = '{{mgzlink';\n\t\t\t\t\tangular.forEach(model, function (value, key) {\n\t\t\t\t\t\tif (angular.isString(value)) {\n\t\t\t\t\t\t\tlink += ' ' + key + '=\"' + magezonBuilderService.addslashes(value) + '\"';\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tlink += ' ' + key + '=' + value;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tlink += '}}';\n\t\t\t\t\t$scope.model[$scope.options.key] = link;\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t$scope.$watch('model.' + $scope.options.key, function(link) {\n\t\t\t\tvar params = $scope.getLinkParams(link);\n\t\t\t\tvar type = params.type;\n\t\t\t\tif (type == 'custom') {\n\t\t\t\t\t$scope.type = 'Custom Url';\n\t\t\t\t\t$scope.linkName = params.url;\n\t\t\t\t} else {\n\t\t\t\t\t$scope.to.loading = true;\n\t\t\t\t\tmagezonBuilderService.post('mgzbuilder/ajax/itemInfo', {\n\t\t\t\t\t\ttype: type,\n\t\t\t\t\t\tq: params.id\n\t\t\t\t\t}, true, function(res) {\n\t\t\t\t\t\t$scope.$apply(function() {\n\t\t\t\t\t\t\t$scope.title      = params.title;\n\t\t\t\t\t\t\t$scope.type       = magezonBuilderService.capitalize(type);\n\t\t\t\t\t\t\t$scope.linkName   = res.label;\n\t\t\t\t\t\t\t$scope.to.loading = false;\n\t\t\t\t\t\t})\n\t\t\t\t\t});\t\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n});","Magezon_Builder/js/form/element/animation-in.js":"define(['angular'], function(angular) {\n\n\treturn {\n\t\tcontroller: function($scope, magezonBuilderService, $timeout) {\n\t\t\t$scope.to.loading = true;\n\t\t\tmagezonBuilderService.getBuilderConfig('animationIn', function(options) {\n\t\t\t\t$scope.styles = angular.copy(options);\n\t\t\t\t$timeout(function() {\n\t\t\t\t\t$scope.to.loading = false;\n\t\t\t\t})\n\t\t\t});\n\n\t\t\t$scope.loadAnimate = function() {\n\t\t\t\t$scope.animateClass = $scope.fc.$viewValue + ' animated';\n\t\t\t\t$timeout(function() {\n\t\t\t\t\t$scope.animateClass = '';\n\t\t\t\t}, 1000);\n\t\t\t};\n\t\t}\n\t}\n});","Magezon_Builder/js/form/element/icon.js":"define([\n\t'jquery',\n\t'angular'\n], function($, angular) {\n\n\treturn {\n\t\ttemplateOptions: {\n\t\t\tlabelProp: 'label',\n\t\t\tvalueProp: 'value'\n\t\t},\n\t\tcontroller: function($rootScope, $scope, magezonBuilderService) {\n\t\t\t$scope.font  = $scope.to.defaultFont ? $scope.to.defaultFont : 'awesome';\n\t\t\t$scope.fonts = [];\n\t\t\tangular.forEach($rootScope.builderConfig.fonts, function(font) {\n\t\t\t\t$scope.fonts.push(font);\n\t\t\t});\n\n\t\t\t$scope.onSuccess = function(data) {\n\t\t\t\t$scope.to.loading = false;\n\t\t\t\t$scope.to.options = data;\n\t\t\t};\n\n\t\t\t$scope.to.loading = true;\n\t\t\tmagezonBuilderService.getBuilderConfig('fonts.' + $scope.font, $scope.onSuccess);\n\t\t\t$scope.listVisible = false;\n\n\t\t\t$scope.$watch('model.' + $scope.options.key, function(value) {\n\t\t\t\t$scope.listVisible = false;\n\t\t\t});\n\n\t\t\t$scope.$watch('font', function(value) {\n\t\t\t\t$scope.to.loading = true;\n\t\t\t\tif (value) magezonBuilderService.getBuilderConfig('fonts.' + value, $scope.onSuccess);\n\t\t\t});\n\n\t\t\t$scope.tagHandler = function (tag) {\n\t\t\t    return null;\n\t\t\t}\n\n\t\t\t$scope.outsideClick = function() {\n\t\t\t\t$scope.listVisible = false;\n\t\t\t}\n\n\t\t\t$scope.removeIcon = function() {\n\t\t\t\t$scope.model[$scope.options.key] = '';\n\t\t\t}\n\t\t},\n\t\tlink: function(scope, element, attrs, $select) {\n            element.find('.mgz-selector-button').click(function(event) {\n            \tif (scope.listVisible) {\n            \t\tsetTimeout(function () {\n            \t\t\t$(element).find('.ui-select-toggle').first().trigger('click');\n            \t\t}, 300);\n            \t}\n            });        \n        }\n\t}\n});","Magezon_Builder/js/form/element/editor.js":"define([\n    'jquery',\n    'angular'\n], function($, angular) {\n\n    return {\n        controller: function($rootScope, $scope, magezonBuilderService, magezonBuilderEditor, magezonBuilderFilter) {\n            $scope.to.loading = true;\n            var config = Object.extend(angular.copy($rootScope.builderConfig.wysiwyg), $scope.to.wysiwyg);\n            $scope.id = magezonBuilderService.uniqueid();\n            $scope.content = $scope.model[$scope.options.key];\n            magezonBuilderEditor.initTinymce($scope.id, config, function(value) {\n                $scope.content = $scope.model[$scope.options.key] = magezonBuilderFilter.decodeContent(value);\n            }, function() {\n                $scope.to.loading = false;\n            });\n        }\n    }\n})","Magezon_Builder/js/form/element/date.js":"define([\n\t'jquery',\n\t'mage/calendar'\n], function($) {\n\n\treturn {\n\t\tlink: function(scope, element) {\n\t\t\tsetTimeout(function() {\n\t\t\t\t$('#' + scope.id).calendar({\n\t\t\t\t\tdateFormat: \"mm/dd/yy\"\n\t\t\t\t});\n\t\t\t}, 100);\n\t\t}\n\t}\n});","Magezon_Builder/js/form/element/save-templates.js":"define([\n\t'jquery'\n], function($) {\n\n\treturn {\n\t\tcontroller: function($rootScope, $scope, $timeout, magezonBuilderUrl, profileManager) {\n\t\t\t$scope.text     = 'Save Template';\n\t\t\t$scope.disabled = false;\n\n\t\t\t$scope.saveTemplate = function() {\n\t\t\t\tif ($scope.to.saveTemplateUrl) {\n\t\t\t\t\tvar name = $scope.model[$scope.options.key];\n\t\t\t\t\tif (name && !$scope.disabled) {\n\t\t\t\t\t\t$scope.disabled = true;\n\t\t\t\t\t\t$scope.text     = 'Saving';\n\n\t\t\t\t\t\tvar data = {\n\t\t\t\t\t\t\tname: name,\n\t\t\t\t\t\t\tprofile: profileManager.getShortCode(),\n\t\t\t\t\t\t\tis_active: 1\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\t$.ajax({\n\t\t\t                url: magezonBuilderUrl.getUrl($scope.to.saveTemplateUrl),\n\t\t\t                type:'POST',\n\t\t\t                data: data,\n\t\t\t                success: function(res) {\n\t\t\t\t\t\t\t\tif (res.message) {\n\t\t\t\t\t\t\t\t\talert(res.message);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t$scope.$apply(function() {\n\t\t\t\t\t\t\t\t\t$scope.text = 'Saved';\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t$timeout(function() {\n\t\t\t\t\t\t\t\t\t$scope.model[$scope.options.key] = '';\n\t\t\t\t\t\t\t\t\t$scope.text                      = 'Save Template';\n\t\t\t\t\t\t\t\t\t$scope.disabled                  = false;\n\t\t\t\t\t\t\t\t\t$rootScope.$broadcast('loadTemplates');\n\t\t\t\t\t\t\t\t}, 1000);\n\t\t\t                }\n\t\t\t            });\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n})","Magezon_Builder/js/form/element/templates.js":"define([\n\t'jquery',\n\t'angular'\n], function($, angular) {\n\n\treturn {\n\t\ttemplateOptions: {\n\t\t\tlabelProp: 'label',\n\t\t\tvalueProp: 'value'\n\t\t},\n\t\tcontroller: function($rootScope, $scope, magezonBuilderService, elementManager, magezonBuilderModal, profileManager) {\n\t\t\t$scope.loadTemplates = function() {\n\t\t\t\t$rootScope.$broadcast('enableModalSpinner');\n\t\t\t\t$scope.to.loading = true;\n\t\t\t\tif ($scope.to.url) {\n\t\t\t\t\t$scope.to.loading = true;\n\t\t\t\t\tmagezonBuilderService.post($scope.to.url, {\n\t\t\t\t\t\tfield: $scope.options.key,\n\t\t\t\t\t\turl: $rootScope.builderConfig.profile.templateUrl\n\t\t\t\t\t}, true, function(res) {\n\t\t\t\t\t\t$scope.$apply(function() {\n\t\t\t\t\t\t\tangular.forEach(res, function(item, key) {\n\t\t\t\t\t\t\t\tif (item.profile) {\n\t\t\t\t\t\t\t\t\tvar profile = profileManager.prepareProfile(item.profile, true);\n\t\t\t\t\t\t\t\t\titem.elements = profile.elements;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif (item.label) item.name = item.label;\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t$scope.to.options = res;\n\t\t\t\t\t\t\t$scope.to.loading = false;\n\t\t\t\t\t\t\t$rootScope.$broadcast('disableModalSpinner');\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t} else if ($scope.to.source) {\n\t\t\t\t\t$scope.to.loading = true;\n\t\t\t\t\tmagezonBuilderService.post('mgzbuilder/ajax/itemList', {\n\t\t\t\t\t\ttype: $scope.to.source,\n\t\t\t\t\t\turl: $rootScope.builderConfig.profile.templateUrl\n\t\t\t\t\t}, true, function(res) {\n\t\t\t\t\t\t$scope.$apply(function() {\n\t\t\t\t\t\t\tangular.forEach(res, function(item, key) {\n\t\t\t\t\t\t\t\tif (item.profile) {\n\t\t\t\t\t\t\t\t\tvar profile = profileManager.prepareProfile(item.profile, true);\n\t\t\t\t\t\t\t\t\titem.elements = profile.elements;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif (item.label) item.name = item.label;\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t$scope.to.options = res;\n\t\t\t\t\t\t\t$scope.to.loading = false;\n\t\t\t\t\t\t\t$rootScope.$broadcast('disableModalSpinner');\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t\t$scope.loadTemplates();\n\n\t\t\t$scope.$on('loadTemplates', function() {\n\t\t\t\t$scope.loadTemplates();\n\t\t\t});\n\n\t\t\t$scope.openElements = function(item) {\n\t\t\t\titem['active'] = !item['active'];\n\t\t\t}\n\n\t\t    $scope.importItem = function(item) {\n\t\t    \tif (item.file || item.elements.length) {\n\t\t\t    \tvar elements;\n\t\t\t    \tif (item.elements && item.elements.length) {\n\t\t\t    \t\telements = angular.copy(elementManager.prepareElements(item.elements, true));\n\t\t\t\t\t\tangular.forEach(elements, function(elem, index) {\n\t\t\t\t\t\t\t$rootScope.profile.elements.push(angular.copy(elem));\n\t\t\t\t\t\t});\n\t\t\t\t\t\tmagezonBuilderModal.closeModal();\n\t\t\t\t\t\t$rootScope.$broadcast('addHistory', {\n\t\t\t\t\t\t\ttype: 'imported_template',\n\t\t\t\t\t\t\ttitle: item.name\n\t\t\t\t\t\t});\n\t\t\t\t\t\titem.importing = false;\n\t\t\t    \t}\n\t\t\t    \tif (item.file) {\n\t\t\t    \t\titem.importing = true;\n\t\t\t    \t\tmagezonBuilderService.post('mgzbuilder/ajax/template', {\n\t\t\t\t\t\t\titem: item\n\t\t\t\t\t\t}, true, function(res) {\n\t\t\t\t\t\t\telements = elementManager.prepareElements(res.elements, true);\n\t\t\t\t\t\t\tangular.forEach(elements, function(elem, index) {\n\t\t\t\t\t\t\t\t$rootScope.profile.elements.push(angular.copy(elem));\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tmagezonBuilderModal.closeModal();\n\t\t\t\t\t\t\t$rootScope.$broadcast('addHistory', {\n\t\t\t\t\t\t\t\ttype: 'imported_template',\n\t\t\t\t\t\t\t\ttitle: item.name\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t$scope.$apply(function() {\n\t\t\t\t\t\t\t\titem.importing = false;\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\t\t\t    \t}\n\t\t\t\t}\n\t\t    }\n\t\t}\n\t}\n})","Magezon_Builder/js/form/element/dynamic-rows/radio.js":"define([\n\t'jquery',\n\t'angular'\n], function($, angular) {\n\n\treturn {\n\t\tlink: function(scope, element, attrs, ctrl) {\n\t\t\t$(element).find('input').click(function(event) {\n\t\t\t\tscope.$emit('radioDefaultDynamicItem', {\n\t\t\t\t\titem: scope.model,\n\t\t\t\t\tkey: scope.options.key\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t}\n});","Magezon_Builder/js/form/element/dynamic-rows/position.js":"define([\n\t'jquery',\n\t'angular'\n], function($, angular) {\n\n\treturn {\n\t\tlink: function(scope, element, attrs, ctrl) {\n\t\t\t$(element).find('input').change(function(event) {\n\t\t\t\tscope.$emit('sortDynamicItems', {\n\t\t\t\t\tkey: scope.options.key\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t}\n});","Magezon_Builder/js/form/element/dynamic-rows/action-delete.js":"define([\n\t'jquery',\n\t'angular'\n], function($, angular) {\n\n\treturn {\n\t\tlink: function(scope, element, attrs) {\n\t\t\tscope.removeItem = function() {\n\t\t\t\tscope.$emit('removeDynamicItem', scope.model);\n\t\t\t}\n\t\t}\n\t}\n});","Magezon_Builder/js/cm/mode/javascript/javascript.js":"// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: http://codemirror.net/LICENSE\n\n(function(mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\") // CommonJS\n    mod(require(\"../../lib/codemirror\"));\n  else if (typeof define == \"function\" && define.amd) // AMD\n    define([\"../../lib/codemirror\"], mod);\n  else // Plain browser env\n    mod(CodeMirror);\n})(function(CodeMirror) {\n\"use strict\";\n\nCodeMirror.defineMode(\"javascript\", function(config, parserConfig) {\n  var indentUnit = config.indentUnit;\n  var statementIndent = parserConfig.statementIndent;\n  var jsonldMode = parserConfig.jsonld;\n  var jsonMode = parserConfig.json || jsonldMode;\n  var isTS = parserConfig.typescript;\n  var wordRE = parserConfig.wordCharacters || /[\\w$\\xa1-\\uffff]/;\n\n  // Tokenizer\n\n  var keywords = function(){\n    function kw(type) {return {type: type, style: \"keyword\"};}\n    var A = kw(\"keyword a\"), B = kw(\"keyword b\"), C = kw(\"keyword c\"), D = kw(\"keyword d\");\n    var operator = kw(\"operator\"), atom = {type: \"atom\", style: \"atom\"};\n\n    return {\n      \"if\": kw(\"if\"), \"while\": A, \"with\": A, \"else\": B, \"do\": B, \"try\": B, \"finally\": B,\n      \"return\": D, \"break\": D, \"continue\": D, \"new\": kw(\"new\"), \"delete\": C, \"void\": C, \"throw\": C,\n      \"debugger\": kw(\"debugger\"), \"var\": kw(\"var\"), \"const\": kw(\"var\"), \"let\": kw(\"var\"),\n      \"function\": kw(\"function\"), \"catch\": kw(\"catch\"),\n      \"for\": kw(\"for\"), \"switch\": kw(\"switch\"), \"case\": kw(\"case\"), \"default\": kw(\"default\"),\n      \"in\": operator, \"typeof\": operator, \"instanceof\": operator,\n      \"true\": atom, \"false\": atom, \"null\": atom, \"undefined\": atom, \"NaN\": atom, \"Infinity\": atom,\n      \"this\": kw(\"this\"), \"class\": kw(\"class\"), \"super\": kw(\"atom\"),\n      \"yield\": C, \"export\": kw(\"export\"), \"import\": kw(\"import\"), \"extends\": C,\n      \"await\": C\n    };\n  }();\n\n  var isOperatorChar = /[+\\-*&%=<>!?|~^@]/;\n  var isJsonldKeyword = /^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)\"/;\n\n  function readRegexp(stream) {\n    var escaped = false, next, inSet = false;\n    while ((next = stream.next()) != null) {\n      if (!escaped) {\n        if (next == \"/\" && !inSet) return;\n        if (next == \"[\") inSet = true;\n        else if (inSet && next == \"]\") inSet = false;\n      }\n      escaped = !escaped && next == \"\\\\\";\n    }\n  }\n\n  // Used as scratch variables to communicate multiple values without\n  // consing up tons of objects.\n  var type, content;\n  function ret(tp, style, cont) {\n    type = tp; content = cont;\n    return style;\n  }\n  function tokenBase(stream, state) {\n    var ch = stream.next();\n    if (ch == '\"' || ch == \"'\") {\n      state.tokenize = tokenString(ch);\n      return state.tokenize(stream, state);\n    } else if (ch == \".\" && stream.match(/^\\d+(?:[eE][+\\-]?\\d+)?/)) {\n      return ret(\"number\", \"number\");\n    } else if (ch == \".\" && stream.match(\"..\")) {\n      return ret(\"spread\", \"meta\");\n    } else if (/[\\[\\]{}\\(\\),;\\:\\.]/.test(ch)) {\n      return ret(ch);\n    } else if (ch == \"=\" && stream.eat(\">\")) {\n      return ret(\"=>\", \"operator\");\n    } else if (ch == \"0\" && stream.match(/^(?:x[\\da-f]+|o[0-7]+|b[01]+)n?/i)) {\n      return ret(\"number\", \"number\");\n    } else if (/\\d/.test(ch)) {\n      stream.match(/^\\d*(?:n|(?:\\.\\d*)?(?:[eE][+\\-]?\\d+)?)?/);\n      return ret(\"number\", \"number\");\n    } else if (ch == \"/\") {\n      if (stream.eat(\"*\")) {\n        state.tokenize = tokenComment;\n        return tokenComment(stream, state);\n      } else if (stream.eat(\"/\")) {\n        stream.skipToEnd();\n        return ret(\"comment\", \"comment\");\n      } else if (expressionAllowed(stream, state, 1)) {\n        readRegexp(stream);\n        stream.match(/^\\b(([gimyus])(?![gimyus]*\\2))+\\b/);\n        return ret(\"regexp\", \"string-2\");\n      } else {\n        stream.eat(\"=\");\n        return ret(\"operator\", \"operator\", stream.current());\n      }\n    } else if (ch == \"`\") {\n      state.tokenize = tokenQuasi;\n      return tokenQuasi(stream, state);\n    } else if (ch == \"#\") {\n      stream.skipToEnd();\n      return ret(\"error\", \"error\");\n    } else if (isOperatorChar.test(ch)) {\n      if (ch != \">\" || !state.lexical || state.lexical.type != \">\") {\n        if (stream.eat(\"=\")) {\n          if (ch == \"!\" || ch == \"=\") stream.eat(\"=\")\n        } else if (/[<>*+\\-]/.test(ch)) {\n          stream.eat(ch)\n          if (ch == \">\") stream.eat(ch)\n        }\n      }\n      return ret(\"operator\", \"operator\", stream.current());\n    } else if (wordRE.test(ch)) {\n      stream.eatWhile(wordRE);\n      var word = stream.current()\n      if (state.lastType != \".\") {\n        if (keywords.propertyIsEnumerable(word)) {\n          var kw = keywords[word]\n          return ret(kw.type, kw.style, word)\n        }\n        if (word == \"async\" && stream.match(/^(\\s|\\/\\*.*?\\*\\/)*[\\[\\(\\w]/, false))\n          return ret(\"async\", \"keyword\", word)\n      }\n      return ret(\"variable\", \"variable\", word)\n    }\n  }\n\n  function tokenString(quote) {\n    return function(stream, state) {\n      var escaped = false, next;\n      if (jsonldMode && stream.peek() == \"@\" && stream.match(isJsonldKeyword)){\n        state.tokenize = tokenBase;\n        return ret(\"jsonld-keyword\", \"meta\");\n      }\n      while ((next = stream.next()) != null) {\n        if (next == quote && !escaped) break;\n        escaped = !escaped && next == \"\\\\\";\n      }\n      if (!escaped) state.tokenize = tokenBase;\n      return ret(\"string\", \"string\");\n    };\n  }\n\n  function tokenComment(stream, state) {\n    var maybeEnd = false, ch;\n    while (ch = stream.next()) {\n      if (ch == \"/\" && maybeEnd) {\n        state.tokenize = tokenBase;\n        break;\n      }\n      maybeEnd = (ch == \"*\");\n    }\n    return ret(\"comment\", \"comment\");\n  }\n\n  function tokenQuasi(stream, state) {\n    var escaped = false, next;\n    while ((next = stream.next()) != null) {\n      if (!escaped && (next == \"`\" || next == \"$\" && stream.eat(\"{\"))) {\n        state.tokenize = tokenBase;\n        break;\n      }\n      escaped = !escaped && next == \"\\\\\";\n    }\n    return ret(\"quasi\", \"string-2\", stream.current());\n  }\n\n  var brackets = \"([{}])\";\n  // This is a crude lookahead trick to try and notice that we're\n  // parsing the argument patterns for a fat-arrow function before we\n  // actually hit the arrow token. It only works if the arrow is on\n  // the same line as the arguments and there's no strange noise\n  // (comments) in between. Fallback is to only notice when we hit the\n  // arrow, and not declare the arguments as locals for the arrow\n  // body.\n  function findFatArrow(stream, state) {\n    if (state.fatArrowAt) state.fatArrowAt = null;\n    var arrow = stream.string.indexOf(\"=>\", stream.start);\n    if (arrow < 0) return;\n\n    if (isTS) { // Try to skip TypeScript return type declarations after the arguments\n      var m = /:\\s*(?:\\w+(?:<[^>]*>|\\[\\])?|\\{[^}]*\\})\\s*$/.exec(stream.string.slice(stream.start, arrow))\n      if (m) arrow = m.index\n    }\n\n    var depth = 0, sawSomething = false;\n    for (var pos = arrow - 1; pos >= 0; --pos) {\n      var ch = stream.string.charAt(pos);\n      var bracket = brackets.indexOf(ch);\n      if (bracket >= 0 && bracket < 3) {\n        if (!depth) { ++pos; break; }\n        if (--depth == 0) { if (ch == \"(\") sawSomething = true; break; }\n      } else if (bracket >= 3 && bracket < 6) {\n        ++depth;\n      } else if (wordRE.test(ch)) {\n        sawSomething = true;\n      } else if (/[\"'\\/]/.test(ch)) {\n        return;\n      } else if (sawSomething && !depth) {\n        ++pos;\n        break;\n      }\n    }\n    if (sawSomething && !depth) state.fatArrowAt = pos;\n  }\n\n  // Parser\n\n  var atomicTypes = {\"atom\": true, \"number\": true, \"variable\": true, \"string\": true, \"regexp\": true, \"this\": true, \"jsonld-keyword\": true};\n\n  function JSLexical(indented, column, type, align, prev, info) {\n    this.indented = indented;\n    this.column = column;\n    this.type = type;\n    this.prev = prev;\n    this.info = info;\n    if (align != null) this.align = align;\n  }\n\n  function inScope(state, varname) {\n    for (var v = state.localVars; v; v = v.next)\n      if (v.name == varname) return true;\n    for (var cx = state.context; cx; cx = cx.prev) {\n      for (var v = cx.vars; v; v = v.next)\n        if (v.name == varname) return true;\n    }\n  }\n\n  function parseJS(state, style, type, content, stream) {\n    var cc = state.cc;\n    // Communicate our context to the combinators.\n    // (Less wasteful than consing up a hundred closures on every call.)\n    cx.state = state; cx.stream = stream; cx.marked = null, cx.cc = cc; cx.style = style;\n\n    if (!state.lexical.hasOwnProperty(\"align\"))\n      state.lexical.align = true;\n\n    while(true) {\n      var combinator = cc.length ? cc.pop() : jsonMode ? expression : statement;\n      if (combinator(type, content)) {\n        while(cc.length && cc[cc.length - 1].lex)\n          cc.pop()();\n        if (cx.marked) return cx.marked;\n        if (type == \"variable\" && inScope(state, content)) return \"variable-2\";\n        return style;\n      }\n    }\n  }\n\n  // Combinator utils\n\n  var cx = {state: null, column: null, marked: null, cc: null};\n  function pass() {\n    for (var i = arguments.length - 1; i >= 0; i--) cx.cc.push(arguments[i]);\n  }\n  function cont() {\n    pass.apply(null, arguments);\n    return true;\n  }\n  function inList(name, list) {\n    for (var v = list; v; v = v.next) if (v.name == name) return true\n    return false;\n  }\n  function register(varname) {\n    var state = cx.state;\n    cx.marked = \"def\";\n    if (state.context) {\n      if (state.lexical.info == \"var\" && state.context && state.context.block) {\n        // FIXME function decls are also not block scoped\n        var newContext = registerVarScoped(varname, state.context)\n        if (newContext != null) {\n          state.context = newContext\n          return\n        }\n      } else if (!inList(varname, state.localVars)) {\n        state.localVars = new Var(varname, state.localVars)\n        return\n      }\n    }\n    // Fall through means this is global\n    if (parserConfig.globalVars && !inList(varname, state.globalVars))\n      state.globalVars = new Var(varname, state.globalVars)\n  }\n  function registerVarScoped(varname, context) {\n    if (!context) {\n      return null\n    } else if (context.block) {\n      var inner = registerVarScoped(varname, context.prev)\n      if (!inner) return null\n      if (inner == context.prev) return context\n      return new Context(inner, context.vars, true)\n    } else if (inList(varname, context.vars)) {\n      return context\n    } else {\n      return new Context(context.prev, new Var(varname, context.vars), false)\n    }\n  }\n\n  function isModifier(name) {\n    return name == \"public\" || name == \"private\" || name == \"protected\" || name == \"abstract\" || name == \"readonly\"\n  }\n\n  // Combinators\n\n  function Context(prev, vars, block) { this.prev = prev; this.vars = vars; this.block = block }\n  function Var(name, next) { this.name = name; this.next = next }\n\n  var defaultVars = new Var(\"this\", new Var(\"arguments\", null))\n  function pushcontext() {\n    cx.state.context = new Context(cx.state.context, cx.state.localVars, false)\n    cx.state.localVars = defaultVars\n  }\n  function pushblockcontext() {\n    cx.state.context = new Context(cx.state.context, cx.state.localVars, true)\n    cx.state.localVars = null\n  }\n  function popcontext() {\n    cx.state.localVars = cx.state.context.vars\n    cx.state.context = cx.state.context.prev\n  }\n  popcontext.lex = true\n  function pushlex(type, info) {\n    var result = function() {\n      var state = cx.state, indent = state.indented;\n      if (state.lexical.type == \"stat\") indent = state.lexical.indented;\n      else for (var outer = state.lexical; outer && outer.type == \")\" && outer.align; outer = outer.prev)\n        indent = outer.indented;\n      state.lexical = new JSLexical(indent, cx.stream.column(), type, null, state.lexical, info);\n    };\n    result.lex = true;\n    return result;\n  }\n  function poplex() {\n    var state = cx.state;\n    if (state.lexical.prev) {\n      if (state.lexical.type == \")\")\n        state.indented = state.lexical.indented;\n      state.lexical = state.lexical.prev;\n    }\n  }\n  poplex.lex = true;\n\n  function expect(wanted) {\n    function exp(type) {\n      if (type == wanted) return cont();\n      else if (wanted == \";\") return pass();\n      else return cont(exp);\n    };\n    return exp;\n  }\n\n  function statement(type, value) {\n    if (type == \"var\") return cont(pushlex(\"vardef\", value), vardef, expect(\";\"), poplex);\n    if (type == \"keyword a\") return cont(pushlex(\"form\"), parenExpr, statement, poplex);\n    if (type == \"keyword b\") return cont(pushlex(\"form\"), statement, poplex);\n    if (type == \"keyword d\") return cx.stream.match(/^\\s*$/, false) ? cont() : cont(pushlex(\"stat\"), maybeexpression, expect(\";\"), poplex);\n    if (type == \"debugger\") return cont(expect(\";\"));\n    if (type == \"{\") return cont(pushlex(\"}\"), pushblockcontext, block, poplex, popcontext);\n    if (type == \";\") return cont();\n    if (type == \"if\") {\n      if (cx.state.lexical.info == \"else\" && cx.state.cc[cx.state.cc.length - 1] == poplex)\n        cx.state.cc.pop()();\n      return cont(pushlex(\"form\"), parenExpr, statement, poplex, maybeelse);\n    }\n    if (type == \"function\") return cont(functiondef);\n    if (type == \"for\") return cont(pushlex(\"form\"), forspec, statement, poplex);\n    if (type == \"class\" || (isTS && value == \"interface\")) { cx.marked = \"keyword\"; return cont(pushlex(\"form\"), className, poplex); }\n    if (type == \"variable\") {\n      if (isTS && value == \"declare\") {\n        cx.marked = \"keyword\"\n        return cont(statement)\n      } else if (isTS && (value == \"module\" || value == \"enum\" || value == \"type\") && cx.stream.match(/^\\s*\\w/, false)) {\n        cx.marked = \"keyword\"\n        if (value == \"enum\") return cont(enumdef);\n        else if (value == \"type\") return cont(typeexpr, expect(\"operator\"), typeexpr, expect(\";\"));\n        else return cont(pushlex(\"form\"), pattern, expect(\"{\"), pushlex(\"}\"), block, poplex, poplex)\n      } else if (isTS && value == \"namespace\") {\n        cx.marked = \"keyword\"\n        return cont(pushlex(\"form\"), expression, block, poplex)\n      } else if (isTS && value == \"abstract\") {\n        cx.marked = \"keyword\"\n        return cont(statement)\n      } else {\n        return cont(pushlex(\"stat\"), maybelabel);\n      }\n    }\n    if (type == \"switch\") return cont(pushlex(\"form\"), parenExpr, expect(\"{\"), pushlex(\"}\", \"switch\"), pushblockcontext,\n                                      block, poplex, poplex, popcontext);\n    if (type == \"case\") return cont(expression, expect(\":\"));\n    if (type == \"default\") return cont(expect(\":\"));\n    if (type == \"catch\") return cont(pushlex(\"form\"), pushcontext, maybeCatchBinding, statement, poplex, popcontext);\n    if (type == \"export\") return cont(pushlex(\"stat\"), afterExport, poplex);\n    if (type == \"import\") return cont(pushlex(\"stat\"), afterImport, poplex);\n    if (type == \"async\") return cont(statement)\n    if (value == \"@\") return cont(expression, statement)\n    return pass(pushlex(\"stat\"), expression, expect(\";\"), poplex);\n  }\n  function maybeCatchBinding(type) {\n    if (type == \"(\") return cont(funarg, expect(\")\"))\n  }\n  function expression(type, value) {\n    return expressionInner(type, value, false);\n  }\n  function expressionNoComma(type, value) {\n    return expressionInner(type, value, true);\n  }\n  function parenExpr(type) {\n    if (type != \"(\") return pass()\n    return cont(pushlex(\")\"), expression, expect(\")\"), poplex)\n  }\n  function expressionInner(type, value, noComma) {\n    if (cx.state.fatArrowAt == cx.stream.start) {\n      var body = noComma ? arrowBodyNoComma : arrowBody;\n      if (type == \"(\") return cont(pushcontext, pushlex(\")\"), commasep(funarg, \")\"), poplex, expect(\"=>\"), body, popcontext);\n      else if (type == \"variable\") return pass(pushcontext, pattern, expect(\"=>\"), body, popcontext);\n    }\n\n    var maybeop = noComma ? maybeoperatorNoComma : maybeoperatorComma;\n    if (atomicTypes.hasOwnProperty(type)) return cont(maybeop);\n    if (type == \"function\") return cont(functiondef, maybeop);\n    if (type == \"class\" || (isTS && value == \"interface\")) { cx.marked = \"keyword\"; return cont(pushlex(\"form\"), classExpression, poplex); }\n    if (type == \"keyword c\" || type == \"async\") return cont(noComma ? expressionNoComma : expression);\n    if (type == \"(\") return cont(pushlex(\")\"), maybeexpression, expect(\")\"), poplex, maybeop);\n    if (type == \"operator\" || type == \"spread\") return cont(noComma ? expressionNoComma : expression);\n    if (type == \"[\") return cont(pushlex(\"]\"), arrayLiteral, poplex, maybeop);\n    if (type == \"{\") return contCommasep(objprop, \"}\", null, maybeop);\n    if (type == \"quasi\") return pass(quasi, maybeop);\n    if (type == \"new\") return cont(maybeTarget(noComma));\n    if (type == \"import\") return cont(expression);\n    return cont();\n  }\n  function maybeexpression(type) {\n    if (type.match(/[;\\}\\)\\],]/)) return pass();\n    return pass(expression);\n  }\n\n  function maybeoperatorComma(type, value) {\n    if (type == \",\") return cont(expression);\n    return maybeoperatorNoComma(type, value, false);\n  }\n  function maybeoperatorNoComma(type, value, noComma) {\n    var me = noComma == false ? maybeoperatorComma : maybeoperatorNoComma;\n    var expr = noComma == false ? expression : expressionNoComma;\n    if (type == \"=>\") return cont(pushcontext, noComma ? arrowBodyNoComma : arrowBody, popcontext);\n    if (type == \"operator\") {\n      if (/\\+\\+|--/.test(value) || isTS && value == \"!\") return cont(me);\n      if (isTS && value == \"<\" && cx.stream.match(/^([^>]|<.*?>)*>\\s*\\(/, false))\n        return cont(pushlex(\">\"), commasep(typeexpr, \">\"), poplex, me);\n      if (value == \"?\") return cont(expression, expect(\":\"), expr);\n      return cont(expr);\n    }\n    if (type == \"quasi\") { return pass(quasi, me); }\n    if (type == \";\") return;\n    if (type == \"(\") return contCommasep(expressionNoComma, \")\", \"call\", me);\n    if (type == \".\") return cont(property, me);\n    if (type == \"[\") return cont(pushlex(\"]\"), maybeexpression, expect(\"]\"), poplex, me);\n    if (isTS && value == \"as\") { cx.marked = \"keyword\"; return cont(typeexpr, me) }\n    if (type == \"regexp\") {\n      cx.state.lastType = cx.marked = \"operator\"\n      cx.stream.backUp(cx.stream.pos - cx.stream.start - 1)\n      return cont(expr)\n    }\n  }\n  function quasi(type, value) {\n    if (type != \"quasi\") return pass();\n    if (value.slice(value.length - 2) != \"${\") return cont(quasi);\n    return cont(expression, continueQuasi);\n  }\n  function continueQuasi(type) {\n    if (type == \"}\") {\n      cx.marked = \"string-2\";\n      cx.state.tokenize = tokenQuasi;\n      return cont(quasi);\n    }\n  }\n  function arrowBody(type) {\n    findFatArrow(cx.stream, cx.state);\n    return pass(type == \"{\" ? statement : expression);\n  }\n  function arrowBodyNoComma(type) {\n    findFatArrow(cx.stream, cx.state);\n    return pass(type == \"{\" ? statement : expressionNoComma);\n  }\n  function maybeTarget(noComma) {\n    return function(type) {\n      if (type == \".\") return cont(noComma ? targetNoComma : target);\n      else if (type == \"variable\" && isTS) return cont(maybeTypeArgs, noComma ? maybeoperatorNoComma : maybeoperatorComma)\n      else return pass(noComma ? expressionNoComma : expression);\n    };\n  }\n  function target(_, value) {\n    if (value == \"target\") { cx.marked = \"keyword\"; return cont(maybeoperatorComma); }\n  }\n  function targetNoComma(_, value) {\n    if (value == \"target\") { cx.marked = \"keyword\"; return cont(maybeoperatorNoComma); }\n  }\n  function maybelabel(type) {\n    if (type == \":\") return cont(poplex, statement);\n    return pass(maybeoperatorComma, expect(\";\"), poplex);\n  }\n  function property(type) {\n    if (type == \"variable\") {cx.marked = \"property\"; return cont();}\n  }\n  function objprop(type, value) {\n    if (type == \"async\") {\n      cx.marked = \"property\";\n      return cont(objprop);\n    } else if (type == \"variable\" || cx.style == \"keyword\") {\n      cx.marked = \"property\";\n      if (value == \"get\" || value == \"set\") return cont(getterSetter);\n      var m // Work around fat-arrow-detection complication for detecting typescript typed arrow params\n      if (isTS && cx.state.fatArrowAt == cx.stream.start && (m = cx.stream.match(/^\\s*:\\s*/, false)))\n        cx.state.fatArrowAt = cx.stream.pos + m[0].length\n      return cont(afterprop);\n    } else if (type == \"number\" || type == \"string\") {\n      cx.marked = jsonldMode ? \"property\" : (cx.style + \" property\");\n      return cont(afterprop);\n    } else if (type == \"jsonld-keyword\") {\n      return cont(afterprop);\n    } else if (isTS && isModifier(value)) {\n      cx.marked = \"keyword\"\n      return cont(objprop)\n    } else if (type == \"[\") {\n      return cont(expression, maybetype, expect(\"]\"), afterprop);\n    } else if (type == \"spread\") {\n      return cont(expressionNoComma, afterprop);\n    } else if (value == \"*\") {\n      cx.marked = \"keyword\";\n      return cont(objprop);\n    } else if (type == \":\") {\n      return pass(afterprop)\n    }\n  }\n  function getterSetter(type) {\n    if (type != \"variable\") return pass(afterprop);\n    cx.marked = \"property\";\n    return cont(functiondef);\n  }\n  function afterprop(type) {\n    if (type == \":\") return cont(expressionNoComma);\n    if (type == \"(\") return pass(functiondef);\n  }\n  function commasep(what, end, sep) {\n    function proceed(type, value) {\n      if (sep ? sep.indexOf(type) > -1 : type == \",\") {\n        var lex = cx.state.lexical;\n        if (lex.info == \"call\") lex.pos = (lex.pos || 0) + 1;\n        return cont(function(type, value) {\n          if (type == end || value == end) return pass()\n          return pass(what)\n        }, proceed);\n      }\n      if (type == end || value == end) return cont();\n      return cont(expect(end));\n    }\n    return function(type, value) {\n      if (type == end || value == end) return cont();\n      return pass(what, proceed);\n    };\n  }\n  function contCommasep(what, end, info) {\n    for (var i = 3; i < arguments.length; i++)\n      cx.cc.push(arguments[i]);\n    return cont(pushlex(end, info), commasep(what, end), poplex);\n  }\n  function block(type) {\n    if (type == \"}\") return cont();\n    return pass(statement, block);\n  }\n  function maybetype(type, value) {\n    if (isTS) {\n      if (type == \":\") return cont(typeexpr);\n      if (value == \"?\") return cont(maybetype);\n    }\n  }\n  function mayberettype(type) {\n    if (isTS && type == \":\") {\n      if (cx.stream.match(/^\\s*\\w+\\s+is\\b/, false)) return cont(expression, isKW, typeexpr)\n      else return cont(typeexpr)\n    }\n  }\n  function isKW(_, value) {\n    if (value == \"is\") {\n      cx.marked = \"keyword\"\n      return cont()\n    }\n  }\n  function typeexpr(type, value) {\n    if (value == \"keyof\" || value == \"typeof\") {\n      cx.marked = \"keyword\"\n      return cont(value == \"keyof\" ? typeexpr : expressionNoComma)\n    }\n    if (type == \"variable\" || value == \"void\") {\n      cx.marked = \"type\"\n      return cont(afterType)\n    }\n    if (type == \"string\" || type == \"number\" || type == \"atom\") return cont(afterType);\n    if (type == \"[\") return cont(pushlex(\"]\"), commasep(typeexpr, \"]\", \",\"), poplex, afterType)\n    if (type == \"{\") return cont(pushlex(\"}\"), commasep(typeprop, \"}\", \",;\"), poplex, afterType)\n    if (type == \"(\") return cont(commasep(typearg, \")\"), maybeReturnType)\n    if (type == \"<\") return cont(commasep(typeexpr, \">\"), typeexpr)\n  }\n  function maybeReturnType(type) {\n    if (type == \"=>\") return cont(typeexpr)\n  }\n  function typeprop(type, value) {\n    if (type == \"variable\" || cx.style == \"keyword\") {\n      cx.marked = \"property\"\n      return cont(typeprop)\n    } else if (value == \"?\") {\n      return cont(typeprop)\n    } else if (type == \":\") {\n      return cont(typeexpr)\n    } else if (type == \"[\") {\n      return cont(expression, maybetype, expect(\"]\"), typeprop)\n    }\n  }\n  function typearg(type, value) {\n    if (type == \"variable\" && cx.stream.match(/^\\s*[?:]/, false) || value == \"?\") return cont(typearg)\n    if (type == \":\") return cont(typeexpr)\n    return pass(typeexpr)\n  }\n  function afterType(type, value) {\n    if (value == \"<\") return cont(pushlex(\">\"), commasep(typeexpr, \">\"), poplex, afterType)\n    if (value == \"|\" || type == \".\" || value == \"&\") return cont(typeexpr)\n    if (type == \"[\") return cont(expect(\"]\"), afterType)\n    if (value == \"extends\" || value == \"implements\") { cx.marked = \"keyword\"; return cont(typeexpr) }\n  }\n  function maybeTypeArgs(_, value) {\n    if (value == \"<\") return cont(pushlex(\">\"), commasep(typeexpr, \">\"), poplex, afterType)\n  }\n  function typeparam() {\n    return pass(typeexpr, maybeTypeDefault)\n  }\n  function maybeTypeDefault(_, value) {\n    if (value == \"=\") return cont(typeexpr)\n  }\n  function vardef(_, value) {\n    if (value == \"enum\") {cx.marked = \"keyword\"; return cont(enumdef)}\n    return pass(pattern, maybetype, maybeAssign, vardefCont);\n  }\n  function pattern(type, value) {\n    if (isTS && isModifier(value)) { cx.marked = \"keyword\"; return cont(pattern) }\n    if (type == \"variable\") { register(value); return cont(); }\n    if (type == \"spread\") return cont(pattern);\n    if (type == \"[\") return contCommasep(pattern, \"]\");\n    if (type == \"{\") return contCommasep(proppattern, \"}\");\n  }\n  function proppattern(type, value) {\n    if (type == \"variable\" && !cx.stream.match(/^\\s*:/, false)) {\n      register(value);\n      return cont(maybeAssign);\n    }\n    if (type == \"variable\") cx.marked = \"property\";\n    if (type == \"spread\") return cont(pattern);\n    if (type == \"}\") return pass();\n    return cont(expect(\":\"), pattern, maybeAssign);\n  }\n  function maybeAssign(_type, value) {\n    if (value == \"=\") return cont(expressionNoComma);\n  }\n  function vardefCont(type) {\n    if (type == \",\") return cont(vardef);\n  }\n  function maybeelse(type, value) {\n    if (type == \"keyword b\" && value == \"else\") return cont(pushlex(\"form\", \"else\"), statement, poplex);\n  }\n  function forspec(type, value) {\n    if (value == \"await\") return cont(forspec);\n    if (type == \"(\") return cont(pushlex(\")\"), forspec1, expect(\")\"), poplex);\n  }\n  function forspec1(type) {\n    if (type == \"var\") return cont(vardef, expect(\";\"), forspec2);\n    if (type == \";\") return cont(forspec2);\n    if (type == \"variable\") return cont(formaybeinof);\n    return pass(expression, expect(\";\"), forspec2);\n  }\n  function formaybeinof(_type, value) {\n    if (value == \"in\" || value == \"of\") { cx.marked = \"keyword\"; return cont(expression); }\n    return cont(maybeoperatorComma, forspec2);\n  }\n  function forspec2(type, value) {\n    if (type == \";\") return cont(forspec3);\n    if (value == \"in\" || value == \"of\") { cx.marked = \"keyword\"; return cont(expression); }\n    return pass(expression, expect(\";\"), forspec3);\n  }\n  function forspec3(type) {\n    if (type != \")\") cont(expression);\n  }\n  function functiondef(type, value) {\n    if (value == \"*\") {cx.marked = \"keyword\"; return cont(functiondef);}\n    if (type == \"variable\") {register(value); return cont(functiondef);}\n    if (type == \"(\") return cont(pushcontext, pushlex(\")\"), commasep(funarg, \")\"), poplex, mayberettype, statement, popcontext);\n    if (isTS && value == \"<\") return cont(pushlex(\">\"), commasep(typeparam, \">\"), poplex, functiondef)\n  }\n  function funarg(type, value) {\n    if (value == \"@\") cont(expression, funarg)\n    if (type == \"spread\") return cont(funarg);\n    if (isTS && isModifier(value)) { cx.marked = \"keyword\"; return cont(funarg); }\n    return pass(pattern, maybetype, maybeAssign);\n  }\n  function classExpression(type, value) {\n    // Class expressions may have an optional name.\n    if (type == \"variable\") return className(type, value);\n    return classNameAfter(type, value);\n  }\n  function className(type, value) {\n    if (type == \"variable\") {register(value); return cont(classNameAfter);}\n  }\n  function classNameAfter(type, value) {\n    if (value == \"<\") return cont(pushlex(\">\"), commasep(typeparam, \">\"), poplex, classNameAfter)\n    if (value == \"extends\" || value == \"implements\" || (isTS && type == \",\")) {\n      if (value == \"implements\") cx.marked = \"keyword\";\n      return cont(isTS ? typeexpr : expression, classNameAfter);\n    }\n    if (type == \"{\") return cont(pushlex(\"}\"), classBody, poplex);\n  }\n  function classBody(type, value) {\n    if (type == \"async\" ||\n        (type == \"variable\" &&\n         (value == \"static\" || value == \"get\" || value == \"set\" || (isTS && isModifier(value))) &&\n         cx.stream.match(/^\\s+[\\w$\\xa1-\\uffff]/, false))) {\n      cx.marked = \"keyword\";\n      return cont(classBody);\n    }\n    if (type == \"variable\" || cx.style == \"keyword\") {\n      cx.marked = \"property\";\n      return cont(isTS ? classfield : functiondef, classBody);\n    }\n    if (type == \"[\")\n      return cont(expression, maybetype, expect(\"]\"), isTS ? classfield : functiondef, classBody)\n    if (value == \"*\") {\n      cx.marked = \"keyword\";\n      return cont(classBody);\n    }\n    if (type == \";\") return cont(classBody);\n    if (type == \"}\") return cont();\n    if (value == \"@\") return cont(expression, classBody)\n  }\n  function classfield(type, value) {\n    if (value == \"?\") return cont(classfield)\n    if (type == \":\") return cont(typeexpr, maybeAssign)\n    if (value == \"=\") return cont(expressionNoComma)\n    return pass(functiondef)\n  }\n  function afterExport(type, value) {\n    if (value == \"*\") { cx.marked = \"keyword\"; return cont(maybeFrom, expect(\";\")); }\n    if (value == \"default\") { cx.marked = \"keyword\"; return cont(expression, expect(\";\")); }\n    if (type == \"{\") return cont(commasep(exportField, \"}\"), maybeFrom, expect(\";\"));\n    return pass(statement);\n  }\n  function exportField(type, value) {\n    if (value == \"as\") { cx.marked = \"keyword\"; return cont(expect(\"variable\")); }\n    if (type == \"variable\") return pass(expressionNoComma, exportField);\n  }\n  function afterImport(type) {\n    if (type == \"string\") return cont();\n    if (type == \"(\") return pass(expression);\n    return pass(importSpec, maybeMoreImports, maybeFrom);\n  }\n  function importSpec(type, value) {\n    if (type == \"{\") return contCommasep(importSpec, \"}\");\n    if (type == \"variable\") register(value);\n    if (value == \"*\") cx.marked = \"keyword\";\n    return cont(maybeAs);\n  }\n  function maybeMoreImports(type) {\n    if (type == \",\") return cont(importSpec, maybeMoreImports)\n  }\n  function maybeAs(_type, value) {\n    if (value == \"as\") { cx.marked = \"keyword\"; return cont(importSpec); }\n  }\n  function maybeFrom(_type, value) {\n    if (value == \"from\") { cx.marked = \"keyword\"; return cont(expression); }\n  }\n  function arrayLiteral(type) {\n    if (type == \"]\") return cont();\n    return pass(commasep(expressionNoComma, \"]\"));\n  }\n  function enumdef() {\n    return pass(pushlex(\"form\"), pattern, expect(\"{\"), pushlex(\"}\"), commasep(enummember, \"}\"), poplex, poplex)\n  }\n  function enummember() {\n    return pass(pattern, maybeAssign);\n  }\n\n  function isContinuedStatement(state, textAfter) {\n    return state.lastType == \"operator\" || state.lastType == \",\" ||\n      isOperatorChar.test(textAfter.charAt(0)) ||\n      /[,.]/.test(textAfter.charAt(0));\n  }\n\n  function expressionAllowed(stream, state, backUp) {\n    return state.tokenize == tokenBase &&\n      /^(?:operator|sof|keyword [bcd]|case|new|export|default|spread|[\\[{}\\(,;:]|=>)$/.test(state.lastType) ||\n      (state.lastType == \"quasi\" && /\\{\\s*$/.test(stream.string.slice(0, stream.pos - (backUp || 0))))\n  }\n\n  // Interface\n\n  return {\n    startState: function(basecolumn) {\n      var state = {\n        tokenize: tokenBase,\n        lastType: \"sof\",\n        cc: [],\n        lexical: new JSLexical((basecolumn || 0) - indentUnit, 0, \"block\", false),\n        localVars: parserConfig.localVars,\n        context: parserConfig.localVars && new Context(null, null, false),\n        indented: basecolumn || 0\n      };\n      if (parserConfig.globalVars && typeof parserConfig.globalVars == \"object\")\n        state.globalVars = parserConfig.globalVars;\n      return state;\n    },\n\n    token: function(stream, state) {\n      if (stream.sol()) {\n        if (!state.lexical.hasOwnProperty(\"align\"))\n          state.lexical.align = false;\n        state.indented = stream.indentation();\n        findFatArrow(stream, state);\n      }\n      if (state.tokenize != tokenComment && stream.eatSpace()) return null;\n      var style = state.tokenize(stream, state);\n      if (type == \"comment\") return style;\n      state.lastType = type == \"operator\" && (content == \"++\" || content == \"--\") ? \"incdec\" : type;\n      return parseJS(state, style, type, content, stream);\n    },\n\n    indent: function(state, textAfter) {\n      if (state.tokenize == tokenComment) return CodeMirror.Pass;\n      if (state.tokenize != tokenBase) return 0;\n      var firstChar = textAfter && textAfter.charAt(0), lexical = state.lexical, top\n      // Kludge to prevent 'maybelse' from blocking lexical scope pops\n      if (!/^\\s*else\\b/.test(textAfter)) for (var i = state.cc.length - 1; i >= 0; --i) {\n        var c = state.cc[i];\n        if (c == poplex) lexical = lexical.prev;\n        else if (c != maybeelse) break;\n      }\n      while ((lexical.type == \"stat\" || lexical.type == \"form\") &&\n             (firstChar == \"}\" || ((top = state.cc[state.cc.length - 1]) &&\n                                   (top == maybeoperatorComma || top == maybeoperatorNoComma) &&\n                                   !/^[,\\.=+\\-*:?[\\(]/.test(textAfter))))\n        lexical = lexical.prev;\n      if (statementIndent && lexical.type == \")\" && lexical.prev.type == \"stat\")\n        lexical = lexical.prev;\n      var type = lexical.type, closing = firstChar == type;\n\n      if (type == \"vardef\") return lexical.indented + (state.lastType == \"operator\" || state.lastType == \",\" ? lexical.info.length + 1 : 0);\n      else if (type == \"form\" && firstChar == \"{\") return lexical.indented;\n      else if (type == \"form\") return lexical.indented + indentUnit;\n      else if (type == \"stat\")\n        return lexical.indented + (isContinuedStatement(state, textAfter) ? statementIndent || indentUnit : 0);\n      else if (lexical.info == \"switch\" && !closing && parserConfig.doubleIndentSwitch != false)\n        return lexical.indented + (/^(?:case|default)\\b/.test(textAfter) ? indentUnit : 2 * indentUnit);\n      else if (lexical.align) return lexical.column + (closing ? 0 : 1);\n      else return lexical.indented + (closing ? 0 : indentUnit);\n    },\n\n    electricInput: /^\\s*(?:case .*?:|default:|\\{|\\})$/,\n    blockCommentStart: jsonMode ? null : \"/*\",\n    blockCommentEnd: jsonMode ? null : \"*/\",\n    blockCommentContinue: jsonMode ? null : \" * \",\n    lineComment: jsonMode ? null : \"//\",\n    fold: \"brace\",\n    closeBrackets: \"()[]{}''\\\"\\\"``\",\n\n    helperType: jsonMode ? \"json\" : \"javascript\",\n    jsonldMode: jsonldMode,\n    jsonMode: jsonMode,\n\n    expressionAllowed: expressionAllowed,\n\n    skipExpression: function(state) {\n      var top = state.cc[state.cc.length - 1]\n      if (top == expression || top == expressionNoComma) state.cc.pop()\n    }\n  };\n});\n\nCodeMirror.registerHelper(\"wordChars\", \"javascript\", /[\\w$]/);\n\nCodeMirror.defineMIME(\"text/javascript\", \"javascript\");\nCodeMirror.defineMIME(\"text/ecmascript\", \"javascript\");\nCodeMirror.defineMIME(\"application/javascript\", \"javascript\");\nCodeMirror.defineMIME(\"application/x-javascript\", \"javascript\");\nCodeMirror.defineMIME(\"application/ecmascript\", \"javascript\");\nCodeMirror.defineMIME(\"application/json\", {name: \"javascript\", json: true});\nCodeMirror.defineMIME(\"application/x-json\", {name: \"javascript\", json: true});\nCodeMirror.defineMIME(\"application/ld+json\", {name: \"javascript\", jsonld: true});\nCodeMirror.defineMIME(\"text/typescript\", { name: \"javascript\", typescript: true });\nCodeMirror.defineMIME(\"application/typescript\", { name: \"javascript\", typescript: true });\n\n});\n","Magezon_Builder/js/cm/mode/css/css.js":"// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: http://codemirror.net/LICENSE\n\n(function(mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\") // CommonJS\n    mod(require(\"../../lib/codemirror\"));\n  else if (typeof define == \"function\" && define.amd) // AMD\n    define([\"../../lib/codemirror\"], mod);\n  else // Plain browser env\n    mod(CodeMirror);\n})(function(CodeMirror) {\n\"use strict\";\n\nCodeMirror.defineMode(\"css\", function(config, parserConfig) {\n  var inline = parserConfig.inline\n  if (!parserConfig.propertyKeywords) parserConfig = CodeMirror.resolveMode(\"text/css\");\n\n  var indentUnit = config.indentUnit,\n      tokenHooks = parserConfig.tokenHooks,\n      documentTypes = parserConfig.documentTypes || {},\n      mediaTypes = parserConfig.mediaTypes || {},\n      mediaFeatures = parserConfig.mediaFeatures || {},\n      mediaValueKeywords = parserConfig.mediaValueKeywords || {},\n      propertyKeywords = parserConfig.propertyKeywords || {},\n      nonStandardPropertyKeywords = parserConfig.nonStandardPropertyKeywords || {},\n      fontProperties = parserConfig.fontProperties || {},\n      counterDescriptors = parserConfig.counterDescriptors || {},\n      colorKeywords = parserConfig.colorKeywords || {},\n      valueKeywords = parserConfig.valueKeywords || {},\n      allowNested = parserConfig.allowNested,\n      lineComment = parserConfig.lineComment,\n      supportsAtComponent = parserConfig.supportsAtComponent === true;\n\n  var type, override;\n  function ret(style, tp) { type = tp; return style; }\n\n  // Tokenizers\n\n  function tokenBase(stream, state) {\n    var ch = stream.next();\n    if (tokenHooks[ch]) {\n      var result = tokenHooks[ch](stream, state);\n      if (result !== false) return result;\n    }\n    if (ch == \"@\") {\n      stream.eatWhile(/[\\w\\\\\\-]/);\n      return ret(\"def\", stream.current());\n    } else if (ch == \"=\" || (ch == \"~\" || ch == \"|\") && stream.eat(\"=\")) {\n      return ret(null, \"compare\");\n    } else if (ch == \"\\\"\" || ch == \"'\") {\n      state.tokenize = tokenString(ch);\n      return state.tokenize(stream, state);\n    } else if (ch == \"#\") {\n      stream.eatWhile(/[\\w\\\\\\-]/);\n      return ret(\"atom\", \"hash\");\n    } else if (ch == \"!\") {\n      stream.match(/^\\s*\\w*/);\n      return ret(\"keyword\", \"important\");\n    } else if (/\\d/.test(ch) || ch == \".\" && stream.eat(/\\d/)) {\n      stream.eatWhile(/[\\w.%]/);\n      return ret(\"number\", \"unit\");\n    } else if (ch === \"-\") {\n      if (/[\\d.]/.test(stream.peek())) {\n        stream.eatWhile(/[\\w.%]/);\n        return ret(\"number\", \"unit\");\n      } else if (stream.match(/^-[\\w\\\\\\-]+/)) {\n        stream.eatWhile(/[\\w\\\\\\-]/);\n        if (stream.match(/^\\s*:/, false))\n          return ret(\"variable-2\", \"variable-definition\");\n        return ret(\"variable-2\", \"variable\");\n      } else if (stream.match(/^\\w+-/)) {\n        return ret(\"meta\", \"meta\");\n      }\n    } else if (/[,+>*\\/]/.test(ch)) {\n      return ret(null, \"select-op\");\n    } else if (ch == \".\" && stream.match(/^-?[_a-z][_a-z0-9-]*/i)) {\n      return ret(\"qualifier\", \"qualifier\");\n    } else if (/[:;{}\\[\\]\\(\\)]/.test(ch)) {\n      return ret(null, ch);\n    } else if (((ch == \"u\" || ch == \"U\") && stream.match(/rl(-prefix)?\\(/i)) ||\n               ((ch == \"d\" || ch == \"D\") && stream.match(\"omain(\", true, true)) ||\n               ((ch == \"r\" || ch == \"R\") && stream.match(\"egexp(\", true, true))) {\n      stream.backUp(1);\n      state.tokenize = tokenParenthesized;\n      return ret(\"property\", \"word\");\n    } else if (/[\\w\\\\\\-]/.test(ch)) {\n      stream.eatWhile(/[\\w\\\\\\-]/);\n      return ret(\"property\", \"word\");\n    } else {\n      return ret(null, null);\n    }\n  }\n\n  function tokenString(quote) {\n    return function(stream, state) {\n      var escaped = false, ch;\n      while ((ch = stream.next()) != null) {\n        if (ch == quote && !escaped) {\n          if (quote == \")\") stream.backUp(1);\n          break;\n        }\n        escaped = !escaped && ch == \"\\\\\";\n      }\n      if (ch == quote || !escaped && quote != \")\") state.tokenize = null;\n      return ret(\"string\", \"string\");\n    };\n  }\n\n  function tokenParenthesized(stream, state) {\n    stream.next(); // Must be '('\n    if (!stream.match(/\\s*[\\\"\\')]/, false))\n      state.tokenize = tokenString(\")\");\n    else\n      state.tokenize = null;\n    return ret(null, \"(\");\n  }\n\n  // Context management\n\n  function Context(type, indent, prev) {\n    this.type = type;\n    this.indent = indent;\n    this.prev = prev;\n  }\n\n  function pushContext(state, stream, type, indent) {\n    state.context = new Context(type, stream.indentation() + (indent === false ? 0 : indentUnit), state.context);\n    return type;\n  }\n\n  function popContext(state) {\n    if (state.context.prev)\n      state.context = state.context.prev;\n    return state.context.type;\n  }\n\n  function pass(type, stream, state) {\n    return states[state.context.type](type, stream, state);\n  }\n  function popAndPass(type, stream, state, n) {\n    for (var i = n || 1; i > 0; i--)\n      state.context = state.context.prev;\n    return pass(type, stream, state);\n  }\n\n  // Parser\n\n  function wordAsValue(stream) {\n    var word = stream.current().toLowerCase();\n    if (valueKeywords.hasOwnProperty(word))\n      override = \"atom\";\n    else if (colorKeywords.hasOwnProperty(word))\n      override = \"keyword\";\n    else\n      override = \"variable\";\n  }\n\n  var states = {};\n\n  states.top = function(type, stream, state) {\n    if (type == \"{\") {\n      return pushContext(state, stream, \"block\");\n    } else if (type == \"}\" && state.context.prev) {\n      return popContext(state);\n    } else if (supportsAtComponent && /@component/i.test(type)) {\n      return pushContext(state, stream, \"atComponentBlock\");\n    } else if (/^@(-moz-)?document$/i.test(type)) {\n      return pushContext(state, stream, \"documentTypes\");\n    } else if (/^@(media|supports|(-moz-)?document|import)$/i.test(type)) {\n      return pushContext(state, stream, \"atBlock\");\n    } else if (/^@(font-face|counter-style)/i.test(type)) {\n      state.stateArg = type;\n      return \"restricted_atBlock_before\";\n    } else if (/^@(-(moz|ms|o|webkit)-)?keyframes$/i.test(type)) {\n      return \"keyframes\";\n    } else if (type && type.charAt(0) == \"@\") {\n      return pushContext(state, stream, \"at\");\n    } else if (type == \"hash\") {\n      override = \"builtin\";\n    } else if (type == \"word\") {\n      override = \"tag\";\n    } else if (type == \"variable-definition\") {\n      return \"maybeprop\";\n    } else if (type == \"interpolation\") {\n      return pushContext(state, stream, \"interpolation\");\n    } else if (type == \":\") {\n      return \"pseudo\";\n    } else if (allowNested && type == \"(\") {\n      return pushContext(state, stream, \"parens\");\n    }\n    return state.context.type;\n  };\n\n  states.block = function(type, stream, state) {\n    if (type == \"word\") {\n      var word = stream.current().toLowerCase();\n      if (propertyKeywords.hasOwnProperty(word)) {\n        override = \"property\";\n        return \"maybeprop\";\n      } else if (nonStandardPropertyKeywords.hasOwnProperty(word)) {\n        override = \"string-2\";\n        return \"maybeprop\";\n      } else if (allowNested) {\n        override = stream.match(/^\\s*:(?:\\s|$)/, false) ? \"property\" : \"tag\";\n        return \"block\";\n      } else {\n        override += \" error\";\n        return \"maybeprop\";\n      }\n    } else if (type == \"meta\") {\n      return \"block\";\n    } else if (!allowNested && (type == \"hash\" || type == \"qualifier\")) {\n      override = \"error\";\n      return \"block\";\n    } else {\n      return states.top(type, stream, state);\n    }\n  };\n\n  states.maybeprop = function(type, stream, state) {\n    if (type == \":\") return pushContext(state, stream, \"prop\");\n    return pass(type, stream, state);\n  };\n\n  states.prop = function(type, stream, state) {\n    if (type == \";\") return popContext(state);\n    if (type == \"{\" && allowNested) return pushContext(state, stream, \"propBlock\");\n    if (type == \"}\" || type == \"{\") return popAndPass(type, stream, state);\n    if (type == \"(\") return pushContext(state, stream, \"parens\");\n\n    if (type == \"hash\" && !/^#([0-9a-fA-f]{3,4}|[0-9a-fA-f]{6}|[0-9a-fA-f]{8})$/.test(stream.current())) {\n      override += \" error\";\n    } else if (type == \"word\") {\n      wordAsValue(stream);\n    } else if (type == \"interpolation\") {\n      return pushContext(state, stream, \"interpolation\");\n    }\n    return \"prop\";\n  };\n\n  states.propBlock = function(type, _stream, state) {\n    if (type == \"}\") return popContext(state);\n    if (type == \"word\") { override = \"property\"; return \"maybeprop\"; }\n    return state.context.type;\n  };\n\n  states.parens = function(type, stream, state) {\n    if (type == \"{\" || type == \"}\") return popAndPass(type, stream, state);\n    if (type == \")\") return popContext(state);\n    if (type == \"(\") return pushContext(state, stream, \"parens\");\n    if (type == \"interpolation\") return pushContext(state, stream, \"interpolation\");\n    if (type == \"word\") wordAsValue(stream);\n    return \"parens\";\n  };\n\n  states.pseudo = function(type, stream, state) {\n    if (type == \"meta\") return \"pseudo\";\n\n    if (type == \"word\") {\n      override = \"variable-3\";\n      return state.context.type;\n    }\n    return pass(type, stream, state);\n  };\n\n  states.documentTypes = function(type, stream, state) {\n    if (type == \"word\" && documentTypes.hasOwnProperty(stream.current())) {\n      override = \"tag\";\n      return state.context.type;\n    } else {\n      return states.atBlock(type, stream, state);\n    }\n  };\n\n  states.atBlock = function(type, stream, state) {\n    if (type == \"(\") return pushContext(state, stream, \"atBlock_parens\");\n    if (type == \"}\" || type == \";\") return popAndPass(type, stream, state);\n    if (type == \"{\") return popContext(state) && pushContext(state, stream, allowNested ? \"block\" : \"top\");\n\n    if (type == \"interpolation\") return pushContext(state, stream, \"interpolation\");\n\n    if (type == \"word\") {\n      var word = stream.current().toLowerCase();\n      if (word == \"only\" || word == \"not\" || word == \"and\" || word == \"or\")\n        override = \"keyword\";\n      else if (mediaTypes.hasOwnProperty(word))\n        override = \"attribute\";\n      else if (mediaFeatures.hasOwnProperty(word))\n        override = \"property\";\n      else if (mediaValueKeywords.hasOwnProperty(word))\n        override = \"keyword\";\n      else if (propertyKeywords.hasOwnProperty(word))\n        override = \"property\";\n      else if (nonStandardPropertyKeywords.hasOwnProperty(word))\n        override = \"string-2\";\n      else if (valueKeywords.hasOwnProperty(word))\n        override = \"atom\";\n      else if (colorKeywords.hasOwnProperty(word))\n        override = \"keyword\";\n      else\n        override = \"error\";\n    }\n    return state.context.type;\n  };\n\n  states.atComponentBlock = function(type, stream, state) {\n    if (type == \"}\")\n      return popAndPass(type, stream, state);\n    if (type == \"{\")\n      return popContext(state) && pushContext(state, stream, allowNested ? \"block\" : \"top\", false);\n    if (type == \"word\")\n      override = \"error\";\n    return state.context.type;\n  };\n\n  states.atBlock_parens = function(type, stream, state) {\n    if (type == \")\") return popContext(state);\n    if (type == \"{\" || type == \"}\") return popAndPass(type, stream, state, 2);\n    return states.atBlock(type, stream, state);\n  };\n\n  states.restricted_atBlock_before = function(type, stream, state) {\n    if (type == \"{\")\n      return pushContext(state, stream, \"restricted_atBlock\");\n    if (type == \"word\" && state.stateArg == \"@counter-style\") {\n      override = \"variable\";\n      return \"restricted_atBlock_before\";\n    }\n    return pass(type, stream, state);\n  };\n\n  states.restricted_atBlock = function(type, stream, state) {\n    if (type == \"}\") {\n      state.stateArg = null;\n      return popContext(state);\n    }\n    if (type == \"word\") {\n      if ((state.stateArg == \"@font-face\" && !fontProperties.hasOwnProperty(stream.current().toLowerCase())) ||\n          (state.stateArg == \"@counter-style\" && !counterDescriptors.hasOwnProperty(stream.current().toLowerCase())))\n        override = \"error\";\n      else\n        override = \"property\";\n      return \"maybeprop\";\n    }\n    return \"restricted_atBlock\";\n  };\n\n  states.keyframes = function(type, stream, state) {\n    if (type == \"word\") { override = \"variable\"; return \"keyframes\"; }\n    if (type == \"{\") return pushContext(state, stream, \"top\");\n    return pass(type, stream, state);\n  };\n\n  states.at = function(type, stream, state) {\n    if (type == \";\") return popContext(state);\n    if (type == \"{\" || type == \"}\") return popAndPass(type, stream, state);\n    if (type == \"word\") override = \"tag\";\n    else if (type == \"hash\") override = \"builtin\";\n    return \"at\";\n  };\n\n  states.interpolation = function(type, stream, state) {\n    if (type == \"}\") return popContext(state);\n    if (type == \"{\" || type == \";\") return popAndPass(type, stream, state);\n    if (type == \"word\") override = \"variable\";\n    else if (type != \"variable\" && type != \"(\" && type != \")\") override = \"error\";\n    return \"interpolation\";\n  };\n\n  return {\n    startState: function(base) {\n      return {tokenize: null,\n              state: inline ? \"block\" : \"top\",\n              stateArg: null,\n              context: new Context(inline ? \"block\" : \"top\", base || 0, null)};\n    },\n\n    token: function(stream, state) {\n      if (!state.tokenize && stream.eatSpace()) return null;\n      var style = (state.tokenize || tokenBase)(stream, state);\n      if (style && typeof style == \"object\") {\n        type = style[1];\n        style = style[0];\n      }\n      override = style;\n      if (type != \"comment\")\n        state.state = states[state.state](type, stream, state);\n      return override;\n    },\n\n    indent: function(state, textAfter) {\n      var cx = state.context, ch = textAfter && textAfter.charAt(0);\n      var indent = cx.indent;\n      if (cx.type == \"prop\" && (ch == \"}\" || ch == \")\")) cx = cx.prev;\n      if (cx.prev) {\n        if (ch == \"}\" && (cx.type == \"block\" || cx.type == \"top\" ||\n                          cx.type == \"interpolation\" || cx.type == \"restricted_atBlock\")) {\n          // Resume indentation from parent context.\n          cx = cx.prev;\n          indent = cx.indent;\n        } else if (ch == \")\" && (cx.type == \"parens\" || cx.type == \"atBlock_parens\") ||\n            ch == \"{\" && (cx.type == \"at\" || cx.type == \"atBlock\")) {\n          // Dedent relative to current context.\n          indent = Math.max(0, cx.indent - indentUnit);\n        }\n      }\n      return indent;\n    },\n\n    electricChars: \"}\",\n    blockCommentStart: \"/*\",\n    blockCommentEnd: \"*/\",\n    blockCommentContinue: \" * \",\n    lineComment: lineComment,\n    fold: \"brace\"\n  };\n});\n\n  function keySet(array) {\n    var keys = {};\n    for (var i = 0; i < array.length; ++i) {\n      keys[array[i].toLowerCase()] = true;\n    }\n    return keys;\n  }\n\n  var documentTypes_ = [\n    \"domain\", \"regexp\", \"url\", \"url-prefix\"\n  ], documentTypes = keySet(documentTypes_);\n\n  var mediaTypes_ = [\n    \"all\", \"aural\", \"braille\", \"handheld\", \"print\", \"projection\", \"screen\",\n    \"tty\", \"tv\", \"embossed\"\n  ], mediaTypes = keySet(mediaTypes_);\n\n  var mediaFeatures_ = [\n    \"width\", \"min-width\", \"max-width\", \"height\", \"min-height\", \"max-height\",\n    \"device-width\", \"min-device-width\", \"max-device-width\", \"device-height\",\n    \"min-device-height\", \"max-device-height\", \"aspect-ratio\",\n    \"min-aspect-ratio\", \"max-aspect-ratio\", \"device-aspect-ratio\",\n    \"min-device-aspect-ratio\", \"max-device-aspect-ratio\", \"color\", \"min-color\",\n    \"max-color\", \"color-index\", \"min-color-index\", \"max-color-index\",\n    \"monochrome\", \"min-monochrome\", \"max-monochrome\", \"resolution\",\n    \"min-resolution\", \"max-resolution\", \"scan\", \"grid\", \"orientation\",\n    \"device-pixel-ratio\", \"min-device-pixel-ratio\", \"max-device-pixel-ratio\",\n    \"pointer\", \"any-pointer\", \"hover\", \"any-hover\"\n  ], mediaFeatures = keySet(mediaFeatures_);\n\n  var mediaValueKeywords_ = [\n    \"landscape\", \"portrait\", \"none\", \"coarse\", \"fine\", \"on-demand\", \"hover\",\n    \"interlace\", \"progressive\"\n  ], mediaValueKeywords = keySet(mediaValueKeywords_);\n\n  var propertyKeywords_ = [\n    \"align-content\", \"align-items\", \"align-self\", \"alignment-adjust\",\n    \"alignment-baseline\", \"anchor-point\", \"animation\", \"animation-delay\",\n    \"animation-direction\", \"animation-duration\", \"animation-fill-mode\",\n    \"animation-iteration-count\", \"animation-name\", \"animation-play-state\",\n    \"animation-timing-function\", \"appearance\", \"azimuth\", \"backface-visibility\",\n    \"background\", \"background-attachment\", \"background-blend-mode\", \"background-clip\",\n    \"background-color\", \"background-image\", \"background-origin\", \"background-position\",\n    \"background-repeat\", \"background-size\", \"baseline-shift\", \"binding\",\n    \"bleed\", \"bookmark-label\", \"bookmark-level\", \"bookmark-state\",\n    \"bookmark-target\", \"border\", \"border-bottom\", \"border-bottom-color\",\n    \"border-bottom-left-radius\", \"border-bottom-right-radius\",\n    \"border-bottom-style\", \"border-bottom-width\", \"border-collapse\",\n    \"border-color\", \"border-image\", \"border-image-outset\",\n    \"border-image-repeat\", \"border-image-slice\", \"border-image-source\",\n    \"border-image-width\", \"border-left\", \"border-left-color\",\n    \"border-left-style\", \"border-left-width\", \"border-radius\", \"border-right\",\n    \"border-right-color\", \"border-right-style\", \"border-right-width\",\n    \"border-spacing\", \"border-style\", \"border-top\", \"border-top-color\",\n    \"border-top-left-radius\", \"border-top-right-radius\", \"border-top-style\",\n    \"border-top-width\", \"border-width\", \"bottom\", \"box-decoration-break\",\n    \"box-shadow\", \"box-sizing\", \"break-after\", \"break-before\", \"break-inside\",\n    \"caption-side\", \"caret-color\", \"clear\", \"clip\", \"color\", \"color-profile\", \"column-count\",\n    \"column-fill\", \"column-gap\", \"column-rule\", \"column-rule-color\",\n    \"column-rule-style\", \"column-rule-width\", \"column-span\", \"column-width\",\n    \"columns\", \"content\", \"counter-increment\", \"counter-reset\", \"crop\", \"cue\",\n    \"cue-after\", \"cue-before\", \"cursor\", \"direction\", \"display\",\n    \"dominant-baseline\", \"drop-initial-after-adjust\",\n    \"drop-initial-after-align\", \"drop-initial-before-adjust\",\n    \"drop-initial-before-align\", \"drop-initial-size\", \"drop-initial-value\",\n    \"elevation\", \"empty-cells\", \"fit\", \"fit-position\", \"flex\", \"flex-basis\",\n    \"flex-direction\", \"flex-flow\", \"flex-grow\", \"flex-shrink\", \"flex-wrap\",\n    \"float\", \"float-offset\", \"flow-from\", \"flow-into\", \"font\", \"font-feature-settings\",\n    \"font-family\", \"font-kerning\", \"font-language-override\", \"font-size\", \"font-size-adjust\",\n    \"font-stretch\", \"font-style\", \"font-synthesis\", \"font-variant\",\n    \"font-variant-alternates\", \"font-variant-caps\", \"font-variant-east-asian\",\n    \"font-variant-ligatures\", \"font-variant-numeric\", \"font-variant-position\",\n    \"font-weight\", \"grid\", \"grid-area\", \"grid-auto-columns\", \"grid-auto-flow\",\n    \"grid-auto-rows\", \"grid-column\", \"grid-column-end\", \"grid-column-gap\",\n    \"grid-column-start\", \"grid-gap\", \"grid-row\", \"grid-row-end\", \"grid-row-gap\",\n    \"grid-row-start\", \"grid-template\", \"grid-template-areas\", \"grid-template-columns\",\n    \"grid-template-rows\", \"hanging-punctuation\", \"height\", \"hyphens\",\n    \"icon\", \"image-orientation\", \"image-rendering\", \"image-resolution\",\n    \"inline-box-align\", \"justify-content\", \"justify-items\", \"justify-self\", \"left\", \"letter-spacing\",\n    \"line-break\", \"line-height\", \"line-stacking\", \"line-stacking-ruby\",\n    \"line-stacking-shift\", \"line-stacking-strategy\", \"list-style\",\n    \"list-style-image\", \"list-style-position\", \"list-style-type\", \"margin\",\n    \"margin-bottom\", \"margin-left\", \"margin-right\", \"margin-top\",\n    \"marks\", \"marquee-direction\", \"marquee-loop\",\n    \"marquee-play-count\", \"marquee-speed\", \"marquee-style\", \"max-height\",\n    \"max-width\", \"min-height\", \"min-width\", \"move-to\", \"nav-down\", \"nav-index\",\n    \"nav-left\", \"nav-right\", \"nav-up\", \"object-fit\", \"object-position\",\n    \"opacity\", \"order\", \"orphans\", \"outline\",\n    \"outline-color\", \"outline-offset\", \"outline-style\", \"outline-width\",\n    \"overflow\", \"overflow-style\", \"overflow-wrap\", \"overflow-x\", \"overflow-y\",\n    \"padding\", \"padding-bottom\", \"padding-left\", \"padding-right\", \"padding-top\",\n    \"page\", \"page-break-after\", \"page-break-before\", \"page-break-inside\",\n    \"page-policy\", \"pause\", \"pause-after\", \"pause-before\", \"perspective\",\n    \"perspective-origin\", \"pitch\", \"pitch-range\", \"place-content\", \"place-items\", \"place-self\", \"play-during\", \"position\",\n    \"presentation-level\", \"punctuation-trim\", \"quotes\", \"region-break-after\",\n    \"region-break-before\", \"region-break-inside\", \"region-fragment\",\n    \"rendering-intent\", \"resize\", \"rest\", \"rest-after\", \"rest-before\", \"richness\",\n    \"right\", \"rotation\", \"rotation-point\", \"ruby-align\", \"ruby-overhang\",\n    \"ruby-position\", \"ruby-span\", \"shape-image-threshold\", \"shape-inside\", \"shape-margin\",\n    \"shape-outside\", \"size\", \"speak\", \"speak-as\", \"speak-header\",\n    \"speak-numeral\", \"speak-punctuation\", \"speech-rate\", \"stress\", \"string-set\",\n    \"tab-size\", \"table-layout\", \"target\", \"target-name\", \"target-new\",\n    \"target-position\", \"text-align\", \"text-align-last\", \"text-decoration\",\n    \"text-decoration-color\", \"text-decoration-line\", \"text-decoration-skip\",\n    \"text-decoration-style\", \"text-emphasis\", \"text-emphasis-color\",\n    \"text-emphasis-position\", \"text-emphasis-style\", \"text-height\",\n    \"text-indent\", \"text-justify\", \"text-outline\", \"text-overflow\", \"text-shadow\",\n    \"text-size-adjust\", \"text-space-collapse\", \"text-transform\", \"text-underline-position\",\n    \"text-wrap\", \"top\", \"transform\", \"transform-origin\", \"transform-style\",\n    \"transition\", \"transition-delay\", \"transition-duration\",\n    \"transition-property\", \"transition-timing-function\", \"unicode-bidi\",\n    \"user-select\", \"vertical-align\", \"visibility\", \"voice-balance\", \"voice-duration\",\n    \"voice-family\", \"voice-pitch\", \"voice-range\", \"voice-rate\", \"voice-stress\",\n    \"voice-volume\", \"volume\", \"white-space\", \"widows\", \"width\", \"will-change\", \"word-break\",\n    \"word-spacing\", \"word-wrap\", \"z-index\",\n    // SVG-specific\n    \"clip-path\", \"clip-rule\", \"mask\", \"enable-background\", \"filter\", \"flood-color\",\n    \"flood-opacity\", \"lighting-color\", \"stop-color\", \"stop-opacity\", \"pointer-events\",\n    \"color-interpolation\", \"color-interpolation-filters\",\n    \"color-rendering\", \"fill\", \"fill-opacity\", \"fill-rule\", \"image-rendering\",\n    \"marker\", \"marker-end\", \"marker-mid\", \"marker-start\", \"shape-rendering\", \"stroke\",\n    \"stroke-dasharray\", \"stroke-dashoffset\", \"stroke-linecap\", \"stroke-linejoin\",\n    \"stroke-miterlimit\", \"stroke-opacity\", \"stroke-width\", \"text-rendering\",\n    \"baseline-shift\", \"dominant-baseline\", \"glyph-orientation-horizontal\",\n    \"glyph-orientation-vertical\", \"text-anchor\", \"writing-mode\"\n  ], propertyKeywords = keySet(propertyKeywords_);\n\n  var nonStandardPropertyKeywords_ = [\n    \"scrollbar-arrow-color\", \"scrollbar-base-color\", \"scrollbar-dark-shadow-color\",\n    \"scrollbar-face-color\", \"scrollbar-highlight-color\", \"scrollbar-shadow-color\",\n    \"scrollbar-3d-light-color\", \"scrollbar-track-color\", \"shape-inside\",\n    \"searchfield-cancel-button\", \"searchfield-decoration\", \"searchfield-results-button\",\n    \"searchfield-results-decoration\", \"zoom\"\n  ], nonStandardPropertyKeywords = keySet(nonStandardPropertyKeywords_);\n\n  var fontProperties_ = [\n    \"font-family\", \"src\", \"unicode-range\", \"font-variant\", \"font-feature-settings\",\n    \"font-stretch\", \"font-weight\", \"font-style\"\n  ], fontProperties = keySet(fontProperties_);\n\n  var counterDescriptors_ = [\n    \"additive-symbols\", \"fallback\", \"negative\", \"pad\", \"prefix\", \"range\",\n    \"speak-as\", \"suffix\", \"symbols\", \"system\"\n  ], counterDescriptors = keySet(counterDescriptors_);\n\n  var colorKeywords_ = [\n    \"aliceblue\", \"antiquewhite\", \"aqua\", \"aquamarine\", \"azure\", \"beige\",\n    \"bisque\", \"black\", \"blanchedalmond\", \"blue\", \"blueviolet\", \"brown\",\n    \"burlywood\", \"cadetblue\", \"chartreuse\", \"chocolate\", \"coral\", \"cornflowerblue\",\n    \"cornsilk\", \"crimson\", \"cyan\", \"darkblue\", \"darkcyan\", \"darkgoldenrod\",\n    \"darkgray\", \"darkgreen\", \"darkkhaki\", \"darkmagenta\", \"darkolivegreen\",\n    \"darkorange\", \"darkorchid\", \"darkred\", \"darksalmon\", \"darkseagreen\",\n    \"darkslateblue\", \"darkslategray\", \"darkturquoise\", \"darkviolet\",\n    \"deeppink\", \"deepskyblue\", \"dimgray\", \"dodgerblue\", \"firebrick\",\n    \"floralwhite\", \"forestgreen\", \"fuchsia\", \"gainsboro\", \"ghostwhite\",\n    \"gold\", \"goldenrod\", \"gray\", \"grey\", \"green\", \"greenyellow\", \"honeydew\",\n    \"hotpink\", \"indianred\", \"indigo\", \"ivory\", \"khaki\", \"lavender\",\n    \"lavenderblush\", \"lawngreen\", \"lemonchiffon\", \"lightblue\", \"lightcoral\",\n    \"lightcyan\", \"lightgoldenrodyellow\", \"lightgray\", \"lightgreen\", \"lightpink\",\n    \"lightsalmon\", \"lightseagreen\", \"lightskyblue\", \"lightslategray\",\n    \"lightsteelblue\", \"lightyellow\", \"lime\", \"limegreen\", \"linen\", \"magenta\",\n    \"maroon\", \"mediumaquamarine\", \"mediumblue\", \"mediumorchid\", \"mediumpurple\",\n    \"mediumseagreen\", \"mediumslateblue\", \"mediumspringgreen\", \"mediumturquoise\",\n    \"mediumvioletred\", \"midnightblue\", \"mintcream\", \"mistyrose\", \"moccasin\",\n    \"navajowhite\", \"navy\", \"oldlace\", \"olive\", \"olivedrab\", \"orange\", \"orangered\",\n    \"orchid\", \"palegoldenrod\", \"palegreen\", \"paleturquoise\", \"palevioletred\",\n    \"papayawhip\", \"peachpuff\", \"peru\", \"pink\", \"plum\", \"powderblue\",\n    \"purple\", \"rebeccapurple\", \"red\", \"rosybrown\", \"royalblue\", \"saddlebrown\",\n    \"salmon\", \"sandybrown\", \"seagreen\", \"seashell\", \"sienna\", \"silver\", \"skyblue\",\n    \"slateblue\", \"slategray\", \"snow\", \"springgreen\", \"steelblue\", \"tan\",\n    \"teal\", \"thistle\", \"tomato\", \"turquoise\", \"violet\", \"wheat\", \"white\",\n    \"whitesmoke\", \"yellow\", \"yellowgreen\"\n  ], colorKeywords = keySet(colorKeywords_);\n\n  var valueKeywords_ = [\n    \"above\", \"absolute\", \"activeborder\", \"additive\", \"activecaption\", \"afar\",\n    \"after-white-space\", \"ahead\", \"alias\", \"all\", \"all-scroll\", \"alphabetic\", \"alternate\",\n    \"always\", \"amharic\", \"amharic-abegede\", \"antialiased\", \"appworkspace\",\n    \"arabic-indic\", \"armenian\", \"asterisks\", \"attr\", \"auto\", \"auto-flow\", \"avoid\", \"avoid-column\", \"avoid-page\",\n    \"avoid-region\", \"background\", \"backwards\", \"baseline\", \"below\", \"bidi-override\", \"binary\",\n    \"bengali\", \"blink\", \"block\", \"block-axis\", \"bold\", \"bolder\", \"border\", \"border-box\",\n    \"both\", \"bottom\", \"break\", \"break-all\", \"break-word\", \"bullets\", \"button\", \"button-bevel\",\n    \"buttonface\", \"buttonhighlight\", \"buttonshadow\", \"buttontext\", \"calc\", \"cambodian\",\n    \"capitalize\", \"caps-lock-indicator\", \"caption\", \"captiontext\", \"caret\",\n    \"cell\", \"center\", \"checkbox\", \"circle\", \"cjk-decimal\", \"cjk-earthly-branch\",\n    \"cjk-heavenly-stem\", \"cjk-ideographic\", \"clear\", \"clip\", \"close-quote\",\n    \"col-resize\", \"collapse\", \"color\", \"color-burn\", \"color-dodge\", \"column\", \"column-reverse\",\n    \"compact\", \"condensed\", \"contain\", \"content\", \"contents\",\n    \"content-box\", \"context-menu\", \"continuous\", \"copy\", \"counter\", \"counters\", \"cover\", \"crop\",\n    \"cross\", \"crosshair\", \"currentcolor\", \"cursive\", \"cyclic\", \"darken\", \"dashed\", \"decimal\",\n    \"decimal-leading-zero\", \"default\", \"default-button\", \"dense\", \"destination-atop\",\n    \"destination-in\", \"destination-out\", \"destination-over\", \"devanagari\", \"difference\",\n    \"disc\", \"discard\", \"disclosure-closed\", \"disclosure-open\", \"document\",\n    \"dot-dash\", \"dot-dot-dash\",\n    \"dotted\", \"double\", \"down\", \"e-resize\", \"ease\", \"ease-in\", \"ease-in-out\", \"ease-out\",\n    \"element\", \"ellipse\", \"ellipsis\", \"embed\", \"end\", \"ethiopic\", \"ethiopic-abegede\",\n    \"ethiopic-abegede-am-et\", \"ethiopic-abegede-gez\", \"ethiopic-abegede-ti-er\",\n    \"ethiopic-abegede-ti-et\", \"ethiopic-halehame-aa-er\",\n    \"ethiopic-halehame-aa-et\", \"ethiopic-halehame-am-et\",\n    \"ethiopic-halehame-gez\", \"ethiopic-halehame-om-et\",\n    \"ethiopic-halehame-sid-et\", \"ethiopic-halehame-so-et\",\n    \"ethiopic-halehame-ti-er\", \"ethiopic-halehame-ti-et\", \"ethiopic-halehame-tig\",\n    \"ethiopic-numeric\", \"ew-resize\", \"exclusion\", \"expanded\", \"extends\", \"extra-condensed\",\n    \"extra-expanded\", \"fantasy\", \"fast\", \"fill\", \"fixed\", \"flat\", \"flex\", \"flex-end\", \"flex-start\", \"footnotes\",\n    \"forwards\", \"from\", \"geometricPrecision\", \"georgian\", \"graytext\", \"grid\", \"groove\",\n    \"gujarati\", \"gurmukhi\", \"hand\", \"hangul\", \"hangul-consonant\", \"hard-light\", \"hebrew\",\n    \"help\", \"hidden\", \"hide\", \"higher\", \"highlight\", \"highlighttext\",\n    \"hiragana\", \"hiragana-iroha\", \"horizontal\", \"hsl\", \"hsla\", \"hue\", \"icon\", \"ignore\",\n    \"inactiveborder\", \"inactivecaption\", \"inactivecaptiontext\", \"infinite\",\n    \"infobackground\", \"infotext\", \"inherit\", \"initial\", \"inline\", \"inline-axis\",\n    \"inline-block\", \"inline-flex\", \"inline-grid\", \"inline-table\", \"inset\", \"inside\", \"intrinsic\", \"invert\",\n    \"italic\", \"japanese-formal\", \"japanese-informal\", \"justify\", \"kannada\",\n    \"katakana\", \"katakana-iroha\", \"keep-all\", \"khmer\",\n    \"korean-hangul-formal\", \"korean-hanja-formal\", \"korean-hanja-informal\",\n    \"landscape\", \"lao\", \"large\", \"larger\", \"left\", \"level\", \"lighter\", \"lighten\",\n    \"line-through\", \"linear\", \"linear-gradient\", \"lines\", \"list-item\", \"listbox\", \"listitem\",\n    \"local\", \"logical\", \"loud\", \"lower\", \"lower-alpha\", \"lower-armenian\",\n    \"lower-greek\", \"lower-hexadecimal\", \"lower-latin\", \"lower-norwegian\",\n    \"lower-roman\", \"lowercase\", \"ltr\", \"luminosity\", \"malayalam\", \"match\", \"matrix\", \"matrix3d\",\n    \"media-controls-background\", \"media-current-time-display\",\n    \"media-fullscreen-button\", \"media-mute-button\", \"media-play-button\",\n    \"media-return-to-realtime-button\", \"media-rewind-button\",\n    \"media-seek-back-button\", \"media-seek-forward-button\", \"media-slider\",\n    \"media-sliderthumb\", \"media-time-remaining-display\", \"media-volume-slider\",\n    \"media-volume-slider-container\", \"media-volume-sliderthumb\", \"medium\",\n    \"menu\", \"menulist\", \"menulist-button\", \"menulist-text\",\n    \"menulist-textfield\", \"menutext\", \"message-box\", \"middle\", \"min-intrinsic\",\n    \"mix\", \"mongolian\", \"monospace\", \"move\", \"multiple\", \"multiply\", \"myanmar\", \"n-resize\",\n    \"narrower\", \"ne-resize\", \"nesw-resize\", \"no-close-quote\", \"no-drop\",\n    \"no-open-quote\", \"no-repeat\", \"none\", \"normal\", \"not-allowed\", \"nowrap\",\n    \"ns-resize\", \"numbers\", \"numeric\", \"nw-resize\", \"nwse-resize\", \"oblique\", \"octal\", \"opacity\", \"open-quote\",\n    \"optimizeLegibility\", \"optimizeSpeed\", \"oriya\", \"oromo\", \"outset\",\n    \"outside\", \"outside-shape\", \"overlay\", \"overline\", \"padding\", \"padding-box\",\n    \"painted\", \"page\", \"paused\", \"persian\", \"perspective\", \"plus-darker\", \"plus-lighter\",\n    \"pointer\", \"polygon\", \"portrait\", \"pre\", \"pre-line\", \"pre-wrap\", \"preserve-3d\",\n    \"progress\", \"push-button\", \"radial-gradient\", \"radio\", \"read-only\",\n    \"read-write\", \"read-write-plaintext-only\", \"rectangle\", \"region\",\n    \"relative\", \"repeat\", \"repeating-linear-gradient\",\n    \"repeating-radial-gradient\", \"repeat-x\", \"repeat-y\", \"reset\", \"reverse\",\n    \"rgb\", \"rgba\", \"ridge\", \"right\", \"rotate\", \"rotate3d\", \"rotateX\", \"rotateY\",\n    \"rotateZ\", \"round\", \"row\", \"row-resize\", \"row-reverse\", \"rtl\", \"run-in\", \"running\",\n    \"s-resize\", \"sans-serif\", \"saturation\", \"scale\", \"scale3d\", \"scaleX\", \"scaleY\", \"scaleZ\", \"screen\",\n    \"scroll\", \"scrollbar\", \"scroll-position\", \"se-resize\", \"searchfield\",\n    \"searchfield-cancel-button\", \"searchfield-decoration\",\n    \"searchfield-results-button\", \"searchfield-results-decoration\", \"self-start\", \"self-end\",\n    \"semi-condensed\", \"semi-expanded\", \"separate\", \"serif\", \"show\", \"sidama\",\n    \"simp-chinese-formal\", \"simp-chinese-informal\", \"single\",\n    \"skew\", \"skewX\", \"skewY\", \"skip-white-space\", \"slide\", \"slider-horizontal\",\n    \"slider-vertical\", \"sliderthumb-horizontal\", \"sliderthumb-vertical\", \"slow\",\n    \"small\", \"small-caps\", \"small-caption\", \"smaller\", \"soft-light\", \"solid\", \"somali\",\n    \"source-atop\", \"source-in\", \"source-out\", \"source-over\", \"space\", \"space-around\", \"space-between\", \"space-evenly\", \"spell-out\", \"square\",\n    \"square-button\", \"start\", \"static\", \"status-bar\", \"stretch\", \"stroke\", \"sub\",\n    \"subpixel-antialiased\", \"super\", \"sw-resize\", \"symbolic\", \"symbols\", \"system-ui\", \"table\",\n    \"table-caption\", \"table-cell\", \"table-column\", \"table-column-group\",\n    \"table-footer-group\", \"table-header-group\", \"table-row\", \"table-row-group\",\n    \"tamil\",\n    \"telugu\", \"text\", \"text-bottom\", \"text-top\", \"textarea\", \"textfield\", \"thai\",\n    \"thick\", \"thin\", \"threeddarkshadow\", \"threedface\", \"threedhighlight\",\n    \"threedlightshadow\", \"threedshadow\", \"tibetan\", \"tigre\", \"tigrinya-er\",\n    \"tigrinya-er-abegede\", \"tigrinya-et\", \"tigrinya-et-abegede\", \"to\", \"top\",\n    \"trad-chinese-formal\", \"trad-chinese-informal\", \"transform\",\n    \"translate\", \"translate3d\", \"translateX\", \"translateY\", \"translateZ\",\n    \"transparent\", \"ultra-condensed\", \"ultra-expanded\", \"underline\", \"unset\", \"up\",\n    \"upper-alpha\", \"upper-armenian\", \"upper-greek\", \"upper-hexadecimal\",\n    \"upper-latin\", \"upper-norwegian\", \"upper-roman\", \"uppercase\", \"urdu\", \"url\",\n    \"var\", \"vertical\", \"vertical-text\", \"visible\", \"visibleFill\", \"visiblePainted\",\n    \"visibleStroke\", \"visual\", \"w-resize\", \"wait\", \"wave\", \"wider\",\n    \"window\", \"windowframe\", \"windowtext\", \"words\", \"wrap\", \"wrap-reverse\", \"x-large\", \"x-small\", \"xor\",\n    \"xx-large\", \"xx-small\"\n  ], valueKeywords = keySet(valueKeywords_);\n\n  var allWords = documentTypes_.concat(mediaTypes_).concat(mediaFeatures_).concat(mediaValueKeywords_)\n    .concat(propertyKeywords_).concat(nonStandardPropertyKeywords_).concat(colorKeywords_)\n    .concat(valueKeywords_);\n  CodeMirror.registerHelper(\"hintWords\", \"css\", allWords);\n\n  function tokenCComment(stream, state) {\n    var maybeEnd = false, ch;\n    while ((ch = stream.next()) != null) {\n      if (maybeEnd && ch == \"/\") {\n        state.tokenize = null;\n        break;\n      }\n      maybeEnd = (ch == \"*\");\n    }\n    return [\"comment\", \"comment\"];\n  }\n\n  CodeMirror.defineMIME(\"text/css\", {\n    documentTypes: documentTypes,\n    mediaTypes: mediaTypes,\n    mediaFeatures: mediaFeatures,\n    mediaValueKeywords: mediaValueKeywords,\n    propertyKeywords: propertyKeywords,\n    nonStandardPropertyKeywords: nonStandardPropertyKeywords,\n    fontProperties: fontProperties,\n    counterDescriptors: counterDescriptors,\n    colorKeywords: colorKeywords,\n    valueKeywords: valueKeywords,\n    tokenHooks: {\n      \"/\": function(stream, state) {\n        if (!stream.eat(\"*\")) return false;\n        state.tokenize = tokenCComment;\n        return tokenCComment(stream, state);\n      }\n    },\n    name: \"css\"\n  });\n\n  CodeMirror.defineMIME(\"text/x-scss\", {\n    mediaTypes: mediaTypes,\n    mediaFeatures: mediaFeatures,\n    mediaValueKeywords: mediaValueKeywords,\n    propertyKeywords: propertyKeywords,\n    nonStandardPropertyKeywords: nonStandardPropertyKeywords,\n    colorKeywords: colorKeywords,\n    valueKeywords: valueKeywords,\n    fontProperties: fontProperties,\n    allowNested: true,\n    lineComment: \"//\",\n    tokenHooks: {\n      \"/\": function(stream, state) {\n        if (stream.eat(\"/\")) {\n          stream.skipToEnd();\n          return [\"comment\", \"comment\"];\n        } else if (stream.eat(\"*\")) {\n          state.tokenize = tokenCComment;\n          return tokenCComment(stream, state);\n        } else {\n          return [\"operator\", \"operator\"];\n        }\n      },\n      \":\": function(stream) {\n        if (stream.match(/\\s*\\{/, false))\n          return [null, null]\n        return false;\n      },\n      \"$\": function(stream) {\n        stream.match(/^[\\w-]+/);\n        if (stream.match(/^\\s*:/, false))\n          return [\"variable-2\", \"variable-definition\"];\n        return [\"variable-2\", \"variable\"];\n      },\n      \"#\": function(stream) {\n        if (!stream.eat(\"{\")) return false;\n        return [null, \"interpolation\"];\n      }\n    },\n    name: \"css\",\n    helperType: \"scss\"\n  });\n\n  CodeMirror.defineMIME(\"text/x-less\", {\n    mediaTypes: mediaTypes,\n    mediaFeatures: mediaFeatures,\n    mediaValueKeywords: mediaValueKeywords,\n    propertyKeywords: propertyKeywords,\n    nonStandardPropertyKeywords: nonStandardPropertyKeywords,\n    colorKeywords: colorKeywords,\n    valueKeywords: valueKeywords,\n    fontProperties: fontProperties,\n    allowNested: true,\n    lineComment: \"//\",\n    tokenHooks: {\n      \"/\": function(stream, state) {\n        if (stream.eat(\"/\")) {\n          stream.skipToEnd();\n          return [\"comment\", \"comment\"];\n        } else if (stream.eat(\"*\")) {\n          state.tokenize = tokenCComment;\n          return tokenCComment(stream, state);\n        } else {\n          return [\"operator\", \"operator\"];\n        }\n      },\n      \"@\": function(stream) {\n        if (stream.eat(\"{\")) return [null, \"interpolation\"];\n        if (stream.match(/^(charset|document|font-face|import|(-(moz|ms|o|webkit)-)?keyframes|media|namespace|page|supports)\\b/i, false)) return false;\n        stream.eatWhile(/[\\w\\\\\\-]/);\n        if (stream.match(/^\\s*:/, false))\n          return [\"variable-2\", \"variable-definition\"];\n        return [\"variable-2\", \"variable\"];\n      },\n      \"&\": function() {\n        return [\"atom\", \"atom\"];\n      }\n    },\n    name: \"css\",\n    helperType: \"less\"\n  });\n\n  CodeMirror.defineMIME(\"text/x-gss\", {\n    documentTypes: documentTypes,\n    mediaTypes: mediaTypes,\n    mediaFeatures: mediaFeatures,\n    propertyKeywords: propertyKeywords,\n    nonStandardPropertyKeywords: nonStandardPropertyKeywords,\n    fontProperties: fontProperties,\n    counterDescriptors: counterDescriptors,\n    colorKeywords: colorKeywords,\n    valueKeywords: valueKeywords,\n    supportsAtComponent: true,\n    tokenHooks: {\n      \"/\": function(stream, state) {\n        if (!stream.eat(\"*\")) return false;\n        state.tokenize = tokenCComment;\n        return tokenCComment(stream, state);\n      }\n    },\n    name: \"css\",\n    helperType: \"gss\"\n  });\n\n});\n","Magezon_Builder/js/services/element.js":"define([\n\t'jquery',\n\t'angular'\n], function ($, angular) {\n\n\tvar elementManagerService = function($rootScope) {\n\t\tvar self = this;\n\t\tthis.elements = {};\n\t\tthis.groups   = {};\n\n\t\tthis.registerElements = function(elements) {\n\t\t\tvar newElements = {};\n\t\t\tangular.forEach(elements, function(element, index) {\n\t\t\t\tif (!element.hasOwnProperty('disabled') || !element['disabled']) {\n\t\t\t\t\tnewElements[index] = element;\n\t\t\t\t}\n\t\t\t});\n\t\t\tthis.elements = newElements;\n\t\t}\n\n\t\tthis.getElement = function(type) {\n\t\t\tif (angular.isObject(type)) {\n\t\t\t\ttype = type.type;\n\t\t\t}\n\t\t\treturn this.elements[type];\n\t\t}\n\n\t\tthis.prepareElements = function(elements, force) {\n\t\t\tvar newElements = [];\n\t\t\tangular.forEach(elements, function(_element) {\n\t\t\t\tif (self.getElement(_element.type)) {\n\t\t\t\t\tnewElements.push(self.prepareElement(_element, force));\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn newElements;\n\t\t}\n\n\t\tthis.prepareElement = function(element, force) {\n\t\t\tvar oldId;\n\t\t\telement['builder'] = self.getBuilderConfig(element.type);\n\t\t\tif (element['id'] && force) {\n\t\t\t\toldId = element['id'];\n\t\t\t}\n\t\t\tif (!element['id'] || force) element['id'] = self.getUniqueId(7);\n\t\t\t\n\t\t\tif (element.builderName && element.builderName!=element['builder'].name) {\n\t\t\t\telement['builder'].name = element.builderName;\n\t\t\t}\n\t\t\tif (element.hasOwnProperty('elements')) {\n\t\t\t\telement['elements'] = self.prepareElements(element.elements, force);\n\t\t\t}\n\t\t\tif (force && oldId) {\n\t\t\t\tvar _elem = $('#' + oldId + '-style');\n\t\t\t\tif (_elem.length) {\n\t\t\t\t\tvar oldId = '\\\\.' + oldId;\n\t\t\t\t\tvar newId = '.' + element.id;\n\t\t\t\t\tvar regex = new RegExp(oldId, 'g');\n\t\t\t\t\tvar styleHtml = _elem[0].outerHTML.replace(regex, newId);\n\t\t\t\t\tstyleHtml = styleHtml.replace(oldId + '-style', element.id + '-style');\n\t\t\t\t\t_elem.after(styleHtml);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn element;\n\t\t}\n\n\t\tthis.getNewElement = function(type) {\n\t\t\tvar builderElement = this.getElement(type);\n\t\t\tvar element = angular.copy(builderElement.defaultValues);\n\t\t\telement['type'] = type;\n\t\t\tthis.prepareElement(element, true);\n\t\t\tif (builderElement.is_collection) {\n\t\t\t\telement['elements'] = [];\n\t\t\t}\n\t\t\treturn element;\n\t\t}\n\n\t\tthis.getBuilderConfig = function(type) {\n\t\t\tif (type=='profile') {\n\t\t\t\treturn {\n\t\t\t\t\tis_collection: true\n\t\t\t\t}\n\t\t\t}\n\t\t\tvar config = angular.copy(this.getElement(type));\n\t\t\tconfig = angular.merge(config, {\n\t\t\t\tactive: false,\n\t\t\t\tvisible: true,\n\t\t\t\tcontrol: true,\n\t\t\t\tactived: false,\n\t\t\t\tadditionalClasses: [],\n\t\t\t\tnavigator: {}\n\t\t\t});\n\t\t\treturn config;\n\t    }\n\n\t    this.updateElementConfig = function(type) {\n\t    \tif (!self.elements[type]['loadConfig']) {\n\t\t    \tvar requestKey = 'elements.' + type;\n\t\t    \t$.ajax({\n\t                url: this.getUrl('mgzbuilder/ajax/loadConfig'),\n\t                type:'POST',\n\t                data: {\n\t                \tkey: requestKey,\n\t                \tclass: $rootScope.builderConfig.profile.builder\n\t                },\n\t            \tdataType: 'json',\n\t                success: function(data) {\n\t            \t\tself.elements[type]['fields'] = data.config.fields;\n\t            \t\tself.elements[type]['loadConfig'] = true;\n\t                }\n\t            });\n\t\t    }\n\t    }\n\n\t\tthis.getUrl = function(url) {\n\t\t\treturn $rootScope.builderConfig.baseUrl + url;\n\t\t}\n\n\t\tthis.getUniqueId = function (size) {\n\t        var code = Math.random() * 25 + 65 | 0,\n\t            idstr = String.fromCharCode(code);\n\n\t        size = size || 12;\n\n\t        while (idstr.length < size) {\n\t            code = Math.floor(Math.random() * 42 + 48);\n\n\t            if (code < 58 || code > 64) {\n\t                idstr += String.fromCharCode(code);\n\t            }\n\t        }\n\n\t        return idstr.toLowerCase();\n\t    }\n\n\t    this.canReplace = function(elem) {\n\t\t\tif (!elem.builder.modalVisible) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\treturn true;\n\t\t}\n\n\t\tthis.isVisibleElement = function(elem) {\n\t\t\tif (elem.hasOwnProperty('modalVisible') && !elem['modalVisible']) return false;\n\t\t\treturn true;\n\t\t}\n\n\t\tthis.getElementType = function(eleType) {\n\t\t\tvar _types = eleType.split('-');\n\t\t\tvar type = '';\n\t\t\tfor (var i = 0; i < _types.length; i++) {\n\t\t\t\tvar _types1 = _types[i].split('_');\n\t\t\t\tfor (var x = 0; x < _types1.length; x++) {\n\t\t\t\t\ttype += (_types1[x].charAt(0).toUpperCase() + _types1[x].substr(1));\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn type;\n\t\t}\n\n\t\tthis.getEl = function(elem) {\n\t\t\treturn $('.mgz-builder .' + elem.id);\n\t\t}\n\n\t\t// Clone parent styles\n\t\tthis.previewStyles = function(elem) {\n\t\t\tvar _elem = $('#' + elem.builder.oldId + '-style');\n\t\t\tvar oldId = '\\\\.' + elem.builder.oldId;\n\t\t\tvar newId = '.' + elem.id;\n\t\t\tvar regex = new RegExp(oldId, 'g');\n\t\t\tvar styleHtml = _elem[0].outerHTML.replace(regex, newId);\n\t\t\tstyleHtml = styleHtml.replace(elem.builder.oldId + '-style', elem.id + '-style');\n\t\t\t$('#' + elem.builder.oldId + '-style').after(styleHtml);\n\t\t\tif (elem.elements) {\n\t\t\t\tangular.forEach(elem.elements, function(_elem, index) {\n\t\t\t\t\tself.previewStyles(_elem);\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\n\treturn elementManagerService;\n});","Magezon_Builder/js/services/magezonBuilder.js":"define([\n\t'jquery',\n\t'angular'\n], function ($, angular) {\n\n\tvar magezonBuilderService = function($rootScope, magezonBuilderUrl, elementManager) {\n\t\tvar self = this;\n\t\tself.data = {};\n\t\tself.cacheRequests = {};\n\n\t\tthis.viewMode = 'xl';\n\n\t\tthis.setViewMode = function(viewMode) {\n\t\t\tthis.viewMode = viewMode;\n\t\t}\n\n\t\tthis.getViewMode = function(viewMode) {\n\t\t\treturn this.viewMode;\n\t\t}\n\n\t\tthis.getBuilderConfig = function(requestKey, callbackFunction) {\n\t\t\tvar self = this;\n\t\t\tif (!self.data.hasOwnProperty(requestKey)) {\n\t\t\t\tif (!self.cacheRequests.hasOwnProperty(requestKey)) {\n\t\t\t\t\t$.ajax({\n\t\t                url: magezonBuilderUrl.getUrl('mgzbuilder/ajax/loadConfig'),\n\t\t                type:'POST',\n\t\t                data: {\n\t\t                \tarea: $rootScope.builderConfig.area,\n\t\t                \thandle: $rootScope.builderConfig.handle,\n\t\t                \tkey: requestKey,\n\t\t                \tclass: $rootScope.builderConfig.profile.builder\n\t\t                },\n\t\t            \tdataType: 'json',\n\t\t                success: function(data) {\n\t                \t\tself.data[requestKey] = data.config;\n\t                \t\tself.processBuilderConfig(requestKey, data.config);\n\t\t                }\n\t\t            });\n\t\t\t\t}\n\t\t\t\tif (!self.cacheRequests.hasOwnProperty(requestKey)) self.cacheRequests[requestKey] = [];\n\t\t\t\tself.cacheRequests[requestKey].push(callbackFunction);\n\t\t\t} else if (typeof callbackFunction === 'function') {\n\t\t\t\tcallbackFunction(self.data[requestKey]);\n\t\t\t}\n\t\t}\n\n\t\tthis.processBuilderConfig = function(requestKey, result) {\n\t\t    angular.forEach(self.cacheRequests[requestKey], function(callbackFunction) {\n\t\t    \tif (angular.isFunction(callbackFunction)) {\n\t\t    \t\tcallbackFunction(result);\n\t\t    \t} else {\n\t\t    \t\tcallbackFunction = result;\n\t\t    \t}\n\t\t    });\n\t\t}\n\n\t\tthis.saveToCache = function(key, data) {\n\t\t\tthis.data[key] = data;\n\t\t}\n\n\t\tthis.getFromCache = function(key) {\n\t\t\tif (this.data.hasOwnProperty(key)) {\n\t\t\t\treturn this.data[key];\n\t\t\t}\n\t\t\treturn false;\n\t\t}\n\n\t\tthis.getData = function() {\n\t\t\treturn this.data;\n\t\t}\n\n\t    /**\n\t     * Processing options list\n\t     *\n\t     * @param {Array} array - Property array\n\t     * @param {String} separator - Level separator\n\t     * @param {Array} created - list to add new options\n\t     *\n\t     * @return {Array} Plain options list\n\t     */\n\t    this.flattenCollection = function(array, separator, created) {\n\t        var i = 0,\n\t            length,\n\t            childCollection;\n\n\t        array = _.compact(array);\n\t        length = array.length;\n\t        created = created || [];\n\n\t        for (i; i < length; i++) {\n\t            created.push(array[i]);\n\n\t            if (array[i].hasOwnProperty(separator)) {\n\t                childCollection = array[i][separator];\n\t                delete array[i][separator];\n\t                this.flattenCollection.call(this, childCollection, separator, created);\n\t            }\n\t        }\n\n\t        return created;\n\t    }\n\n\t    /**\n\t     * Set levels to options list\n\t     *\n\t     * @param {Array} array - Property array\n\t     * @param {String} separator - Level separator\n\t     * @param {Number} level - Starting level\n\t     * @param {String} path - path to root\n\t     *\n\t     * @returns {Array} Array with levels\n\t     */\n\t    this.setProperty = function(array, separator, level, path) {\n\t        var i = 0,\n\t            length,\n\t            nextLevel,\n\t            nextPath;\n\n\t        array = _.compact(array);\n\t        length = array.length;\n\t        level = level || 0;\n\t        path = path || '';\n\n\t        for (i; i < length; i++) {\n\t            if (array[i]) {\n\t                _.extend(array[i], {\n\t                    level: level,\n\t                    path: path\n\t                });\n\t            }\n\n\t            if (array[i].hasOwnProperty(separator)) {\n\t                nextLevel = level + 1;\n\t                nextPath = path ? path + '.' + array[i].label : array[i].label;\n\t                this.setProperty.call(this, array[i][separator], separator, nextLevel, nextPath);\n\t            }\n\t        }\n\n\t        return array;\n\t    }\n\n\t    /**\n\t     * Preprocessing options list\n\t     *\n\t     * @param {Array} nodes - Options list\n\t     *\n\t     * @return {Object} Object with property - options(options list)\n\t     *      and cache options with plain and tree list\n\t     */\n\t    this.parseOptions = function(nodes) {\n\t        var caption,\n\t            value,\n\t            cacheNodes,\n\t            copyNodes;\n\n\t        nodes = this.setProperty(nodes, 'elements');\n\t        copyNodes = JSON.parse(JSON.stringify(nodes));\n\t        cacheNodes = this.flattenCollection(copyNodes, 'elements');\n\n\t        nodes = _.map(nodes, function (node) {\n\t            value = node.value;\n\n\t            if (value == null || value === '') {\n\t                if (_.isUndefined(caption)) {\n\t                    caption = node.label;\n\t                }\n\t            } else {\n\t                return node;\n\t            }\n\t        });\n\n\t        return {\n\t            options: _.compact(nodes),\n\t            cacheOptions: {\n\t                plain: _.compact(cacheNodes),\n\t                tree: _.compact(nodes)\n\t            }\n\t        };\n\t    }\n\n\t    this.uniqueid = function (size) {\n\t        var code = Math.random() * 25 + 65 | 0,\n\t            idstr = String.fromCharCode(code);\n\n\t        size = size || 12;\n\n\t        while (idstr.length < size) {\n\t            code = Math.floor(Math.random() * 42 + 48);\n\n\t            if (code < 58 || code > 64) {\n\t                idstr += String.fromCharCode(code);\n\t            }\n\t        }\n\n\t        return idstr.toLowerCase();\n\t    }\n\n\t\tthis.isBackend = function () {\n\t\t\treturn $('#html-body').length ? true : false;\n\t\t}\n\n\t\tthis.isJSON = function (str) {\n\t\t\ttry {\n\t\t\t\tvar result = JSON.parse(str);\n\t\t\t\tif (angular.isNumber(result)) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\treturn true;\n\t\t}\n\n\t\tthis.getDesignValue = function(elem, key) {\n\t\t\tvar viewMode = this.getViewMode();\n\t\t\tvar result = elem[key];\n\t\t\tvar start = false;\n\t\t\tvar sizes = ['lg', 'md', 'sm', 'xs'];\n\t\t\tif (elem.device_type == 'all') return result;\n\t\t\tangular.forEach(sizes, function(v, k) {\n\t\t\t\tif (v == viewMode) {\n\t\t\t\t\tstart = true;\n\t\t\t\t}\n\t\t\t\tif (start &&  elem[v + '_' + key]) {\n\t\t\t\t\tresult = elem[v + '_' + key];\n\t\t\t\t\tstart = false;\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn result;\n\t\t}\n\n\t\tthis.setDesignValue = function(elem, key, value) {\n\t\t\tvar viewMode = this.getViewMode();\n\t\t\tvar start    = false;\n\t\t\tvar sizes    = ['lg', 'md', 'sm', 'xs'];\n\t\t\tvar _key;\n\t\t\tif (elem.device_type == 'all') {\n\t\t\t\telem[_key] = value;\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tangular.forEach(sizes, function(v, k) {\n\t\t\t\tif (v == viewMode) {\n\t\t\t\t\tstart = true;\n\t\t\t\t}\n\t\t\t\tif (start &&  elem[v + '_' + key]) {\n\t\t\t\t\t_key = v + '_' + key;\n\t\t\t\t\tstart = false;\n\t\t\t\t}\n\t\t\t});\n\t\t\tif (!_key) _key = 'md';\n\t\t\telem[_key] = value;\n\t\t}\n\n\t\tthis.getResponiveValue = function(elem, key) {\n\t\t\tvar viewMode = this.getViewMode();\n\t\t\tvar result = elem[key];\n\t\t\tvar start = false;\n\t\t\tvar sizes = ['xl', 'lg', 'md', 'sm', 'xs'];\n\t\t\tangular.forEach(sizes, function(v, k) {\n\t\t\t\tif (v == viewMode) {\n\t\t\t\t\tstart = true;\n\t\t\t\t}\n\t\t\t\tif (start &&  elem[v + '_' + key]) {\n\t\t\t\t\tresult = elem[v + '_' + key];\n\t\t\t\t\tstart = false;\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn result;\n\t\t}\n\n\t\tthis.setResponiveValue = function(elem, key, value) {\n\t\t\tvar viewMode = this.getViewMode();\n\t\t\tvar start    = false;\n\t\t\tvar sizes    = ['xl', 'lg', 'md', 'sm', 'xs'];\n\t\t\tvar _key;\n\t\t\tangular.forEach(sizes, function(v, k) {\n\t\t\t\tif (v == viewMode) {\n\t\t\t\t\tstart = true;\n\t\t\t\t}\n\t\t\t\tif (start &&  elem[v + '_' + key]) {\n\t\t\t\t\t_key = v + '_' + key;\n\t\t\t\t\tstart = false;\n\t\t\t\t}\n\t\t\t});\n\t\t\tif (!_key) _key = 'md_' + key;\n\t\t\telem[_key] = value;\n\t\t}\n\n\t\tthis.getFromLocalStorage = function(key) {\n\t\t\tif (window.localStorage) {\n\t\t\t\tkey = 'magezon.' + key;\n\t\t\t\tvar result = window.localStorage[key];\n\t\t\t\tif (this.isJSON(result)) {\n\t\t\t\t\tresult = angular.fromJson(result);\n\t\t\t\t}\n            \treturn result;\n        \t}\n        }\n\n\t\tthis.saveToLocalStorage = function(key, value) {\n\t\t\tif (window.localStorage) {\n\t\t\t\tkey = 'magezon.' + key;\n\t\t\t\tif (angular.isArray(value) || angular.isObject(value)) {\n\t\t\t\t\tvalue = angular.toJson(value);\n\t\t\t\t}\n            \treturn window.localStorage[key] = value;\n        \t}\n        }\n\n        this.elemPost = function(elem, url, data, isJson, successFunction, errorFunction, finallyFunction) {\n        \tvar spinnerHtml = '<div class=\"mgz-spinner\"><i></i></div>';\n\n        \tvar el = elementManager.getEl(elem);\n\n        \tif (!el.children('.mgz-spinner').length) {\n        \t\tel.prepend(spinnerHtml);\n        \t}\n\n        \tif (!data) data = {};\n        \tif (angular.isObject(data)) {\n        \t\tdata['form_key'] = window.FORM_KEY;\n        \t}\n        \t$.ajax({\n                url: magezonBuilderUrl.getUrl(url),\n                type: 'POST',\n                data: data,\n            \tdataType: isJson ? 'json' : 'text',\n                success: function(res) {\n                \tif (typeof successFunction === 'function') {\n            \t\t\tsuccessFunction(res);\n            \t\t}\n            \t\tif (typeof finallyFunction === 'function') {\n            \t\t\tfinallyFunction(res);\n            \t\t}\n            \t\tel.children('.mgz-spinner').remove();\n                },\n                error: function(jq, status, message) {\n                \tconsole.log(jq);\n                \tconsole.log(status);\n                \tconsole.log(message);\n                \tif (typeof errorFunction === 'function') {\n                \t\terrorFunction(jq, status, message);\n                \t}\n                \tif (typeof finallyFunction === 'function') {\n            \t\t\tfinallyFunction(jq, status, message);\n            \t\t}\n            \t\tel.children('.mgz-spinner').remove();\n                }\n            });\n        }\n\n        this.post = function(url, data, isJson, successFunction, errorFunction, finallyFunction) {\n        \tif (!data) data = {};\n        \tif (angular.isObject(data)) {\n        \t\tdata['form_key'] = window.FORM_KEY;\n        \t}\n        \t$.ajax({\n                url: magezonBuilderUrl.getUrl(url),\n                type: 'POST',\n                data: data,\n            \tdataType: isJson ? 'json' : 'text',\n                success: function(res) {\n                \tif (typeof successFunction === 'function') {\n            \t\t\tsuccessFunction(res);\n            \t\t}\n            \t\tif (typeof finallyFunction === 'function') {\n            \t\t\tfinallyFunction(res);\n            \t\t}\n                },\n                error: function(jq, status, message) {\n                \tconsole.log(jq);\n                \tconsole.log(status);\n                \tconsole.log(message);\n                \tif (typeof errorFunction === 'function') {\n                \t\terrorFunction(jq, status, message);\n                \t}\n                \tif (typeof finallyFunction === 'function') {\n            \t\t\tfinallyFunction(jq, status, message);\n            \t\t}\n                }\n            });\n        }\n\n        this.capitalize = function(str) {\n        \treturn str[0].toUpperCase() + str.slice(1);\n        }\n\n        //https://github.com/kvz/locutus/blob/master/src/php/strings/stripslashes.js\n\t\tthis.removeslashes = function(str) {\n\t\t\treturn (str + '')\n\t\t\t.replace(/\\\\(.?)/g, function (s, n1) {\n\t\t\t\tswitch (n1) {\n\t\t\t\t\tcase '\\\\':\n\t\t\t\t\treturn '\\\\'\n\t\t\t\t\tcase '0':\n\t\t\t\t\treturn '\\u0000'\n\t\t\t\t\tcase '':\n\t\t\t\t\treturn ''\n\t\t\t\t\tdefault:\n\t\t\t\t\treturn n1\n\t\t\t\t}\n\t\t\t});\n        }\n\n        //https://github.com/kvz/locutus/blob/master/src/php/strings/addcslashes.js\n        this.addslashes = function(str) {\n            return (str + '')\n            .replace(/[\\\\\"']/g, '\\\\$&')\n            .replace(/\\u0000/g, '\\\\0')\n            .replace(/{/g, '\\\\{')\n            .replace(/}/g, '\\\\}');\n        }\n\n        this.isBoolean = function(str) {\n            if (str) {\n                var _str = str.toLowerCase();\n                if (_str == 'true' || _str == 'false' || _str == '1' || _str == '0') {\n                    return true;\n                }\n            }\n            return false;\n        }\n\n        this.strToBoolean = function(str) {\n            if (this.isBoolean(str)) {\n                var _str = str.toLowerCase();\n                if (_str == 'true' || _str == '1') return true;\n                if (_str == 'false' || _str == '0') return false;\n            }\n        }\n\n\t\tthis.getUniqueId = function (size) {\n\t        var code = Math.random() * 25 + 65 | 0,\n\t            idstr = String.fromCharCode(code);\n\n\t        size = size || 12;\n\n\t        while (idstr.length < size) {\n\t            code = Math.floor(Math.random() * 42 + 48);\n\n\t            if (code < 58 || code > 64) {\n\t                idstr += String.fromCharCode(code);\n\t            }\n\t        }\n\n\t        return idstr.toLowerCase();\n\t    }\n\n\t    this.isEmpty = function(obj){\n\t    \treturn Object.keys(obj).length == 0;\n\t    }\n\t}\n\n\treturn magezonBuilderService;\n});","Magezon_Builder/js/services/profile.js":"define([\n\t'jquery',\n\t'angular'\n], function ($, angular) {\n\n\tvar profileService = function($rootScope, elementManager, magezonBuilderForm, magezonBuilderService) {\n\n\t\tvar self = this;\n\t\tvar defaultSettings = [];\n\n\t\tmagezonBuilderForm.getForm('modals.settings', function(tabs, res) {\n\t\t\tself.defaultSettings = res.defaultValues;\n\t\t});\n\n        $rootScope.$on('exportShortcode', function(e) {\n\t\t\tself.export();\n\t\t\tsetTimeout(function() {\n        \t\t$rootScope.$broadcast('loadStyles');\n\t\t\t});\n\t\t});\n\n\t\t$rootScope.$on('importShortcode', function(e) {\n\t\t\tself.import();\n\t\t\tsetTimeout(function() {\n\t\t\t\t$rootScope.$broadcast('loadStyles');\n\t\t\t});\n\t\t});\n\n\t\tthis.export = function() {\n\t\t\tvar content  = this.getTargetContent();\n\t\t\tvar _content = this.getContent();\n\t\t\tif (magezonBuilderService.isJSON(_content)) {\n\t\t\t\tvar key = this.getKey();\n\t\t\t\tif (key) {\n\t\t\t\t\t_content = '[' + key + ']' + _content + '[/' + key + ']';\n\t\t\t\t}\n\t\t\t}\n\t\t\tvar result = content.replace(_content, this.getShortCode());\n\t\t\tthis.getTargetSelector().val(result);\n\t\t\tthis.getTargetSelector().trigger('change');\n\t\t}\n\n\t\tthis.getShortCode = function() {\n\t\t\tvar key = this.getKey();\n\t\t\tvar result = '';\n\t\t\tif (key) {\n\t\t\t\tresult += '[' + key + ']';\n\t\t\t}\n\t\t\tresult += this.toString();\n\t\t\tif (key) {\n\t\t\t\tresult += '[/' + key + ']';\n\t\t\t}\n\t\t\treturn result;\n\t\t}\n\n\t\tthis.import = function() {\n\t\t\tvar content = this.getContent();\n\t\t\tvar isJSON  = magezonBuilderService.isJSON(content);\n\t\t\tvar profile = this.prepareProfile(content);\n\t\t\t$rootScope.$apply(function() {\n\t\t\t\t$rootScope.profile = angular.extend($rootScope.profile, profile);\n\t\t\t\tif (content) {\n\t\t\t\t\tif (!isJSON) {\n\t\t\t\t\t\t$rootScope.profile = angular.extend($rootScope.profile, self.defaultSettings);\n\t\t\t\t\t\t$rootScope.$broadcast('addElement', {\n\t\t\t\t\t\t\ttype: 'text',\n\t\t\t\t\t\t\topenModal: false,\n\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\thistory: false,\n\t\t\t\t\t\t\t\tcontent: content\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t$rootScope.$broadcast('exportShortcode');\n\t\t\t});\n\t\t}\n\n\t\tthis.getTargetSelector = function() {\n\t\t\treturn $('#' + this.getTargetId());\n\t\t}\n\n\t\tthis.getTargetId = function() {\n\t\t\treturn $rootScope.builderConfig.targetId;\n\t\t}\n\n\t\tthis.getKey = function() {\n\t\t\treturn $rootScope.builderConfig.profile.key;\n\t\t}\n\n\t\tthis.getContent = function() {\n\t\t\tvar key     = this.getKey();\n\t\t\tvar content = this.getTargetSelector().val();\n\t\t\tvar regExp  = '\\\\[' + key + '\\\\](.*)\\\\[/' + key + '\\\\]';\n\t\t\tvar matches = content.match(regExp);\n\t\t\tif (matches) content = matches[1];\n\t\t\treturn content;\n\t\t}\n\n\t\tthis.prepareProfile = function(content, force) {\n\t\t\tvar key = this.getKey();\n\t\t\tvar regExp  = '\\\\[' + key + '\\\\](.*)\\\\[/' + key + '\\\\]';\n\t\t\tvar matches = content.match(regExp);\n\t\t\tif (matches) content = matches[1];\n\t\t\tvar profile = {\n\t\t\t\tbuilder: elementManager.getBuilderConfig('profile'),\n\t\t\t\telements: []\n\t\t\t};\n\t\t\tvar isJSON = magezonBuilderService.isJSON(content);\n\t\t\tif (isJSON) {\n\t\t\t\tvar _profile = JSON.parse(content);\n\t\t\t\tangular.forEach(_profile, function(value, key) {\n\t\t\t\t\tif (key !== 'elements') {\n\t\t\t\t\t\tprofile[key] = value;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tprofile.elements = elementManager.prepareElements(angular.copy(_profile.elements), force);\n\t\t\t}\n\t\t\tif (!profile['pid']) profile['pid'] = magezonBuilderService.getUniqueId();\n\t\t\treturn profile;\n\t\t}\n\n\t\tthis.getJsonElements = function() {\n\t\t\treturn this.prepareElements($rootScope.profile.elements);\n\t\t}\n\n\t\tthis.toString = function() {\n\t\t\tvar profile = angular.copy($rootScope.profile);\n\t\t\tvar result = {};\n\t\t\tvar excludedFields = ['allowed_types', 'builder'];\n\t\t\tangular.forEach(profile, function(value, key) {\n\t\t\t\tif (excludedFields.indexOf(key) === -1) {\n\t\t\t\t\tresult[key] = value;\n\t\t\t\t}\n\t\t\t});\n\t\t\tif (!result['pid']) result['pid'] = magezonBuilderService.getUniqueId();\n\t\t\tresult.elements = this.prepareElements($rootScope.profile.elements);\n\t\t\treturn angular.toJson(result);\n\t\t}\n\n\t\tthis.getTargetContent = function() {\n            return this.getTargetSelector().val();\n\t\t}\n\n\t\tthis.prepareElements = function(elements) {\n\t\t\tvar _elements = angular.copy(elements);\n\t\t\tvar newElements = [];\n\t\t\tangular.forEach(_elements, function(element) {\n\t\t\t\tvar builderElement = elementManager.getElement(element.type);\n\t\t\t\tif (builderElement.name !== element.builder.name) {\n\t\t\t\t\telement.builderName = element.builder.name;\n\t\t\t\t} else {\n\t\t\t\t\tdelete element.builderName;\n\t\t\t\t}\n\t\t\t\tdelete element.builder;\n\t\t\t\tif (builderElement) {\n\t\t\t\t\tif (element.elements) {\n\t\t\t\t\t\telement.elements = self.prepareElements(element.elements);\n\t\t\t\t\t}\n\t\t\t\t\tnewElements.push(element);\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn newElements;\n\t\t}\n\n\t\tthis.updateElements = function(elements) {\n\t\t\t$rootScope.profile.elements = elements;\n\t\t}\n\t}\n\n\treturn profileService;\n});","Magezon_Builder/js/services/url.js":"define([\n\t'jquery',\n\t'angular',\n], function ($, angular) {\n\n\tvar magezonBuilderUrl = function($rootScope, elementManager) {\n\n\t    this.getTemplateUrl = function(elem, defaultTemplate) {\n\t    \tvar templateUrl;\n\t    \tvar matches = elem.context.localName.match(\"mgz-element-navigator-(.*)-mgz\");\n\t    \tif (matches) {\n\t    \t\tvar name = matches[1];\n\t\t\t\ttemplateUrl = elementManager.getElement(name).navigatorTemplateUrl;\n\t    \t} else {\n\t\t\t\tvar matches2 = elem.context.localName.match(\"mgz-element-(.*)-mgz\");\n\t\t\t\tif (matches2) {\n\t\t\t\t\tvar name = matches2[1];\n\t\t\t\t\ttemplateUrl = elementManager.getElement(name).templateUrl;\n\t\t\t\t} else {\n\t\t\t\t\ttemplateUrl = elem.attr('templateUrl');\n\t\t\t\t\tif (!templateUrl) templateUrl = elem.attr('template-url');\n\t\t\t\t\tif (!templateUrl) templateUrl = elem.parent().attr('template-url');\n\t\t\t\t\tif (!templateUrl) templateUrl = elem.parent().attr('templateUrl');\n\t\t\t\t}\n\t    \t}\n\t\t\tif (!templateUrl && defaultTemplate) templateUrl = defaultTemplate;\n\t    \treturn this.getViewFileUrl(templateUrl);\n\t    }\n\n\t\tthis.getViewFileUrl = function(file) {\n\t\t\tif (file.indexOf('http') === -1) {\n\t\t\t\treturn $rootScope.builderConfig.viewFileUrl + file;\n\t\t\t} else {\n\t\t\t\treturn file;\n\t\t\t}\n\t\t}\n\n\t\tthis.getImageUrl = function(file) {\n\t\t\tif (file && (file.indexOf('http:://') === -1 || file.indexOf('https://') === -1)) {\n\t\t\t\treturn $rootScope.builderConfig.mediaUrl + file;\n\t\t\t} else {\n\t\t\t\treturn file;\n\t\t\t}\n\t\t}\n\n\t\tthis.getUrl = function(url, params) {\n\t\t\tif (url.indexOf('http') === -1) {\n\t\t\t\turl = $rootScope.builderConfig.baseUrl + url;\n\t\t\t}\n\t\t\tif (params) {\n\t\t\t\turl += '?' + $.param(params);\n\t\t\t}\n\t\t\treturn url;\n\t\t}\n\n\t\tthis.getFrontendUrl = function(url, params) {\n\t\t\tif (url.indexOf('http') === -1) {\n\t\t\t\turl = $rootScope.builderConfig.frontend_url + url;\n\t\t\t}\n\t\t\tif (params) {\n\t\t\t\turl += '?' + $.param(params);\n\t\t\t}\n\t\t\treturn url;\n\t\t}\n\t}\n\n\treturn magezonBuilderUrl;\n});","Magezon_Builder/js/services/form.js":"define([\n\t'jquery',\n\t'angular',\n\t'Magezon_Builder/js/factories/FormlyUtils'\n], function ($, angular, FormlyUtils) {\n\n\tvar form = function($rootScope, formlyConfig, magezonBuilderService, $timeout, magezonBuilderConfig) {\n\t\tvar self = this;\n\n\t\tthis.registerTypes = function(array) {\n\t\t\tfor (var i = 0; i < array.length; i++) {\n\t\t\t\tvar elem = array[i];\n\t\t\t\t// DynamicRows\n\t\t\t\tif (elem.templateOptions.children) {\n\t\t\t\t\tself.registerTypes(elem.templateOptions.children, formlyConfig);\n\t\t\t\t}\n\t\t\t\tif (elem.hasOwnProperty('fieldGroup')) {\n\t\t\t\t\tformlyConfig.setWrapper({\n\t\t\t\t\t\tname: elem.wrapper,\n\t\t\t\t\t\ttemplateUrl: elem.templateOptions.templateUrl\n\t\t\t\t\t});\n\t\t\t\t\tself.registerTypes(elem['fieldGroup'], formlyConfig);\n\t\t\t\t} else {\n\t\t\t\t\tvar newType = {\n\t\t\t\t\t\tname: elem.type,\n\t\t\t\t\t\ttemplateUrl: elem.templateOptions.templateUrl\n\t\t\t\t\t};\n\t\t\t\t\tif (elem.defaultOptions) {\n\t\t\t\t\t\tnewType.defaultOptions = Object.assign({}, elem.defaultOptions);\n\t\t\t\t\t}\n\t\t\t\t\tformlyConfig.setType(newType);\n\t\t\t\t}\n\t\t\t\tif (elem.templateOptions.wrapperTemplateUrl) {\n\t\t\t\t\tformlyConfig.setWrapper({\n\t\t\t\t\t\tname: elem.data.wrapperType,\n\t\t\t\t\t\ttemplateUrl: elem.templateOptions.wrapperTemplateUrl\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis.processFormFields = function(fields, callbackFunction) {\n\t\t\tvar excludedFields  = ['defaultOptions'];\n\t\t\tvar requireElements = [];\n\n\t\t\tvar processRequireElements = function(children) {\n\t\t\t\tangular.forEach(children, function(elem) {\n\t\t\t\t\tif (elem.data && elem.data.element && $.inArray(elem.data.element, requireElements)===-1) {\n\t\t\t\t\t\trequireElements.push(elem.data.element);\n\t\t\t\t\t}\n\t\t\t\t\tif (elem.fieldGroup) {\n\t\t\t\t\t\tprocessRequireElements(elem.fieldGroup);\n\t\t\t\t\t}\n\t\t\t\t\tif (elem.templateOptions.children) {\n\t\t\t\t\t\tprocessRequireElements(elem.templateOptions.children);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\tprocessRequireElements(fields);\n\n\t\t\tvar extendProperties = ['templateOptions'];\n\t\t\tvar mergeElement = function(array, element, data) {\n\t\t\t\tfor (var i = 0; i < array.length; i++) {\n\t\t\t\t\tvar row = array[i];\n\t\t\t\t\tif (row['data'] && row['data']['element'] && row['data']['element'] == element) {\n\t\t\t\t\t\t_.each(extendProperties, function(property) {\n\t\t\t\t\t\t\t_.each(data[property], function(value, key) {\n\t\t\t\t\t\t\t\tif (!row[property].hasOwnProperty(key)) {\n\t\t\t\t\t\t\t\t\trow[property][key] = value;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tdelete data[property];\n\t\t\t\t\t\t});\n\t\t\t\t\t\t_.each(data, function(value, key) {\n\t\t\t\t\t\t\trow[key] = value;\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\tfor (var z = 0; z < excludedFields.length; z++) {\n\t\t\t\t\t\tdelete row[excludedFields[z]];\n\t\t\t\t\t}\n\n\t\t\t\t\tif (row.hasOwnProperty('fieldGroup')) {\n\t\t\t\t\t\tmergeElement(row['fieldGroup'], element, data);\n\t\t\t\t\t}\n\t\t\t\t\tif (row.hasOwnProperty('fields')) {\n\t\t\t\t\t\tmergeElement(row['fields'], element, data);\n\t\t\t\t\t}\n\t\t\t\t\tif (row.templateOptions.children) {\n\t\t\t\t\t\tmergeElement(row.templateOptions.children, element, data);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (requireElements.length) {\n\t\t\t\tvar loaded = 0;\n\t\t\t\t_.each(requireElements, function(element, index) {\n\t\t\t\t\trequire([element], function(data) {\n\t\t\t\t\t\tmergeElement(fields, element, data);\n\t\t\t\t\t\tloaded++;\n\t\t\t\t\t\tif (loaded == requireElements.length) {\n\t                \t\tcallbackFunction(fields);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t} else {\n\t            callbackFunction(fields);\n\t\t\t}\n\t\t}\n\n\t\tthis.getForm = function(name, callback, ajaxData) {\n\t\t\tmagezonBuilderService.getBuilderConfig(name, function(result) {\n\t\t\t\tvar newFields = angular.copy(result.form);\n\t\t\t\tvar fields = FormlyUtils.processFields(newFields, 'children');\n\t\t\t\tself.registerTypes(fields);\n\t\t\t\tself.processFormFields(fields, function(tabs) {\n\t\t\t\t\t$timeout(function() {\n\t\t\t\t\t\t$rootScope.$broadcast('afterLoadModalTabs');\n\t\t\t\t\t\tcallback(tabs, result);\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t}\n\n\treturn form;\n\n})","Magezon_Builder/js/services/modal.js":"define([\n\t'jquery',\n\t'angular'\n], function ($, angular) {\n\n\tvar modal = function($rootScope, $uibModal, magezonBuilderUrl) {\n\n\t\tthis.action = 'append';\n\t\tvar self = this;\n\t\tself.modals = {};\n\n\t\t$rootScope.$on('closeAllModals', function(e) {\n\t\t\tself.closeModal();\n\t\t});\n\n\t\tthis.registerModals = function(modals) {\n\t\t\tvar newModals = {};\n\t\t\tangular.forEach(modals, function(modal, key) {\n\t\t\t\tmodal['key'] = key;\n\t\t\t\tif (!modal.hasOwnProperty('key')) modal['size'] = {};\n\t\t\t\tif (!modal.hasOwnProperty('position')) modal['position'] = {};\n\t\t\t\trequire([modal['element']], function (config) {\n\t\t\t\t\tself.modals[key] = angular.merge(modal, config);\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\n\t\tthis.getModal = function(name) {\n\t\t\treturn self.modals[name];\n\t\t}\n\n\t\tthis.getElement = function() {\n\t\t\treturn this.element;\n\t\t}\n\n\t\tthis.setElement = function(element) {\n\t\t\tthis.element = element;\n\t\t}\n\n\t\tthis.getAction = function() {\n\t\t\treturn this.action;\n\t\t}\n\n\t\tthis.setAction = function(action) {\n\t\t\tthis.action = action;\n\t\t}\n\n\t\tthis.getData = function() {\n\t\t\treturn this.data;\n\t\t}\n\n\t\tthis.setData = function(data) {\n\t\t\tthis.data = data;\n\t\t}\n\n\t\tthis.getOpenModal = function() {\n\t\t\treturn this.openModal;\n\t\t}\n\n\t\tthis.setOpenModal = function(openModal) {\n\t\t\tthis.openModal = openModal;\n\t\t}\n\n\t\tthis.open = function(name, config, closeCallback, cancelCallback) {\n\t\t\tif (!config) config = {};\n\t\t\tif (!closeCallback) closeCallback = function() {};\n\t\t\tif (!cancelCallback) cancelCallback = function() {};\n\t\t\tif (!config.backdrop) {\n\t\t\t\tself.closeModal();\n\t\t\t}\n\t\t\tvar modal = self.getModal(name);\n\t\t\tif (modal) {\n\t\t\t\tif (modal.controller) {\n\t\t\t\t\tconfig.controller = modal.controller;\n\t\t\t\t} else {\n\t\t\t\t\tconfig.controller = 'modalBaseController';\n\t\t\t\t}\n\t\t\t\tif (!config.templateUrl && modal.templateUrl) config.templateUrl = modal.templateUrl;\n\t\t\t\tif (!config.controllerAs) config.controllerAs = 'mgz';\n\t\t\t\tconfig.windowTemplateUrl = magezonBuilderUrl.getViewFileUrl(config.windowTemplateUrl ? config.windowTemplateUrl : 'Magezon_Builder/js/templates/modal/window.html');\n\t\t\t\tif (config.openedClass) {\n\t\t\t\t\tconfig.openedClass += ' mgz-modal-open';\n\t\t\t\t} else {\n\t\t\t\t\tconfig.openedClass = 'mgz-modal-open';\n\t\t\t\t}\n\t\t\t\tif (config.windowClass) {\n\t\t\t\t\tconfig.windowClass += ' mgz-modal';\n\t\t\t\t} else {\n\t\t\t\t\tconfig.windowClass = 'mgz-modal';\n\t\t\t\t}\n\t\t\t\tconfig.windowClass += ' ' + self.getModalId(name);\n\t\t\t\tif (config.templateUrl) config.templateUrl = magezonBuilderUrl.getViewFileUrl(config.templateUrl);\n\t\t\t\tif (!config.hasOwnProperty('backdrop')) config['backdrop'] = false;\n\t\t\t\tif (!config.hasOwnProperty('keyboard')) config['keyboard'] = false;\n\t\t\t\tif (modal.resizable) config.windowClass += ' mgz-modal-resizable';\n\t\t\t\tvar resolve = {\n\t\t\t\t\tmodal: modal,\n\t\t\t\t\tform: {}\n\t\t\t\t};\n\t\t\t\tif (config.resolve) {\n\t\t\t\t\tconfig.resolve = angular.extend(resolve, config.resolve);\n\t\t\t\t} else {\n\t\t\t\t\tconfig.resolve = resolve;\n\t\t\t\t}\n\t\t\t\tvar uibModal = $uibModal.open(config);\n\t\t\t\tuibModal.result.then(closeCallback, cancelCallback);\n\t\t\t\tif (!config.backdrop) {\n\t\t\t\t\tself.currentModal = uibModal;\n\t\t\t\t\tself.currentModal.name = name;\n\t\t\t\t}\n\t\t\t\treturn uibModal;\n\t\t\t} else {\n\t\t\t\talert('There is no modal with name ' + name);\n\t\t\t}\n\t\t}\n\n\t\tthis.getModalId = function(name) {\n\t\t\treturn 'mgz-modal-' + name;\n\t\t}\n\n\t\tthis.closeModal = function(name) {\n\t\t\tif (!name && self.currentModal) {\n\t\t\t\tself.currentModal.dismiss('cancel');\n\t\t\t}\n\t\t}\n\t}\n\n\treturn modal;\n});","Magezon_Builder/js/services/history.js":"define([\n\t'jquery',\n\t'underscore',\n\t'angular',\n\t'moment',\n], function ($, _, angular, moment) {\n\n\tvar history = function($rootScope, profileManager, magezonBuilderService) {\n\t\tvar self = this;\n\n\t\t$rootScope.$on('exportShortcode', function(event) {\n\t\t\tif (!self.imported) {\n\t\t\t\tself.activeFirstItem();\n\t\t\t\tself.imported = true;\n\t\t\t}\n\t\t});\n\n\t\t$rootScope.$on('importShortcode', function(event) {\n\t\t\tif (!self.imported) {\n\t\t\t\tself.activeFirstItem();\n\t\t\t\tself.imported = true;\n\t\t\t}\n\t\t});\n\n\t\tthis.activeFirstItem = function() {\n\t\t\tvar item = this.addItem({\n\t\t\t\ttype: 'editing_started',\n\t\t\t\tprofile: profileManager.getShortCode()\n\t\t\t});\n\t\t\titem.selected = true;\n\t\t}\n\n\t\t$rootScope.$on('addHistory', function(event, data) {\n\t\t\tself.addItem(data);\n\t\t\t$rootScope.$broadcast('exportShortcode');\n\t\t});\n\n\t\tthis.getTitle = function(name) {\n\t\t\tvar title;\n\t\t\tangular.forEach($rootScope.builderConfig.historyLabels, function(_title, k) {\n\t\t\t\tif (k == name) {\n\t\t\t\t\ttitle = _title;\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn title;\n\t\t}\n\n\t\tthis.addItem = function(data) {\n\t\t\tvar action = self.getTitle(data.type);\n\t\t\tif (action) {\n\t\t\t\tif (data && data.hasOwnProperty('action')) action = data.action;\n\t\t\t\tself.clearItem();\n\t\t\t\tvar profile = data.profile ? data.profile : profileManager.getShortCode();\n\t\t\t\tvar strings = [];\n\t\t\t\tif (data.title) strings.push('<span class=\"mgz-builder-history-item__title\">' + data.title + '</span>');\n\t\t\t\tif (data.subtitle) strings.push('<span class=\"mgz-builder-history-item__subtitle\">' + data.subtitle + '</span>');\n\t\t\t\tif (action) strings.push('<span class=\"mgz-builder-history-item__action\">' + action + '</span>');\n\t\t\t\tvar title = strings.join(' ');\n\t\t\t\tvar item = this.prepareItem(data.type, title, profile, false);\n\t\t\t\t$rootScope.history.push(item);\n\t\t\t\tself.activeItem(item);\n\t\t\t\treturn item;\n\t\t\t}\n\t\t}\n\n\t\tthis.prepareItem = function(type, title, profile, selected) {\n\t\t\treturn {\n\t\t\t\tid: magezonBuilderService.uniqueid(),\n\t\t\t\ttype: type,\n\t\t\t\ttitle: title,\n\t\t\t\ttime: moment().valueOf(),\n\t\t\t\tprofile: profileManager.getShortCode(),\n\t\t\t\tselected: selected\n\t\t\t};\n\t\t}\n\n\t\tthis.activeItem = function(item) {\n\t\t\tangular.forEach($rootScope.history, function(_item, index) {\n\t\t\t\tif (item.id === _item.id) {\n\t\t\t\t\t_item.selected = true;\n\t\t\t\t} else {\n\t\t\t\t\t_item.selected = false;\n\t\t\t\t}\n\t\t\t});\n\t\t\tself.itemActived = item;\n\t\t}\n\n\t\tthis.previewItem = function(item) {\n\t\t\tself.activeItem(item);\n\t\t\tvar profile = profileManager.prepareProfile(item.profile);\n\t\t\tprofileManager.updateElements(profile.elements);\n\t\t\t$rootScope.$broadcast('loadStyles');\n\t\t}\n\n\t\tthis.clearItem = function() {\n\t\t\tvar found = false;\n\t\t\tvar history = angular.copy($rootScope.history);\n\t\t\tangular.forEach(history.reverse(), function(_item, index) {\n\t\t\t\tif (!found) {\n\t\t\t\t\t$rootScope.history.splice(history.length - index, 1);\n\t\t\t\t}\n\t\t\t\tif (_item.id === self.itemActived.id) {\n\t\t\t\t\tfound = true;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tthis.applyItem = function(item) {\n\t\t\tself.previewItem(item);\n\t\t\tself.clearItem();\n\t\t\t$rootScope.$broadcast('exportShortcode');\n\t\t}\n\t}\n\n\treturn history;\n});","Magezon_Builder/js/services/filter.js":"define([\n    'jquery',\n    'angular'\n], function ($, angular) {\n\n    // vendor/magento/module-tinymce-3/view/base/web/tinymce3Adapter.js\n    // vendor/magento/magento2-base/lib/web/mage/adminhtml/wysiwyg/tiny_mce/tinymce4Adapter.js\n\n    var filter = function($rootScope, magezonBuilderUrl, magezonBuilderService) {\n        var self     = this;\n        var wysiwyg  = this.config = angular.copy($rootScope.builderConfig.wysiwyg);\n        var tinymce4 = wysiwyg.tinymce4;\n\n        /**\n         * Retrieve directives URL with substituted directive value.\n         *\n         * @param {String} directive\n         */\n        self.makeDirectiveUrl = function (directive) {\n            return this.config['directives_url']\n                .replace(/directive/, 'directive/___directive/' + directive)\n                .replace(/\\/$/, '');\n        }\n\n        /**\n         * @param {Object} attributes\n         * @return {Object}\n         */\n        self.parseAttributesString = function (attributes) {\n            var result = {};\n            attributes.gsub(\n                /(\\w+)(?:\\s*=\\s*(?:(?:\"((?:\\\\.|[^\"])*)\")|(?:'((?:\\\\.|[^'])*)')|([^>\\s]+)))?/,\n                function (match) {\n                    if (magezonBuilderService.isBoolean(match[2])) {\n                        result[match[1]] = magezonBuilderService.strToBoolean(match[2]);\n                    } else if (magezonBuilderService.isBoolean(match[4])) {\n                        result[match[1]] = magezonBuilderService.strToBoolean(match[4]);\n                    } else {\n                        result[match[1]] = match[2];  \n                    }\n                }\n            );\n            return result;\n        }\n\n        /**\n         * Tinymce has strange behavior with html and this removes one of its side-effects\n         * @param {String} content\n         * @return {String}\n         */\n        self.removeDuplicateAncestorWidgetSpanElement = function (content) {\n            var parser, doc;\n\n            if (!window.DOMParser) {\n                return content;\n            }\n\n            parser = new DOMParser();\n            doc = parser.parseFromString(content.replace(/&quot;/g, '&amp;quot;'), 'text/html');\n\n            [].forEach.call(doc.querySelectorAll('.magento-widget'), function (widgetEl) {\n                var widgetChildEl = widgetEl.querySelector('.magento-widget');\n\n                if (!widgetChildEl) {\n                    return;\n                }\n\n                [].forEach.call(widgetEl.childNodes, function (el) {\n                    widgetEl.parentNode.insertBefore(el, widgetEl);\n                });\n\n                widgetEl.parentNode.removeChild(widgetEl);\n            });\n\n            return doc.body ? doc.body.innerHTML.replace(/&amp;quot;/g, '&quot;') : content;\n        }\n\n        // vendor/magento/module-page-builder/view/adminhtml/web/js/utils/directives.js\n        self.convertMediaDirectivesToUrls = function(html) {\n            var mediaDirectiveRegExp = /\\{\\{\\s*media\\s+url\\s*=\\s*\"?[^\"\\s\\}]+\"?\\s*\\}\\}/g;\n            var mediaDirectiveMatches = html.match(mediaDirectiveRegExp);\n            if (mediaDirectiveMatches) {\n                mediaDirectiveMatches.forEach(function (mediaDirective) {\n                    var urlRegExp = /\\{\\{\\s*media\\s+url\\s*=\\s*(?:\"|&quot;)?(.+)(?=}})\\s*\\}\\}/;\n                    var urlMatches = mediaDirective.match(urlRegExp);\n                    if (urlMatches && typeof urlMatches[1] !== \"undefined\") {\n                        html = html.replace(mediaDirective, magezonBuilderUrl.getImageUrl(urlMatches[1].replace(/\"/g, \"\").replace(/&quot;/g, \"\").replace(/'/g, \"\")));\n                    }\n                });\n            }\n            return html;\n        }\n\n        self.encodeContent = function(content, convert) {\n            if (!content) return;\n            //if (convert) {\n                content = self.convertMediaDirectivesToUrls(content);\n            // } else {\n            //  if (tinymce4) {\n            //      content = self.tinymce4EncodeDirectives(content);\n            //  } else {\n            //      content = self.tinymce3EncodeDirectives(content);\n            //  }\n            // }\n            content = self.encodeWidgets(content);\n            return content;\n        }\n\n        /**\n         * Convert {{directive}} style attributes syntax to absolute URLs\n         * @param {Object} content\n         * @return {*}\n         */\n        self.tinymce4EncodeDirectives = function (content) {\n            // collect all HTML tags with attributes that contain directives\n            return content.gsub(/<([a-z0-9\\-\\_]+[^>]+?)([a-z0-9\\-\\_]+=\"[^\"]*?\\{\\{.+?\\}\\}.*?\".*?)>/i, function (match) {\n                var attributesString = match[2],\n                    decodedDirectiveString;\n\n                // process tag attributes string\n                attributesString = attributesString.gsub(/([a-z0-9\\-\\_]+)=\"(.*?)(\\{\\{.+?\\}\\})(.*?)\"/i, function (m) {\n                    decodedDirectiveString = encodeURIComponent(Base64.mageEncode(m[3].replace(/&quot;/g, '\"') + m[4]));\n\n                    return m[1] + '=\"' + m[2] + this.makeDirectiveUrl(decodedDirectiveString) + '\"';\n                }.bind(this));\n\n                return '<' + match[1] + attributesString + '>';\n            }.bind(this));\n        }\n\n        /**\n         * Convert {{directive}} style attributes syntax to absolute URLs\n         * @param {Object} content\n         * @return {*}\n         */\n        self.tinymce3EncodeDirectives = function (content) {\n            // collect all HTML tags with attributes that contain directives\n            return content.gsub(/<([a-z0-9\\-\\_]+[^>]+?)([a-z0-9\\-\\_]+=\"[^\"]*?\\{\\{.+?\\}\\}.*?\".*?)>/i, function (match) {\n                var attributesString = match[2],\n                    decodedDirectiveString;\n\n                // process tag attributes string\n                attributesString = attributesString.gsub(/([a-z0-9\\-\\_]+)=\"(.*?)(\\{\\{.+?\\}\\})(.*?)\"/i, function (m) {\n                    decodedDirectiveString = encodeURIComponent(Base64.mageEncode(m[3].replace(/&quot;/g, '\"')));\n\n                    return m[1] + '=\"' + m[2] + this.makeDirectiveUrl(decodedDirectiveString) + m[4] + '\"';\n                }.bind(this));\n\n                return '<' + match[1] + attributesString + '>';\n            }.bind(this));\n        }\n\n        self.decodeContent = function(content) {\n            if (tinymce4) {\n                content = self.tinymce4DecodeDirectives(content);\n            } else {\n                content = self.tinymce3DecodeDirectives(content);\n            }\n            content = self.decodeWidgets(content);\n            return content;\n        }\n\n        /**\n         * Convert absolute URLs to {{directive}} style attributes syntax\n         * @param {Object} content\n         * @return {*}\n         */\n        self.tinymce4DecodeDirectives = function (content) {\n            var directiveUrl = this.makeDirectiveUrl('%directive%').split('?')[0], // remove query string from directive\n                // escape special chars in directives url to use in regular expression\n                regexEscapedDirectiveUrl = directiveUrl.replace(/([$^.?*!+:=()\\[\\]{}|\\\\])/g, '\\\\$1'),\n                regexDirectiveUrl = regexEscapedDirectiveUrl\n                    .replace(\n                        '%directive%',\n                        '([a-zA-Z0-9,_-]+(?:%2[A-Z]|)+\\/?)(?:(?!\").)*'\n                    ) + '/?(\\\\\\\\?[^\"]*)?', // allow optional query string\n                reg = new RegExp(regexDirectiveUrl);\n\n            return content.gsub(reg, function (match) {\n                return Base64.mageDecode(decodeURIComponent(match[1]).replace(/\\/$/, '')).replace(/\"/g, '&quot;');\n            });\n        }\n\n        /**\n         * Convert absolute URLs to {{directive}} style attributes syntax\n         * @param {Object} content\n         * @return {*}\n         */\n        self.tinymce3DecodeDirectives = function (content) {\n            var directiveUrl = this.makeDirectiveUrl('%directive%').split('?')[0], // remove query string from directive\n                // escape special chars in directives url to use in regular expression\n                regexEscapedDirectiveUrl = directiveUrl.replace(/([$^.?*!+:=()\\[\\]{}|\\\\])/g, '\\\\$1'),\n                regexDirectiveUrl = regexEscapedDirectiveUrl\n                    .replace(\n                        '%directive%',\n                        '([a-zA-Z0-9,_-]+(?:%2[A-Z]|)+\\/?)(?:(?!\").)*'\n                    ) + '/?(\\\\\\\\?[^\"]*)?', // allow optional query string\n                reg = new RegExp(regexDirectiveUrl);\n\n            return content.gsub(reg, function (match) {\n                return Base64.mageDecode(decodeURIComponent(match[1]).replace(/\\/$/, '')).replace(/\"/g, '&quot;');\n            });\n        }\n\n        /**\n         * @param {Object} content\n         * @return {*}\n         */\n        self.encodeWidgets = function(content) {\n            if (tinymce4) {\n                content = self.tinymce4EncodeWidgets(self.decodeWidgets(content));\n                content = self.removeDuplicateAncestorWidgetSpanElement(content);\n            } else {\n                content = self.tinymce3EncodeWidgets(content);\n            }\n            return content;\n        }\n\n        /**\n         * Convert {{widget}} style syntax to image placeholder HTML\n         * @param {String} content\n         * @return {*}\n         */\n        self.tinymce4EncodeWidgets = function (content) {\n            return content.gsub(/\\{\\{widget(.*?)\\}\\}/i, function (match) {\n                var attributes = self.parseAttributesString(match[1]),\n                    imageSrc,\n                    imageHtml = '';\n\n                if (attributes.type) {\n                    attributes.type = attributes.type.replace(/\\\\\\\\/g, '\\\\');\n                    imageSrc = self.config.placeholders[attributes.type];\n\n                    if (imageSrc) {\n                        imageHtml += '<span class=\"magento-placeholder magento-widget mceNonEditable\" ' +\n                            'contenteditable=\"false\">';\n                    } else {\n                        imageSrc = config['error_image_url'];\n                        imageHtml += '<span ' +\n                            'class=\"magento-placeholder magento-placeholder-error magento-widget mceNonEditable\" ' +\n                            'contenteditable=\"false\">';\n                    }\n\n                    imageHtml += '<img';\n                    imageHtml += ' id=\"' + Base64.idEncode(match[0]) + '\"';\n                    imageHtml += ' src=\"' + imageSrc + '\"';\n                    imageHtml += ' />';\n\n                    if (self.config.widget_types[attributes.type]) {\n                        imageHtml += self.config.widget_types[attributes.type];\n                    }\n\n                    imageHtml += '</span>';\n\n                    return imageHtml;\n                }\n            });\n        }\n\n        /**\n         * @param {Object} content\n         * @return {*}\n         */\n        self.tinymce3EncodeWidgets = function (content) {\n            return content.gsub(/\\{\\{widget(.*?)\\}\\}/i, function (match) {\n                var attributes = self.parseAttributesString(match[1]),\n                    imageSrc,\n                    imageHtml;\n\n                if (attributes.type) {\n                    attributes.type = attributes.type.replace(/\\\\\\\\/g, '\\\\');\n                    imageSrc = this.config['widget_placeholders'][attributes.type];\n\n                    imageHtml = '<img';\n                    imageHtml += ' id=\"' + Base64.idEncode(match[0]) + '\"';\n                    imageHtml += ' src=\"' + imageSrc + '\"';\n                    imageHtml += ' title=\"' +\n                        match[0].replace(/\\{\\{/g, '{').replace(/\\}\\}/g, '}').replace(/\\\"/g, '&quot;') + '\"';\n                    imageHtml += '>';\n\n                    return imageHtml;\n                }\n            }.bind(this));\n        }\n\n        /**\n         * @param {Object} content\n         * @return {*}\n         */\n        self.decodeWidgets = function(content) {\n            if (tinymce4) {\n                content = self.tinymce4DecodeWidgets(content);\n            } else {\n                content = self.tinymce3DecodeWidgets(content);\n            }\n            return content;\n        }\n\n        /**\n         * Convert image placeholder HTML to {{widget}} style syntax\n         * @param {String} content\n         * @return {*}\n         */\n        self.tinymce4DecodeWidgets = function (content) {\n            return content.gsub(\n                /(<span class=\"[^\"]*magento-widget[^\"]*\"[^>]*>)?<img([^>]+id=\"[^>]+)>(([^>]*)<\\/span>)?/i,\n                function (match) {\n                    var attributes = self.parseAttributesString(match[2]),\n                        widgetCode;\n\n                    if (attributes.id) {\n                        widgetCode = Base64.idDecode(attributes.id);\n\n                        if (widgetCode.indexOf('{{widget') !== -1) {\n                            return widgetCode;\n                        }\n                    }\n\n                    return match[0];\n                }\n            );\n        }\n\n        /**\n         * @param {Object} content\n         * @return {*}\n         */\n        self.tinymce3DecodeWidgets = function (content) {\n            return content.gsub(/<img([^>]+id=\\\"[^>]+)>/i, function (match) {\n                var attributes = self.parseAttributesString(match[1]),\n                    widgetCode;\n\n                if (attributes.id) {\n                    widgetCode = Base64.idDecode(attributes.id);\n\n                    if (widgetCode.indexOf('{{widget') !== -1) {\n                        return widgetCode;\n                    }\n                }\n\n                return match[0];\n            }.bind(this));\n        }\n\n        self.processContent = function(content) {\n            var result = content.gsub(/<img\\s[^>]*?src\\s*=\\s*['\\\"]([^'\\\"]*?)['\\\"][^>]*?>/i, function (match) {\n                if (match[1].indexOf($rootScope.builderConfig.mediaUrl) !== -1) {\n                    return match[0].replace(match[1], self.urlToDirective(match[1]));\n                } else {\n                    return match[0];\n                }\n            });\n            return result;  \n        }\n\n        self.convertImageToDirective = function(content) {\n            content = content.replace(/(data-mce-selected=\"1\")/g, '\\\\$1');\n            content = content.gsub(/<img\\s[^>]*?src\\s*=\\s*['\\\"]([^'\\\"]*?)['\\\"][^>]*?>/i, function (match) {\n                var result;\n                if (match[1].indexOf($rootScope.builderConfig.mediaUrl) !== -1) {\n                    var mediaDirective = self.urlToDirective(match[1]);\n                    result = match[0].replace(match[1], mediaDirective);\n                    result = result.replace('data-mce-src=\"' + match[1] + '\"', '');\n                } else {\n                    result = match[0];\n                }\n                return result;\n            });\n            return content;\n        }\n\n        self.urlToDirective = function(imageUrl) {\n            var mediaUrl  = self.convertUrlToPathIfOtherUrlIsOnlyAPath($rootScope.builderConfig.mediaUrl, imageUrl);\n            var mediaPath = imageUrl.split(mediaUrl);\n            return \"{{media url=\" + mediaPath[1] + \"}}\";\n        }\n\n        self.convertUrlToPathIfOtherUrlIsOnlyAPath = function(url, otherUrl) {\n            return self.isPathOnly(otherUrl) ? self.getPathFromUrl(url) : url;\n        }\n\n        self.isPathOnly = function(url) {\n            return url.indexOf(\"/\") === 0;\n        }\n\n        self.getPathFromUrl = function(url) {\n            var a = document.createElement(\"a\");\n            a.href = url;\n            return a.pathname;\n        }\n\n    }\n\n    return filter;\n});","Magezon_Builder/js/services/editor.js":"define([\n\t'jquery',\n\t'angular',\n    'mage/adminhtml/wysiwyg/tiny_mce/html5-schema',\n    'mage/adminhtml/events'\n], function ($, angular, html5Schema) {\n\n\tif (typeof tinyMceEditors == 'undefined') {\n        window.tinyMceEditors = $H({});\n    }\n\n\tvar editor = function($rootScope, $timeout, magezonBuilderFilter) {\n\t\tvar self     = this;\n\t\tself.wysiwyg = angular.copy($rootScope.builderConfig.wysiwyg);\n\t\tself.schema  = html5Schema;\n\n\t\tself.initTinymce = function(id, config, onChange, onInit) {\n\t\t\t$timeout(function() {\n\t\t\t\tif (self.wysiwyg.tinymce4) {\n\t\t\t\t\tself.setupTinymce4(id, config, onChange, onInit);\n\t\t\t\t} else {\n\t\t\t\t\tself.setupTinymce3(id, config, onChange, onInit);\n\t\t\t\t}\n\t\t\t}, 100);\n\t\t}\n\n\t\tself.setupTinymce4 = function (id, config, onChange, onInit) {\n\t\t    var settings;\n\t\t    var deferreds = [];\n\n\t\t    settings = {\n\t\t    \tselector: '#' + id,\n\t\t    \tmode: 'inline',\n\t\t        theme: 'modern',\n\t\t        entity_encoding: 'raw',\n\t\t        convert_urls: false,\n\t\t        relative_urls: false,\n\t\t        remove_script_host: false,\n\t\t        verify_html: false,\n\t\t        menubar: false,\n\t\t        adapter: this,\n\t\t        setup: function(editor) {\n\t\t        \teditor.on('BeforeSetContent', function (evt) {\n\t\t        \t\tif (evt.content) {\n\t\t        \t\t\tevt.content = magezonBuilderFilter.encodeContent(evt.content);\n\t\t        \t\t}\n\t\t        \t});\n\n\t\t            editor.on('change', function(evt) {\n\t\t            \tvar value = window.tinyMCE.get(evt.target.id).getContent();\n\t\t            \tvalue = magezonBuilderFilter.decodeContent(value);\n\t\t            \tself._onChange(onChange, value);\n\t\t            });\n\t\t        }\n\t\t    };\n\t\t    settings = Object.extend(settings, config);\n\t\t    delete settings['plugins'];\n\n\t\t    if (config.baseStaticUrl && config.baseStaticDefaultUrl) {\n\t\t        settings['document_base_url'] = config.baseStaticUrl;\n\t\t    }\n\t\t    // Set the document base URL\n\t\t    if (config['document_base_url']) {\n\t\t        settings['document_base_url'] = config['document_base_url'];\n\t\t    }\n\n\t\t    if (config['files_browser_window_url']) {\n\t\t        /**\n\t\t         * @param {*} fieldName\n\t\t         * @param {*} url\n\t\t         * @param {*} objectType\n\t\t         * @param {*} w\n\t\t         */\n\t\t        settings['file_browser_callback'] = function (fieldName, url, objectType, w) {\n\t\t            self.openFileBrowser4({\n\t\t                win: w,\n\t\t                type: objectType,\n\t\t                field: fieldName\n\t\t            });\n\t\t        }.bind(this);\n\t\t    }\n\n\t\t    if (config.width) {\n\t\t        settings.width = config.width;\n\t\t    }\n\n\t\t    if (config.height) {\n\t\t        settings.height = config.height;\n\t\t    }\n\n\t\t    var plugins = [];\n\t\t    //var plugins = config.plugins ? config.plugins.split(' ') : [];\n\t\t    var toolbar = config.plugins ? config.toolbar.split(' ') : [];\n\n\t\t    if (config.plugins) {\n\t\t        config.plugins.forEach(function (plugin) {\n\t\t            var deferred;\n\t\t            if (angular.isString(plugin)) {\n\t\t                plugins.push(plugin);\n\t\t                return;\n\t\t            }\n\n\t\t            if (plugins.indexOf(plugin.name) === -1) {\n\t\t                plugins.push(plugin.name);\n\t\t            }\n\n\t\t            if (toolbar.indexOf(plugin.name) === -1) {\n\t\t                toolbar.push('|', plugin.name);\n\t\t            }\n\n\t\t            if (!plugin.src) {\n\t\t                return;\n\t\t            }\n\n\t\t            deferred = $.Deferred();\n\t\t            deferreds.push(deferred);\n\n\t\t            require([plugin.src], function (factoryFn) {\n\t\t                if (typeof factoryFn === 'function') {\n\t\t                    factoryFn(plugin.options);\n\t\t                }\n\t\t                window.tinyMCE.PluginManager.load(plugin.name, plugin.src);\n\t\t                deferred.resolve();\n\t\t            });\n\n\t\t            if (deferreds.length) {\n\t\t                jQuery.when.apply(jQuery, deferreds).done(function () {\n\t\t                    $timeout(function() {\n\t\t                    \tself._initTinymce(id, onInit, settings);\n\t\t                    });\n\t\t                });\n\t\t            }\n\t\t        });\n\t\t    }\n\t\t    settings['plugins'] = plugins.join(' ');\n\t\t    settings['toolbar'] = toolbar.join(' ');\n\t\t    if (!deferreds.length) {\n\t\t    \tself._initTinymce(id, onInit, settings);\n\t\t    }\n\t\t}\n\n\t\tself.openFileBrowser4 = function (o) {\n\t\t    var typeTitle = self.translate('Select Images'),\n\t\t        storeId = 0,\n\t\t        frameDialog = jQuery('div.mce-container[role=\"dialog\"]');\n\n\t\t    var id   = frameDialog.find('.mce-textbox').eq(0).attr('id');\n\t\t    var wUrl = self.wysiwyg.files_browser_window_url +\n\t\t            'target_element_id/' + id + '/' +\n\t\t            'store/' + storeId + '/';\n\t\t    self.mediaBrowserOpener = o.win;\n\t\t    self.mediaBrowserTargetElementId = o.field;\n\n\t\t    if (typeof o.type !== 'undefined' && o.type !== '') { //eslint-disable-line eqeqeq\n\t\t        wUrl = wUrl + 'type/' + o.type + '/';\n\t\t    }\n\n\t\t    frameDialog.hide();\n\t\t    jQuery('#mce-modal-block').hide();\n\n\t\t    require(['mage/adminhtml/browser'], function () {\n\t\t        MediabrowserUtility.openDialog(wUrl, false, false, typeTitle, {\n\t\t            /**\n\t\t             * Closed.\n\t\t             */\n\t\t            closed: function () {\n\t\t                frameDialog.show();\n\t\t                jQuery('#mce-modal-block').show();\n\t\t            }\n\t\t        });\n\t\t    });\n\t\t}\n\n\t\tthis.setupTinymce3 = function(id, config, onChange, onInit) {\n\t\t    var plugins = 'inlinepopups,safari,pagebreak,style,layer,table,advhr,advimage,emotions,iespell,media,searchreplace,contextmenu,paste,directionality,fullscreen,noneditable,visualchars,nonbreaking,xhtmlxtras';\n\n\t\t    if (config.widget_plugin_src) {\n\t\t        //plugins = 'magentowidget,' + plugins;\n\t\t    }\n\n\t\t    var magentoPluginsOptions = $H({});\n\t\t    var magentoPlugins = '';\n\n\t\t    if (config.plugins) {\n\t\t        config.plugins.each(function(plugin) {\n\t\t            magentoPlugins = plugin.name + ',' + magentoPlugins;\n\t\t            magentoPluginsOptions.set(plugin.name, plugin.options);\n\t\t        });\n\t\t        if (magentoPlugins) {\n\t\t            plugins = '-' + magentoPlugins + plugins;\n\t\t        }\n\t\t    }\n\n\t\t    var settings = {\n\t\t        'entity_encoding': 'raw',\n\t\t        mode: 'exact',\n\t\t        elements: id,\n\t\t        theme: 'advanced',\n\t\t        plugins: plugins,\n\t\t        theme_advanced_buttons1: magentoPlugins + 'magentowidget,bold,italic,underline,strikethrough,|,justifyleft,justifycenter,justifyright,justifyfull,|,styleselect,formatselect,fontselect,fontsizeselect',\n\t\t        theme_advanced_buttons2: 'cut,copy,paste,pastetext,pasteword,|,search,replace,|,bullist,numlist,|,outdent,indent,blockquote,|,undo,redo,|,link,unlink,anchor,image,cleanup,help,code,|,forecolor,backcolor',\n\t\t        theme_advanced_buttons3: 'tablecontrols,|,hr,removeformat,visualaid,|,sub,sup,|,charmap,iespell,media,advhr,|,ltr,rtl,|,fullscreen',\n\t\t        theme_advanced_buttons4: 'insertlayer,moveforward,movebackward,absolute,|,styleprops,|,cite,abbr,acronym,del,ins,attribs,|,visualchars,nonbreaking,pagebreak',\n\t\t        theme_advanced_toolbar_location: 'top',\n\t\t        theme_advanced_toolbar_align: 'left',\n\t\t        theme_advanced_statusbar_location: 'bottom',\n\t\t        valid_elements: self.schema.validElements.join(','),\n\t\t        valid_children: self.schema.validChildren.join(','),\n\t\t        theme_advanced_resizing: true,\n\t\t        theme_advanced_resize_horizontal: false,\n\t\t        convert_urls: false,\n\t\t        relative_urls: false,\n\t\t        content_css: config.content_css,\n\t\t        custom_popup_css: config.popup_css,\n\t\t        magentowidget_url: config.widget_window_url,\n\t\t        magentoPluginsOptions: magentoPluginsOptions,\n\t\t        doctype: '<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Strict//EN\" \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd\">',\n\t\t        setup: function (ed) {\n\n\t\t        \tvar onChange1;\n\n\t\t        \ted.onPreInit.add(self.onEditorPreInit.bind(self));\n\n\t\t        \ted.onInit.add(self.onEditorInit.bind(self));\n\n\t\t            ed.onSubmit.add(function (edi, e) {\n\t\t                varienGlobalEvents.fireEvent('tinymceSubmit', e);\n\t\t            });\n\n\t\t            ed.onPaste.add(function (edi, e, o) {\n\t\t                varienGlobalEvents.fireEvent('tinymcePaste', o);\n\t\t            });\n\n\t\t            ed.onBeforeSetContent.add(function (edi, o) {\n\t\t                varienGlobalEvents.fireEvent('tinymceBeforeSetContent', o);\n\t\t                if (o.content) {\n\t\t        \t\t\to.content = magezonBuilderFilter.encodeContent(o.content);\n\t\t        \t\t}\n\t\t            });\n\n\t\t            ed.onSetContent.add(function (edi, o) {\n\t\t                varienGlobalEvents.fireEvent('tinymceSetContent', o);\n\t\t                self.updateTextArea(onChange, id);\n\t\t            });\n\n\t\t            ed.onSaveContent.add(function (edi, o) {\n\t\t                varienGlobalEvents.fireEvent('tinymceSaveContent', o);\n\t\t                self.updateTextArea(onChange, id);\n\t\t            });\n\n\t\t            onChange1 = function (edi, l) {\n\t\t                varienGlobalEvents.fireEvent('tinymceChange', l);\n\t\t                self.updateTextArea(onChange, id);\n\t\t            };\n\n\t\t            ed.onChange.add(onChange1);\n                    ed.onKeyUp.add(onChange1);\n\n\t\t            ed.onExecCommand.add(function (edi, cmd) {\n\t\t                varienGlobalEvents.fireEvent('tinymceExecCommand', cmd);\n\t\t                self.updateTextArea(onChange, id);\n\t\t            });\n\t\t        }\n\t\t    };\n\n\t\t    // Set the document base URL\n\t\t    if (config.document_base_url) {\n\t\t        settings.document_base_url = config.document_base_url;\n\t\t    }\n\n\t\t    if (config.files_browser_window_url) {\n\t\t        settings['file_browser_callback'] = function (fieldName, url, objectType, w) {\n\t\t            self.openFileBrowser3(id, {\n\t\t                win: w,\n\t\t                type: objectType,\n\t\t                field: fieldName\n\t\t            });\n\t\t        }.bind(this);\n\t\t    }\n\n\t\t    if (config.width) {\n\t\t        settings.width = config.width;\n\t\t    }\n\n\t\t    if (config.height) {\n\t\t        settings.height = config.height;\n\t\t    }\n\n\t\t    if (config.settings) {\n\t\t        Object.extend(settings, config.settings)\n\t\t    }\n\n\t\t    setTimeout(function() {\n\t\t        self._initTinymce(id, onInit, settings);\n\t\t    }, 1000);\n\n\t\t    return settings;\n\t\t}\n\n\t\tself.openFileBrowser3 = function(id, o) {\n\t\t\tvar typeTitle,\n\t\t\tstoreId = 0,\n\t\t\tframeDialog = jQuery(o.win.frameElement).parents('[role=\"dialog\"]'),\n\t\t\twUrl = self.wysiwyg.files_browser_window_url +\n\t\t\t'target_element_id/' + id + '/' +\n\t\t\t'store/' + storeId + '/';\n\n\t\t\tself.mediaBrowserOpener = o.win;\n\t\t\tself.mediaBrowserTargetElementId = o.field;\n\n\t\t\tif (typeof(o.type) != 'undefined' && o.type != \"\") {\n\t\t\t\ttypeTitle = 'image' == o.type ? self.translate('Insert Image...') : self.translate('Insert Media...');\n\t\t\t\twUrl = wUrl + \"type/\" + o.type + \"/\";\n\t\t\t} else {\n\t\t\t\ttypeTitle = self.translate('Insert File...');\n\t\t\t}\n\n\t\t\tframeDialog.hide();\n\t\t\tjQuery('#mceModalBlocker').hide();\n\n\t\t\tMediabrowserUtility.openDialog(wUrl, false, false, typeTitle, {\n\t\t\t\tclosed: function() {\n\t\t\t\t\tframeDialog.show();\n\t\t\t\t\tjQuery('#mceModalBlocker').show();\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tself.updateTextArea = function (onChange, id) {\n\t\t    var editor = window.tinyMCE.get(id),\n\t\t        content;\n\t\t    if (!editor) return;\n\t\t    self._onChange(onChange, editor.getContent());\n\t\t}\n\n\t\tself._initTinymce = function(id, onInit, settings) {\n\t\t\ttinymce.init(settings);\n\t\t\tvar editor = tinymce.get(id);\n\t\t\tself._onInit(onInit, editor);\n\t\t\ttinyMceEditors.set(id, self);\n\t\t}\n\n\t\tself.getMediaBrowserOpener = function () {\n            return this.mediaBrowserOpener;\n        }\n\n        self.getMediaBrowserTargetElementId = function () {\n            return this.mediaBrowserTargetElementId;\n        }\n\n\t\tself._onChange = function(onChange, value) {\n\t\t\tif (angular.isFunction(onChange)) {\n\t\t\t\t$timeout(function() {\n\t\t\t\t\tonChange(value);\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tself._onInit = function(onInit, editor) {\n\t\t\tif (angular.isFunction(onInit)) {\n\t\t\t\tonInit(editor);\n\t\t\t}\n\t\t}\n\n\t\tself.onEditorInit = function (editor) {\n        }\n\n\t\tself.onEditorPreInit = function (editor) {\n            self.applySchema(editor);\n        }\n\n\t\tself.applySchema= function (editor) {\n            var schema      = editor.schema,\n                schemaData  = self.schema,\n                makeMap     = window.tinyMCE.makeMap;\n\n            jQuery.extend(true, {\n                nonEmpty: schema.getNonEmptyElements(),\n                boolAttrs: schema.getBoolAttrs(),\n                whiteSpace: schema.getWhiteSpaceElements(),\n                shortEnded: schema.getShortEndedElements(),\n                selfClosing: schema.getSelfClosingElements(),\n                blockElements: schema.getBlockElements()\n            }, {\n                nonEmpty: makeMap(schemaData.nonEmpty),\n                boolAttrs: makeMap(schemaData.boolAttrs),\n                whiteSpace: makeMap(schemaData.whiteSpace),\n                shortEnded: makeMap(schemaData.shortEnded),\n                selfClosing: makeMap(schemaData.selfClosing),\n                blockElements: makeMap(schemaData.blockElements)\n            });\n        }\n\n        /**\n         * @param {String} string\n         * @return {String}\n         */\n        self.translate = function (string) {\n            return jQuery.mage.__ ? jQuery.mage.__(string) : string;\n        }\n\n        self.remove = function(id) {\n        \tif (window.tinyMCE.get(id)) {\n        \t\twindow.tinyMCE.get(id).destroy();\n        \t}\n        }\n\t}\n\n\treturn editor;\n\n})","Magezon_Builder/js/factories/FormlyUtils.js":"define([\n    'angular',\n    'underscore'\n], function(angular, _) {\n\n\tvar uniqueid = function (size) {\n        var code = Math.random() * 25 + 65 | 0,\n            idstr = String.fromCharCode(code);\n\n        size = size || 12;\n\n        while (idstr.length < size) {\n            code = Math.floor(Math.random() * 42 + 48);\n\n            if (code < 58 || code > 64) {\n                idstr += String.fromCharCode(code);\n            }\n        }\n\n        return idstr.toLowerCase();\n    };\n\n    var processFields = function(array, separator, level, key) {\n        if (level === undefined) {\n            level = 0;\n        }\n        var types = [];\n        var i = 0,length;\n        var children = [];\n        array  = _.compact(array);\n        length = array.length;\n        for (i; i < length; i++) {\n            var orgiKey = key;\n            var row  = array[i];\n            var elem = row['config'];\n            if (elem['templateOptions']['element']) {\n                if (!elem['data']) elem['data'] = {};\n                elem['data']['element'] = elem['templateOptions']['element'];\n            }\n            if (elem['key']) {\n                if (key) {\n                    key += '.' + elem['key'];\n                } else {\n                    key = elem['key'];\n                }\n                elem['key'] = key;\n            }\n            // Dynamic Rows\n            if (row.config.templateOptions.children) {\n                key = '';\n                row.config.templateOptions.children = this.processFields(row.config.templateOptions.children, separator, level, key);\n            }\n            if (row.hasOwnProperty(separator)) {\n                level++;\n                elem['wrapper']    = this.getUniqueId();\n                elem['fieldGroup'] = this.processFields(row[separator], separator, level, key);\n            } else {\n                elem['type'] = this.getUniqueId();\n                elem['id']   = this.getUniqueId();\n            }\n\n            if (!elem['className']) elem['className'] = '';\n            elem['className'] += ' mgz__field';\n            elem['className'] += ' mgz_field-' + elem.templateOptions.elementId;\n            elem['className'] += ' mgz_field-type-' + elem.templateOptions.builderType;\n\n            if (elem.templateOptions.required) {\n                elem['className'] += ' _required';\n            }\n\n            if (elem.templateOptions.templateUrl) {\n                elem.templateOptions.templateUrl = window.magezonBuilder.viewFileUrl + elem.templateOptions.templateUrl;\n            }\n\n            if (elem.templateOptions.wrapperTemplateUrl) {\n                elem.templateOptions.wrapperTemplateUrl = window.magezonBuilder.viewFileUrl + elem.templateOptions.wrapperTemplateUrl;\n            }\n\n            // overide wrapepr template url\n            if (elem.templateOptions.wrapperTemplateUrl) {\n                var wrapperId = this.getUniqueId();\n                if (!elem['data']) elem['data'] = {};\n                elem['data']['wrapperType'] = wrapperId;\n                elem['wrapper'] = wrapperId;\n            }\n            children.push(elem);\n            key = orgiKey;\n        }\n        return children;\n    }\n\n    var getComponentDefault = function() {\n        return {\n            visible: true,\n            control: true\n        };   \n    }\n\n    var getDefaultValues = function(element) {\n        var defaultValues        = angular.copy(processDefaultValues(element.tabs, {}));\n        defaultValues['type']    = element.type;\n        defaultValues['builder'] = getComponentDefault();\n        return defaultValues;\n    }\n\n    var processDefaultValues = function(fields) {\n        var defaultValues = {};\n        _.each(fields, function(field, k) {\n            if (field.fieldGroup) {\n                var _defaultValues = processDefaultValues(field.fieldGroup);\n                if (_defaultValues) {\n                    if (field.key) {\n                        defaultValues[field.key] = _defaultValues;\n                    } else {\n                        defaultValues = angular.merge(defaultValues, _defaultValues);\n                    }\n                }\n            } else if (field.hasOwnProperty('key') && field.hasOwnProperty('defaultValue')) {\n                defaultValues[field.key] = field['defaultValue'];\n            }\n        });\n        return defaultValues;\n    };\n\n    return {\n        getUniqueId: uniqueid,\n        processFields: processFields\n    }\n});","Magezon_Builder/js/factories/config.js":"define([\n\t'jquery',\n\t'angular'\n], function($, angular) {\n\n\tvar array_diff = function(arr1) {\n\t\tvar retArr = {}\n\t\tvar argl = arguments.length\n\t\tvar k1 = ''\n\t\tvar i = 1\n\t\tvar k = ''\n\t\tvar arr = {}\n\n\t\t  \tarr1keys: for (k1 in arr1) {\n\t\t  \t\tfor (i = 1; i < argl; i++) {\n\t\t  \t\t\tarr = arguments[i]\n\t\t  \t\t\tfor (k in arr) {\n\t\t  \t\t\t\tif (arr[k] === arr1[k1]) {\n\t\t          \t\t\tcontinue arr1keys;\n\t\t      \t\t\t}\n\t\t  \t\t\t}\n\t\t  \t\t\tretArr[k1] = arr1[k1]\n\t\t\t\t}\n\t\t\t}\n\t\treturn retArr\n\t}\n\n\tvar array_values = function (input) {\n\t\tvar tmpArr = []\n\t\tvar key = ''\n\n\t\tfor (key in input) {\n\t\t\ttmpArr[tmpArr.length] = input[key]\n\t\t}\n\n\t\treturn tmpArr\n\t}\n\n\treturn function(formlyConfigProvider) {\n\t\tvar elements      = {};\n\t\tvar groups        = {};\n\t\tvar $config       = {};\n\t\tvar $directives   = {};\n\n\t\treturn {\n\t\t\tregisterConfig: function(config) {\n\t\t\t\t$config = config;\n\t\t\t},\n\n\t\t\tregisterGroup: function(name, group) {\n\t\t\t\tif (!groups[name]) {\n\t\t\t\t\tgroups[name] = group;\n\t\t\t\t} else {\n\t\t\t\t\tangular.extend(groups[name], group);\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tregisterElement: function(name, element) {\n\t\t\t\tif (!element['element']) {\n\t\t\t\t\tif (element['is_collection']) {\n\t\t\t\t\t\telement['element'] = 'Magezon_Builder/js/builder/element/list';\n\t\t\t\t\t} else {\n\t\t\t\t\t\telement['element'] = 'Magezon_Builder/js/builder/element/base';\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (!element['navigator']) element['navigator'] = 'Magezon_Builder/js/navigator/element/base';\n\t\t\t\tif (element['is_collection']) {\n\t\t\t\t\tif (!element['templateUrl']) {\n\t\t\t\t\t\telement['templateUrl'] = 'Magezon_Builder/js/templates/builder/element/list.html'\n\t\t\t\t\t}\n\t\t\t\t\tif (!element['navigatorTemplateUrl']) {\n\t\t\t\t\t\telement['navigatorTemplateUrl'] = 'Magezon_Builder/js/templates/navigator/element/list.html'\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (element.hasOwnProperty('visible') && element.visible || !element.hasOwnProperty('visible')) {\n\t\t\t\t\tif (!elements[name]) {\n\t\t\t\t\t\telements[name] = element;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tangular.extend(elements[name], element);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tprocessAllowTypes: function() {\n\t\t\t\t$allTypes      = [];\n\t\t\t\tangular.forEach(elements, function(element, index) {\n\t\t\t\t\t$allTypes.push(element.type);\n\t\t\t\t});\n\n\t\t\t\t$childrenTypes = [];\n\t            angular.forEach(elements, function(element, index) {\n\t\t\t\t\t$allowedTypes  = element.allowed_types;\n\t\t\t\t\t$excludedTypes = element.excluded_types;\n\n\t                if (angular.isString($allowedTypes)) {\n\t                    element.allowed_types = $allowedTypes.split(',');\n\t                }\n\n\t                if (!element.allowed_types && $excludedTypes) {\n\t                    if (angular.isString($excludedTypes)) {\n\t                        $excludedTypes = $excludedTypes.split(',');\n\t                    }\n\t                    $allowedTypes = array_diff($allTypes, $excludedTypes);\n\t                    element.allowed_types = array_values($allowedTypes);\n\t                }\n\n\t                if (element.children) {\n\t                    $childrenTypes.push(element.children);\n\t                }\n\t            });\n\n\t            $validTypes = array_diff($allTypes, $childrenTypes);\n\t            angular.forEach(elements, function(element, index) {\n\t                $allowedTypes  = element.allowed_types;\n\t                if ($allowedTypes) {\n\t                    if ($.inArray( element.children, $allowedTypes) === -1) {\n\t\t\t\t\t\t\t$_allowedTypes        = array_diff($allowedTypes, $childrenTypes);\n\t\t\t\t\t\t\telement.allowed_types = array_values($_allowedTypes);\n\t                    }\n\t                } else {\n\t                    element.allowed_types = array_values($validTypes);\n\t                }\n\t            });\n\t\t\t},\n\n\t\t\tregisterDirectives: function(name, directive) {\n\t\t\t\t$directives[name] = directive;\n\t\t\t},\n\n\t\t\t$get: function() {\n\t\t\t\treturn {\n\t\t\t\t\telements: elements,\n\t\t\t\t\tgroups: groups,\n\t\t\t\t\tconfig: $config,\n\t\t\t\t\tdirectives: $directives\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n});","Magezon_Builder/js/builder/helper.js":"define([\n\t'angular'\n], function(angular) {\n\n\tvar directive = function(magezonBuilderUrl) {\n\t\treturn {\n\t\t\treplace: true,\n\t\t\ttemplateUrl: function(elem) {\n\t\t\t\treturn magezonBuilderUrl.getTemplateUrl(elem, 'Magezon_Builder/js/templates/builder/helper.html')\n\t\t\t},\n\t\t\tcontroller: function($rootScope, $scope) {\n\n\t\t\t\t$scope.addRowElement = function(columns) {\n\t\t\t\t\t$rootScope.$broadcast('addRootRowElement', columns);\n\t\t\t\t\t$rootScope.$broadcast('exportShortcode');\n\t\t\t\t}\n\n\t\t\t\t$scope.openModal = function() {\n\t\t\t\t\t$rootScope.$broadcast('openElementsModal', true);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn directive;\n});","Magezon_Builder/js/builder/element/gmaps.js":"define([\n\t'jquery',\n\t'angular'\n], function($, angular) {\n\n\tvar directive = function($rootScope, magezonBuilderUrl) {\n\t\treturn {\n\t\t\treplace: true,\n\t\t\ttemplateUrl: function(elem) {\n\t\t\t\treturn magezonBuilderUrl.getTemplateUrl(elem, 'Magezon_Builder/js/templates/builder/element/gmaps.html');\n\t\t\t},\n\t\t\tcontroller: function($scope, $controller) {\n\t\t\t\tvar parent = $controller('baseController', {$scope: $scope});\n\t\t\t\tangular.extend(this, parent);\n\t\t\t},\n\t\t\tlink: function(scope, element) {\n\n\t\t\t\tscope.loadElement = function() {\n\t\t\t\t\tinitGoogleMap();\n\t\t\t\t}\n\n\t\t\t\tfunction getItems()\n\t\t\t\t{ \n\t\t\t\t\tvar $newItems = [];\n\t\t\t\t\t$items        = angular.copy(scope.element.items);\n\t\t\t\t\tif ($items) {\n\t\t\t\t\t\tangular.forEach($items, function($_item) {\n\t\t\t\t\t\t\tvar newItem = $_item;\n\t\t\t\t\t\t\tif (newItem['image']) {\n\t\t\t\t\t\t\t\tnewItem['image'] = magezonBuilderUrl.getImageUrl($_item['image']);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t$newItems.push(newItem);\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\treturn $newItems;\n\t\t\t\t}\n\n\t\t\t\tfunction getCenterItem() {\n\t\t\t\t\tvar $result = '';\n\t\t\t\t\tangular.forEach(scope.element.items, function($_item) {\n\t\t\t\t\t\tif ($_item['center'] && $_item['lat'] && $_item['lng'] && !$result) {\n\t\t\t\t\t\t\t$result = $_item;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tif (!$result) {\n\t\t\t\t\t\tangular.forEach(scope.element.items, function($_item) {\n\t\t\t\t\t\t\tif ($_item['lat'] && $_item['lng'] && !$result) {\n\t\t\t\t\t\t\t\t$result = $_item;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\treturn $result;\n\t\t\t\t}\n\n\t\t\t\tfunction initGoogleMap() {\n\t\t\t\t\tvar _element               = scope.element;\n\t\t\t\t\tvar uid                    = _element.id + '-map';\n\t\t\t\t\tvar google_map_zoom        = parseInt(_element.map_zoom);\n\t\t\t\t\tvar google_map_type        = _element.map_type;\n\t\t\t\t\tvar google_map_ui          = _element.map_ui;\n\t\t\t\t\tvar google_map_scrollwheel = _element.map_scrollwheel;\n\t\t\t\t\tvar google_map_draggable   = _element.map_draggable;\n\t\t\t\t\tvar items                  = getItems();\n\t\t\t\t\tvar centerItem             = getCenterItem();\n\t\t\t\t\tvar self      = this;\n\t\t\t\t\trequire([\n\t\t\t\t\t\t'https://maps.google.com/maps/api/js?key=' + $rootScope.builderConfig.googleApi + '&libraries=places'\n\t\t\t\t\t], function() {\n\t\t\t\t\t\tif (!$('#' + uid).length) return;\n\n\t\t\t\t\t\tvar config = {\n\t\t\t\t\t\t\tcenter: {\n\t\t\t\t\t\t\t\tlat: parseFloat(centerItem['lat']),\n\t\t\t\t\t\t\t\tlng: parseFloat(centerItem['lng'])\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tzoom: google_map_zoom,\n\t\t\t\t\t\t\tmapTypeId: google_map_type,\n\t\t\t\t\t\t\tdisableDefaultUI: google_map_ui,\n\t\t\t\t\t\t\tscrollwheel: google_map_scrollwheel,\n\t\t\t\t\t\t\tdraggable: google_map_draggable\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\tvar map = new google.maps.Map(document.getElementById(uid), config);\n\n\t\t\t\t\t\tif (items && items.length) {\n\t\t\t\t\t\t\titems.each(function(option) {\n\t\t\t\t\t\t\t\tvar myLatLng = new google.maps.LatLng(option['lat'], option['lng']);\n\t\t\t\t\t\t\t\taddMarker(myLatLng, map, option);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfunction addMarker(location, map, option) {\n\t\t\t\t\t\t\tvar marker = new google.maps.Marker({\n\t\t\t\t\t\t\t\tposition: location,\n\t\t\t\t\t\t\t\tmap: map,\n\t\t\t\t\t\t\t\ticon: option['image']\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tif (option['info']) {\n\t\t\t\t\t\t\t\tvar infowindow = new google.maps.InfoWindow({\n\t\t\t\t\t\t\t\t\tcontent: option['info']\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tmarker.addListener('click', function() {\n\t\t\t\t\t\t\t\t\tinfowindow.open(map, marker);\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tif (element.infobox_opened) {\n\t\t\t\t\t\t\t\t\tinfowindow.open(map, marker);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tinitGoogleMap();\n\t\t\t},\n\t\t\tcontrollerAs: 'mgz'\n\t\t}\n\t}\n\n\treturn directive;\n});","Magezon_Builder/js/builder/element/profile.js":"define([\n\t'jquery',\n\t'angular'\n], function ($, angular) {\n\n\tvar directive = function(magezonBuilderService, magezonBuilderUrl) {\n\t\treturn {\n\t\t\tscope: {\n\t\t\t\telement: '='\n\t\t\t},\n\t\t\treplace: true,\n\t\t\ttemplateUrl: function(elem) {\n\t\t\t\treturn magezonBuilderUrl.getTemplateUrl(elem, 'Magezon_Builder/js/templates/builder/element/profile.html');\n\t\t\t},\n\t\t\tcontroller: function($scope, $rootScope, $controller, elementManager) {\n\t\t\t\t//$scope.element = $scope.profile;\n\t\t\t\t$scope.element.builder = elementManager.getBuilderConfig('profile');\n\t\t\t\t//$scope.element.elements = [];\n\t\t\t\tvar self = this;\n\t\t\t\tvar parent = $controller('listController', {$scope: $scope});\n\t\t\t\tangular.extend(this, parent);\n\n\t\t\t\tvar mainElement = $rootScope.builderConfig.mainElement;\n\n\t\t\t\t$scope.$on('addRootRowElement', function(event, columns) {\n\t\t\t\t\tvar row            = self.addElement(mainElement, null, false);\n\t\t\t\t\tvar builderElement = self.getBuilderElement(mainElement);\n\t\t\t\t\tvar viewMode       = magezonBuilderService.getViewMode();\n\t\t\t\t\tvar types          = columns.split('_');\n\t\t\t\t\tfor (var i = 0; i < types.length - 1; i++) {\n\t\t\t\t\t\tvar _type   = types[i].split('');\n\t\t\t\t\t\tvar element = self.addElement(builderElement.children, row);\n\t\t\t\t\t\tvar width;\n\t\t\t\t\t\tif (_type[1]==5) {\n\t\t\t\t\t\t\twidth = 15\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\twidth = 12 * _type[0] / _type[1];\n\t\t\t\t\t\t}\n\t\t\t\t\t\telement['xl_size'] = '';\n\t\t\t\t\t\telement['lg_size'] = '';\n\t\t\t\t\t\telement['md_size'] = width;\n\t\t\t\t\t\telement['sm_size'] = '';\n\t\t\t\t\t\telement['xs_size'] = '';\n\t\t\t\t\t}\n\n\t\t\t\t\t// First Column\n\t\t\t\t\trow['elements'][0]['xl_size'] = '';\n\t\t\t\t\trow['elements'][0]['lg_size'] = '';\n\t\t\t\t\trow['elements'][0]['md_size'] = width;\n\t\t\t\t\trow['elements'][0]['sm_size'] = '';\n\t\t\t\t\trow['elements'][0]['xs_size'] = '';\n\n\t\t\t\t\tif (!$('.mgz-fullscreen').length) {\n\t\t\t\t\t\t$rootScope.$broadcast('setViewMode', 'xl');\t\n\t\t\t\t\t}\n\n\t\t\t\t\t$rootScope.$broadcast('addHistory', {\n\t\t\t\t\t\ttype: 'changed',\n\t\t\t\t\t\tsubtitle: 'Row Layout'\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t},\n\t\t\tcontrollerAs: 'mgz'\n\t\t}\n\t}\n\n\treturn directive;\n});","Magezon_Builder/js/builder/element/separator.js":"define([\n\t'jquery',\n\t'angular',\n], function($, angular) {\n\n\tvar heading = function(magezonBuilderUrl, $compile) {\n\t\treturn {\n\t\t\treplace: true,\n\t\t\ttemplateUrl: function(elem) {\n\t\t\t\treturn magezonBuilderUrl.getTemplateUrl(elem, 'Magezon_Builder/js/templates/builder/element/separator.html');\n\t\t\t},\n\t\t\tcontroller: function($scope, $controller) {\n\t\t\t\tvar parent = $controller('baseController', {$scope: $scope});\n\t\t\t\tangular.extend(this, parent);\n\t\t\t\tvar self = this;\n\t\t\t},\n\t\t\tlink: function($scope, $element, $attr) {\n\t\t\t\tvar $parent = $element.parent();\n\t\t\t\t$scope.$watch('element.title_tag', function(newVal) {\n\t\t\t\t\tvar template = '<' + newVal + ' class=\"title mgz-inline-edit\">';\n\t\t\t\t\t\tif ($scope.element.add_icon && $scope.element.icon_position == 'left') {\n\t\t\t\t\t\t\ttemplate += '<i class=\"mgz-icon-element ' + $scope.element.icon + '\"></i>';\n\t\t\t\t\t\t}\n\t\t\t\t\t\ttemplate += '<span content-editable=\"true\" ng-model=\"element.title\">' + $scope.element.title + '</span>';\n\t\t\t\t\t\tif ($scope.element.add_icon && $scope.element.icon_position == 'right') {\n\t\t\t\t\t\t\ttemplate += '<i class=\"mgz-icon-element ' + $scope.element.icon + '\"></i>';\n\t\t\t\t\t\t}\n\t\t\t\t\t\ttemplate += '</' + newVal + '>';\n\t\t\t\t\t\tvar html = $compile(template)($scope);\n\t\t\t\t\t\t$parent.find('.mgz-inline-edit').replaceWith(html);\n\t\t\t\t});\n\t\t\t},\n\t\t\tcontrollerAs: 'mgz'\n\t\t}\n\t}\n\n\treturn heading;\n});","Magezon_Builder/js/builder/element/list.js":"define([\n\t'angular'\n], function(angular) {\n\n\tvar directive = function(magezonBuilderUrl) {\n\t\treturn {\n\t\t\treplace: true,\n\t\t\ttemplateUrl: function(elem) {\n\t\t\t\treturn magezonBuilderUrl.getTemplateUrl(elem, 'Magezon_Builder/js/templates/builder/element/list.html');\n\t\t\t},\n\t\t\tcontroller: function($scope, $controller) {\n\t\t\t\tvar parent = $controller('listController', {$scope: $scope});\n\t\t\t\tangular.extend(this, parent);\n\t\t\t},\n\t\t\tcontrollerAs: 'mgz'\n\t\t}\n\t}\n\n\treturn directive;\n});","Magezon_Builder/js/builder/element/text.js":"define([\n\t'jquery',\n\t'angular',\n], function($, angular) {\n\n\tvar text = function(magezonBuilderUrl) {\n\t\treturn {\n\t\t\treplace: true,\n\t\t\ttemplateUrl: function(elem) {\n\t\t\t\treturn magezonBuilderUrl.getTemplateUrl(elem, 'Magezon_Builder/js/templates/builder/element/text.html');\n\t\t\t},\n\t\t\tcontroller: function($rootScope, $scope, $controller) {\n\t\t\t\tvar loaded = false;\n\t\t\t\tvar parent = $controller('baseController', {$scope: $scope});\n\t\t\t\tangular.extend(this, parent);\n\n\t\t\t\t$scope.onChange = function(value) {\n\t\t\t\t\t$rootScope.$broadcast('addHistory', {\n\t\t\t\t\t\ttype: 'edited',\n\t\t\t\t\t\ttitle: $scope.element.builder.name,\n\t\t\t\t\t\tsubtitle: 'Content'\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t},\n\t\t\tcontrollerAs: 'mgz'\n\t\t}\n\t}\n\n\treturn text;\n});","Magezon_Builder/js/builder/element/single-image.js":"define([\n\t'jquery',\n\t'angular'\n], function($, angular) {\n\n\tvar directive = function(magezonBuilderUrl) {\n\t\treturn {\n\t\t\treplace: true,\n\t\t\ttemplateUrl: function(elem) {\n\t\t\t\treturn magezonBuilderUrl.getTemplateUrl(elem, 'Magezon_Builder/js/templates/builder/element/single-image.html');\n\t\t\t},\n\t\t\tcontroller: function($scope, $controller) {\n\t\t\t\tvar parent = $controller('baseController', {$scope: $scope});\n\t\t\t\tangular.extend(this, parent);\n\n\t\t\t\t$scope.getSrc = function() {\n\t\t\t\t\tvar src;\n\n\t\t\t\t\tswitch($scope.element.source) {\n\t\t\t\t\t\tcase 'media_library':\n\t\t\t\t\t\t\tif ($scope.element.image)\n\t\t\t\t\t\t\tsrc = magezonBuilderUrl.getImageUrl($scope.element.image);\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'external_link':\n\t\t\t\t\t\t\tif ($scope.element.custom_src)\n\t\t\t\t\t\t\tsrc = $scope.element.custom_src;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn src;\n\t\t\t\t}\n\t\t\t},\n\t\t\tlink: function(scope, element) {\n\t\t\t\telement.find('.mgz-single-image-inner').hover(function() {\n\t\t\t\t\tvar hoverImage = magezonBuilderUrl.getImageUrl(scope.element.hover_image);\n\t\t\t\t\tif (hoverImage) {\n\t\t\t\t\t\t$(this).find('img').attr('src', hoverImage);\n\t\t\t\t\t}\n\t\t\t\t}, function() {\n\t\t\t\t\tvar hoverImage = magezonBuilderUrl.getImageUrl(scope.element.hover_image);\n\t\t\t\t\tif (hoverImage && scope.getSrc()) {\n\t\t\t\t\t\t$(this).find('img').attr('src', scope.getSrc());\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\n\t\t\tcontrollerAs: 'mgz'\n\t\t}\n\t}\n\n\treturn directive;\n});","Magezon_Builder/js/builder/element/countdown.js":"define([\n\t'angular',\n\t'moment',\n\t'Magezon_Builder/js/countdown',\n\t'moment-timezone-with-data'\n], function(angular, moment) {\n\n\tvar directive = function(magezonBuilderUrl) {\n\t\treturn {\n\t\t\ttemplateUrl: function(elem) {\n\t\t\t\treturn magezonBuilderUrl.getTemplateUrl(elem, 'Magezon_Builder/js/templates/builder/element/countdown.html');\n\t\t\t},\n\t\t\tcontroller: function($scope, $controller) {\n\t\t\t\tvar parent = $controller('baseController', {$scope: $scope});\n\t\t\t\tangular.extend(this, parent);\n\t\t\t},\n\t\t\tlink: function(scope, element) {\n\t\t\t\tvar loadCountdown = function() {\n\t\t\t\t\tvar _element = scope.element;\n\t\t\t\t\tvar timeStr  = _element.year + '-' + _element.month + '-' + _element.day + ' ' + _element.hours + ':' + _element.minutes;\n\t\t\t\t\tvar time     = moment(timeStr, 'YYYY-MM-DD HH:mm').tz(_element.time_zone);\t\n\t\t\t\t\tif (element.data(\"countdown\")) {\n\t\t\t\t\t\telement.data(\"countdown\").clearInterval();\n\t\t\t\t\t\telement.find('.mgz-element-bar').css({\n\t\t\t\t\t\t\t'stroke-dashoffset': '',\n\t\t\t\t\t\t\t'width': ''\n\t\t\t\t\t\t});\n\t\t\t\t\t\telement.countdown('destroy');\n\t\t\t\t\t}\n\t\t\t\t\tvar time1 = time.isValid() ? time.format() : moment().format();\n\t\t\t\t\telement.countdown({\n\t\t\t\t\t\ttype:_element.layout,\n\t\t\t\t\t\ttime: time1\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tscope.loadElement = function() {\n\t\t\t\t\tloadCountdown();\n\t\t\t\t}\n\t\t\t},\n\t\t\tcontrollerAs: 'mgz'\n\t\t}\n\t}\n\n\treturn directive;\n});","Magezon_Builder/js/builder/element/heading.js":"define([\n\t'jquery',\n\t'angular',\n], function($, angular) {\n\n\tvar heading = function(magezonBuilderUrl, $compile, $timeout) {\n\t\treturn {\n\t\t\treplace: true,\n\t\t\ttemplateUrl: function(elem) {\n\t\t\t\treturn magezonBuilderUrl.getTemplateUrl(elem, 'Magezon_Builder/js/templates/builder/element/heading.html');\n\t\t\t},\n\t\t\tcontroller: function($scope, $controller) {\n\t\t\t\tvar parent = $controller('baseController', {$scope: $scope});\n\t\t\t\tangular.extend(this, parent);\n\t\t\t\tvar self = this;\n\t\t\t},\n\t\t\tlink: function($scope, $element, $attr) {\n\t\t\t\tvar $parent = $element.parent();\n\t\t\t\t$scope.$watch('element.heading_type', function(newVal) {\n\t\t\t\t\tvar template = '<' + newVal + ' class=\"mgz-element-heading-text\" content-editable=\"true\" type=\"multiple\" ng-model=\"element.text\" ng-model-options=\"{ debounce: 300 }\" data-placeholder=\"Edit Heading Text\">' + $scope.element.text + '</' + newVal + '>';\n\t\t\t\t\tvar html = $compile(template)($scope);\n                    $parent.html(html);\n                    if ($scope.loaded) {\n                    \t$parent.children('.mgz-contenteditable-element').trigger('focus');\t\n                    }\n\t\t\t\t});\n\t\t\t\t$timeout(function() {\n\t\t\t\t\t$scope.loaded = true;\n\t\t\t\t}, 500);\n\t\t\t},\n\t\t\tcontrollerAs: 'mgz'\n\t\t}\n\t}\n\n\treturn heading;\n});","Magezon_Builder/js/builder/element/tabs.js":"define([\n\t'angular'\n], function(angular) {\n\n\tvar directive = function(magezonBuilderUrl, $timeout) {\n\t\treturn {\n\t\t\treplace: true,\n\t\t\ttemplateUrl: function(elem) {\n\t\t\t\treturn magezonBuilderUrl.getViewFileUrl('Magezon_Builder/js/templates/builder/element/tabs.html');\n\t\t\t},\n\t\t\tcontroller: function($scope, $controller) {\n\n\t\t\t\tvar parent = $controller('listController', {$scope: $scope});\n\t\t\t\tangular.extend(this, parent);\n\t\t\t\tvar self = this;\n\n\t\t\t\t$scope.element.builder.dndDisabled = true;\n\n\t\t\t\tangular.forEach($scope.element.elements, function(element, index) {\n\t\t\t\t\tif (index == 0) {\n\t\t\t\t\t\telement.builder.visible = true;\n\t\t\t\t\t} else {\n\t\t\t\t\t\telement.builder.visible = false;\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\t$scope.$on('afterAddElement', function(e, elem) {\n\t\t\t\t\t$scope.activeEventElement(elem);\n\t\t\t\t});\n\n\t\t\t\t$scope.$on('afterCloneElement', function(e, elem) {\n\t\t\t\t\tif ($scope.isChildren(elem)) {\n\t\t\t\t\t\t$scope.activeEventElement(elem);\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\t$scope.$on('afterDropElement', function(e, elem) {\n\t\t\t\t\tif ($scope.isChildren(elem)) {\n\t\t\t\t\t\t$scope.activeEventElement(elem);\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\t$scope.activeEventElement = function(elem) {\n\t\t\t\t\tif ($scope.isChildren(elem)) {\n\t\t\t\t\t\t$scope.activeElement(elem);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t$scope.$on('beforeRemoveElement', function(e, elem) {\n\t\t\t\t\tif ($scope.isChildren(elem)) {\n\t\t\t\t\t\tvar index = $scope.getElemIndex(elem);\n\t\t\t\t\t\tvar elem2 = $scope.element.elements[index+1] ? $scope.element.elements[index+1] : 0;\n\t\t\t\t\t\tif(elem2) $scope.activeElement(elem2);\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\t$scope.activeElement = function(element) {\n\t\t\t\t\tif (!element) return;\n\t\t\t\t\telement.builder.additionalClasses.push('mgz-tabs-tab-content');\n\t\t\t\t\tangular.forEach($scope.element.elements, function(el, index) {\n\t\t\t\t\t\tif (el !== element) {\n\t\t\t\t\t\t\tel.builder.visible = false;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\telement.builder.visible = true;\n\t\t\t\t\telement.builder.additionalClasses.push('mgz-active');\n\t\t\t\t}\n\n\t\t\t\t$scope.activeFirstElement = function() {\n\t\t\t\t\tvar active = true;\n\t\t\t\t\tangular.forEach($scope.element.elements, function(element) {\n\t\t\t\t\t\tif (!element.builder.visible) {\n\t\t\t\t\t\t\tactive = false;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tif (!active) {\n\t\t\t\t\t\t$scope.activeElement($scope.element.elements[0]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t$scope.activeFirstElement();\n\n\t\t\t\t$scope.getClassess = function() {\n\t\t\t\t\tvar _elem = $scope.element;\n\t\t\t\t\tvar clasess = [];\n\t\t\t\t\tclasess.push('mgz-tabs');\n\t\t\t\t\tclasess.push('mgz-tabs-' + _elem.id);\n\t\t\t\t\tclasess.push('mgz-element-tab-align-' + _elem.tab_align);\n\t\t\t\t\tclasess.push('mgz-element-tab-position-' + _elem.tab_position);\n\t\t\t\t\tif (_elem.no_fill_content_area) clasess.push('mgz-tabs-no-fill-content');\n\t\t\t\t\tif (_elem.mobile_accordion) clasess.push('tabs-mobile-accordion');\n\t\t\t\t\treturn clasess;\n\t\t\t\t}\n\n\t\t\t\t$scope.getSpacing = function() {\n\t\t\t\t\treturn $scope.element.spacing ? parseFloat($scope.element.spacing) : 0;\n\t\t\t\t}\n\n\t\t\t\t$scope.getGap = function() {\n\t\t\t\t\treturn $scope.element.gap ? parseFloat($scope.element.gap) : 0;\n\t\t\t\t}\n\t\t\t},\n\t\t\tcontrollerAs: 'mgz'\n\t\t}\n\t}\n\n\treturn directive;\n});","Magezon_Builder/js/builder/element/row.js":"define([\n\t'jquery',\n\t'angular',\n], function($, angular) {\n\n\tvar text = function(magezonBuilderUrl) {\n\t\treturn {\n\t\t\treplace: true,\n\t\t\ttemplateUrl: function(elem) {\n\t\t\t\treturn magezonBuilderUrl.getViewFileUrl('Magezon_Builder/js/templates/builder/element/row.html');\n\t\t\t},\n\t\t\tcontroller: function($scope, $controller) {\n\t\t\t\tvar loaded = false;\n\t\t\t\tvar parent = $controller('listController', {$scope: $scope});\n\t\t\t\tangular.extend(this, parent);\n\t\t\t\tthis.getWrapperClasses = function() {\n\t\t\t\t\tvar classes = parent.getWrapperClasses();\n\t\t\t\t\tif ($scope.element.row_type == 'contained') {\n\t\t\t\t\t\tclasses.push('mgz-container');\n\t\t\t\t\t}\n\t\t\t\t\tif ($scope.element.equal_height) {\n\t\t\t\t\t\tclasses.push('mgz-row-equal-height');\n\t\t\t\t\t\tif ($scope.element.content_position) classes.push('content-' + $scope.element.content_position);\n\t\t\t\t\t}\n\t\t\t\t\tif ($scope.element.full_height) classes.push('mgz-row-full-height');\n\t\t\t\t\treturn classes;\n\t\t\t\t}\n\t\t\t},\n\t\t\tlink: function(scope, element) {\n\t\t\t\tvar height;\n\t\t\t\tscope.$watch('element.full_height', function(fullHeight) {\n\t\t\t\t\tif (fullHeight) {\n\t\t\t\t\t\theight = $(window).height();\n\t\t\t\t\t} else {\n\t\t\t\t\t\theight = '';\n\t\t\t\t\t}\n\t\t\t\t\telement.parent().css('min-height', height);\n\t\t\t\t});\n\t\t\t},\n\t\t\tcontrollerAs: 'mgz'\n\t\t}\n\t}\n\n\treturn text;\n});","Magezon_Builder/js/builder/element/base.js":"define([\n\t'angular'\n], function(angular) {\n\n\tvar directive = function(magezonBuilderUrl) {\n\t\treturn {\n\t\t\treplace: true,\n\t\t\ttemplateUrl: function(elem) {\n\t\t\t\treturn magezonBuilderUrl.getTemplateUrl(elem, 'Magezon_Builder/js/templates/builder/element/default.html');\n\t\t\t},\n\t\t\tcontroller: function($scope, $controller) {\n\t\t\t\tvar parent = $controller('baseController', {$scope: $scope});\n\t\t\t\tangular.extend(this, parent);\n\t\t\t},\n\t\t\tcontrollerAs: 'mgz'\n\t\t}\n\t}\n\n\treturn directive;\n});","Magezon_Builder/js/builder/element/column.js":"define([\n\t'jquery',\n\t'angular',\n], function($, angular) {\n\n\tvar text = function(magezonBuilderUrl) {\n\t\treturn {\n\t\t\treplace: true,\n\t\t\ttemplateUrl: function(elem) {\n\t\t\t\treturn magezonBuilderUrl.getViewFileUrl('Magezon_Builder/js/templates/builder/element/list.html');\n\t\t\t},\n\t\t\tcontroller: function($scope, $controller) {\n\t\t\t\tvar loaded = false;\n\t\t\t\tvar parent = $controller('listController', {$scope: $scope});\n\t\t\t\tangular.extend(this, parent);\n\t\t\t\tvar parentElement = $scope.$parent.$parent.element;\n\t\t\t\tthis.getWrapperClasses = function() {\n\t\t\t\t\tvar classes = parent.getWrapperClasses();\n\t\t\t\t\tvar gapType = parentElement.gap_type ? parentElement.gap_type : 'padding';\n\t\t\t\t\tif (gapType == 'margin') {\n\t\t\t\t\t\tclasses.push('mgz-row-gap-margin');\n\t\t\t\t\t}\n\t\t\t\t\treturn classes;\n\t\t\t\t}\n\t\t\t},\n\t\t\tcontrollerAs: 'mgz'\n\t\t}\n\t}\n\n\treturn text;\n});","Magezon_Builder/js/builder/element/separator/toolbar.js":"define([\n\t'angular'\n], function(angular) {\n\n\tvar directive = function(magezonBuilderUrl) {\n\t\treturn {\n\t\t\treplace: true,\n\t\t\ttemplateUrl: function(elem) {\n\t\t\t\treturn magezonBuilderUrl.getViewFileUrl('Magezon_Builder/js/templates/builder/element/separator/toolbar.html');\n\t\t\t},\n\t\t\tcontroller: function($scope, $controller) {\n\t\t\t\tvar parent = $controller('toolbarController', {$scope: $scope});\n\t\t\t\tangular.extend(this, parent);\n\t\t\t\tvar self = this;\n\n\t\t\t\t$scope.updatedkey = function(key, value) {\n\t\t\t\t\tswitch(key) {\n\t\t\t\t\t\tcase 'elemHeading':\n\t\t\t\t\t\t\t$scope.element.title_tag = value;\n\t\t\t\t\t\t\t$scope.addHistory('edited', 'Tag');\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'elemAlign':\n\t\t\t\t\t\t\t$scope.element.title_align = value;\n\t\t\t\t\t\t\t$scope.addHistory('edited', 'Alignment');\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t$scope.$watch('element.text', function(text) {\n\t\t\t\t\tif ($scope.isLoaded()) {\n\t\t\t\t\t\t$scope.addHistory('edited', 'Text');\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\t$scope.$watch('element.color', function(color) {\n\t\t\t\t\tif ($scope.isLoaded()) {\n\t\t\t\t\t\t$scope.addHistory('edited', 'Color');\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\n\treturn directive;\n});","Magezon_Builder/js/builder/element/heading/toolbar.js":"define([\n\t'jquery',\n\t'angular'\n], function(angular) {\n\n\tvar directive = function(magezonBuilderUrl) {\n\t\treturn {\n\t\t\treplace: true,\n\t\t\ttemplateUrl: function(elem) {\n\t\t\t\treturn magezonBuilderUrl.getViewFileUrl('Magezon_Builder/js/templates/builder/element/heading/toolbar.html');\n\t\t\t},\n\t\t\tcontroller: function($scope, $controller) {\n\n\t\t\t\tvar parent = $controller('toolbarController', {$scope: $scope});\n\t\t\t\tangular.extend(this, parent);\n\t\t\t\tvar self = this;\n\n\t\t\t\t$scope.fontSize = $scope.element.font_size;\n\n\t\t\t\t$scope.updatedkey = function(key, value) {\n\t\t\t\t\tswitch(key) {\n\t\t\t\t\t\tcase 'elemHeading':\n\t\t\t\t\t\t\t$scope.element.heading_type = value;\n\t\t\t\t\t\t\t$scope.addHistory('edited', 'Type');\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'elemAlign':\n\t\t\t\t\t\t\t$scope.element.align = value;\n\t\t\t\t\t\t\t$scope.addHistory('edited', 'Alignment');\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t$scope.$watch('element.text', function(text, old) {\n\t\t\t\t\tif ($scope.isLoaded() && (text !== old)) {\n\t\t\t\t\t\t$scope.addHistory('edited', 'Text');\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\t$scope.$watch('element.color', function(color, old) {\n\t\t\t\t\tif ($scope.isLoaded() && (color !== old)) {\n\t\t\t\t\t\t$scope.addHistory('edited', 'Color');\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\t$scope.changeFontSize = function(e) {\n\t\t\t\t\t$scope.element.font_size = $scope.fontSize;\n\t\t\t\t\t$scope.addHistory('edited', 'Font Size');\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn directive;\n});","Magezon_Builder/js/builder/element/text/toolbar.js":"define([\n\t'angular'\n], function(angular) {\n\n\tvar directive = function(magezonBuilderUrl) {\n\t\treturn {\n\t\t\treplace: true,\n\t\t\tcontroller: function($scope, $controller) {\n\t\t\t\tvar parent = $controller('toolbarController', {$scope: $scope});\n\t\t\t\tangular.extend(this, parent);\n\t\t\t\tvar self = this;\n\t\t\t\tvar loaded = false;\n\n\t\t\t\t$scope.$watch('element.content', function(content) {\n\t\t\t\t\tif (loaded) {\n\t\t\t\t\t\t$rootScope.$broadcast('addHistory', {\n\t\t\t\t\t\t\ttype: 'edited',\n\t\t\t\t\t\t\ttitle: $scope.element.builder.name,\n\t\t\t\t\t\t\tsubtitle: 'Content'\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tloaded = true;\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\n\treturn directive;\n});","Magezon_Builder/js/builder/navbar/my-templates.js":"define([\n\t'angular'\n], function(angular) {\n\n\tvar directive = function(magezonBuilderUrl) {\n\t\treturn {\n\t\t\treplace: true,\n\t\t\ttemplateUrl: function(elem) {\n\t\t\t\treturn magezonBuilderUrl.getTemplateUrl(elem, 'Magezon_Builder/js/templates/builder/navbar/my_templates.html')\n\t\t\t},\n\t\t\tcontroller: function($scope, magezonBuilderModal) {\n\t\t\t\t$scope.openTemplatesModal = function() {\n\t\t\t\t\tmagezonBuilderModal.open('templates');\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn directive;\n});","Magezon_Builder/js/builder/navbar/navigator.js":"define([\n\t'angular'\n], function(angular) {\n\n\tvar directive = function(magezonBuilderUrl) {\n\t\treturn {\n\t\t\treplace: true,\n\t\t\ttemplateUrl: function(elem) {\n\t\t\t\treturn magezonBuilderUrl.getTemplateUrl(elem, 'Magezon_Builder/js/templates/builder/navbar/navigator.html')\n\t\t\t},\n\t\t\tcontroller: function($rootScope, $scope, magezonBuilderModal) {\n\t\t\t\t$scope.$on('openNavigatorModal', function() {\n\t\t\t\t\t$scope.openModal();\n\t\t\t\t});\n\t\t\t\t$scope.openModal = function() {\n\t\t\t\t\tmagezonBuilderModal.open('navigator').result.then(function() {}, function() {\n\t\t\t\t\t\tif($rootScope.activedElement) $rootScope.activedElement.builder.actived = false;\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn directive;\n});","Magezon_Builder/js/builder/navbar/shortcode.js":"define([\n\t'angular'\n], function(angular) {\n\n\tvar directive = function(magezonBuilderUrl) {\n\t\treturn {\n\t\t\treplace: true,\n\t\t\ttemplateUrl: function(elem) {\n\t\t\t\treturn magezonBuilderUrl.getTemplateUrl(elem, 'Magezon_Builder/js/templates/builder/navbar/shortcode.html')\n\t\t\t},\n\t\t\tcontroller: function($scope, magezonBuilderModal) {\n\t\t\t\t$scope.openProfileShortcodeModal = function() {\n\t\t\t\t\tmagezonBuilderModal.open('profileShortcode');\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn directive;\n});","Magezon_Builder/js/builder/navbar/add.js":"define([\n\t'angular'\n], function(angular) {\n\n\tvar directive = function(magezonBuilderUrl) {\n\t\treturn {\n\t\t\treplace: true,\n\t\t\ttemplateUrl: function(elem) {\n\t\t\t\treturn magezonBuilderUrl.getTemplateUrl(elem, 'Magezon_Builder/js/templates/builder/navbar/add.html')\n\t\t\t},\n\t\t\tcontroller: function($rootScope, $scope) {\n\t\t\t\t$scope.openElementsModal = function() {\n\t\t\t\t\t$rootScope.$broadcast('openElementsModal', true);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn directive;\n});","Magezon_Builder/js/builder/navbar/view_mode.js":"define([\n\t'angular'\n], function(angular) {\n\n\tvar directive = function(magezonBuilderService, magezonBuilderUrl) {\n\t\treturn {\n\t\t\treplace: true,\n\t\t\ttemplateUrl: function(elem) {\n\t\t\t\treturn magezonBuilderUrl.getTemplateUrl(elem, 'Magezon_Builder/js/templates/builder/navbar/view_mode.html')\n\t\t\t},\n\t\t\tcontroller: function($rootScope, $scope) {\n\n\t\t\t\t$scope.viewMode  = magezonBuilderService.getViewMode();\n\n\t\t\t\t$scope.viewModes = {\n\t\t\t\t\txl: {\n\t\t\t\t\t\ttitle: 'Desktop',\n\t\t\t\t\t\ticon: 'mgz-icon mgz-icon-desktop'\n\t\t\t\t\t},\n\t\t\t\t\tlg: {\n\t\t\t\t\t\ttitle: 'Tablet Landscape',\n\t\t\t\t\t\ticon: 'mgz-icon mgz-icon-tablet-landscape'\n\t\t\t\t\t},\n\t\t\t\t\tmd: {\n\t\t\t\t\t\ttitle: 'Tablet Portrait',\n\t\t\t\t\t\ticon: 'mgz-icon mgz-icon-tablet-portrait'\n\t\t\t\t\t},\n\t\t\t\t\tsm: {\n\t\t\t\t\t\ttitle: 'Mobile Landscape',\n\t\t\t\t\t\ticon: 'mgz-icon mgz-icon-mobile-landscape'\n\t\t\t\t\t},\n\t\t\t\t\txs: {\n\t\t\t\t\t\ttitle: 'Mobile Portrait',\n\t\t\t\t\t\ticon: 'mgz-icon mgz-icon-mobile-portrait'\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t$scope.changeViewMode = function(viewMode) {\n\t\t\t\t\t$scope.viewMode = viewMode;\n\t\t\t\t\tmagezonBuilderService.setViewMode(viewMode);\n\t\t\t\t\t$rootScope.fullscreen = true;\n\t\t\t\t\t$rootScope.$broadcast('loadElements');\n\t\t\t\t}\n\n\t\t\t\t$scope.$watch('viewMode', function(viewMode) {\n\t\t\t\t\t$rootScope.$broadcast('changedViewMode', viewMode);\n\t\t\t\t});\n\n\t\t\t\t$scope.$on('setViewMode', function(event, viewMode) {\n\t\t\t\t\t$scope.viewMode = viewMode;\n\t\t\t\t\tmagezonBuilderService.setViewMode(viewMode);\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\n\treturn directive;\n});","Magezon_Builder/js/builder/navbar/fullscreen.js":"define([\n\t'angular'\n], function(angular) {\n\n\tvar directive = function(magezonBuilderUrl) {\n\t\treturn {\n\t\t\treplace: true,\n\t\t\ttemplateUrl: function(elem) {\n\t\t\t\treturn magezonBuilderUrl.getTemplateUrl(elem, 'Magezon_Builder/js/templates/builder/navbar/fullscreen.html')\n\t\t\t},\n\t\t\tcontroller: function($rootScope, $scope) {\n\t\t\t\t$scope.toggleFullscreen = function() {\n\t\t\t\t\t$rootScope.fullscreen = !$rootScope.fullscreen;\n\t\t\t\t\tif (!$rootScope.fullscreen) {\n\t\t\t\t\t\t$rootScope.$broadcast('setViewMode', 'xl');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn directive;\n});","Magezon_Builder/js/builder/navbar/clear.js":"define([\n\t'jquery',\n\t'angular'\n], function($, angular) {\n\n\tvar directive = function(magezonBuilderUrl) {\n\t\treturn {\n\t\t\treplace: true,\n\t\t\ttemplateUrl: function(elem) {\n\t\t\t\treturn magezonBuilderUrl.getTemplateUrl(elem, 'Magezon_Builder/js/templates/builder/navbar/clear.html')\n\t\t\t},\n\t\t\tcontroller: function($rootScope, $scope, magezonBuilderModal) {\n\t\t\t\t$scope.openModal = function(e) {\n\t\t\t\t\tmagezonBuilderModal.open('clear_layout');\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn directive;\n});","Magezon_Builder/js/builder/navbar/history.js":"define([\n\t'angular'\n], function(angular) {\n\n\tvar directive = function(magezonBuilderUrl) {\n\t\treturn {\n\t\t\treplace: true,\n\t\t\ttemplateUrl: function(elem) {\n\t\t\t\treturn magezonBuilderUrl.getTemplateUrl(elem, 'Magezon_Builder/js/templates/builder/navbar/history.html')\n\t\t\t},\n\t\t\tcontroller: function($rootScope, $scope, magezonBuilderModal) {\n\t\t\t\t$scope.$on('openHistoryModal', function() {\n\t\t\t\t\t$scope.openModal();\n\t\t\t\t});\n\t\t\t\t$scope.openModal = function() {\n\t\t\t\t\tmagezonBuilderModal.open('history');\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn directive;\n});","Magezon_Builder/js/builder/navbar/settings.js":"define([\n\t'angular'\n], function(angular) {\n\n\tvar directive = function(magezonBuilderUrl) {\n\t\treturn {\n\t\t\treplace: true,\n\t\t\ttemplateUrl: function(elem) {\n\t\t\t\treturn magezonBuilderUrl.getTemplateUrl(elem, 'Magezon_Builder/js/templates/builder/navbar/settings.html')\n\t\t\t},\n\t\t\tcontroller: function($scope, magezonBuilderModal) {\n\t\t\t\t$scope.openModal = function () {\n\t\t\t\t\tmagezonBuilderModal.open('settings');\n\t\t        }\n\t\t\t}\n\t\t}\n\t}\n\n\treturn directive;\n});","Magezon_Builder/js/builder/navbar/templates.js":"define([\n\t'angular'\n], function(angular) {\n\n\tvar directive = function(magezonBuilderUrl) {\n\t\treturn {\n\t\t\treplace: true,\n\t\t\ttemplateUrl: function(elem) {\n\t\t\t\treturn magezonBuilderUrl.getTemplateUrl(elem, 'Magezon_Builder/js/templates/builder/navbar/add.html')\n\t\t\t},\n\t\t\tcontroller: function($rootScope, $scope) {\n\t\t\t\t$scope.openModal = function() {\n\t\t\t\t\t$rootScope.$broadcast('openElementsModal', true);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn directive;\n});","Magezon_Builder/js/builder/control/updown.js":"define([\n\t'angular'\n], function(angular) {\n\n\tvar directive = function(magezonBuilderUrl) {\n\t\treturn {\n\t\t\treplace: true,\n\t\t\ttemplateUrl: function(elem) {\n\t\t\t\treturn magezonBuilderUrl.getTemplateUrl(elem, 'Magezon_Builder/js/templates/builder/control/updown.html')\n\t\t\t},\n\t\t\tcontroller: function($rootScope, $scope, elementManager) {\n\n\t\t\t\t$scope.upClass   = 'mgz-fa-chevron-up';\n\t\t\t\t$scope.upTitle   = 'Move up';\n\t\t\t\t$scope.downClass = 'mgz-fa-chevron-down';\n\t\t\t\t$scope.downTitle = 'Move down';\n\n\t\t\t\t$scope.isUpVisible = function() {\n\t\t\t\t\tvar el = elementManager.getEl($scope.element);\n\t\t\t\t\tif (!el.prev('.mgz-element').length || !el.prev('.mgz-element').is(':visible')) return false;\n\t\t\t\t\tvar elPosition   = el.position();\n\t\t\t\t\tvar nextPosition = el.prev('.mgz-element').position();\n\t\t\t\t\tif (elPosition.top == nextPosition.top) {\n\t\t\t\t\t\t$scope.upTitle = 'Move left';\n\t\t\t\t\t\t$scope.upClass = 'mgz-fa-chevron-left';\n\t\t\t\t\t}\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\n\t\t\t\t$scope.moveUp = function() {\n\t\t\t\t\t$rootScope.$broadcast('moveUpElement', $scope.element);\n\t\t\t\t}\n\n\t\t\t\t$scope.isDownVisible = function() {\n\t\t\t\t\tvar el = elementManager.getEl($scope.element);\n\t\t\t\t\tif (!el.next('.mgz-element').length || !el.next('.mgz-element').is(':visible')) return false;\n\t\t\t\t\tvar elPosition   = el.position();\n\t\t\t\t\tvar prevPosition = el.next('.mgz-element').position();\n\t\t\t\t\tif (elPosition.top == prevPosition.top) {\n\t\t\t\t\t\t$scope.downTitle = 'Move right';\n\t\t\t\t\t\t$scope.downClass = 'mgz-fa-chevron-right';\n\t\t\t\t\t}\n\t\t\t\t\treturn true;\t\n\t\t\t\t}\n\n\t\t\t\t$scope.moveDown = function() {\n\t\t\t\t\t$rootScope.$broadcast('moveDownElement', $scope.element);\t\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn directive;\n});","Magezon_Builder/vendor/spectrum/spectrum.js":"// Spectrum Colorpicker v1.8.0\n// https://github.com/bgrins/spectrum\n// Author: Brian Grinstead\n// License: MIT\n\n(function (factory) {\n    \"use strict\";\n\n    if (typeof define === 'function' && define.amd) { // AMD\n        define(['jquery'], factory);\n    }\n    else if (typeof exports == \"object\" && typeof module == \"object\") { // CommonJS\n        module.exports = factory(require('jquery'));\n    }\n    else { // Browser\n        factory(jQuery);\n    }\n})(function($, undefined) {\n    \"use strict\";\n\n    var defaultOpts = {\n\n            // Callbacks\n            beforeShow: noop,\n            move: noop,\n            change: noop,\n            show: noop,\n            hide: noop,\n\n            // Options\n            color: false,\n            flat: false,\n            showInput: false,\n            allowEmpty: false,\n            showButtons: true,\n            clickoutFiresChange: true,\n            showInitial: false,\n            showPalette: false,\n            showPaletteOnly: false,\n            hideAfterPaletteSelect: false,\n            togglePaletteOnly: false,\n            showSelectionPalette: true,\n            localStorageKey: false,\n            appendTo: \"body\",\n            maxSelectionSize: 7,\n            cancelText: \"cancel\",\n            chooseText: \"choose\",\n            togglePaletteMoreText: \"more\",\n            togglePaletteLessText: \"less\",\n            clearText: \"Clear Color Selection\",\n            noColorSelectedText: \"No Color Selected\",\n            preferredFormat: false,\n            className: \"\", // Deprecated - use containerClassName and replacerClassName instead.\n            containerClassName: \"\",\n            replacerClassName: \"\",\n            showAlpha: false,\n            theme: \"sp-light\",\n            palette: [[\"#ffffff\", \"#000000\", \"#ff0000\", \"#ff8000\", \"#ffff00\", \"#008000\", \"#0000ff\", \"#4b0082\", \"#9400d3\"]],\n            selectionPalette: [],\n            disabled: false,\n            offset: null\n        },\n        spectrums = [],\n        IE = !!/msie/i.exec( window.navigator.userAgent ),\n        rgbaSupport = (function() {\n            function contains( str, substr ) {\n                return !!~('' + str).indexOf(substr);\n            }\n\n            var elem = document.createElement('div');\n            var style = elem.style;\n            style.cssText = 'background-color:rgba(0,0,0,.5)';\n            return contains(style.backgroundColor, 'rgba') || contains(style.backgroundColor, 'hsla');\n        })(),\n        replaceInput = [\n            \"<div class='sp-replacer'>\",\n            \"<div class='sp-preview'><div class='sp-preview-inner'></div></div>\",\n            \"<div class='sp-dd'>&#9660;</div>\",\n            \"</div>\"\n        ].join(''),\n        markup = (function () {\n\n            // IE does not support gradients with multiple stops, so we need to simulate\n            //  that for the rainbow slider with 8 divs that each have a single gradient\n            var gradientFix = \"\";\n            if (IE) {\n                for (var i = 1; i <= 6; i++) {\n                    gradientFix += \"<div class='sp-\" + i + \"'></div>\";\n                }\n            }\n\n            return [\n                \"<div class='sp-container sp-hidden'>\",\n                \"<div class='sp-palette-container'>\",\n                \"<div class='sp-palette sp-thumb sp-cf'></div>\",\n                \"<div class='sp-palette-button-container sp-cf'>\",\n                \"<button type='button' class='sp-palette-toggle'></button>\",\n                \"</div>\",\n                \"</div>\",\n                \"<div class='sp-picker-container'>\",\n                \"<div class='sp-top sp-cf'>\",\n                \"<div class='sp-fill'></div>\",\n                \"<div class='sp-top-inner'>\",\n                \"<div class='sp-color'>\",\n                \"<div class='sp-sat'>\",\n                \"<div class='sp-val'>\",\n                \"<div class='sp-dragger'></div>\",\n                \"</div>\",\n                \"</div>\",\n                \"</div>\",\n                \"<div class='sp-clear sp-clear-display'>\",\n                \"</div>\",\n                \"<div class='sp-hue'>\",\n                \"<div class='sp-slider'></div>\",\n                gradientFix,\n                \"</div>\",\n                \"</div>\",\n                \"<div class='sp-alpha'><div class='sp-alpha-inner'><div class='sp-alpha-handle'></div></div></div>\",\n                \"</div>\",\n                \"<div class='sp-input-container sp-cf'>\",\n                \"<input class='sp-input' type='text' spellcheck='false'  />\",\n                \"</div>\",\n                \"<div class='sp-initial sp-thumb sp-cf'></div>\",\n                \"<div class='sp-button-container sp-cf'>\",\n                \"<a class='sp-cancel' href='#'></a>\",\n                \"<button type='button' class='sp-choose'></button>\",\n                \"</div>\",\n                \"</div>\",\n                \"</div>\"\n            ].join(\"\");\n        })();\n\n    function paletteTemplate (p, color, className, opts) {\n        var html = [];\n        for (var i = 0; i < p.length; i++) {\n            var current = p[i];\n            if(current) {\n                var tiny = tinycolor(current);\n                var c = tiny.toHsl().l < 0.5 ? \"sp-thumb-el sp-thumb-dark\" : \"sp-thumb-el sp-thumb-light\";\n                c += (tinycolor.equals(color, current)) ? \" sp-thumb-active\" : \"\";\n                var formattedString = tiny.toString(opts.preferredFormat || \"rgb\");\n                var swatchStyle = rgbaSupport ? (\"background-color:\" + tiny.toRgbString()) : \"filter:\" + tiny.toFilter();\n                html.push('<span title=\"' + formattedString + '\" data-color=\"' + tiny.toRgbString() + '\" class=\"' + c + '\"><span class=\"sp-thumb-inner\" style=\"' + swatchStyle + ';\" /></span>');\n            } else {\n                var cls = 'sp-clear-display';\n                html.push($('<div />')\n                    .append($('<span data-color=\"\" style=\"background-color:transparent;\" class=\"' + cls + '\"></span>')\n                        .attr('title', opts.noColorSelectedText)\n                    )\n                    .html()\n                );\n            }\n        }\n        return \"<div class='sp-cf \" + className + \"'>\" + html.join('') + \"</div>\";\n    }\n\n    function hideAll() {\n        for (var i = 0; i < spectrums.length; i++) {\n            if (spectrums[i]) {\n                spectrums[i].hide();\n            }\n        }\n    }\n\n    function instanceOptions(o, callbackContext) {\n        var opts = $.extend({}, defaultOpts, o);\n        opts.callbacks = {\n            'move': bind(opts.move, callbackContext),\n            'change': bind(opts.change, callbackContext),\n            'show': bind(opts.show, callbackContext),\n            'hide': bind(opts.hide, callbackContext),\n            'beforeShow': bind(opts.beforeShow, callbackContext)\n        };\n\n        return opts;\n    }\n\n    function spectrum(element, o) {\n\n        var opts = instanceOptions(o, element),\n            flat = opts.flat,\n            showSelectionPalette = opts.showSelectionPalette,\n            localStorageKey = opts.localStorageKey,\n            theme = opts.theme,\n            callbacks = opts.callbacks,\n            resize = throttle(reflow, 10),\n            visible = false,\n            isDragging = false,\n            dragWidth = 0,\n            dragHeight = 0,\n            dragHelperHeight = 0,\n            slideHeight = 0,\n            slideWidth = 0,\n            alphaWidth = 0,\n            alphaSlideHelperWidth = 0,\n            slideHelperHeight = 0,\n            currentHue = 0,\n            currentSaturation = 0,\n            currentValue = 0,\n            currentAlpha = 1,\n            palette = [],\n            paletteArray = [],\n            paletteLookup = {},\n            selectionPalette = opts.selectionPalette.slice(0),\n            maxSelectionSize = opts.maxSelectionSize,\n            draggingClass = \"sp-dragging\",\n            shiftMovementDirection = null;\n\n        var doc = element.ownerDocument,\n            body = doc.body,\n            boundElement = $(element),\n            disabled = false,\n            container = $(markup, doc).addClass(theme),\n            pickerContainer = container.find(\".sp-picker-container\"),\n            dragger = container.find(\".sp-color\"),\n            dragHelper = container.find(\".sp-dragger\"),\n            slider = container.find(\".sp-hue\"),\n            slideHelper = container.find(\".sp-slider\"),\n            alphaSliderInner = container.find(\".sp-alpha-inner\"),\n            alphaSlider = container.find(\".sp-alpha\"),\n            alphaSlideHelper = container.find(\".sp-alpha-handle\"),\n            textInput = container.find(\".sp-input\"),\n            paletteContainer = container.find(\".sp-palette\"),\n            initialColorContainer = container.find(\".sp-initial\"),\n            cancelButton = container.find(\".sp-cancel\"),\n            clearButton = container.find(\".sp-clear\"),\n            chooseButton = container.find(\".sp-choose\"),\n            toggleButton = container.find(\".sp-palette-toggle\"),\n            isInput = boundElement.is(\"input\"),\n            isInputTypeColor = isInput && boundElement.attr(\"type\") === \"color\" && inputTypeColorSupport(),\n            shouldReplace = isInput && !flat,\n            replacer = (shouldReplace) ? $(replaceInput).addClass(theme).addClass(opts.className).addClass(opts.replacerClassName) : $([]),\n            offsetElement = (shouldReplace) ? replacer : boundElement,\n            previewElement = replacer.find(\".sp-preview-inner\"),\n            initialColor = opts.color || (isInput && boundElement.val()),\n            colorOnShow = false,\n            currentPreferredFormat = opts.preferredFormat,\n            clickoutFiresChange = !opts.showButtons || opts.clickoutFiresChange,\n            isEmpty = !initialColor,\n            allowEmpty = opts.allowEmpty && !isInputTypeColor;\n\n        function applyOptions() {\n\n            if (opts.showPaletteOnly) {\n                opts.showPalette = true;\n            }\n\n            toggleButton.text(opts.showPaletteOnly ? opts.togglePaletteMoreText : opts.togglePaletteLessText);\n\n            if (opts.palette) {\n                palette = opts.palette.slice(0);\n                paletteArray = $.isArray(palette[0]) ? palette : [palette];\n                paletteLookup = {};\n                for (var i = 0; i < paletteArray.length; i++) {\n                    for (var j = 0; j < paletteArray[i].length; j++) {\n                        var rgb = tinycolor(paletteArray[i][j]).toRgbString();\n                        paletteLookup[rgb] = true;\n                    }\n                }\n            }\n\n            container.toggleClass(\"sp-flat\", flat);\n            container.toggleClass(\"sp-input-disabled\", !opts.showInput);\n            container.toggleClass(\"sp-alpha-enabled\", opts.showAlpha);\n            container.toggleClass(\"sp-clear-enabled\", allowEmpty);\n            container.toggleClass(\"sp-buttons-disabled\", !opts.showButtons);\n            container.toggleClass(\"sp-palette-buttons-disabled\", !opts.togglePaletteOnly);\n            container.toggleClass(\"sp-palette-disabled\", !opts.showPalette);\n            container.toggleClass(\"sp-palette-only\", opts.showPaletteOnly);\n            container.toggleClass(\"sp-initial-disabled\", !opts.showInitial);\n            container.addClass(opts.className).addClass(opts.containerClassName);\n\n            reflow();\n        }\n\n        function initialize() {\n\n            if (IE) {\n                container.find(\"*:not(input)\").attr(\"unselectable\", \"on\");\n            }\n\n            applyOptions();\n\n            if (shouldReplace) {\n                boundElement.after(replacer).hide();\n            }\n\n            if (!allowEmpty) {\n                clearButton.hide();\n            }\n\n            if (flat) {\n                boundElement.after(container).hide();\n            }\n            else {\n\n                var appendTo = opts.appendTo === \"parent\" ? boundElement.parent() : $(opts.appendTo);\n                if (appendTo.length !== 1) {\n                    appendTo = $(\"body\");\n                }\n\n                appendTo.append(container);\n            }\n\n            updateSelectionPaletteFromStorage();\n\n            offsetElement.bind(\"click.spectrum touchstart.spectrum\", function (e) {\n                if (!disabled) {\n                    toggle();\n                }\n\n                e.stopPropagation();\n\n                if (!$(e.target).is(\"input\")) {\n                    e.preventDefault();\n                }\n            });\n\n            if(boundElement.is(\":disabled\") || (opts.disabled === true)) {\n                disable();\n            }\n\n            // Prevent clicks from bubbling up to document.  This would cause it to be hidden.\n            container.click(stopPropagation);\n\n            // Handle user typed input\n            textInput.change(setFromTextInput);\n            textInput.bind(\"paste\", function () {\n                setTimeout(setFromTextInput, 1);\n            });\n            textInput.keydown(function (e) { if (e.keyCode == 13) { setFromTextInput(); } });\n\n            cancelButton.text(opts.cancelText);\n            cancelButton.bind(\"click.spectrum\", function (e) {\n                e.stopPropagation();\n                e.preventDefault();\n                revert();\n                hide();\n            });\n\n            clearButton.attr(\"title\", opts.clearText);\n            clearButton.bind(\"click.spectrum\", function (e) {\n                e.stopPropagation();\n                e.preventDefault();\n                isEmpty = true;\n                move();\n\n                if(flat) {\n                    //for the flat style, this is a change event\n                    updateOriginalInput(true);\n                }\n            });\n\n            chooseButton.text(opts.chooseText);\n            chooseButton.bind(\"click.spectrum\", function (e) {\n                e.stopPropagation();\n                e.preventDefault();\n\n                if (IE && textInput.is(\":focus\")) {\n                    textInput.trigger('change');\n                }\n\n                if (isValid()) {\n                    updateOriginalInput(true);\n                    hide();\n                }\n            });\n\n            toggleButton.text(opts.showPaletteOnly ? opts.togglePaletteMoreText : opts.togglePaletteLessText);\n            toggleButton.bind(\"click.spectrum\", function (e) {\n                e.stopPropagation();\n                e.preventDefault();\n\n                opts.showPaletteOnly = !opts.showPaletteOnly;\n\n                // To make sure the Picker area is drawn on the right, next to the\n                // Palette area (and not below the palette), first move the Palette\n                // to the left to make space for the picker, plus 5px extra.\n                // The 'applyOptions' function puts the whole container back into place\n                // and takes care of the button-text and the sp-palette-only CSS class.\n                if (!opts.showPaletteOnly && !flat) {\n                    container.css('left', '-=' + (pickerContainer.outerWidth(true) + 5));\n                }\n                applyOptions();\n            });\n\n            draggable(alphaSlider, function (dragX, dragY, e) {\n                currentAlpha = (dragX / alphaWidth);\n                isEmpty = false;\n                if (e.shiftKey) {\n                    currentAlpha = Math.round(currentAlpha * 10) / 10;\n                }\n\n                move();\n            }, dragStart, dragStop);\n\n            draggable(slider, function (dragX, dragY) {\n                currentHue = parseFloat(dragY / slideHeight);\n                isEmpty = false;\n                if (!opts.showAlpha) {\n                    currentAlpha = 1;\n                }\n                move();\n            }, dragStart, dragStop);\n\n            draggable(dragger, function (dragX, dragY, e) {\n\n                // shift+drag should snap the movement to either the x or y axis.\n                if (!e.shiftKey) {\n                    shiftMovementDirection = null;\n                }\n                else if (!shiftMovementDirection) {\n                    var oldDragX = currentSaturation * dragWidth;\n                    var oldDragY = dragHeight - (currentValue * dragHeight);\n                    var furtherFromX = Math.abs(dragX - oldDragX) > Math.abs(dragY - oldDragY);\n\n                    shiftMovementDirection = furtherFromX ? \"x\" : \"y\";\n                }\n\n                var setSaturation = !shiftMovementDirection || shiftMovementDirection === \"x\";\n                var setValue = !shiftMovementDirection || shiftMovementDirection === \"y\";\n\n                if (setSaturation) {\n                    currentSaturation = parseFloat(dragX / dragWidth);\n                }\n                if (setValue) {\n                    currentValue = parseFloat((dragHeight - dragY) / dragHeight);\n                }\n\n                isEmpty = false;\n                if (!opts.showAlpha) {\n                    currentAlpha = 1;\n                }\n\n                move();\n\n            }, dragStart, dragStop);\n\n            if (!!initialColor) {\n                set(initialColor);\n\n                // In case color was black - update the preview UI and set the format\n                // since the set function will not run (default color is black).\n                updateUI();\n                currentPreferredFormat = opts.preferredFormat || tinycolor(initialColor).format;\n\n                addColorToSelectionPalette(initialColor);\n            }\n            else {\n                updateUI();\n            }\n\n            if (flat) {\n                show();\n            }\n\n            function paletteElementClick(e) {\n                if (e.data && e.data.ignore) {\n                    set($(e.target).closest(\".sp-thumb-el\").data(\"color\"));\n                    move();\n                }\n                else {\n                    set($(e.target).closest(\".sp-thumb-el\").data(\"color\"));\n                    move();\n                    updateOriginalInput(true);\n                    if (opts.hideAfterPaletteSelect) {\n                        hide();\n                    }\n                }\n\n                return false;\n            }\n\n            var paletteEvent = IE ? \"mousedown.spectrum\" : \"click.spectrum touchstart.spectrum\";\n            paletteContainer.delegate(\".sp-thumb-el\", paletteEvent, paletteElementClick);\n            initialColorContainer.delegate(\".sp-thumb-el:nth-child(1)\", paletteEvent, { ignore: true }, paletteElementClick);\n        }\n\n        function updateSelectionPaletteFromStorage() {\n\n            if (localStorageKey && window.localStorage) {\n\n                // Migrate old palettes over to new format.  May want to remove this eventually.\n                try {\n                    var oldPalette = window.localStorage[localStorageKey].split(\",#\");\n                    if (oldPalette.length > 1) {\n                        delete window.localStorage[localStorageKey];\n                        $.each(oldPalette, function(i, c) {\n                            addColorToSelectionPalette(c);\n                        });\n                    }\n                }\n                catch(e) { }\n\n                try {\n                    selectionPalette = window.localStorage[localStorageKey].split(\";\");\n                }\n                catch (e) { }\n            }\n        }\n\n        function addColorToSelectionPalette(color) {\n            if (showSelectionPalette) {\n                var rgb = tinycolor(color).toRgbString();\n                if (!paletteLookup[rgb] && $.inArray(rgb, selectionPalette) === -1) {\n                    selectionPalette.push(rgb);\n                    while(selectionPalette.length > maxSelectionSize) {\n                        selectionPalette.shift();\n                    }\n                }\n\n                if (localStorageKey && window.localStorage) {\n                    try {\n                        window.localStorage[localStorageKey] = selectionPalette.join(\";\");\n                    }\n                    catch(e) { }\n                }\n            }\n        }\n\n        function getUniqueSelectionPalette() {\n            var unique = [];\n            if (opts.showPalette) {\n                for (var i = 0; i < selectionPalette.length; i++) {\n                    var rgb = tinycolor(selectionPalette[i]).toRgbString();\n\n                    if (!paletteLookup[rgb]) {\n                        unique.push(selectionPalette[i]);\n                    }\n                }\n            }\n\n            return unique.reverse().slice(0, opts.maxSelectionSize);\n        }\n\n        function drawPalette() {\n\n            var currentColor = get();\n\n            var html = $.map(paletteArray, function (palette, i) {\n                return paletteTemplate(palette, currentColor, \"sp-palette-row sp-palette-row-\" + i, opts);\n            });\n\n            updateSelectionPaletteFromStorage();\n\n            if (selectionPalette) {\n                html.push(paletteTemplate(getUniqueSelectionPalette(), currentColor, \"sp-palette-row sp-palette-row-selection\", opts));\n            }\n\n            paletteContainer.html(html.join(\"\"));\n        }\n\n        function drawInitial() {\n            if (opts.showInitial) {\n                var initial = colorOnShow;\n                var current = get();\n                initialColorContainer.html(paletteTemplate([initial, current], current, \"sp-palette-row-initial\", opts));\n            }\n        }\n\n        function dragStart() {\n            if (dragHeight <= 0 || dragWidth <= 0 || slideHeight <= 0) {\n                reflow();\n            }\n            isDragging = true;\n            container.addClass(draggingClass);\n            shiftMovementDirection = null;\n            boundElement.trigger('dragstart.spectrum', [ get() ]);\n        }\n\n        function dragStop() {\n            isDragging = false;\n            container.removeClass(draggingClass);\n            boundElement.trigger('dragstop.spectrum', [ get() ]);\n        }\n\n        function setFromTextInput() {\n\n            var value = textInput.val();\n\n            if ((value === null || value === \"\") && allowEmpty) {\n                set(null);\n                updateOriginalInput(true);\n            }\n            else {\n                var tiny = tinycolor(value);\n                if (tiny.isValid()) {\n                    set(tiny);\n                    updateOriginalInput(true);\n                }\n                else {\n                    textInput.addClass(\"sp-validation-error\");\n                }\n            }\n        }\n\n        function toggle() {\n            if (visible) {\n                hide();\n            }\n            else {\n                show();\n            }\n        }\n\n        function show() {\n            var event = $.Event('beforeShow.spectrum');\n\n            if (visible) {\n                reflow();\n                return;\n            }\n\n            boundElement.trigger(event, [ get() ]);\n\n            if (callbacks.beforeShow(get()) === false || event.isDefaultPrevented()) {\n                return;\n            }\n\n            hideAll();\n            visible = true;\n\n            $(doc).bind(\"keydown.spectrum\", onkeydown);\n            $(doc).bind(\"click.spectrum\", clickout);\n            $(window).bind(\"resize.spectrum\", resize);\n            replacer.addClass(\"sp-active\");\n            container.removeClass(\"sp-hidden\");\n\n            reflow();\n            updateUI();\n\n            colorOnShow = get();\n\n            drawInitial();\n            callbacks.show(colorOnShow);\n            boundElement.trigger('show.spectrum', [ colorOnShow ]);\n        }\n\n        function onkeydown(e) {\n            // Close on ESC\n            if (e.keyCode === 27) {\n                hide();\n            }\n        }\n\n        function clickout(e) {\n            // Return on right click.\n            if (e.button == 2) { return; }\n\n            // If a drag event was happening during the mouseup, don't hide\n            // on click.\n            if (isDragging) { return; }\n\n            if (clickoutFiresChange) {\n                updateOriginalInput(true);\n            }\n            else {\n                revert();\n            }\n            hide();\n        }\n\n        function hide() {\n            // Return if hiding is unnecessary\n            if (!visible || flat) { return; }\n            visible = false;\n\n            $(doc).unbind(\"keydown.spectrum\", onkeydown);\n            $(doc).unbind(\"click.spectrum\", clickout);\n            $(window).unbind(\"resize.spectrum\", resize);\n\n            replacer.removeClass(\"sp-active\");\n            container.addClass(\"sp-hidden\");\n\n            callbacks.hide(get());\n            boundElement.trigger('hide.spectrum', [ get() ]);\n        }\n\n        function revert() {\n            set(colorOnShow, true);\n        }\n\n        function set(color, ignoreFormatChange) {\n            if (tinycolor.equals(color, get())) {\n                // Update UI just in case a validation error needs\n                // to be cleared.\n                updateUI();\n                return;\n            }\n\n            var newColor, newHsv;\n            if (!color && allowEmpty) {\n                isEmpty = true;\n            } else {\n                isEmpty = false;\n                newColor = tinycolor(color);\n                newHsv = newColor.toHsv();\n\n                currentHue = (newHsv.h % 360) / 360;\n                currentSaturation = newHsv.s;\n                currentValue = newHsv.v;\n                currentAlpha = newHsv.a;\n            }\n            updateUI();\n\n            if (newColor && newColor.isValid() && !ignoreFormatChange) {\n                currentPreferredFormat = opts.preferredFormat || newColor.getFormat();\n            }\n        }\n\n        function get(opts) {\n            opts = opts || { };\n\n            if (allowEmpty && isEmpty) {\n                return null;\n            }\n\n            return tinycolor.fromRatio({\n                h: currentHue,\n                s: currentSaturation,\n                v: currentValue,\n                a: Math.round(currentAlpha * 100) / 100\n            }, { format: opts.format || currentPreferredFormat });\n        }\n\n        function isValid() {\n            return !textInput.hasClass(\"sp-validation-error\");\n        }\n\n        function move() {\n            updateUI();\n\n            callbacks.move(get());\n            boundElement.trigger('move.spectrum', [ get() ]);\n        }\n\n        function updateUI() {\n\n            textInput.removeClass(\"sp-validation-error\");\n\n            updateHelperLocations();\n\n            // Update dragger background color (gradients take care of saturation and value).\n            var flatColor = tinycolor.fromRatio({ h: currentHue, s: 1, v: 1 });\n            dragger.css(\"background-color\", flatColor.toHexString());\n\n            // Get a format that alpha will be included in (hex and names ignore alpha)\n            var format = currentPreferredFormat;\n            if (currentAlpha < 1 && !(currentAlpha === 0 && format === \"name\")) {\n                if (format === \"hex\" || format === \"hex3\" || format === \"hex6\" || format === \"name\") {\n                    format = \"rgb\";\n                }\n            }\n\n            var realColor = get({ format: format }),\n                displayColor = '';\n\n            //reset background info for preview element\n            previewElement.removeClass(\"sp-clear-display\");\n            previewElement.css('background-color', 'transparent');\n\n            if (!realColor && allowEmpty) {\n                // Update the replaced elements background with icon indicating no color selection\n                previewElement.addClass(\"sp-clear-display\");\n            }\n            else {\n                var realHex = realColor.toHexString(),\n                    realRgb = realColor.toRgbString();\n\n                // Update the replaced elements background color (with actual selected color)\n                if (rgbaSupport || realColor.alpha === 1) {\n                    previewElement.css(\"background-color\", realRgb);\n                }\n                else {\n                    previewElement.css(\"background-color\", \"transparent\");\n                    previewElement.css(\"filter\", realColor.toFilter());\n                }\n\n                if (opts.showAlpha) {\n                    var rgb = realColor.toRgb();\n                    rgb.a = 0;\n                    var realAlpha = tinycolor(rgb).toRgbString();\n                    var gradient = \"linear-gradient(left, \" + realAlpha + \", \" + realHex + \")\";\n\n                    if (IE) {\n                        alphaSliderInner.css(\"filter\", tinycolor(realAlpha).toFilter({ gradientType: 1 }, realHex));\n                    }\n                    else {\n                        alphaSliderInner.css(\"background\", \"-webkit-\" + gradient);\n                        alphaSliderInner.css(\"background\", \"-moz-\" + gradient);\n                        alphaSliderInner.css(\"background\", \"-ms-\" + gradient);\n                        // Use current syntax gradient on unprefixed property.\n                        alphaSliderInner.css(\"background\",\n                            \"linear-gradient(to right, \" + realAlpha + \", \" + realHex + \")\");\n                    }\n                }\n\n                displayColor = realColor.toString(format);\n            }\n\n            // Update the text entry input as it changes happen\n            if (opts.showInput) {\n                textInput.val(displayColor);\n            }\n\n            if (opts.showPalette) {\n                drawPalette();\n            }\n\n            drawInitial();\n        }\n\n        function updateHelperLocations() {\n            var s = currentSaturation;\n            var v = currentValue;\n\n            if(allowEmpty && isEmpty) {\n                //if selected color is empty, hide the helpers\n                alphaSlideHelper.hide();\n                slideHelper.hide();\n                dragHelper.hide();\n            }\n            else {\n                //make sure helpers are visible\n                alphaSlideHelper.show();\n                slideHelper.show();\n                dragHelper.show();\n\n                // Where to show the little circle in that displays your current selected color\n                var dragX = s * dragWidth;\n                var dragY = dragHeight - (v * dragHeight);\n                dragX = Math.max(\n                    -dragHelperHeight,\n                    Math.min(dragWidth - dragHelperHeight, dragX - dragHelperHeight)\n                );\n                dragY = Math.max(\n                    -dragHelperHeight,\n                    Math.min(dragHeight - dragHelperHeight, dragY - dragHelperHeight)\n                );\n                dragHelper.css({\n                    \"top\": dragY + \"px\",\n                    \"left\": dragX + \"px\"\n                });\n\n                var alphaX = currentAlpha * alphaWidth;\n                alphaSlideHelper.css({\n                    \"left\": (alphaX - (alphaSlideHelperWidth / 2)) + \"px\"\n                });\n\n                // Where to show the bar that displays your current selected hue\n                var slideY = (currentHue) * slideHeight;\n                slideHelper.css({\n                    \"top\": (slideY - slideHelperHeight) + \"px\"\n                });\n            }\n        }\n\n        function updateOriginalInput(fireCallback) {\n            var color = get(),\n                displayColor = '',\n                hasChanged = !tinycolor.equals(color, colorOnShow);\n\n            if (color) {\n                displayColor = color.toString(currentPreferredFormat);\n                // Update the selection palette with the current color\n                addColorToSelectionPalette(color);\n            }\n\n            if (isInput) {\n                boundElement.val(displayColor);\n            }\n\n            if (fireCallback && hasChanged) {\n                callbacks.change(color);\n                boundElement.trigger('change', [ color ]);\n            }\n        }\n\n        function reflow() {\n            if (!visible) {\n                return; // Calculations would be useless and wouldn't be reliable anyways\n            }\n            dragWidth = dragger.width();\n            dragHeight = dragger.height();\n            dragHelperHeight = dragHelper.height();\n            slideWidth = slider.width();\n            slideHeight = slider.height();\n            slideHelperHeight = slideHelper.height();\n            alphaWidth = alphaSlider.width();\n            alphaSlideHelperWidth = alphaSlideHelper.width();\n\n            if (!flat) {\n                container.css(\"position\", \"absolute\");\n                if (opts.offset) {\n                    container.offset(opts.offset);\n                } else {\n                    container.offset(getOffset(container, offsetElement));\n                }\n            }\n\n            updateHelperLocations();\n\n            if (opts.showPalette) {\n                drawPalette();\n            }\n\n            boundElement.trigger('reflow.spectrum');\n        }\n\n        function destroy() {\n            boundElement.show();\n            offsetElement.unbind(\"click.spectrum touchstart.spectrum\");\n            container.remove();\n            replacer.remove();\n            spectrums[spect.id] = null;\n        }\n\n        function option(optionName, optionValue) {\n            if (optionName === undefined) {\n                return $.extend({}, opts);\n            }\n            if (optionValue === undefined) {\n                return opts[optionName];\n            }\n\n            opts[optionName] = optionValue;\n\n            if (optionName === \"preferredFormat\") {\n                currentPreferredFormat = opts.preferredFormat;\n            }\n            applyOptions();\n        }\n\n        function enable() {\n            disabled = false;\n            boundElement.attr(\"disabled\", false);\n            offsetElement.removeClass(\"sp-disabled\");\n        }\n\n        function disable() {\n            hide();\n            disabled = true;\n            boundElement.attr(\"disabled\", true);\n            offsetElement.addClass(\"sp-disabled\");\n        }\n\n        function setOffset(coord) {\n            opts.offset = coord;\n            reflow();\n        }\n\n        initialize();\n\n        var spect = {\n            show: show,\n            hide: hide,\n            toggle: toggle,\n            reflow: reflow,\n            option: option,\n            enable: enable,\n            disable: disable,\n            offset: setOffset,\n            set: function (c) {\n                set(c);\n                updateOriginalInput();\n            },\n            get: get,\n            destroy: destroy,\n            container: container\n        };\n\n        spect.id = spectrums.push(spect) - 1;\n\n        return spect;\n    }\n\n    /**\n     * checkOffset - get the offset below/above and left/right element depending on screen position\n     * Thanks https://github.com/jquery/jquery-ui/blob/master/ui/jquery.ui.datepicker.js\n     */\n    function getOffset(picker, input) {\n        var extraY = 0;\n        var dpWidth = picker.outerWidth();\n        var dpHeight = picker.outerHeight();\n        var inputHeight = input.outerHeight();\n        var doc = picker[0].ownerDocument;\n        var docElem = doc.documentElement;\n        var viewWidth = docElem.clientWidth + $(doc).scrollLeft();\n        var viewHeight = docElem.clientHeight + $(doc).scrollTop();\n        var offset = input.offset();\n        offset.top += inputHeight;\n\n        offset.left -=\n            Math.min(offset.left, (offset.left + dpWidth > viewWidth && viewWidth > dpWidth) ?\n                Math.abs(offset.left + dpWidth - viewWidth) : 0);\n\n        offset.top -=\n            Math.min(offset.top, ((offset.top + dpHeight > viewHeight && viewHeight > dpHeight) ?\n                Math.abs(dpHeight + inputHeight - extraY) : extraY));\n\n        return offset;\n    }\n\n    /**\n     * noop - do nothing\n     */\n    function noop() {\n\n    }\n\n    /**\n     * stopPropagation - makes the code only doing this a little easier to read in line\n     */\n    function stopPropagation(e) {\n        e.stopPropagation();\n    }\n\n    /**\n     * Create a function bound to a given object\n     * Thanks to underscore.js\n     */\n    function bind(func, obj) {\n        var slice = Array.prototype.slice;\n        var args = slice.call(arguments, 2);\n        return function () {\n            return func.apply(obj, args.concat(slice.call(arguments)));\n        };\n    }\n\n    /**\n     * Lightweight drag helper.  Handles containment within the element, so that\n     * when dragging, the x is within [0,element.width] and y is within [0,element.height]\n     */\n    function draggable(element, onmove, onstart, onstop) {\n        onmove = onmove || function () { };\n        onstart = onstart || function () { };\n        onstop = onstop || function () { };\n        var doc = document;\n        var dragging = false;\n        var offset = {};\n        var maxHeight = 0;\n        var maxWidth = 0;\n        var hasTouch = ('ontouchstart' in window);\n\n        var duringDragEvents = {};\n        duringDragEvents[\"selectstart\"] = prevent;\n        duringDragEvents[\"dragstart\"] = prevent;\n        duringDragEvents[\"touchmove mousemove\"] = move;\n        duringDragEvents[\"touchend mouseup\"] = stop;\n\n        function prevent(e) {\n            if (e.stopPropagation) {\n                e.stopPropagation();\n            }\n            if (e.preventDefault) {\n                e.preventDefault();\n            }\n            e.returnValue = false;\n        }\n\n        function move(e) {\n            if (dragging) {\n                // Mouseup happened outside of window\n                if (IE && doc.documentMode < 9 && !e.button) {\n                    return stop();\n                }\n\n                var t0 = e.originalEvent && e.originalEvent.touches && e.originalEvent.touches[0];\n                var pageX = t0 && t0.pageX || e.pageX;\n                var pageY = t0 && t0.pageY || e.pageY;\n\n                var dragX = Math.max(0, Math.min(pageX - offset.left, maxWidth));\n                var dragY = Math.max(0, Math.min(pageY - offset.top, maxHeight));\n\n                if (hasTouch) {\n                    // Stop scrolling in iOS\n                    prevent(e);\n                }\n\n                onmove.apply(element, [dragX, dragY, e]);\n            }\n        }\n\n        function start(e) {\n            var rightclick = (e.which) ? (e.which == 3) : (e.button == 2);\n\n            if (!rightclick && !dragging) {\n                if (onstart.apply(element, arguments) !== false) {\n                    dragging = true;\n                    maxHeight = $(element).height();\n                    maxWidth = $(element).width();\n                    offset = $(element).offset();\n\n                    $(doc).bind(duringDragEvents);\n                    $(doc.body).addClass(\"sp-dragging\");\n\n                    move(e);\n\n                    prevent(e);\n                }\n            }\n        }\n\n        function stop() {\n            if (dragging) {\n                $(doc).unbind(duringDragEvents);\n                $(doc.body).removeClass(\"sp-dragging\");\n\n                // Wait a tick before notifying observers to allow the click event\n                // to fire in Chrome.\n                setTimeout(function() {\n                    onstop.apply(element, arguments);\n                }, 0);\n            }\n            dragging = false;\n        }\n\n        $(element).bind(\"touchstart mousedown\", start);\n    }\n\n    function throttle(func, wait, debounce) {\n        var timeout;\n        return function () {\n            var context = this, args = arguments;\n            var throttler = function () {\n                timeout = null;\n                func.apply(context, args);\n            };\n            if (debounce) clearTimeout(timeout);\n            if (debounce || !timeout) timeout = setTimeout(throttler, wait);\n        };\n    }\n\n    function inputTypeColorSupport() {\n        return $.fn.spectrum.inputTypeColorSupport();\n    }\n\n    /**\n     * Define a jQuery plugin\n     */\n    var dataID = \"spectrum.id\";\n    $.fn.spectrum = function (opts, extra) {\n\n        if (typeof opts == \"string\") {\n\n            var returnValue = this;\n            var args = Array.prototype.slice.call( arguments, 1 );\n\n            this.each(function () {\n                var spect = spectrums[$(this).data(dataID)];\n                if (spect) {\n                    var method = spect[opts];\n                    if (!method) {\n                        throw new Error( \"Spectrum: no such method: '\" + opts + \"'\" );\n                    }\n\n                    if (opts == \"get\") {\n                        returnValue = spect.get();\n                    }\n                    else if (opts == \"container\") {\n                        returnValue = spect.container;\n                    }\n                    else if (opts == \"option\") {\n                        returnValue = spect.option.apply(spect, args);\n                    }\n                    else if (opts == \"destroy\") {\n                        spect.destroy();\n                        $(this).removeData(dataID);\n                    }\n                    else {\n                        method.apply(spect, args);\n                    }\n                }\n            });\n\n            return returnValue;\n        }\n\n        // Initializing a new instance of spectrum\n        return this.spectrum(\"destroy\").each(function () {\n            var options = $.extend({}, opts, $(this).data());\n            var spect = spectrum(this, options);\n            $(this).data(dataID, spect.id);\n        });\n    };\n\n    $.fn.spectrum.load = true;\n    $.fn.spectrum.loadOpts = {};\n    $.fn.spectrum.draggable = draggable;\n    $.fn.spectrum.defaults = defaultOpts;\n    $.fn.spectrum.inputTypeColorSupport = function inputTypeColorSupport() {\n        if (typeof inputTypeColorSupport._cachedResult === \"undefined\") {\n            var colorInput = $(\"<input type='color'/>\")[0]; // if color element is supported, value will default to not null\n            inputTypeColorSupport._cachedResult = colorInput.type === \"color\" && colorInput.value !== \"\";\n        }\n        return inputTypeColorSupport._cachedResult;\n    };\n\n    $.spectrum = { };\n    $.spectrum.localization = { };\n    $.spectrum.palettes = { };\n\n    $.fn.spectrum.processNativeColorInputs = function () {\n        var colorInputs = $(\"input[type=color]\");\n        if (colorInputs.length && !inputTypeColorSupport()) {\n            colorInputs.spectrum({\n                preferredFormat: \"hex6\"\n            });\n        }\n    };\n\n    // TinyColor v1.1.2\n    // https://github.com/bgrins/TinyColor\n    // Brian Grinstead, MIT License\n\n    (function() {\n\n        var trimLeft = /^[\\s,#]+/,\n            trimRight = /\\s+$/,\n            tinyCounter = 0,\n            math = Math,\n            mathRound = math.round,\n            mathMin = math.min,\n            mathMax = math.max,\n            mathRandom = math.random;\n\n        var tinycolor = function(color, opts) {\n\n            color = (color) ? color : '';\n            opts = opts || { };\n\n            // If input is already a tinycolor, return itself\n            if (color instanceof tinycolor) {\n                return color;\n            }\n            // If we are called as a function, call using new instead\n            if (!(this instanceof tinycolor)) {\n                return new tinycolor(color, opts);\n            }\n\n            var rgb = inputToRGB(color);\n            this._originalInput = color,\n                this._r = rgb.r,\n                this._g = rgb.g,\n                this._b = rgb.b,\n                this._a = rgb.a,\n                this._roundA = mathRound(100*this._a) / 100,\n                this._format = opts.format || rgb.format;\n            this._gradientType = opts.gradientType;\n\n            // Don't let the range of [0,255] come back in [0,1].\n            // Potentially lose a little bit of precision here, but will fix issues where\n            // .5 gets interpreted as half of the total, instead of half of 1\n            // If it was supposed to be 128, this was already taken care of by `inputToRgb`\n            if (this._r < 1) { this._r = mathRound(this._r); }\n            if (this._g < 1) { this._g = mathRound(this._g); }\n            if (this._b < 1) { this._b = mathRound(this._b); }\n\n            this._ok = rgb.ok;\n            this._tc_id = tinyCounter++;\n        };\n\n        tinycolor.prototype = {\n            isDark: function() {\n                return this.getBrightness() < 128;\n            },\n            isLight: function() {\n                return !this.isDark();\n            },\n            isValid: function() {\n                return this._ok;\n            },\n            getOriginalInput: function() {\n                return this._originalInput;\n            },\n            getFormat: function() {\n                return this._format;\n            },\n            getAlpha: function() {\n                return this._a;\n            },\n            getBrightness: function() {\n                var rgb = this.toRgb();\n                return (rgb.r * 299 + rgb.g * 587 + rgb.b * 114) / 1000;\n            },\n            setAlpha: function(value) {\n                this._a = boundAlpha(value);\n                this._roundA = mathRound(100*this._a) / 100;\n                return this;\n            },\n            toHsv: function() {\n                var hsv = rgbToHsv(this._r, this._g, this._b);\n                return { h: hsv.h * 360, s: hsv.s, v: hsv.v, a: this._a };\n            },\n            toHsvString: function() {\n                var hsv = rgbToHsv(this._r, this._g, this._b);\n                var h = mathRound(hsv.h * 360), s = mathRound(hsv.s * 100), v = mathRound(hsv.v * 100);\n                return (this._a == 1) ?\n                    \"hsv(\"  + h + \", \" + s + \"%, \" + v + \"%)\" :\n                    \"hsva(\" + h + \", \" + s + \"%, \" + v + \"%, \"+ this._roundA + \")\";\n            },\n            toHsl: function() {\n                var hsl = rgbToHsl(this._r, this._g, this._b);\n                return { h: hsl.h * 360, s: hsl.s, l: hsl.l, a: this._a };\n            },\n            toHslString: function() {\n                var hsl = rgbToHsl(this._r, this._g, this._b);\n                var h = mathRound(hsl.h * 360), s = mathRound(hsl.s * 100), l = mathRound(hsl.l * 100);\n                return (this._a == 1) ?\n                    \"hsl(\"  + h + \", \" + s + \"%, \" + l + \"%)\" :\n                    \"hsla(\" + h + \", \" + s + \"%, \" + l + \"%, \"+ this._roundA + \")\";\n            },\n            toHex: function(allow3Char) {\n                return rgbToHex(this._r, this._g, this._b, allow3Char);\n            },\n            toHexString: function(allow3Char) {\n                return '#' + this.toHex(allow3Char);\n            },\n            toHex8: function() {\n                return rgbaToHex(this._r, this._g, this._b, this._a);\n            },\n            toHex8String: function() {\n                return '#' + this.toHex8();\n            },\n            toRgb: function() {\n                return { r: mathRound(this._r), g: mathRound(this._g), b: mathRound(this._b), a: this._a };\n            },\n            toRgbString: function() {\n                return (this._a == 1) ?\n                    \"rgb(\"  + mathRound(this._r) + \", \" + mathRound(this._g) + \", \" + mathRound(this._b) + \")\" :\n                    \"rgba(\" + mathRound(this._r) + \", \" + mathRound(this._g) + \", \" + mathRound(this._b) + \", \" + this._roundA + \")\";\n            },\n            toPercentageRgb: function() {\n                return { r: mathRound(bound01(this._r, 255) * 100) + \"%\", g: mathRound(bound01(this._g, 255) * 100) + \"%\", b: mathRound(bound01(this._b, 255) * 100) + \"%\", a: this._a };\n            },\n            toPercentageRgbString: function() {\n                return (this._a == 1) ?\n                    \"rgb(\"  + mathRound(bound01(this._r, 255) * 100) + \"%, \" + mathRound(bound01(this._g, 255) * 100) + \"%, \" + mathRound(bound01(this._b, 255) * 100) + \"%)\" :\n                    \"rgba(\" + mathRound(bound01(this._r, 255) * 100) + \"%, \" + mathRound(bound01(this._g, 255) * 100) + \"%, \" + mathRound(bound01(this._b, 255) * 100) + \"%, \" + this._roundA + \")\";\n            },\n            toName: function() {\n                if (this._a === 0) {\n                    return \"transparent\";\n                }\n\n                if (this._a < 1) {\n                    return false;\n                }\n\n                return hexNames[rgbToHex(this._r, this._g, this._b, true)] || false;\n            },\n            toFilter: function(secondColor) {\n                var hex8String = '#' + rgbaToHex(this._r, this._g, this._b, this._a);\n                var secondHex8String = hex8String;\n                var gradientType = this._gradientType ? \"GradientType = 1, \" : \"\";\n\n                if (secondColor) {\n                    var s = tinycolor(secondColor);\n                    secondHex8String = s.toHex8String();\n                }\n\n                return \"progid:DXImageTransform.Microsoft.gradient(\"+gradientType+\"startColorstr=\"+hex8String+\",endColorstr=\"+secondHex8String+\")\";\n            },\n            toString: function(format) {\n                var formatSet = !!format;\n                format = format || this._format;\n\n                var formattedString = false;\n                var hasAlpha = this._a < 1 && this._a >= 0;\n                var needsAlphaFormat = !formatSet && hasAlpha && (format === \"hex\" || format === \"hex6\" || format === \"hex3\" || format === \"name\");\n\n                if (needsAlphaFormat) {\n                    // Special case for \"transparent\", all other non-alpha formats\n                    // will return rgba when there is transparency.\n                    if (format === \"name\" && this._a === 0) {\n                        return this.toName();\n                    }\n                    return this.toRgbString();\n                }\n                if (format === \"rgb\") {\n                    formattedString = this.toRgbString();\n                }\n                if (format === \"prgb\") {\n                    formattedString = this.toPercentageRgbString();\n                }\n                if (format === \"hex\" || format === \"hex6\") {\n                    formattedString = this.toHexString();\n                }\n                if (format === \"hex3\") {\n                    formattedString = this.toHexString(true);\n                }\n                if (format === \"hex8\") {\n                    formattedString = this.toHex8String();\n                }\n                if (format === \"name\") {\n                    formattedString = this.toName();\n                }\n                if (format === \"hsl\") {\n                    formattedString = this.toHslString();\n                }\n                if (format === \"hsv\") {\n                    formattedString = this.toHsvString();\n                }\n\n                return formattedString || this.toHexString();\n            },\n\n            _applyModification: function(fn, args) {\n                var color = fn.apply(null, [this].concat([].slice.call(args)));\n                this._r = color._r;\n                this._g = color._g;\n                this._b = color._b;\n                this.setAlpha(color._a);\n                return this;\n            },\n            lighten: function() {\n                return this._applyModification(lighten, arguments);\n            },\n            brighten: function() {\n                return this._applyModification(brighten, arguments);\n            },\n            darken: function() {\n                return this._applyModification(darken, arguments);\n            },\n            desaturate: function() {\n                return this._applyModification(desaturate, arguments);\n            },\n            saturate: function() {\n                return this._applyModification(saturate, arguments);\n            },\n            greyscale: function() {\n                return this._applyModification(greyscale, arguments);\n            },\n            spin: function() {\n                return this._applyModification(spin, arguments);\n            },\n\n            _applyCombination: function(fn, args) {\n                return fn.apply(null, [this].concat([].slice.call(args)));\n            },\n            analogous: function() {\n                return this._applyCombination(analogous, arguments);\n            },\n            complement: function() {\n                return this._applyCombination(complement, arguments);\n            },\n            monochromatic: function() {\n                return this._applyCombination(monochromatic, arguments);\n            },\n            splitcomplement: function() {\n                return this._applyCombination(splitcomplement, arguments);\n            },\n            triad: function() {\n                return this._applyCombination(triad, arguments);\n            },\n            tetrad: function() {\n                return this._applyCombination(tetrad, arguments);\n            }\n        };\n\n        // If input is an object, force 1 into \"1.0\" to handle ratios properly\n        // String input requires \"1.0\" as input, so 1 will be treated as 1\n        tinycolor.fromRatio = function(color, opts) {\n            if (typeof color == \"object\") {\n                var newColor = {};\n                for (var i in color) {\n                    if (color.hasOwnProperty(i)) {\n                        if (i === \"a\") {\n                            newColor[i] = color[i];\n                        }\n                        else {\n                            newColor[i] = convertToPercentage(color[i]);\n                        }\n                    }\n                }\n                color = newColor;\n            }\n\n            return tinycolor(color, opts);\n        };\n\n        // Given a string or object, convert that input to RGB\n        // Possible string inputs:\n        //\n        //     \"red\"\n        //     \"#f00\" or \"f00\"\n        //     \"#ff0000\" or \"ff0000\"\n        //     \"#ff000000\" or \"ff000000\"\n        //     \"rgb 255 0 0\" or \"rgb (255, 0, 0)\"\n        //     \"rgb 1.0 0 0\" or \"rgb (1, 0, 0)\"\n        //     \"rgba (255, 0, 0, 1)\" or \"rgba 255, 0, 0, 1\"\n        //     \"rgba (1.0, 0, 0, 1)\" or \"rgba 1.0, 0, 0, 1\"\n        //     \"hsl(0, 100%, 50%)\" or \"hsl 0 100% 50%\"\n        //     \"hsla(0, 100%, 50%, 1)\" or \"hsla 0 100% 50%, 1\"\n        //     \"hsv(0, 100%, 100%)\" or \"hsv 0 100% 100%\"\n        //\n        function inputToRGB(color) {\n\n            var rgb = { r: 0, g: 0, b: 0 };\n            var a = 1;\n            var ok = false;\n            var format = false;\n\n            if (typeof color == \"string\") {\n                color = stringInputToObject(color);\n            }\n\n            if (typeof color == \"object\") {\n                if (color.hasOwnProperty(\"r\") && color.hasOwnProperty(\"g\") && color.hasOwnProperty(\"b\")) {\n                    rgb = rgbToRgb(color.r, color.g, color.b);\n                    ok = true;\n                    format = String(color.r).substr(-1) === \"%\" ? \"prgb\" : \"rgb\";\n                }\n                else if (color.hasOwnProperty(\"h\") && color.hasOwnProperty(\"s\") && color.hasOwnProperty(\"v\")) {\n                    color.s = convertToPercentage(color.s);\n                    color.v = convertToPercentage(color.v);\n                    rgb = hsvToRgb(color.h, color.s, color.v);\n                    ok = true;\n                    format = \"hsv\";\n                }\n                else if (color.hasOwnProperty(\"h\") && color.hasOwnProperty(\"s\") && color.hasOwnProperty(\"l\")) {\n                    color.s = convertToPercentage(color.s);\n                    color.l = convertToPercentage(color.l);\n                    rgb = hslToRgb(color.h, color.s, color.l);\n                    ok = true;\n                    format = \"hsl\";\n                }\n\n                if (color.hasOwnProperty(\"a\")) {\n                    a = color.a;\n                }\n            }\n\n            a = boundAlpha(a);\n\n            return {\n                ok: ok,\n                format: color.format || format,\n                r: mathMin(255, mathMax(rgb.r, 0)),\n                g: mathMin(255, mathMax(rgb.g, 0)),\n                b: mathMin(255, mathMax(rgb.b, 0)),\n                a: a\n            };\n        }\n\n\n        // Conversion Functions\n        // --------------------\n\n        // `rgbToHsl`, `rgbToHsv`, `hslToRgb`, `hsvToRgb` modified from:\n        // <http://mjijackson.com/2008/02/rgb-to-hsl-and-rgb-to-hsv-color-model-conversion-algorithms-in-javascript>\n\n        // `rgbToRgb`\n        // Handle bounds / percentage checking to conform to CSS color spec\n        // <http://www.w3.org/TR/css3-color/>\n        // *Assumes:* r, g, b in [0, 255] or [0, 1]\n        // *Returns:* { r, g, b } in [0, 255]\n        function rgbToRgb(r, g, b){\n            return {\n                r: bound01(r, 255) * 255,\n                g: bound01(g, 255) * 255,\n                b: bound01(b, 255) * 255\n            };\n        }\n\n        // `rgbToHsl`\n        // Converts an RGB color value to HSL.\n        // *Assumes:* r, g, and b are contained in [0, 255] or [0, 1]\n        // *Returns:* { h, s, l } in [0,1]\n        function rgbToHsl(r, g, b) {\n\n            r = bound01(r, 255);\n            g = bound01(g, 255);\n            b = bound01(b, 255);\n\n            var max = mathMax(r, g, b), min = mathMin(r, g, b);\n            var h, s, l = (max + min) / 2;\n\n            if(max == min) {\n                h = s = 0; // achromatic\n            }\n            else {\n                var d = max - min;\n                s = l > 0.5 ? d / (2 - max - min) : d / (max + min);\n                switch(max) {\n                    case r: h = (g - b) / d + (g < b ? 6 : 0); break;\n                    case g: h = (b - r) / d + 2; break;\n                    case b: h = (r - g) / d + 4; break;\n                }\n\n                h /= 6;\n            }\n\n            return { h: h, s: s, l: l };\n        }\n\n        // `hslToRgb`\n        // Converts an HSL color value to RGB.\n        // *Assumes:* h is contained in [0, 1] or [0, 360] and s and l are contained [0, 1] or [0, 100]\n        // *Returns:* { r, g, b } in the set [0, 255]\n        function hslToRgb(h, s, l) {\n            var r, g, b;\n\n            h = bound01(h, 360);\n            s = bound01(s, 100);\n            l = bound01(l, 100);\n\n            function hue2rgb(p, q, t) {\n                if(t < 0) t += 1;\n                if(t > 1) t -= 1;\n                if(t < 1/6) return p + (q - p) * 6 * t;\n                if(t < 1/2) return q;\n                if(t < 2/3) return p + (q - p) * (2/3 - t) * 6;\n                return p;\n            }\n\n            if(s === 0) {\n                r = g = b = l; // achromatic\n            }\n            else {\n                var q = l < 0.5 ? l * (1 + s) : l + s - l * s;\n                var p = 2 * l - q;\n                r = hue2rgb(p, q, h + 1/3);\n                g = hue2rgb(p, q, h);\n                b = hue2rgb(p, q, h - 1/3);\n            }\n\n            return { r: r * 255, g: g * 255, b: b * 255 };\n        }\n\n        // `rgbToHsv`\n        // Converts an RGB color value to HSV\n        // *Assumes:* r, g, and b are contained in the set [0, 255] or [0, 1]\n        // *Returns:* { h, s, v } in [0,1]\n        function rgbToHsv(r, g, b) {\n\n            r = bound01(r, 255);\n            g = bound01(g, 255);\n            b = bound01(b, 255);\n\n            var max = mathMax(r, g, b), min = mathMin(r, g, b);\n            var h, s, v = max;\n\n            var d = max - min;\n            s = max === 0 ? 0 : d / max;\n\n            if(max == min) {\n                h = 0; // achromatic\n            }\n            else {\n                switch(max) {\n                    case r: h = (g - b) / d + (g < b ? 6 : 0); break;\n                    case g: h = (b - r) / d + 2; break;\n                    case b: h = (r - g) / d + 4; break;\n                }\n                h /= 6;\n            }\n            return { h: h, s: s, v: v };\n        }\n\n        // `hsvToRgb`\n        // Converts an HSV color value to RGB.\n        // *Assumes:* h is contained in [0, 1] or [0, 360] and s and v are contained in [0, 1] or [0, 100]\n        // *Returns:* { r, g, b } in the set [0, 255]\n        function hsvToRgb(h, s, v) {\n\n            h = bound01(h, 360) * 6;\n            s = bound01(s, 100);\n            v = bound01(v, 100);\n\n            var i = math.floor(h),\n                f = h - i,\n                p = v * (1 - s),\n                q = v * (1 - f * s),\n                t = v * (1 - (1 - f) * s),\n                mod = i % 6,\n                r = [v, q, p, p, t, v][mod],\n                g = [t, v, v, q, p, p][mod],\n                b = [p, p, t, v, v, q][mod];\n\n            return { r: r * 255, g: g * 255, b: b * 255 };\n        }\n\n        // `rgbToHex`\n        // Converts an RGB color to hex\n        // Assumes r, g, and b are contained in the set [0, 255]\n        // Returns a 3 or 6 character hex\n        function rgbToHex(r, g, b, allow3Char) {\n\n            var hex = [\n                pad2(mathRound(r).toString(16)),\n                pad2(mathRound(g).toString(16)),\n                pad2(mathRound(b).toString(16))\n            ];\n\n            // Return a 3 character hex if possible\n            if (allow3Char && hex[0].charAt(0) == hex[0].charAt(1) && hex[1].charAt(0) == hex[1].charAt(1) && hex[2].charAt(0) == hex[2].charAt(1)) {\n                return hex[0].charAt(0) + hex[1].charAt(0) + hex[2].charAt(0);\n            }\n\n            return hex.join(\"\");\n        }\n        // `rgbaToHex`\n        // Converts an RGBA color plus alpha transparency to hex\n        // Assumes r, g, b and a are contained in the set [0, 255]\n        // Returns an 8 character hex\n        function rgbaToHex(r, g, b, a) {\n\n            var hex = [\n                pad2(convertDecimalToHex(a)),\n                pad2(mathRound(r).toString(16)),\n                pad2(mathRound(g).toString(16)),\n                pad2(mathRound(b).toString(16))\n            ];\n\n            return hex.join(\"\");\n        }\n\n        // `equals`\n        // Can be called with any tinycolor input\n        tinycolor.equals = function (color1, color2) {\n            if (!color1 || !color2) { return false; }\n            return tinycolor(color1).toRgbString() == tinycolor(color2).toRgbString();\n        };\n        tinycolor.random = function() {\n            return tinycolor.fromRatio({\n                r: mathRandom(),\n                g: mathRandom(),\n                b: mathRandom()\n            });\n        };\n\n\n        // Modification Functions\n        // ----------------------\n        // Thanks to less.js for some of the basics here\n        // <https://github.com/cloudhead/less.js/blob/master/lib/less/functions.js>\n\n        function desaturate(color, amount) {\n            amount = (amount === 0) ? 0 : (amount || 10);\n            var hsl = tinycolor(color).toHsl();\n            hsl.s -= amount / 100;\n            hsl.s = clamp01(hsl.s);\n            return tinycolor(hsl);\n        }\n\n        function saturate(color, amount) {\n            amount = (amount === 0) ? 0 : (amount || 10);\n            var hsl = tinycolor(color).toHsl();\n            hsl.s += amount / 100;\n            hsl.s = clamp01(hsl.s);\n            return tinycolor(hsl);\n        }\n\n        function greyscale(color) {\n            return tinycolor(color).desaturate(100);\n        }\n\n        function lighten (color, amount) {\n            amount = (amount === 0) ? 0 : (amount || 10);\n            var hsl = tinycolor(color).toHsl();\n            hsl.l += amount / 100;\n            hsl.l = clamp01(hsl.l);\n            return tinycolor(hsl);\n        }\n\n        function brighten(color, amount) {\n            amount = (amount === 0) ? 0 : (amount || 10);\n            var rgb = tinycolor(color).toRgb();\n            rgb.r = mathMax(0, mathMin(255, rgb.r - mathRound(255 * - (amount / 100))));\n            rgb.g = mathMax(0, mathMin(255, rgb.g - mathRound(255 * - (amount / 100))));\n            rgb.b = mathMax(0, mathMin(255, rgb.b - mathRound(255 * - (amount / 100))));\n            return tinycolor(rgb);\n        }\n\n        function darken (color, amount) {\n            amount = (amount === 0) ? 0 : (amount || 10);\n            var hsl = tinycolor(color).toHsl();\n            hsl.l -= amount / 100;\n            hsl.l = clamp01(hsl.l);\n            return tinycolor(hsl);\n        }\n\n        // Spin takes a positive or negative amount within [-360, 360] indicating the change of hue.\n        // Values outside of this range will be wrapped into this range.\n        function spin(color, amount) {\n            var hsl = tinycolor(color).toHsl();\n            var hue = (mathRound(hsl.h) + amount) % 360;\n            hsl.h = hue < 0 ? 360 + hue : hue;\n            return tinycolor(hsl);\n        }\n\n        // Combination Functions\n        // ---------------------\n        // Thanks to jQuery xColor for some of the ideas behind these\n        // <https://github.com/infusion/jQuery-xcolor/blob/master/jquery.xcolor.js>\n\n        function complement(color) {\n            var hsl = tinycolor(color).toHsl();\n            hsl.h = (hsl.h + 180) % 360;\n            return tinycolor(hsl);\n        }\n\n        function triad(color) {\n            var hsl = tinycolor(color).toHsl();\n            var h = hsl.h;\n            return [\n                tinycolor(color),\n                tinycolor({ h: (h + 120) % 360, s: hsl.s, l: hsl.l }),\n                tinycolor({ h: (h + 240) % 360, s: hsl.s, l: hsl.l })\n            ];\n        }\n\n        function tetrad(color) {\n            var hsl = tinycolor(color).toHsl();\n            var h = hsl.h;\n            return [\n                tinycolor(color),\n                tinycolor({ h: (h + 90) % 360, s: hsl.s, l: hsl.l }),\n                tinycolor({ h: (h + 180) % 360, s: hsl.s, l: hsl.l }),\n                tinycolor({ h: (h + 270) % 360, s: hsl.s, l: hsl.l })\n            ];\n        }\n\n        function splitcomplement(color) {\n            var hsl = tinycolor(color).toHsl();\n            var h = hsl.h;\n            return [\n                tinycolor(color),\n                tinycolor({ h: (h + 72) % 360, s: hsl.s, l: hsl.l}),\n                tinycolor({ h: (h + 216) % 360, s: hsl.s, l: hsl.l})\n            ];\n        }\n\n        function analogous(color, results, slices) {\n            results = results || 6;\n            slices = slices || 30;\n\n            var hsl = tinycolor(color).toHsl();\n            var part = 360 / slices;\n            var ret = [tinycolor(color)];\n\n            for (hsl.h = ((hsl.h - (part * results >> 1)) + 720) % 360; --results; ) {\n                hsl.h = (hsl.h + part) % 360;\n                ret.push(tinycolor(hsl));\n            }\n            return ret;\n        }\n\n        function monochromatic(color, results) {\n            results = results || 6;\n            var hsv = tinycolor(color).toHsv();\n            var h = hsv.h, s = hsv.s, v = hsv.v;\n            var ret = [];\n            var modification = 1 / results;\n\n            while (results--) {\n                ret.push(tinycolor({ h: h, s: s, v: v}));\n                v = (v + modification) % 1;\n            }\n\n            return ret;\n        }\n\n        // Utility Functions\n        // ---------------------\n\n        tinycolor.mix = function(color1, color2, amount) {\n            amount = (amount === 0) ? 0 : (amount || 50);\n\n            var rgb1 = tinycolor(color1).toRgb();\n            var rgb2 = tinycolor(color2).toRgb();\n\n            var p = amount / 100;\n            var w = p * 2 - 1;\n            var a = rgb2.a - rgb1.a;\n\n            var w1;\n\n            if (w * a == -1) {\n                w1 = w;\n            } else {\n                w1 = (w + a) / (1 + w * a);\n            }\n\n            w1 = (w1 + 1) / 2;\n\n            var w2 = 1 - w1;\n\n            var rgba = {\n                r: rgb2.r * w1 + rgb1.r * w2,\n                g: rgb2.g * w1 + rgb1.g * w2,\n                b: rgb2.b * w1 + rgb1.b * w2,\n                a: rgb2.a * p  + rgb1.a * (1 - p)\n            };\n\n            return tinycolor(rgba);\n        };\n\n\n        // Readability Functions\n        // ---------------------\n        // <http://www.w3.org/TR/AERT#color-contrast>\n\n        // `readability`\n        // Analyze the 2 colors and returns an object with the following properties:\n        //    `brightness`: difference in brightness between the two colors\n        //    `color`: difference in color/hue between the two colors\n        tinycolor.readability = function(color1, color2) {\n            var c1 = tinycolor(color1);\n            var c2 = tinycolor(color2);\n            var rgb1 = c1.toRgb();\n            var rgb2 = c2.toRgb();\n            var brightnessA = c1.getBrightness();\n            var brightnessB = c2.getBrightness();\n            var colorDiff = (\n                Math.max(rgb1.r, rgb2.r) - Math.min(rgb1.r, rgb2.r) +\n                Math.max(rgb1.g, rgb2.g) - Math.min(rgb1.g, rgb2.g) +\n                Math.max(rgb1.b, rgb2.b) - Math.min(rgb1.b, rgb2.b)\n            );\n\n            return {\n                brightness: Math.abs(brightnessA - brightnessB),\n                color: colorDiff\n            };\n        };\n\n        // `readable`\n        // http://www.w3.org/TR/AERT#color-contrast\n        // Ensure that foreground and background color combinations provide sufficient contrast.\n        // *Example*\n        //    tinycolor.isReadable(\"#000\", \"#111\") => false\n        tinycolor.isReadable = function(color1, color2) {\n            var readability = tinycolor.readability(color1, color2);\n            return readability.brightness > 125 && readability.color > 500;\n        };\n\n        // `mostReadable`\n        // Given a base color and a list of possible foreground or background\n        // colors for that base, returns the most readable color.\n        // *Example*\n        //    tinycolor.mostReadable(\"#123\", [\"#fff\", \"#000\"]) => \"#000\"\n        tinycolor.mostReadable = function(baseColor, colorList) {\n            var bestColor = null;\n            var bestScore = 0;\n            var bestIsReadable = false;\n            for (var i=0; i < colorList.length; i++) {\n\n                // We normalize both around the \"acceptable\" breaking point,\n                // but rank brightness constrast higher than hue.\n\n                var readability = tinycolor.readability(baseColor, colorList[i]);\n                var readable = readability.brightness > 125 && readability.color > 500;\n                var score = 3 * (readability.brightness / 125) + (readability.color / 500);\n\n                if ((readable && ! bestIsReadable) ||\n                    (readable && bestIsReadable && score > bestScore) ||\n                    ((! readable) && (! bestIsReadable) && score > bestScore)) {\n                    bestIsReadable = readable;\n                    bestScore = score;\n                    bestColor = tinycolor(colorList[i]);\n                }\n            }\n            return bestColor;\n        };\n\n\n        // Big List of Colors\n        // ------------------\n        // <http://www.w3.org/TR/css3-color/#svg-color>\n        var names = tinycolor.names = {\n            aliceblue: \"f0f8ff\",\n            antiquewhite: \"faebd7\",\n            aqua: \"0ff\",\n            aquamarine: \"7fffd4\",\n            azure: \"f0ffff\",\n            beige: \"f5f5dc\",\n            bisque: \"ffe4c4\",\n            black: \"000\",\n            blanchedalmond: \"ffebcd\",\n            blue: \"00f\",\n            blueviolet: \"8a2be2\",\n            brown: \"a52a2a\",\n            burlywood: \"deb887\",\n            burntsienna: \"ea7e5d\",\n            cadetblue: \"5f9ea0\",\n            chartreuse: \"7fff00\",\n            chocolate: \"d2691e\",\n            coral: \"ff7f50\",\n            cornflowerblue: \"6495ed\",\n            cornsilk: \"fff8dc\",\n            crimson: \"dc143c\",\n            cyan: \"0ff\",\n            darkblue: \"00008b\",\n            darkcyan: \"008b8b\",\n            darkgoldenrod: \"b8860b\",\n            darkgray: \"a9a9a9\",\n            darkgreen: \"006400\",\n            darkgrey: \"a9a9a9\",\n            darkkhaki: \"bdb76b\",\n            darkmagenta: \"8b008b\",\n            darkolivegreen: \"556b2f\",\n            darkorange: \"ff8c00\",\n            darkorchid: \"9932cc\",\n            darkred: \"8b0000\",\n            darksalmon: \"e9967a\",\n            darkseagreen: \"8fbc8f\",\n            darkslateblue: \"483d8b\",\n            darkslategray: \"2f4f4f\",\n            darkslategrey: \"2f4f4f\",\n            darkturquoise: \"00ced1\",\n            darkviolet: \"9400d3\",\n            deeppink: \"ff1493\",\n            deepskyblue: \"00bfff\",\n            dimgray: \"696969\",\n            dimgrey: \"696969\",\n            dodgerblue: \"1e90ff\",\n            firebrick: \"b22222\",\n            floralwhite: \"fffaf0\",\n            forestgreen: \"228b22\",\n            fuchsia: \"f0f\",\n            gainsboro: \"dcdcdc\",\n            ghostwhite: \"f8f8ff\",\n            gold: \"ffd700\",\n            goldenrod: \"daa520\",\n            gray: \"808080\",\n            green: \"008000\",\n            greenyellow: \"adff2f\",\n            grey: \"808080\",\n            honeydew: \"f0fff0\",\n            hotpink: \"ff69b4\",\n            indianred: \"cd5c5c\",\n            indigo: \"4b0082\",\n            ivory: \"fffff0\",\n            khaki: \"f0e68c\",\n            lavender: \"e6e6fa\",\n            lavenderblush: \"fff0f5\",\n            lawngreen: \"7cfc00\",\n            lemonchiffon: \"fffacd\",\n            lightblue: \"add8e6\",\n            lightcoral: \"f08080\",\n            lightcyan: \"e0ffff\",\n            lightgoldenrodyellow: \"fafad2\",\n            lightgray: \"d3d3d3\",\n            lightgreen: \"90ee90\",\n            lightgrey: \"d3d3d3\",\n            lightpink: \"ffb6c1\",\n            lightsalmon: \"ffa07a\",\n            lightseagreen: \"20b2aa\",\n            lightskyblue: \"87cefa\",\n            lightslategray: \"789\",\n            lightslategrey: \"789\",\n            lightsteelblue: \"b0c4de\",\n            lightyellow: \"ffffe0\",\n            lime: \"0f0\",\n            limegreen: \"32cd32\",\n            linen: \"faf0e6\",\n            magenta: \"f0f\",\n            maroon: \"800000\",\n            mediumaquamarine: \"66cdaa\",\n            mediumblue: \"0000cd\",\n            mediumorchid: \"ba55d3\",\n            mediumpurple: \"9370db\",\n            mediumseagreen: \"3cb371\",\n            mediumslateblue: \"7b68ee\",\n            mediumspringgreen: \"00fa9a\",\n            mediumturquoise: \"48d1cc\",\n            mediumvioletred: \"c71585\",\n            midnightblue: \"191970\",\n            mintcream: \"f5fffa\",\n            mistyrose: \"ffe4e1\",\n            moccasin: \"ffe4b5\",\n            navajowhite: \"ffdead\",\n            navy: \"000080\",\n            oldlace: \"fdf5e6\",\n            olive: \"808000\",\n            olivedrab: \"6b8e23\",\n            orange: \"ffa500\",\n            orangered: \"ff4500\",\n            orchid: \"da70d6\",\n            palegoldenrod: \"eee8aa\",\n            palegreen: \"98fb98\",\n            paleturquoise: \"afeeee\",\n            palevioletred: \"db7093\",\n            papayawhip: \"ffefd5\",\n            peachpuff: \"ffdab9\",\n            peru: \"cd853f\",\n            pink: \"ffc0cb\",\n            plum: \"dda0dd\",\n            powderblue: \"b0e0e6\",\n            purple: \"800080\",\n            rebeccapurple: \"663399\",\n            red: \"f00\",\n            rosybrown: \"bc8f8f\",\n            royalblue: \"4169e1\",\n            saddlebrown: \"8b4513\",\n            salmon: \"fa8072\",\n            sandybrown: \"f4a460\",\n            seagreen: \"2e8b57\",\n            seashell: \"fff5ee\",\n            sienna: \"a0522d\",\n            silver: \"c0c0c0\",\n            skyblue: \"87ceeb\",\n            slateblue: \"6a5acd\",\n            slategray: \"708090\",\n            slategrey: \"708090\",\n            snow: \"fffafa\",\n            springgreen: \"00ff7f\",\n            steelblue: \"4682b4\",\n            tan: \"d2b48c\",\n            teal: \"008080\",\n            thistle: \"d8bfd8\",\n            tomato: \"ff6347\",\n            turquoise: \"40e0d0\",\n            violet: \"ee82ee\",\n            wheat: \"f5deb3\",\n            white: \"fff\",\n            whitesmoke: \"f5f5f5\",\n            yellow: \"ff0\",\n            yellowgreen: \"9acd32\"\n        };\n\n        // Make it easy to access colors via `hexNames[hex]`\n        var hexNames = tinycolor.hexNames = flip(names);\n\n\n        // Utilities\n        // ---------\n\n        // `{ 'name1': 'val1' }` becomes `{ 'val1': 'name1' }`\n        function flip(o) {\n            var flipped = { };\n            for (var i in o) {\n                if (o.hasOwnProperty(i)) {\n                    flipped[o[i]] = i;\n                }\n            }\n            return flipped;\n        }\n\n        // Return a valid alpha value [0,1] with all invalid values being set to 1\n        function boundAlpha(a) {\n            a = parseFloat(a);\n\n            if (isNaN(a) || a < 0 || a > 1) {\n                a = 1;\n            }\n\n            return a;\n        }\n\n        // Take input from [0, n] and return it as [0, 1]\n        function bound01(n, max) {\n            if (isOnePointZero(n)) { n = \"100%\"; }\n\n            var processPercent = isPercentage(n);\n            n = mathMin(max, mathMax(0, parseFloat(n)));\n\n            // Automatically convert percentage into number\n            if (processPercent) {\n                n = parseInt(n * max, 10) / 100;\n            }\n\n            // Handle floating point rounding errors\n            if ((math.abs(n - max) < 0.000001)) {\n                return 1;\n            }\n\n            // Convert into [0, 1] range if it isn't already\n            return (n % max) / parseFloat(max);\n        }\n\n        // Force a number between 0 and 1\n        function clamp01(val) {\n            return mathMin(1, mathMax(0, val));\n        }\n\n        // Parse a base-16 hex value into a base-10 integer\n        function parseIntFromHex(val) {\n            return parseInt(val, 16);\n        }\n\n        // Need to handle 1.0 as 100%, since once it is a number, there is no difference between it and 1\n        // <http://stackoverflow.com/questions/7422072/javascript-how-to-detect-number-as-a-decimal-including-1-0>\n        function isOnePointZero(n) {\n            return typeof n == \"string\" && n.indexOf('.') != -1 && parseFloat(n) === 1;\n        }\n\n        // Check to see if string passed in is a percentage\n        function isPercentage(n) {\n            return typeof n === \"string\" && n.indexOf('%') != -1;\n        }\n\n        // Force a hex value to have 2 characters\n        function pad2(c) {\n            return c.length == 1 ? '0' + c : '' + c;\n        }\n\n        // Replace a decimal with it's percentage value\n        function convertToPercentage(n) {\n            if (n <= 1) {\n                n = (n * 100) + \"%\";\n            }\n\n            return n;\n        }\n\n        // Converts a decimal to a hex value\n        function convertDecimalToHex(d) {\n            return Math.round(parseFloat(d) * 255).toString(16);\n        }\n        // Converts a hex value to a decimal\n        function convertHexToDecimal(h) {\n            return (parseIntFromHex(h) / 255);\n        }\n\n        var matchers = (function() {\n\n            // <http://www.w3.org/TR/css3-values/#integers>\n            var CSS_INTEGER = \"[-\\\\+]?\\\\d+%?\";\n\n            // <http://www.w3.org/TR/css3-values/#number-value>\n            var CSS_NUMBER = \"[-\\\\+]?\\\\d*\\\\.\\\\d+%?\";\n\n            // Allow positive/negative integer/number.  Don't capture the either/or, just the entire outcome.\n            var CSS_UNIT = \"(?:\" + CSS_NUMBER + \")|(?:\" + CSS_INTEGER + \")\";\n\n            // Actual matching.\n            // Parentheses and commas are optional, but not required.\n            // Whitespace can take the place of commas or opening paren\n            var PERMISSIVE_MATCH3 = \"[\\\\s|\\\\(]+(\" + CSS_UNIT + \")[,|\\\\s]+(\" + CSS_UNIT + \")[,|\\\\s]+(\" + CSS_UNIT + \")\\\\s*\\\\)?\";\n            var PERMISSIVE_MATCH4 = \"[\\\\s|\\\\(]+(\" + CSS_UNIT + \")[,|\\\\s]+(\" + CSS_UNIT + \")[,|\\\\s]+(\" + CSS_UNIT + \")[,|\\\\s]+(\" + CSS_UNIT + \")\\\\s*\\\\)?\";\n\n            return {\n                rgb: new RegExp(\"rgb\" + PERMISSIVE_MATCH3),\n                rgba: new RegExp(\"rgba\" + PERMISSIVE_MATCH4),\n                hsl: new RegExp(\"hsl\" + PERMISSIVE_MATCH3),\n                hsla: new RegExp(\"hsla\" + PERMISSIVE_MATCH4),\n                hsv: new RegExp(\"hsv\" + PERMISSIVE_MATCH3),\n                hsva: new RegExp(\"hsva\" + PERMISSIVE_MATCH4),\n                hex3: /^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,\n                hex6: /^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,\n                hex8: /^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/\n            };\n        })();\n\n        // `stringInputToObject`\n        // Permissive string parsing.  Take in a number of formats, and output an object\n        // based on detected format.  Returns `{ r, g, b }` or `{ h, s, l }` or `{ h, s, v}`\n        function stringInputToObject(color) {\n\n            color = color.replace(trimLeft,'').replace(trimRight, '').toLowerCase();\n            var named = false;\n            if (names[color]) {\n                color = names[color];\n                named = true;\n            }\n            else if (color == 'transparent') {\n                return { r: 0, g: 0, b: 0, a: 0, format: \"name\" };\n            }\n\n            // Try to match string input using regular expressions.\n            // Keep most of the number bounding out of this function - don't worry about [0,1] or [0,100] or [0,360]\n            // Just return an object and let the conversion functions handle that.\n            // This way the result will be the same whether the tinycolor is initialized with string or object.\n            var match;\n            if ((match = matchers.rgb.exec(color))) {\n                return { r: match[1], g: match[2], b: match[3] };\n            }\n            if ((match = matchers.rgba.exec(color))) {\n                return { r: match[1], g: match[2], b: match[3], a: match[4] };\n            }\n            if ((match = matchers.hsl.exec(color))) {\n                return { h: match[1], s: match[2], l: match[3] };\n            }\n            if ((match = matchers.hsla.exec(color))) {\n                return { h: match[1], s: match[2], l: match[3], a: match[4] };\n            }\n            if ((match = matchers.hsv.exec(color))) {\n                return { h: match[1], s: match[2], v: match[3] };\n            }\n            if ((match = matchers.hsva.exec(color))) {\n                return { h: match[1], s: match[2], v: match[3], a: match[4] };\n            }\n            if ((match = matchers.hex8.exec(color))) {\n                return {\n                    a: convertHexToDecimal(match[1]),\n                    r: parseIntFromHex(match[2]),\n                    g: parseIntFromHex(match[3]),\n                    b: parseIntFromHex(match[4]),\n                    format: named ? \"name\" : \"hex8\"\n                };\n            }\n            if ((match = matchers.hex6.exec(color))) {\n                return {\n                    r: parseIntFromHex(match[1]),\n                    g: parseIntFromHex(match[2]),\n                    b: parseIntFromHex(match[3]),\n                    format: named ? \"name\" : \"hex\"\n                };\n            }\n            if ((match = matchers.hex3.exec(color))) {\n                return {\n                    r: parseIntFromHex(match[1] + '' + match[1]),\n                    g: parseIntFromHex(match[2] + '' + match[2]),\n                    b: parseIntFromHex(match[3] + '' + match[3]),\n                    format: named ? \"name\" : \"hex\"\n                };\n            }\n\n            return false;\n        }\n\n        window.tinycolor = tinycolor;\n    })();\n\n    $(function () {\n        if ($.fn.spectrum.load) {\n            $.fn.spectrum.processNativeColorInputs();\n        }\n    });\n\n});\n","Magezon_Builder/vendor/spectrum/tinycolor.js":"// TinyColor v1.4.1\n// https://github.com/bgrins/TinyColor\n// Brian Grinstead, MIT License\n\n(function(Math) {\n\n    var trimLeft = /^\\s+/,\n        trimRight = /\\s+$/,\n        tinyCounter = 0,\n        mathRound = Math.round,\n        mathMin = Math.min,\n        mathMax = Math.max,\n        mathRandom = Math.random;\n\n    function tinycolor (color, opts) {\n\n        color = (color) ? color : '';\n        opts = opts || { };\n\n        // If input is already a tinycolor, return itself\n        if (color instanceof tinycolor) {\n            return color;\n        }\n        // If we are called as a function, call using new instead\n        if (!(this instanceof tinycolor)) {\n            return new tinycolor(color, opts);\n        }\n\n        var rgb = inputToRGB(color);\n        this._originalInput = color,\n            this._r = rgb.r,\n            this._g = rgb.g,\n            this._b = rgb.b,\n            this._a = rgb.a,\n            this._roundA = mathRound(100*this._a) / 100,\n            this._format = opts.format || rgb.format;\n        this._gradientType = opts.gradientType;\n\n        // Don't let the range of [0,255] come back in [0,1].\n        // Potentially lose a little bit of precision here, but will fix issues where\n        // .5 gets interpreted as half of the total, instead of half of 1\n        // If it was supposed to be 128, this was already taken care of by `inputToRgb`\n        if (this._r < 1) { this._r = mathRound(this._r); }\n        if (this._g < 1) { this._g = mathRound(this._g); }\n        if (this._b < 1) { this._b = mathRound(this._b); }\n\n        this._ok = rgb.ok;\n        this._tc_id = tinyCounter++;\n    }\n\n    tinycolor.prototype = {\n        isDark: function() {\n            return this.getBrightness() < 128;\n        },\n        isLight: function() {\n            return !this.isDark();\n        },\n        isValid: function() {\n            return this._ok;\n        },\n        getOriginalInput: function() {\n            return this._originalInput;\n        },\n        getFormat: function() {\n            return this._format;\n        },\n        getAlpha: function() {\n            return this._a;\n        },\n        getBrightness: function() {\n            //http://www.w3.org/TR/AERT#color-contrast\n            var rgb = this.toRgb();\n            return (rgb.r * 299 + rgb.g * 587 + rgb.b * 114) / 1000;\n        },\n        getLuminance: function() {\n            //http://www.w3.org/TR/2008/REC-WCAG20-20081211/#relativeluminancedef\n            var rgb = this.toRgb();\n            var RsRGB, GsRGB, BsRGB, R, G, B;\n            RsRGB = rgb.r/255;\n            GsRGB = rgb.g/255;\n            BsRGB = rgb.b/255;\n\n            if (RsRGB <= 0.03928) {R = RsRGB / 12.92;} else {R = Math.pow(((RsRGB + 0.055) / 1.055), 2.4);}\n            if (GsRGB <= 0.03928) {G = GsRGB / 12.92;} else {G = Math.pow(((GsRGB + 0.055) / 1.055), 2.4);}\n            if (BsRGB <= 0.03928) {B = BsRGB / 12.92;} else {B = Math.pow(((BsRGB + 0.055) / 1.055), 2.4);}\n            return (0.2126 * R) + (0.7152 * G) + (0.0722 * B);\n        },\n        setAlpha: function(value) {\n            this._a = boundAlpha(value);\n            this._roundA = mathRound(100*this._a) / 100;\n            return this;\n        },\n        toHsv: function() {\n            var hsv = rgbToHsv(this._r, this._g, this._b);\n            return { h: hsv.h * 360, s: hsv.s, v: hsv.v, a: this._a };\n        },\n        toHsvString: function() {\n            var hsv = rgbToHsv(this._r, this._g, this._b);\n            var h = mathRound(hsv.h * 360), s = mathRound(hsv.s * 100), v = mathRound(hsv.v * 100);\n            return (this._a == 1) ?\n                \"hsv(\"  + h + \", \" + s + \"%, \" + v + \"%)\" :\n                \"hsva(\" + h + \", \" + s + \"%, \" + v + \"%, \"+ this._roundA + \")\";\n        },\n        toHsl: function() {\n            var hsl = rgbToHsl(this._r, this._g, this._b);\n            return { h: hsl.h * 360, s: hsl.s, l: hsl.l, a: this._a };\n        },\n        toHslString: function() {\n            var hsl = rgbToHsl(this._r, this._g, this._b);\n            var h = mathRound(hsl.h * 360), s = mathRound(hsl.s * 100), l = mathRound(hsl.l * 100);\n            return (this._a == 1) ?\n                \"hsl(\"  + h + \", \" + s + \"%, \" + l + \"%)\" :\n                \"hsla(\" + h + \", \" + s + \"%, \" + l + \"%, \"+ this._roundA + \")\";\n        },\n        toHex: function(allow3Char) {\n            return rgbToHex(this._r, this._g, this._b, allow3Char);\n        },\n        toHexString: function(allow3Char) {\n            return '#' + this.toHex(allow3Char);\n        },\n        toHex8: function(allow4Char) {\n            return rgbaToHex(this._r, this._g, this._b, this._a, allow4Char);\n        },\n        toHex8String: function(allow4Char) {\n            return '#' + this.toHex8(allow4Char);\n        },\n        toRgb: function() {\n            return { r: mathRound(this._r), g: mathRound(this._g), b: mathRound(this._b), a: this._a };\n        },\n        toRgbString: function() {\n            return (this._a == 1) ?\n                \"rgb(\"  + mathRound(this._r) + \", \" + mathRound(this._g) + \", \" + mathRound(this._b) + \")\" :\n                \"rgba(\" + mathRound(this._r) + \", \" + mathRound(this._g) + \", \" + mathRound(this._b) + \", \" + this._roundA + \")\";\n        },\n        toPercentageRgb: function() {\n            return { r: mathRound(bound01(this._r, 255) * 100) + \"%\", g: mathRound(bound01(this._g, 255) * 100) + \"%\", b: mathRound(bound01(this._b, 255) * 100) + \"%\", a: this._a };\n        },\n        toPercentageRgbString: function() {\n            return (this._a == 1) ?\n                \"rgb(\"  + mathRound(bound01(this._r, 255) * 100) + \"%, \" + mathRound(bound01(this._g, 255) * 100) + \"%, \" + mathRound(bound01(this._b, 255) * 100) + \"%)\" :\n                \"rgba(\" + mathRound(bound01(this._r, 255) * 100) + \"%, \" + mathRound(bound01(this._g, 255) * 100) + \"%, \" + mathRound(bound01(this._b, 255) * 100) + \"%, \" + this._roundA + \")\";\n        },\n        toName: function() {\n            if (this._a === 0) {\n                return \"transparent\";\n            }\n\n            if (this._a < 1) {\n                return false;\n            }\n\n            return hexNames[rgbToHex(this._r, this._g, this._b, true)] || false;\n        },\n        toFilter: function(secondColor) {\n            var hex8String = '#' + rgbaToArgbHex(this._r, this._g, this._b, this._a);\n            var secondHex8String = hex8String;\n            var gradientType = this._gradientType ? \"GradientType = 1, \" : \"\";\n\n            if (secondColor) {\n                var s = tinycolor(secondColor);\n                secondHex8String = '#' + rgbaToArgbHex(s._r, s._g, s._b, s._a);\n            }\n\n            return \"progid:DXImageTransform.Microsoft.gradient(\"+gradientType+\"startColorstr=\"+hex8String+\",endColorstr=\"+secondHex8String+\")\";\n        },\n        toString: function(format) {\n            var formatSet = !!format;\n            format = format || this._format;\n\n            var formattedString = false;\n            var hasAlpha = this._a < 1 && this._a >= 0;\n            var needsAlphaFormat = !formatSet && hasAlpha && (format === \"hex\" || format === \"hex6\" || format === \"hex3\" || format === \"hex4\" || format === \"hex8\" || format === \"name\");\n\n            if (needsAlphaFormat) {\n                // Special case for \"transparent\", all other non-alpha formats\n                // will return rgba when there is transparency.\n                if (format === \"name\" && this._a === 0) {\n                    return this.toName();\n                }\n                return this.toRgbString();\n            }\n            if (format === \"rgb\") {\n                formattedString = this.toRgbString();\n            }\n            if (format === \"prgb\") {\n                formattedString = this.toPercentageRgbString();\n            }\n            if (format === \"hex\" || format === \"hex6\") {\n                formattedString = this.toHexString();\n            }\n            if (format === \"hex3\") {\n                formattedString = this.toHexString(true);\n            }\n            if (format === \"hex4\") {\n                formattedString = this.toHex8String(true);\n            }\n            if (format === \"hex8\") {\n                formattedString = this.toHex8String();\n            }\n            if (format === \"name\") {\n                formattedString = this.toName();\n            }\n            if (format === \"hsl\") {\n                formattedString = this.toHslString();\n            }\n            if (format === \"hsv\") {\n                formattedString = this.toHsvString();\n            }\n\n            return formattedString || this.toHexString();\n        },\n        clone: function() {\n            return tinycolor(this.toString());\n        },\n\n        _applyModification: function(fn, args) {\n            var color = fn.apply(null, [this].concat([].slice.call(args)));\n            this._r = color._r;\n            this._g = color._g;\n            this._b = color._b;\n            this.setAlpha(color._a);\n            return this;\n        },\n        lighten: function() {\n            return this._applyModification(lighten, arguments);\n        },\n        brighten: function() {\n            return this._applyModification(brighten, arguments);\n        },\n        darken: function() {\n            return this._applyModification(darken, arguments);\n        },\n        desaturate: function() {\n            return this._applyModification(desaturate, arguments);\n        },\n        saturate: function() {\n            return this._applyModification(saturate, arguments);\n        },\n        greyscale: function() {\n            return this._applyModification(greyscale, arguments);\n        },\n        spin: function() {\n            return this._applyModification(spin, arguments);\n        },\n\n        _applyCombination: function(fn, args) {\n            return fn.apply(null, [this].concat([].slice.call(args)));\n        },\n        analogous: function() {\n            return this._applyCombination(analogous, arguments);\n        },\n        complement: function() {\n            return this._applyCombination(complement, arguments);\n        },\n        monochromatic: function() {\n            return this._applyCombination(monochromatic, arguments);\n        },\n        splitcomplement: function() {\n            return this._applyCombination(splitcomplement, arguments);\n        },\n        triad: function() {\n            return this._applyCombination(triad, arguments);\n        },\n        tetrad: function() {\n            return this._applyCombination(tetrad, arguments);\n        }\n    };\n\n// If input is an object, force 1 into \"1.0\" to handle ratios properly\n// String input requires \"1.0\" as input, so 1 will be treated as 1\n    tinycolor.fromRatio = function(color, opts) {\n        if (typeof color == \"object\") {\n            var newColor = {};\n            for (var i in color) {\n                if (color.hasOwnProperty(i)) {\n                    if (i === \"a\") {\n                        newColor[i] = color[i];\n                    }\n                    else {\n                        newColor[i] = convertToPercentage(color[i]);\n                    }\n                }\n            }\n            color = newColor;\n        }\n\n        return tinycolor(color, opts);\n    };\n\n// Given a string or object, convert that input to RGB\n// Possible string inputs:\n//\n//     \"red\"\n//     \"#f00\" or \"f00\"\n//     \"#ff0000\" or \"ff0000\"\n//     \"#ff000000\" or \"ff000000\"\n//     \"rgb 255 0 0\" or \"rgb (255, 0, 0)\"\n//     \"rgb 1.0 0 0\" or \"rgb (1, 0, 0)\"\n//     \"rgba (255, 0, 0, 1)\" or \"rgba 255, 0, 0, 1\"\n//     \"rgba (1.0, 0, 0, 1)\" or \"rgba 1.0, 0, 0, 1\"\n//     \"hsl(0, 100%, 50%)\" or \"hsl 0 100% 50%\"\n//     \"hsla(0, 100%, 50%, 1)\" or \"hsla 0 100% 50%, 1\"\n//     \"hsv(0, 100%, 100%)\" or \"hsv 0 100% 100%\"\n//\n    function inputToRGB(color) {\n\n        var rgb = { r: 0, g: 0, b: 0 };\n        var a = 1;\n        var s = null;\n        var v = null;\n        var l = null;\n        var ok = false;\n        var format = false;\n\n        if (typeof color == \"string\") {\n            color = stringInputToObject(color);\n        }\n\n        if (typeof color == \"object\") {\n            if (isValidCSSUnit(color.r) && isValidCSSUnit(color.g) && isValidCSSUnit(color.b)) {\n                rgb = rgbToRgb(color.r, color.g, color.b);\n                ok = true;\n                format = String(color.r).substr(-1) === \"%\" ? \"prgb\" : \"rgb\";\n            }\n            else if (isValidCSSUnit(color.h) && isValidCSSUnit(color.s) && isValidCSSUnit(color.v)) {\n                s = convertToPercentage(color.s);\n                v = convertToPercentage(color.v);\n                rgb = hsvToRgb(color.h, s, v);\n                ok = true;\n                format = \"hsv\";\n            }\n            else if (isValidCSSUnit(color.h) && isValidCSSUnit(color.s) && isValidCSSUnit(color.l)) {\n                s = convertToPercentage(color.s);\n                l = convertToPercentage(color.l);\n                rgb = hslToRgb(color.h, s, l);\n                ok = true;\n                format = \"hsl\";\n            }\n\n            if (color.hasOwnProperty(\"a\")) {\n                a = color.a;\n            }\n        }\n\n        a = boundAlpha(a);\n\n        return {\n            ok: ok,\n            format: color.format || format,\n            r: mathMin(255, mathMax(rgb.r, 0)),\n            g: mathMin(255, mathMax(rgb.g, 0)),\n            b: mathMin(255, mathMax(rgb.b, 0)),\n            a: a\n        };\n    }\n\n\n// Conversion Functions\n// --------------------\n\n// `rgbToHsl`, `rgbToHsv`, `hslToRgb`, `hsvToRgb` modified from:\n// <http://mjijackson.com/2008/02/rgb-to-hsl-and-rgb-to-hsv-color-model-conversion-algorithms-in-javascript>\n\n// `rgbToRgb`\n// Handle bounds / percentage checking to conform to CSS color spec\n// <http://www.w3.org/TR/css3-color/>\n// *Assumes:* r, g, b in [0, 255] or [0, 1]\n// *Returns:* { r, g, b } in [0, 255]\n    function rgbToRgb(r, g, b){\n        return {\n            r: bound01(r, 255) * 255,\n            g: bound01(g, 255) * 255,\n            b: bound01(b, 255) * 255\n        };\n    }\n\n// `rgbToHsl`\n// Converts an RGB color value to HSL.\n// *Assumes:* r, g, and b are contained in [0, 255] or [0, 1]\n// *Returns:* { h, s, l } in [0,1]\n    function rgbToHsl(r, g, b) {\n\n        r = bound01(r, 255);\n        g = bound01(g, 255);\n        b = bound01(b, 255);\n\n        var max = mathMax(r, g, b), min = mathMin(r, g, b);\n        var h, s, l = (max + min) / 2;\n\n        if(max == min) {\n            h = s = 0; // achromatic\n        }\n        else {\n            var d = max - min;\n            s = l > 0.5 ? d / (2 - max - min) : d / (max + min);\n            switch(max) {\n                case r: h = (g - b) / d + (g < b ? 6 : 0); break;\n                case g: h = (b - r) / d + 2; break;\n                case b: h = (r - g) / d + 4; break;\n            }\n\n            h /= 6;\n        }\n\n        return { h: h, s: s, l: l };\n    }\n\n// `hslToRgb`\n// Converts an HSL color value to RGB.\n// *Assumes:* h is contained in [0, 1] or [0, 360] and s and l are contained [0, 1] or [0, 100]\n// *Returns:* { r, g, b } in the set [0, 255]\n    function hslToRgb(h, s, l) {\n        var r, g, b;\n\n        h = bound01(h, 360);\n        s = bound01(s, 100);\n        l = bound01(l, 100);\n\n        function hue2rgb(p, q, t) {\n            if(t < 0) t += 1;\n            if(t > 1) t -= 1;\n            if(t < 1/6) return p + (q - p) * 6 * t;\n            if(t < 1/2) return q;\n            if(t < 2/3) return p + (q - p) * (2/3 - t) * 6;\n            return p;\n        }\n\n        if(s === 0) {\n            r = g = b = l; // achromatic\n        }\n        else {\n            var q = l < 0.5 ? l * (1 + s) : l + s - l * s;\n            var p = 2 * l - q;\n            r = hue2rgb(p, q, h + 1/3);\n            g = hue2rgb(p, q, h);\n            b = hue2rgb(p, q, h - 1/3);\n        }\n\n        return { r: r * 255, g: g * 255, b: b * 255 };\n    }\n\n// `rgbToHsv`\n// Converts an RGB color value to HSV\n// *Assumes:* r, g, and b are contained in the set [0, 255] or [0, 1]\n// *Returns:* { h, s, v } in [0,1]\n    function rgbToHsv(r, g, b) {\n\n        r = bound01(r, 255);\n        g = bound01(g, 255);\n        b = bound01(b, 255);\n\n        var max = mathMax(r, g, b), min = mathMin(r, g, b);\n        var h, s, v = max;\n\n        var d = max - min;\n        s = max === 0 ? 0 : d / max;\n\n        if(max == min) {\n            h = 0; // achromatic\n        }\n        else {\n            switch(max) {\n                case r: h = (g - b) / d + (g < b ? 6 : 0); break;\n                case g: h = (b - r) / d + 2; break;\n                case b: h = (r - g) / d + 4; break;\n            }\n            h /= 6;\n        }\n        return { h: h, s: s, v: v };\n    }\n\n// `hsvToRgb`\n// Converts an HSV color value to RGB.\n// *Assumes:* h is contained in [0, 1] or [0, 360] and s and v are contained in [0, 1] or [0, 100]\n// *Returns:* { r, g, b } in the set [0, 255]\n    function hsvToRgb(h, s, v) {\n\n        h = bound01(h, 360) * 6;\n        s = bound01(s, 100);\n        v = bound01(v, 100);\n\n        var i = Math.floor(h),\n            f = h - i,\n            p = v * (1 - s),\n            q = v * (1 - f * s),\n            t = v * (1 - (1 - f) * s),\n            mod = i % 6,\n            r = [v, q, p, p, t, v][mod],\n            g = [t, v, v, q, p, p][mod],\n            b = [p, p, t, v, v, q][mod];\n\n        return { r: r * 255, g: g * 255, b: b * 255 };\n    }\n\n// `rgbToHex`\n// Converts an RGB color to hex\n// Assumes r, g, and b are contained in the set [0, 255]\n// Returns a 3 or 6 character hex\n    function rgbToHex(r, g, b, allow3Char) {\n\n        var hex = [\n            pad2(mathRound(r).toString(16)),\n            pad2(mathRound(g).toString(16)),\n            pad2(mathRound(b).toString(16))\n        ];\n\n        // Return a 3 character hex if possible\n        if (allow3Char && hex[0].charAt(0) == hex[0].charAt(1) && hex[1].charAt(0) == hex[1].charAt(1) && hex[2].charAt(0) == hex[2].charAt(1)) {\n            return hex[0].charAt(0) + hex[1].charAt(0) + hex[2].charAt(0);\n        }\n\n        return hex.join(\"\");\n    }\n\n// `rgbaToHex`\n// Converts an RGBA color plus alpha transparency to hex\n// Assumes r, g, b are contained in the set [0, 255] and\n// a in [0, 1]. Returns a 4 or 8 character rgba hex\n    function rgbaToHex(r, g, b, a, allow4Char) {\n\n        var hex = [\n            pad2(mathRound(r).toString(16)),\n            pad2(mathRound(g).toString(16)),\n            pad2(mathRound(b).toString(16)),\n            pad2(convertDecimalToHex(a))\n        ];\n\n        // Return a 4 character hex if possible\n        if (allow4Char && hex[0].charAt(0) == hex[0].charAt(1) && hex[1].charAt(0) == hex[1].charAt(1) && hex[2].charAt(0) == hex[2].charAt(1) && hex[3].charAt(0) == hex[3].charAt(1)) {\n            return hex[0].charAt(0) + hex[1].charAt(0) + hex[2].charAt(0) + hex[3].charAt(0);\n        }\n\n        return hex.join(\"\");\n    }\n\n// `rgbaToArgbHex`\n// Converts an RGBA color to an ARGB Hex8 string\n// Rarely used, but required for \"toFilter()\"\n    function rgbaToArgbHex(r, g, b, a) {\n\n        var hex = [\n            pad2(convertDecimalToHex(a)),\n            pad2(mathRound(r).toString(16)),\n            pad2(mathRound(g).toString(16)),\n            pad2(mathRound(b).toString(16))\n        ];\n\n        return hex.join(\"\");\n    }\n\n// `equals`\n// Can be called with any tinycolor input\n    tinycolor.equals = function (color1, color2) {\n        if (!color1 || !color2) { return false; }\n        return tinycolor(color1).toRgbString() == tinycolor(color2).toRgbString();\n    };\n\n    tinycolor.random = function() {\n        return tinycolor.fromRatio({\n            r: mathRandom(),\n            g: mathRandom(),\n            b: mathRandom()\n        });\n    };\n\n\n// Modification Functions\n// ----------------------\n// Thanks to less.js for some of the basics here\n// <https://github.com/cloudhead/less.js/blob/master/lib/less/functions.js>\n\n    function desaturate(color, amount) {\n        amount = (amount === 0) ? 0 : (amount || 10);\n        var hsl = tinycolor(color).toHsl();\n        hsl.s -= amount / 100;\n        hsl.s = clamp01(hsl.s);\n        return tinycolor(hsl);\n    }\n\n    function saturate(color, amount) {\n        amount = (amount === 0) ? 0 : (amount || 10);\n        var hsl = tinycolor(color).toHsl();\n        hsl.s += amount / 100;\n        hsl.s = clamp01(hsl.s);\n        return tinycolor(hsl);\n    }\n\n    function greyscale(color) {\n        return tinycolor(color).desaturate(100);\n    }\n\n    function lighten (color, amount) {\n        amount = (amount === 0) ? 0 : (amount || 10);\n        var hsl = tinycolor(color).toHsl();\n        hsl.l += amount / 100;\n        hsl.l = clamp01(hsl.l);\n        return tinycolor(hsl);\n    }\n\n    function brighten(color, amount) {\n        amount = (amount === 0) ? 0 : (amount || 10);\n        var rgb = tinycolor(color).toRgb();\n        rgb.r = mathMax(0, mathMin(255, rgb.r - mathRound(255 * - (amount / 100))));\n        rgb.g = mathMax(0, mathMin(255, rgb.g - mathRound(255 * - (amount / 100))));\n        rgb.b = mathMax(0, mathMin(255, rgb.b - mathRound(255 * - (amount / 100))));\n        return tinycolor(rgb);\n    }\n\n    function darken (color, amount) {\n        amount = (amount === 0) ? 0 : (amount || 10);\n        var hsl = tinycolor(color).toHsl();\n        hsl.l -= amount / 100;\n        hsl.l = clamp01(hsl.l);\n        return tinycolor(hsl);\n    }\n\n// Spin takes a positive or negative amount within [-360, 360] indicating the change of hue.\n// Values outside of this range will be wrapped into this range.\n    function spin(color, amount) {\n        var hsl = tinycolor(color).toHsl();\n        var hue = (hsl.h + amount) % 360;\n        hsl.h = hue < 0 ? 360 + hue : hue;\n        return tinycolor(hsl);\n    }\n\n// Combination Functions\n// ---------------------\n// Thanks to jQuery xColor for some of the ideas behind these\n// <https://github.com/infusion/jQuery-xcolor/blob/master/jquery.xcolor.js>\n\n    function complement(color) {\n        var hsl = tinycolor(color).toHsl();\n        hsl.h = (hsl.h + 180) % 360;\n        return tinycolor(hsl);\n    }\n\n    function triad(color) {\n        var hsl = tinycolor(color).toHsl();\n        var h = hsl.h;\n        return [\n            tinycolor(color),\n            tinycolor({ h: (h + 120) % 360, s: hsl.s, l: hsl.l }),\n            tinycolor({ h: (h + 240) % 360, s: hsl.s, l: hsl.l })\n        ];\n    }\n\n    function tetrad(color) {\n        var hsl = tinycolor(color).toHsl();\n        var h = hsl.h;\n        return [\n            tinycolor(color),\n            tinycolor({ h: (h + 90) % 360, s: hsl.s, l: hsl.l }),\n            tinycolor({ h: (h + 180) % 360, s: hsl.s, l: hsl.l }),\n            tinycolor({ h: (h + 270) % 360, s: hsl.s, l: hsl.l })\n        ];\n    }\n\n    function splitcomplement(color) {\n        var hsl = tinycolor(color).toHsl();\n        var h = hsl.h;\n        return [\n            tinycolor(color),\n            tinycolor({ h: (h + 72) % 360, s: hsl.s, l: hsl.l}),\n            tinycolor({ h: (h + 216) % 360, s: hsl.s, l: hsl.l})\n        ];\n    }\n\n    function analogous(color, results, slices) {\n        results = results || 6;\n        slices = slices || 30;\n\n        var hsl = tinycolor(color).toHsl();\n        var part = 360 / slices;\n        var ret = [tinycolor(color)];\n\n        for (hsl.h = ((hsl.h - (part * results >> 1)) + 720) % 360; --results; ) {\n            hsl.h = (hsl.h + part) % 360;\n            ret.push(tinycolor(hsl));\n        }\n        return ret;\n    }\n\n    function monochromatic(color, results) {\n        results = results || 6;\n        var hsv = tinycolor(color).toHsv();\n        var h = hsv.h, s = hsv.s, v = hsv.v;\n        var ret = [];\n        var modification = 1 / results;\n\n        while (results--) {\n            ret.push(tinycolor({ h: h, s: s, v: v}));\n            v = (v + modification) % 1;\n        }\n\n        return ret;\n    }\n\n// Utility Functions\n// ---------------------\n\n    tinycolor.mix = function(color1, color2, amount) {\n        amount = (amount === 0) ? 0 : (amount || 50);\n\n        var rgb1 = tinycolor(color1).toRgb();\n        var rgb2 = tinycolor(color2).toRgb();\n\n        var p = amount / 100;\n\n        var rgba = {\n            r: ((rgb2.r - rgb1.r) * p) + rgb1.r,\n            g: ((rgb2.g - rgb1.g) * p) + rgb1.g,\n            b: ((rgb2.b - rgb1.b) * p) + rgb1.b,\n            a: ((rgb2.a - rgb1.a) * p) + rgb1.a\n        };\n\n        return tinycolor(rgba);\n    };\n\n\n// Readability Functions\n// ---------------------\n// <http://www.w3.org/TR/2008/REC-WCAG20-20081211/#contrast-ratiodef (WCAG Version 2)\n\n// `contrast`\n// Analyze the 2 colors and returns the color contrast defined by (WCAG Version 2)\n    tinycolor.readability = function(color1, color2) {\n        var c1 = tinycolor(color1);\n        var c2 = tinycolor(color2);\n        return (Math.max(c1.getLuminance(),c2.getLuminance())+0.05) / (Math.min(c1.getLuminance(),c2.getLuminance())+0.05);\n    };\n\n// `isReadable`\n// Ensure that foreground and background color combinations meet WCAG2 guidelines.\n// The third argument is an optional Object.\n//      the 'level' property states 'AA' or 'AAA' - if missing or invalid, it defaults to 'AA';\n//      the 'size' property states 'large' or 'small' - if missing or invalid, it defaults to 'small'.\n// If the entire object is absent, isReadable defaults to {level:\"AA\",size:\"small\"}.\n\n// *Example*\n//    tinycolor.isReadable(\"#000\", \"#111\") => false\n//    tinycolor.isReadable(\"#000\", \"#111\",{level:\"AA\",size:\"large\"}) => false\n    tinycolor.isReadable = function(color1, color2, wcag2) {\n        var readability = tinycolor.readability(color1, color2);\n        var wcag2Parms, out;\n\n        out = false;\n\n        wcag2Parms = validateWCAG2Parms(wcag2);\n        switch (wcag2Parms.level + wcag2Parms.size) {\n            case \"AAsmall\":\n            case \"AAAlarge\":\n                out = readability >= 4.5;\n                break;\n            case \"AAlarge\":\n                out = readability >= 3;\n                break;\n            case \"AAAsmall\":\n                out = readability >= 7;\n                break;\n        }\n        return out;\n\n    };\n\n// `mostReadable`\n// Given a base color and a list of possible foreground or background\n// colors for that base, returns the most readable color.\n// Optionally returns Black or White if the most readable color is unreadable.\n// *Example*\n//    tinycolor.mostReadable(tinycolor.mostReadable(\"#123\", [\"#124\", \"#125\"],{includeFallbackColors:false}).toHexString(); // \"#112255\"\n//    tinycolor.mostReadable(tinycolor.mostReadable(\"#123\", [\"#124\", \"#125\"],{includeFallbackColors:true}).toHexString();  // \"#ffffff\"\n//    tinycolor.mostReadable(\"#a8015a\", [\"#faf3f3\"],{includeFallbackColors:true,level:\"AAA\",size:\"large\"}).toHexString(); // \"#faf3f3\"\n//    tinycolor.mostReadable(\"#a8015a\", [\"#faf3f3\"],{includeFallbackColors:true,level:\"AAA\",size:\"small\"}).toHexString(); // \"#ffffff\"\n    tinycolor.mostReadable = function(baseColor, colorList, args) {\n        var bestColor = null;\n        var bestScore = 0;\n        var readability;\n        var includeFallbackColors, level, size ;\n        args = args || {};\n        includeFallbackColors = args.includeFallbackColors ;\n        level = args.level;\n        size = args.size;\n\n        for (var i= 0; i < colorList.length ; i++) {\n            readability = tinycolor.readability(baseColor, colorList[i]);\n            if (readability > bestScore) {\n                bestScore = readability;\n                bestColor = tinycolor(colorList[i]);\n            }\n        }\n\n        if (tinycolor.isReadable(baseColor, bestColor, {\"level\":level,\"size\":size}) || !includeFallbackColors) {\n            return bestColor;\n        }\n        else {\n            args.includeFallbackColors=false;\n            return tinycolor.mostReadable(baseColor,[\"#fff\", \"#000\"],args);\n        }\n    };\n\n\n// Big List of Colors\n// ------------------\n// <http://www.w3.org/TR/css3-color/#svg-color>\n    var names = tinycolor.names = {\n        aliceblue: \"f0f8ff\",\n        antiquewhite: \"faebd7\",\n        aqua: \"0ff\",\n        aquamarine: \"7fffd4\",\n        azure: \"f0ffff\",\n        beige: \"f5f5dc\",\n        bisque: \"ffe4c4\",\n        black: \"000\",\n        blanchedalmond: \"ffebcd\",\n        blue: \"00f\",\n        blueviolet: \"8a2be2\",\n        brown: \"a52a2a\",\n        burlywood: \"deb887\",\n        burntsienna: \"ea7e5d\",\n        cadetblue: \"5f9ea0\",\n        chartreuse: \"7fff00\",\n        chocolate: \"d2691e\",\n        coral: \"ff7f50\",\n        cornflowerblue: \"6495ed\",\n        cornsilk: \"fff8dc\",\n        crimson: \"dc143c\",\n        cyan: \"0ff\",\n        darkblue: \"00008b\",\n        darkcyan: \"008b8b\",\n        darkgoldenrod: \"b8860b\",\n        darkgray: \"a9a9a9\",\n        darkgreen: \"006400\",\n        darkgrey: \"a9a9a9\",\n        darkkhaki: \"bdb76b\",\n        darkmagenta: \"8b008b\",\n        darkolivegreen: \"556b2f\",\n        darkorange: \"ff8c00\",\n        darkorchid: \"9932cc\",\n        darkred: \"8b0000\",\n        darksalmon: \"e9967a\",\n        darkseagreen: \"8fbc8f\",\n        darkslateblue: \"483d8b\",\n        darkslategray: \"2f4f4f\",\n        darkslategrey: \"2f4f4f\",\n        darkturquoise: \"00ced1\",\n        darkviolet: \"9400d3\",\n        deeppink: \"ff1493\",\n        deepskyblue: \"00bfff\",\n        dimgray: \"696969\",\n        dimgrey: \"696969\",\n        dodgerblue: \"1e90ff\",\n        firebrick: \"b22222\",\n        floralwhite: \"fffaf0\",\n        forestgreen: \"228b22\",\n        fuchsia: \"f0f\",\n        gainsboro: \"dcdcdc\",\n        ghostwhite: \"f8f8ff\",\n        gold: \"ffd700\",\n        goldenrod: \"daa520\",\n        gray: \"808080\",\n        green: \"008000\",\n        greenyellow: \"adff2f\",\n        grey: \"808080\",\n        honeydew: \"f0fff0\",\n        hotpink: \"ff69b4\",\n        indianred: \"cd5c5c\",\n        indigo: \"4b0082\",\n        ivory: \"fffff0\",\n        khaki: \"f0e68c\",\n        lavender: \"e6e6fa\",\n        lavenderblush: \"fff0f5\",\n        lawngreen: \"7cfc00\",\n        lemonchiffon: \"fffacd\",\n        lightblue: \"add8e6\",\n        lightcoral: \"f08080\",\n        lightcyan: \"e0ffff\",\n        lightgoldenrodyellow: \"fafad2\",\n        lightgray: \"d3d3d3\",\n        lightgreen: \"90ee90\",\n        lightgrey: \"d3d3d3\",\n        lightpink: \"ffb6c1\",\n        lightsalmon: \"ffa07a\",\n        lightseagreen: \"20b2aa\",\n        lightskyblue: \"87cefa\",\n        lightslategray: \"789\",\n        lightslategrey: \"789\",\n        lightsteelblue: \"b0c4de\",\n        lightyellow: \"ffffe0\",\n        lime: \"0f0\",\n        limegreen: \"32cd32\",\n        linen: \"faf0e6\",\n        magenta: \"f0f\",\n        maroon: \"800000\",\n        mediumaquamarine: \"66cdaa\",\n        mediumblue: \"0000cd\",\n        mediumorchid: \"ba55d3\",\n        mediumpurple: \"9370db\",\n        mediumseagreen: \"3cb371\",\n        mediumslateblue: \"7b68ee\",\n        mediumspringgreen: \"00fa9a\",\n        mediumturquoise: \"48d1cc\",\n        mediumvioletred: \"c71585\",\n        midnightblue: \"191970\",\n        mintcream: \"f5fffa\",\n        mistyrose: \"ffe4e1\",\n        moccasin: \"ffe4b5\",\n        navajowhite: \"ffdead\",\n        navy: \"000080\",\n        oldlace: \"fdf5e6\",\n        olive: \"808000\",\n        olivedrab: \"6b8e23\",\n        orange: \"ffa500\",\n        orangered: \"ff4500\",\n        orchid: \"da70d6\",\n        palegoldenrod: \"eee8aa\",\n        palegreen: \"98fb98\",\n        paleturquoise: \"afeeee\",\n        palevioletred: \"db7093\",\n        papayawhip: \"ffefd5\",\n        peachpuff: \"ffdab9\",\n        peru: \"cd853f\",\n        pink: \"ffc0cb\",\n        plum: \"dda0dd\",\n        powderblue: \"b0e0e6\",\n        purple: \"800080\",\n        rebeccapurple: \"663399\",\n        red: \"f00\",\n        rosybrown: \"bc8f8f\",\n        royalblue: \"4169e1\",\n        saddlebrown: \"8b4513\",\n        salmon: \"fa8072\",\n        sandybrown: \"f4a460\",\n        seagreen: \"2e8b57\",\n        seashell: \"fff5ee\",\n        sienna: \"a0522d\",\n        silver: \"c0c0c0\",\n        skyblue: \"87ceeb\",\n        slateblue: \"6a5acd\",\n        slategray: \"708090\",\n        slategrey: \"708090\",\n        snow: \"fffafa\",\n        springgreen: \"00ff7f\",\n        steelblue: \"4682b4\",\n        tan: \"d2b48c\",\n        teal: \"008080\",\n        thistle: \"d8bfd8\",\n        tomato: \"ff6347\",\n        turquoise: \"40e0d0\",\n        violet: \"ee82ee\",\n        wheat: \"f5deb3\",\n        white: \"fff\",\n        whitesmoke: \"f5f5f5\",\n        yellow: \"ff0\",\n        yellowgreen: \"9acd32\"\n    };\n\n// Make it easy to access colors via `hexNames[hex]`\n    var hexNames = tinycolor.hexNames = flip(names);\n\n\n// Utilities\n// ---------\n\n// `{ 'name1': 'val1' }` becomes `{ 'val1': 'name1' }`\n    function flip(o) {\n        var flipped = { };\n        for (var i in o) {\n            if (o.hasOwnProperty(i)) {\n                flipped[o[i]] = i;\n            }\n        }\n        return flipped;\n    }\n\n// Return a valid alpha value [0,1] with all invalid values being set to 1\n    function boundAlpha(a) {\n        a = parseFloat(a);\n\n        if (isNaN(a) || a < 0 || a > 1) {\n            a = 1;\n        }\n\n        return a;\n    }\n\n// Take input from [0, n] and return it as [0, 1]\n    function bound01(n, max) {\n        if (isOnePointZero(n)) { n = \"100%\"; }\n\n        var processPercent = isPercentage(n);\n        n = mathMin(max, mathMax(0, parseFloat(n)));\n\n        // Automatically convert percentage into number\n        if (processPercent) {\n            n = parseInt(n * max, 10) / 100;\n        }\n\n        // Handle floating point rounding errors\n        if ((Math.abs(n - max) < 0.000001)) {\n            return 1;\n        }\n\n        // Convert into [0, 1] range if it isn't already\n        return (n % max) / parseFloat(max);\n    }\n\n// Force a number between 0 and 1\n    function clamp01(val) {\n        return mathMin(1, mathMax(0, val));\n    }\n\n// Parse a base-16 hex value into a base-10 integer\n    function parseIntFromHex(val) {\n        return parseInt(val, 16);\n    }\n\n// Need to handle 1.0 as 100%, since once it is a number, there is no difference between it and 1\n// <http://stackoverflow.com/questions/7422072/javascript-how-to-detect-number-as-a-decimal-including-1-0>\n    function isOnePointZero(n) {\n        return typeof n == \"string\" && n.indexOf('.') != -1 && parseFloat(n) === 1;\n    }\n\n// Check to see if string passed in is a percentage\n    function isPercentage(n) {\n        return typeof n === \"string\" && n.indexOf('%') != -1;\n    }\n\n// Force a hex value to have 2 characters\n    function pad2(c) {\n        return c.length == 1 ? '0' + c : '' + c;\n    }\n\n// Replace a decimal with it's percentage value\n    function convertToPercentage(n) {\n        if (n <= 1) {\n            n = (n * 100) + \"%\";\n        }\n\n        return n;\n    }\n\n// Converts a decimal to a hex value\n    function convertDecimalToHex(d) {\n        return Math.round(parseFloat(d) * 255).toString(16);\n    }\n// Converts a hex value to a decimal\n    function convertHexToDecimal(h) {\n        return (parseIntFromHex(h) / 255);\n    }\n\n    var matchers = (function() {\n\n        // <http://www.w3.org/TR/css3-values/#integers>\n        var CSS_INTEGER = \"[-\\\\+]?\\\\d+%?\";\n\n        // <http://www.w3.org/TR/css3-values/#number-value>\n        var CSS_NUMBER = \"[-\\\\+]?\\\\d*\\\\.\\\\d+%?\";\n\n        // Allow positive/negative integer/number.  Don't capture the either/or, just the entire outcome.\n        var CSS_UNIT = \"(?:\" + CSS_NUMBER + \")|(?:\" + CSS_INTEGER + \")\";\n\n        // Actual matching.\n        // Parentheses and commas are optional, but not required.\n        // Whitespace can take the place of commas or opening paren\n        var PERMISSIVE_MATCH3 = \"[\\\\s|\\\\(]+(\" + CSS_UNIT + \")[,|\\\\s]+(\" + CSS_UNIT + \")[,|\\\\s]+(\" + CSS_UNIT + \")\\\\s*\\\\)?\";\n        var PERMISSIVE_MATCH4 = \"[\\\\s|\\\\(]+(\" + CSS_UNIT + \")[,|\\\\s]+(\" + CSS_UNIT + \")[,|\\\\s]+(\" + CSS_UNIT + \")[,|\\\\s]+(\" + CSS_UNIT + \")\\\\s*\\\\)?\";\n\n        return {\n            CSS_UNIT: new RegExp(CSS_UNIT),\n            rgb: new RegExp(\"rgb\" + PERMISSIVE_MATCH3),\n            rgba: new RegExp(\"rgba\" + PERMISSIVE_MATCH4),\n            hsl: new RegExp(\"hsl\" + PERMISSIVE_MATCH3),\n            hsla: new RegExp(\"hsla\" + PERMISSIVE_MATCH4),\n            hsv: new RegExp(\"hsv\" + PERMISSIVE_MATCH3),\n            hsva: new RegExp(\"hsva\" + PERMISSIVE_MATCH4),\n            hex3: /^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,\n            hex6: /^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,\n            hex4: /^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,\n            hex8: /^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/\n        };\n    })();\n\n// `isValidCSSUnit`\n// Take in a single string / number and check to see if it looks like a CSS unit\n// (see `matchers` above for definition).\n    function isValidCSSUnit(color) {\n        return !!matchers.CSS_UNIT.exec(color);\n    }\n\n// `stringInputToObject`\n// Permissive string parsing.  Take in a number of formats, and output an object\n// based on detected format.  Returns `{ r, g, b }` or `{ h, s, l }` or `{ h, s, v}`\n    function stringInputToObject(color) {\n\n        color = color.replace(trimLeft,'').replace(trimRight, '').toLowerCase();\n        var named = false;\n        if (names[color]) {\n            color = names[color];\n            named = true;\n        }\n        else if (color == 'transparent') {\n            return { r: 0, g: 0, b: 0, a: 0, format: \"name\" };\n        }\n\n        // Try to match string input using regular expressions.\n        // Keep most of the number bounding out of this function - don't worry about [0,1] or [0,100] or [0,360]\n        // Just return an object and let the conversion functions handle that.\n        // This way the result will be the same whether the tinycolor is initialized with string or object.\n        var match;\n        if ((match = matchers.rgb.exec(color))) {\n            return { r: match[1], g: match[2], b: match[3] };\n        }\n        if ((match = matchers.rgba.exec(color))) {\n            return { r: match[1], g: match[2], b: match[3], a: match[4] };\n        }\n        if ((match = matchers.hsl.exec(color))) {\n            return { h: match[1], s: match[2], l: match[3] };\n        }\n        if ((match = matchers.hsla.exec(color))) {\n            return { h: match[1], s: match[2], l: match[3], a: match[4] };\n        }\n        if ((match = matchers.hsv.exec(color))) {\n            return { h: match[1], s: match[2], v: match[3] };\n        }\n        if ((match = matchers.hsva.exec(color))) {\n            return { h: match[1], s: match[2], v: match[3], a: match[4] };\n        }\n        if ((match = matchers.hex8.exec(color))) {\n            return {\n                r: parseIntFromHex(match[1]),\n                g: parseIntFromHex(match[2]),\n                b: parseIntFromHex(match[3]),\n                a: convertHexToDecimal(match[4]),\n                format: named ? \"name\" : \"hex8\"\n            };\n        }\n        if ((match = matchers.hex6.exec(color))) {\n            return {\n                r: parseIntFromHex(match[1]),\n                g: parseIntFromHex(match[2]),\n                b: parseIntFromHex(match[3]),\n                format: named ? \"name\" : \"hex\"\n            };\n        }\n        if ((match = matchers.hex4.exec(color))) {\n            return {\n                r: parseIntFromHex(match[1] + '' + match[1]),\n                g: parseIntFromHex(match[2] + '' + match[2]),\n                b: parseIntFromHex(match[3] + '' + match[3]),\n                a: convertHexToDecimal(match[4] + '' + match[4]),\n                format: named ? \"name\" : \"hex8\"\n            };\n        }\n        if ((match = matchers.hex3.exec(color))) {\n            return {\n                r: parseIntFromHex(match[1] + '' + match[1]),\n                g: parseIntFromHex(match[2] + '' + match[2]),\n                b: parseIntFromHex(match[3] + '' + match[3]),\n                format: named ? \"name\" : \"hex\"\n            };\n        }\n\n        return false;\n    }\n\n    function validateWCAG2Parms(parms) {\n        // return valid WCAG2 parms for isReadable.\n        // If input parms are invalid, return {\"level\":\"AA\", \"size\":\"small\"}\n        var level, size;\n        parms = parms || {\"level\":\"AA\", \"size\":\"small\"};\n        level = (parms.level || \"AA\").toUpperCase();\n        size = (parms.size || \"small\").toLowerCase();\n        if (level !== \"AA\" && level !== \"AAA\") {\n            level = \"AA\";\n        }\n        if (size !== \"small\" && size !== \"large\") {\n            size = \"small\";\n        }\n        return {\"level\":level, \"size\":size};\n    }\n\n// Node: Export function\n    if (typeof module !== \"undefined\" && module.exports) {\n        module.exports = tinycolor;\n    }\n// AMD/requirejs: Define the module\n    else if (typeof define === 'function' && define.amd) {\n        define(function () {return tinycolor;});\n    }\n// Browser: Expose to window\n    else {\n        window.tinycolor = tinycolor;\n    }\n\n})(Math);\n","Magezon_Builder/vendor/api-check/dist/api-check.min.js":"//! api-check version 7.5.5 built with \u2665 by Kent C. Dodds <kent@doddsfamily.us> (http://kent.doddsfamily.us) (\u00f3 \u00ec_\u00ed)=\u00f3\u00f2=(\u00ec_\u00ed \u00f2)\n!function(e,r){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=r():\"function\"==typeof define&&define.amd?define(r):\"object\"==typeof exports?exports.apiCheck=r():e.apiCheck=r()}(this,function(){return function(e){function r(n){if(t[n])return t[n].exports;var o=t[n]={exports:{},id:n,loaded:!1};return e[n].call(o.exports,o,o.exports,r),o.loaded=!0,o.exports}var t={};return r.m=e,r.c=t,r.p=\"\",r(0)}([function(e,r,t){\"use strict\";function n(e){return e&&e.__esModule?e:{\"default\":e}}Object.defineProperty(r,\"__esModule\",{value:!0});var o=t(3),i=n(o);r[\"default\"]=i[\"default\"],e.exports=r[\"default\"]},function(e,r){function t(e,r){var t=[],o=[];return r=r||function(e,r){return\"[Circular \"+n(r,t,o)+\"]\"},function(n,i){var a=i;return\"object\"==typeof i&&i&&(-1!==t.indexOf(i)?a=r(n,i):(t.push(i),o.push(n))),e&&(a=e(n,a)),a}}function n(e,r,t){var n=r.indexOf(e),o=[t[n]];for(n--;n>=0;n--)r[n][o[0]]===e&&(e=r[n],o.unshift(t[n]));return\"~\"+o.join(\".\")}function o(e,r,n,o){return JSON.stringify(e,t(r,o),n)}e.exports=o,o.getSerialize=t},function(e,r,t){\"use strict\";function n(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function o(e){var r=i(e),t=void 0;if(\"array\"===r)t=[];else{if(\"object\"!==r)return e;t={}}return f(e,function(e,r){t[r]=e}),t}function i(e){return Array.isArray(e)?\"array\":e instanceof RegExp?\"object\":typeof e}function a(e,r){var t=void 0,n=r&&r[\"short\"];return t=n&&e.shortType?e.shortType:!n&&\"object\"==typeof e.type||\"function\"===e.type?u(e,r):u(e,r)||e.displayName||e.name}function u(e,r){var t=e.type;if(\"function\"==typeof t){var o=t.__apiCheckData,i=t(r);t=n({__apiCheckData:o},o.type,i)}return t}function p(e){return e?Array.isArray(e)?e:[e]:[]}function f(e,r,t){return Array.isArray(e)?s(e,r,t):c(e,r,t)}function c(e,r,t){var n=void 0,o=Object.prototype.hasOwnProperty;for(var i in e)if(o.call(e,i)&&(n=r.call(t,e[i],i,e),n===!1))return n;return!0}function s(e,r,t){for(var n=void 0,o=e.length,i=0;o>i;i++)if(n=r.call(t,e[i],i,e),n===!1)return n;return!0}function l(e){return e instanceof Error}function y(e,r,t){e=p(e);var n=e.slice(),o=n.pop();return 1===n.length&&(r=\" \"),n.join(r)+(\"\"+(n.length?r+t:\"\")+o)}function h(e,r,t){\"function\"==typeof t&&(t=t({\"short\":!0}));var n=\"object\"!=typeof t?t:A(t);return new Error(d(e,r)+\" must be \"+v(n))}function d(e,r){var t=v(e||\"value\"),n=r?\" at \"+v(r):\"\";return\"\"+t+n}function v(e){return\"`\"+e+\"`\"}function g(e){return\"undefined\"==typeof e}function b(e,r,t){return t&&(e=_(),e.isNoop=!0),\"string\"==typeof e.type&&(e.shortType=e.type),f(r,function(r,t){return e[t]=r}),e.displayName||(e.displayName=\"apiCheck \"+v(e.shortType||e.type||e.name)+\" type checker\"),e.notRequired||(e=m(e,t)),e.notNullable||k(e,t),e.notOptional||O(e,t),e}function m(e,r){var t=r?_():function(r,t,n,o){if(g(r)&&!e.isOptional){var i=n?\" in \"+v(n):\"\",u=a(e,{\"short\":!0}),p=\"object\"!=typeof u?u:A(u);return new Error(\"Required \"+v(t)+\" not specified\"+i+\". Must be \"+v(p))}return e(r,t,n,o)};return j(e,t),t.originalChecker=e,t}function O(e,r){var t=r?_():function(r,t,n,o){return g(r)?void 0:e(r,t,n,o)};j(e,t),t.isOptional=!0,t.displayName=e.displayName+\" (optional)\",t.originalChecker=e,e.optional=t,C(e,e.optional)}function k(e,r){var t=r?_():function(r,t,n,o){return null!==r?e(r,t,n,o):void 0};j(e,t),t.isNullable=!0,t.displayName=e.displayName+\" (nullable)\",t.originalChecker=e,e.nullable=t,C(e,e.nullable),e.notOptional||O(e.nullable,r)}function C(e,r){if(\"object\"==typeof r.type)r.type=o(r.type);else{if(\"function\"!=typeof r.type)return void(r.type+=\" (optional)\");r.type=function(){return e.type.apply(e,arguments)}}r.type.__apiCheckData=o(e.type.__apiCheckData)||{},r.type.__apiCheckData.optional=!0}function j(e,r){f(Object.keys(e),function(t){return r[t]=e[t]})}function x(){}function _(){return function(){}}var A=t(1),T={addOptional:O,getRequiredVersion:m,setupChecker:b,addNullable:k};e.exports={each:f,copy:o,typeOf:i,arrayify:p,getCheckerDisplay:a,isError:l,list:y,getError:h,nAtL:d,t:v,undef:g,checkerHelpers:T,noop:x}},function(e,r,t){\"use strict\";function n(){function r(n,i,a){if(r.config.disabled||e.exports.globalConfig.disabled)return{apiTypes:{},argTypes:{},passed:!0,message:\"\",failed:!1};t(arguments),Array.isArray(n)?i=Array.prototype.slice.call(i):(n=[n],i=[i]);var u=p(n,i);u.length||(u=o(n,i));var f=c(n,i);return f.args=i,u.length?(f.message=r.getErrorMessage(n,i,u,a),f.failed=!0,f.passed=!1):(f.message=\"\",f.failed=!1,f.passed=!0),f}function t(e){var t=e[0],n=e[1],i=Array.isArray(n)||n&&\"object\"==typeof n&&\"number\"==typeof n.length;if(Array.isArray(t)&&!i)throw new Error(a(t,[n],[\"If an array is provided for the api, an array must be provided for the args as well.\"],{prefix:\"apiCheck\"}));var u=o(C.checkApiCheckApi,e);if(u.length){var p=r.getErrorMessage(C.checkApiCheckApi,e,u,{prefix:\"apiCheck\"});r.handleErrorMessage(p,!0)}}function n(e){return function(t,n,o){var i=r(t,n,o);return r.handleErrorMessage(i.message,e),i}}function i(e,r){if(r&&e)throw new Error(e);e&&console.warn(e)}function a(e,t){function n(){var e=p.onlyPrefix;return e||(e=((f.prefix||\"\")+\" \"+(p.prefix||\"\")).trim()),e}function o(){var e=p.onlySuffix;return e||(e=((p.suffix||\"\")+\" \"+(f.suffix||\"\")).trim()),e}function i(){var e=p.url;return e||(e=f.docsBaseUrl&&p.urlSuffix&&(\"\"+f.docsBaseUrl+p.urlSuffix).trim()),e}var a=arguments.length<=2||void 0===arguments[2]?[]:arguments[2],p=arguments.length<=3||void 0===arguments[3]?{}:arguments[3],f=r.config.output||{},c=n(),s=o(),l=i(),y=\"apiCheck failed! \"+a.join(\", \"),h=\"\\n\\n\"+u(e,t);return(c+\" \"+y+\" \"+s+\" \"+(l||\"\")+h).trim()}function u(e,r){function t(e){h(e,function(r,n){-1===f.indexOf(r)&&(f.push(r),\"object\"==typeof r?t(e):\"function\"==typeof r&&(e[n]=r.displayName||r.name||\"anonymous function\"))})}function n(e){return e&&e.length?(e&&1===e.length&&(e=e[0]),l(e,null,2)):\"nothing\"}function o(){var e=\"\\n\",t=!0;r&&1===r.length&&(t=\"object\"==typeof r[0]&&null!==r[0]?!!Object.keys(r[0]).length:!1);var n=\"type\"+(t?\"s\":\"\"),o=e+e;return\"You passed:\"+e+s+o+(\"With the \"+n+\":\"+e+u+o)+(\"The API calls for:\"+e+a)}var i=c(e,r),a=i.apiTypes,u=i.argTypes,p=Array.prototype.slice.call(r||[]),f=[];t(p);var s=n(p);return u=n(u),a=n(a),o()}function c(t,n){t=g(t),n=g(n);var o=t.map(function(t,o){var i=e.exports.globalConfig.hasOwnProperty(\"verbose\");return b(t,{terse:i?!e.exports.globalConfig.verbose:!r.config.verbose,obj:n[o],addHelpers:!0})}),i=n.map(function(e){return f(e,[])});return{argTypes:i,apiTypes:o}}var s=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],d=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];j&&arguments.length&&j[\"throw\"](C.getApiCheckInstanceCheckers,arguments,{prefix:\"creating an apiCheck instance\"});var v={\"throw\":n(!0),warn:n(!1),getErrorMessage:a,handleErrorMessage:i,config:{output:s.output||{prefix:\"\",suffix:\"\",docsBaseUrl:\"\"},verbose:s.verbose||!1,disabled:s.disabled||!1},utils:y};h(v,function(e,t){return r[t]=e});var m=r.disabled||e.exports.globalConfig.disabled;return h(k.getCheckers(m),function(e,t){return r[t]=e}),h(d,function(e,t){return r[t]=e}),r}function o(e,r){for(var t=[],n=!1,o=0,i=0,u=void 0,p=void 0,f=void 0,c=void 0,s=void 0,l=void 0,y=void 0;(p=e[o++])&&i<r.length;)u=r[i++],s=\"Argument \"+i+(p.isOptional?\" (optional)\":\"\"),f=p(u,\"value\",s),l=d(f),c=o>=e.length,y=o>1&&e[o-1].isOptional,l&&c||l&&!c&&!p.isOptional&&!y?(n=!0,t.push(a(f,p,u))):l&&p.isOptional?i--:t.push(v(s)+\" passed\");return n?t:[]}function i(e,r,t){var n=k.shape({type:k.string,optional:k.bool}),o=k.func.withProperties({__apiCheckData:n}),a=k.shape({__apiCheckData:n}),u=k.oneOfType([o,a])(e,r,t);return d(u)?u:\"function\"==typeof e||e.hasOwnProperty(e.__apiCheckData.type)?void 0:O(r,t,i.type)}function a(e,r,t){var n=u(r,t);return n=n?\" - \"+n:\"\",e.message+n}function u(e,r){var t=e.help;return t?(\"function\"==typeof t&&(t=t(r)),t):\"\"}function p(e,r){var t=e.filter(function(e){return!e.isOptional});return r.length<t.length?[\"Not enough arguments specified. Requires `\"+t.length+\"`, you passed `\"+r.length+\"`\"]:[]}function f(e,r){function t(){return e&&Object.keys(e).length}function n(){return-1!==r.indexOf(e)?\"[Circular]\":(r.push(e),c(e,r))}var o=e&&e.constructor&&e.constructor.name,i=m(e);if(\"function\"===i){if(t()){var a=l(n());return o+\" (with properties: \"+a+\")\"}return o}return null===e?\"null\":\"array\"!==i&&\"object\"!==i?i:t()?n():o}function c(e,r){var t={};return h(e,function(e,n){return t[n]=f(e,r)}),t}function s(){var e=k.string.optional,r=k.func.withProperties({type:k.oneOfType([k.string,i]).optional,displayName:k.string.optional,shortType:k.string.optional,notOptional:k.bool.optional,notRequired:k.bool.optional}),t=[k.shape({output:k.shape({prefix:k.string.optional,suffix:k.string.optional,docsBaseUrl:k.string.optional}).strict.optional,verbose:k.bool.optional,disabled:k.bool.optional}).strict.optional,k.objectOf(r).optional],n=[k.typeOrArrayOf(r),k.any.optional,k.shape({prefix:e,suffix:e,urlSuffix:e,onlyPrefix:e,onlySuffix:e,url:e}).strict.optional];return{checkerFnChecker:r,getApiCheckInstanceCheckers:t,checkApiCheckApi:n}}var l=t(1),y=t(2),h=y.each,d=y.isError,v=y.t,g=y.arrayify,b=y.getCheckerDisplay,m=y.typeOf,O=y.getError,k=t(4),C=s();e.exports=n,e.exports.VERSION=\"7.5.5\",e.exports.utils=y,e.exports.globalConfig={verbose:!1,disabled:!1};var j=n({output:{prefix:\"apiCheck\"}});e.exports.internalChecker=j,h(k,function(r,t){return e.exports[t]=r}),i.type=\"function with __apiCheckData property and `${function.type}` property\"},function(e,r,t){\"use strict\";function n(e){function r(r){var t=r.toLowerCase();return b(function(e,n,o){return a(e)!==t?y(n,o,r):void 0},{type:r},e)}function t(){var r=\"Function\",t=b(function(e,t,n){return\"function\"!==a(e)?y(t,n,r):void 0},{type:r},e);return t.withProperties=function(r){var t=m.objectOf(m.func)(r,\"properties\",\"apiCheck.func.withProperties\");if(c(t))throw t;var n=m.shape(r,!0);return n.type.__apiCheckData.type=\"func.withProperties\",b(function(e,r,t){var o=m.func(e,r,t);return c(o)?o:n(e,r,t)},{type:n.type,shortType:\"func.withProperties\"},e)},t}function n(){var r=\"Object\",t=\"Object (null ok)\",n=b(function(e,r,n){return\"object\"!==a(e)?y(r,n,t):void 0},{type:t},e),o=b(function(e,r,t){return null===e||c(n(e,r,t))?y(r,t,o.type):void 0},{type:r,nullOk:n},e);return o}function i(r){return b(function(e,t,n){return e instanceof r?void 0:y(t,n,r.name)},{type:r.name},e)}function v(r){var t={__apiCheckData:{optional:!1,type:\"enum\"},\"enum\":r},n=\"oneOf[\"+r.map(function(e){return o(e)}).join(\", \")+\"]\";return b(function(e,t,o){return r.some(function(r){return r===e})?void 0:y(t,o,n)},{type:t,shortType:n},e)}function O(r){function t(e){return e&&e[\"short\"]?o:r.map(function(r){return f(r,e)})}var n=r.map(function(e){return f(e,{\"short\":!0})}),o=\"oneOfType[\"+n.join(\", \")+\"]\";return t.__apiCheckData={optional:!1,type:\"oneOfType\"},b(function(e,t,n){return r.some(function(r){return!c(r(e,t,n))})?void 0:y(t,n,o)},{type:t,shortType:o},e)}function k(r){function t(e){return e&&e[\"short\"]?o:f(r,e)}var n=f(r,{\"short\":!0}),o=\"arrayOf[\"+n+\"]\";return t.__apiCheckData={optional:!1,type:\"arrayOf\"},b(function(e,t,n){return c(m.array(e))||!e.every(function(e){return!c(r(e))})?y(t,n,o):void 0},{type:t,shortType:o},e)}function C(r){function t(e){return e&&e[\"short\"]?o:f(r,e)}var n=f(r,{\"short\":!0}),o=\"objectOf[\"+n+\"]\";return t.__apiCheckData={optional:!1,type:\"objectOf\"},b(function(e,t,n){var i=m.object(e,t,n);if(c(i))return i;var a=u(e,function(e,n){return c(r(e,n,t))?!1:void 0});return a?void 0:y(t,n,o)},{type:t,shortType:o},e)}function j(r){function t(e){return e&&e[\"short\"]?o:f(r,e)}var n=f(r,{\"short\":!0}),o=\"typeOrArrayOf[\"+n+\"]\";return t.__apiCheckData={optional:!1,type:\"typeOrArrayOf\"},b(function(e,t,n,i){return c(m.oneOfType([r,m.arrayOf(r)])(e,t,n,i))?y(t,n,o):void 0},{type:t,shortType:o},e)}function x(){function r(r,t){function n(){function e(e,r,t,n,o){function a(t,n,o){\"string\"==typeof e[r]?e[r]+=o:e[r].__apiCheckData[t]=n}if(t||!o||n.isOptional){if(t){var u=n(i[r],r,null,i);c(u)&&a(\"error\",\"THIS IS THE PROBLEM: \"+u.message,\" <-- THIS IS THE PROBLEM: \"+u.message)}}else{var p=\"ITEM\";n.type&&n.type.__apiCheckData&&(p=n.type.__apiCheckData.type.toUpperCase()),a(\"missing\",\"MISSING THIS \"+p,\" <-- YOU ARE MISSING THIS\")}}var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],n={},o=t.terse,i=t.obj,a=t.addHelpers,p=t.required;return u(r,function(r,t){var u=i&&i.hasOwnProperty(t),c=g(p)?!r.isOptional:p;o&&!u&&r.isOptional||(n[t]=f(r,{terse:o,obj:i&&i[t],required:c,addHelpers:a})),a&&e(n,t,u,r,c)}),n}function o(){return n.apply(void 0,arguments)}var i={};u(r,function(e,r){i[r]=f(e)}),n.__apiCheckData={strict:!1,optional:!1,type:\"shape\"};var a=b(function(e,n,o){var i=!t&&m.object(e,n,o);if(c(i))return i;var a=void 0;return o=o?o+(n?\"/\":\"\"):\"\",n=n||\"\",u(r,function(r,t){return e.hasOwnProperty(t)||!r.isOptional?(a=r(e[t],t,\"\"+o+n,e),!c(a)):void 0}),c(a)?a:void 0},{type:n,shortType:\"shape\"},e);return o.__apiCheckData=p(a.type.__apiCheckData),o.__apiCheckData.strict=!0,a.strict=b(function(e,t,n){var o=a(e,t,n);if(c(o))return o;var i=Object.keys(r),u=Object.keys(e).filter(function(e){return-1===i.indexOf(e)});return u.length?new Error(h(t,n)+\" cannot have extra properties: \"+d(u.join(\"`, `\"))+\".It is limited to \"+d(i.join(\"`, `\"))):void 0},{type:o,shortType:\"strict shape\"},e),a}function t(r,t,o){var i=d(t.join(\", \")),a=\"if \"+(r?\"all of\":\"at least one of\"),u=\"specified \"+a+\" these are not specified: \"+i+\" (otherwise it's optional)\",p=\"requiredIfNot\"+(r?\".all\":\"\")+\"[\"+t.join(\", \")+\"}]\",f=n(o,u,p);return b(function(e,n,i,a){var u=a&&a.hasOwnProperty(n),p=r?\"every\":\"some\",c=t[p](function(e){return a&&a.hasOwnProperty(e)});return c||u?u?o(e,n,i,a):void 0:y(n,i,f)},{type:f,notRequired:!0},e)}function n(e,r,t){function n(r){return r&&r[\"short\"]?t:f(e)}return n.__apiCheckData={optional:!1,type:\"ifNot\",description:r},n}return r.ifNot=function(r,t){Array.isArray(r)||(r=[r]);var o=void 0;o=1===r.length?\"specified only if \"+r[0]+\" is not specified\":\"specified only if none of the following are specified: [\"+l(r,\", \",\"and \")+\"]\";var i=\"ifNot[\"+r.join(\", \")+\"]\",a=n(t,o,i);return b(function(e,n,o,i){var u=i&&i.hasOwnProperty(n),p=r.some(function(e){return i&&i.hasOwnProperty(e)});return u===p?y(n,o,a):u?t(e,n,o,i):void 0},{notRequired:!0,type:a,shortType:i},e)},r.onlyIf=function(r,t){r=s(r);var o=void 0;o=1===r.length?\"specified only if \"+r[0]+\" is also specified\":\"specified only if all of the following are specified: [\"+l(r,\", \",\"and \")+\"]\";var i=\"onlyIf[\"+r.join(\", \")+\"]\",a=n(t,o,i);return b(function(e,n,o,i){var u=r.every(function(e){return i.hasOwnProperty(e)});return u?t(e,n,o,i):y(n,o,a)},{type:a,shortType:i},e)},r.requiredIfNot=function(e,r){return Array.isArray(e)||(e=[e]),t(!1,e,r)},r.requiredIfNot.all=function(e,r){if(!Array.isArray(e))throw new Error(\"requiredIfNot.all must be passed an array\");return t(!0,e,r)},r}function _(){var r=\"function arguments\";return b(function(e,t,n){return Array.isArray(e)||c(m.object(e))||c(m.number(e.length))?y(t,n,r):void 0},{type:r},e)}function A(){return b(function(){},{type:\"any\"},e)}function T(){var r=\"null\";return b(function(e,t,n){return null!==e?y(t,n,r):void 0},{type:r},e)}function w(r,t){var n=\"Range (\"+r+\" - \"+t+\")\";return b(function(e,o,i){return\"number\"!=typeof e||r>e||e>t?y(o,i,n):void 0},{type:n},e)}function E(r){var t=\"lessThan[\"+r+\"]\";return b(function(e,n,o){return\"number\"!=typeof e||e>r?y(n,o,t):void 0},{type:t},e)}function D(r){var t=\"greaterThan[\"+r+\"]\";return b(function(e,n,o){return\"number\"!=typeof e||r>e?y(n,o,t):void 0},{type:t},e)}function N(){var r=\"empty object\";return b(function(e,t,n){return\"object\"!==a(e)||null===e||Object.keys(e).length?y(t,n,r):void 0},{type:r},e)}return{array:r(\"Array\"),bool:r(\"Boolean\"),number:r(\"Number\"),string:r(\"String\"),func:t(),object:n(),emptyObject:N(),instanceOf:i,oneOf:v,oneOfType:O,arrayOf:k,objectOf:C,typeOrArrayOf:j,range:w,lessThan:E,greaterThan:D,shape:x(),args:_(),any:A(),\"null\":T()}}var o=t(1),i=t(2),a=i.typeOf,u=i.each,p=i.copy,f=i.getCheckerDisplay,c=i.isError,s=i.arrayify,l=i.list,y=i.getError,h=i.nAtL,d=i.t,v=i.checkerHelpers,g=i.undef,b=v.setupChecker,m=e.exports=n();e.exports.getCheckers=n}])});","Magezon_Builder/vendor/angular-sanitize/angular-sanitize.min.js":"/*\n AngularJS v1.7.5\n (c) 2010-2018 Google, Inc. http://angularjs.org\n License: MIT\n*/\n(function(s,c){'use strict';function P(c){var h=[];C(h,E).chars(c);return h.join(\"\")}var D=c.$$minErr(\"$sanitize\"),F,h,G,H,I,q,E,J,K,C;c.module(\"ngSanitize\",[]).provider(\"$sanitize\",function(){function f(a,e){return B(a.split(\",\"),e)}function B(a,e){var d={},b;for(b=0;b<a.length;b++)d[e?q(a[b]):a[b]]=!0;return d}function t(a,e){e&&e.length&&h(a,B(e))}function Q(a){for(var e={},d=0,b=a.length;d<b;d++){var k=a[d];e[k.name]=k.value}return e}function L(a){return a.replace(/&/g,\"&amp;\").replace(z,function(a){var d=\na.charCodeAt(0);a=a.charCodeAt(1);return\"&#\"+(1024*(d-55296)+(a-56320)+65536)+\";\"}).replace(u,function(a){return\"&#\"+a.charCodeAt(0)+\";\"}).replace(/</g,\"&lt;\").replace(/>/g,\"&gt;\")}function A(a){for(;a;){if(a.nodeType===s.Node.ELEMENT_NODE)for(var e=a.attributes,d=0,b=e.length;d<b;d++){var k=e[d],g=k.name.toLowerCase();if(\"xmlns:ns1\"===g||0===g.lastIndexOf(\"ns1:\",0))a.removeAttributeNode(k),d--,b--}(e=a.firstChild)&&A(e);a=v(\"nextSibling\",a)}}function v(a,e){var d=e[a];if(d&&J.call(e,d))throw D(\"elclob\",\ne.outerHTML||e.outerText);return d}var y=!1,g=!1;this.$get=[\"$$sanitizeUri\",function(a){y=!0;g&&h(m,l);return function(e){var d=[];K(e,C(d,function(b,d){return!/^unsafe:/.test(a(b,d))}));return d.join(\"\")}}];this.enableSvg=function(a){return I(a)?(g=a,this):g};this.addValidElements=function(a){y||(H(a)&&(a={htmlElements:a}),t(l,a.svgElements),t(r,a.htmlVoidElements),t(m,a.htmlVoidElements),t(m,a.htmlElements));return this};this.addValidAttrs=function(a){y||h(M,B(a,!0));return this};F=c.bind;h=c.extend;\nG=c.forEach;H=c.isArray;I=c.isDefined;q=c.$$lowercase;E=c.noop;K=function(a,e){null===a||void 0===a?a=\"\":\"string\"!==typeof a&&(a=\"\"+a);var d=N(a);if(!d)return\"\";var b=5;do{if(0===b)throw D(\"uinput\");b--;a=d.innerHTML;d=N(a)}while(a!==d.innerHTML);for(b=d.firstChild;b;){switch(b.nodeType){case 1:e.start(b.nodeName.toLowerCase(),Q(b.attributes));break;case 3:e.chars(b.textContent)}var k;if(!(k=b.firstChild)&&(1===b.nodeType&&e.end(b.nodeName.toLowerCase()),k=v(\"nextSibling\",b),!k))for(;null==k;){b=\nv(\"parentNode\",b);if(b===d)break;k=v(\"nextSibling\",b);1===b.nodeType&&e.end(b.nodeName.toLowerCase())}b=k}for(;b=d.firstChild;)d.removeChild(b)};C=function(a,e){var d=!1,b=F(a,a.push);return{start:function(a,g){a=q(a);!d&&w[a]&&(d=a);d||!0!==m[a]||(b(\"<\"),b(a),G(g,function(d,g){var c=q(g),f=\"img\"===a&&\"src\"===c||\"background\"===c;!0!==M[c]||!0===O[c]&&!e(d,f)||(b(\" \"),b(g),b('=\"'),b(L(d)),b('\"'))}),b(\">\"))},end:function(a){a=q(a);d||!0!==m[a]||!0===r[a]||(b(\"</\"),b(a),b(\">\"));a==d&&(d=!1)},chars:function(a){d||\nb(L(a))}}};J=s.Node.prototype.contains||function(a){return!!(this.compareDocumentPosition(a)&16)};var z=/[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]/g,u=/([^#-~ |!])/g,r=f(\"area,br,col,hr,img,wbr\"),x=f(\"colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr\"),p=f(\"rp,rt\"),n=h({},p,x),x=h({},x,f(\"address,article,aside,blockquote,caption,center,del,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,map,menu,nav,ol,pre,section,table,ul\")),p=h({},p,f(\"a,abbr,acronym,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,q,ruby,rp,rt,s,samp,small,span,strike,strong,sub,sup,time,tt,u,var\")),\nl=f(\"circle,defs,desc,ellipse,font-face,font-face-name,font-face-src,g,glyph,hkern,image,linearGradient,line,marker,metadata,missing-glyph,mpath,path,polygon,polyline,radialGradient,rect,stop,svg,switch,text,title,tspan\"),w=f(\"script,style\"),m=h({},r,x,p,n),O=f(\"background,cite,href,longdesc,src,xlink:href,xml:base\"),n=f(\"abbr,align,alt,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,coords,dir,face,headers,height,hreflang,hspace,ismap,lang,language,nohref,nowrap,rel,rev,rows,rowspan,rules,scope,scrolling,shape,size,span,start,summary,tabindex,target,title,type,valign,value,vspace,width\"),\np=f(\"accent-height,accumulate,additive,alphabetic,arabic-form,ascent,baseProfile,bbox,begin,by,calcMode,cap-height,class,color,color-rendering,content,cx,cy,d,dx,dy,descent,display,dur,end,fill,fill-rule,font-family,font-size,font-stretch,font-style,font-variant,font-weight,from,fx,fy,g1,g2,glyph-name,gradientUnits,hanging,height,horiz-adv-x,horiz-origin-x,ideographic,k,keyPoints,keySplines,keyTimes,lang,marker-end,marker-mid,marker-start,markerHeight,markerUnits,markerWidth,mathematical,max,min,offset,opacity,orient,origin,overline-position,overline-thickness,panose-1,path,pathLength,points,preserveAspectRatio,r,refX,refY,repeatCount,repeatDur,requiredExtensions,requiredFeatures,restart,rotate,rx,ry,slope,stemh,stemv,stop-color,stop-opacity,strikethrough-position,strikethrough-thickness,stroke,stroke-dasharray,stroke-dashoffset,stroke-linecap,stroke-linejoin,stroke-miterlimit,stroke-opacity,stroke-width,systemLanguage,target,text-anchor,to,transform,type,u1,u2,underline-position,underline-thickness,unicode,unicode-range,units-per-em,values,version,viewBox,visibility,width,widths,x,x-height,x1,x2,xlink:actuate,xlink:arcrole,xlink:role,xlink:show,xlink:title,xlink:type,xml:base,xml:lang,xml:space,xmlns,xmlns:xlink,y,y1,y2,zoomAndPan\",\n!0),M=h({},O,p,n),N=function(a,e){function d(b){b=\"<remove></remove>\"+b;try{var d=(new a.DOMParser).parseFromString(b,\"text/html\").body;d.firstChild.remove();return d}catch(e){}}function b(a){c.innerHTML=a;e.documentMode&&A(c);return c}var g;if(e&&e.implementation)g=e.implementation.createHTMLDocument(\"inert\");else throw D(\"noinert\");var c=(g.documentElement||g.getDocumentElement()).querySelector(\"body\");c.innerHTML='<svg><g onload=\"this.parentNode.remove()\"></g></svg>';return c.querySelector(\"svg\")?\n(c.innerHTML='<svg><p><style><img src=\"</style><img src=x onerror=alert(1)//\">',c.querySelector(\"svg img\")?d:b):function(b){b=\"<remove></remove>\"+b;try{b=encodeURI(b)}catch(d){return}var e=new a.XMLHttpRequest;e.responseType=\"document\";e.open(\"GET\",\"data:text/html;charset=utf-8,\"+b,!1);e.send(null);b=e.response.body;b.firstChild.remove();return b}}(s,s.document)}).info({angularVersion:\"1.7.5\"});c.module(\"ngSanitize\").filter(\"linky\",[\"$sanitize\",function(f){var h=/((s?ftp|https?):\\/\\/|(www\\.)|(mailto:)?[A-Za-z0-9._%+-]+@)\\S*[^\\s.;,(){}<>\"\\u201d\\u2019]/i,\nt=/^mailto:/i,q=c.$$minErr(\"linky\"),s=c.isDefined,A=c.isFunction,v=c.isObject,y=c.isString;return function(c,z,u){function r(c){c&&l.push(P(c))}function x(c,g){var f,a=p(c);l.push(\"<a \");for(f in a)l.push(f+'=\"'+a[f]+'\" ');!s(z)||\"target\"in a||l.push('target=\"',z,'\" ');l.push('href=\"',c.replace(/\"/g,\"&quot;\"),'\">');r(g);l.push(\"</a>\")}if(null==c||\"\"===c)return c;if(!y(c))throw q(\"notstring\",c);for(var p=A(u)?u:v(u)?function(){return u}:function(){return{}},n=c,l=[],w,m;c=n.match(h);)w=c[0],c[2]||\nc[4]||(w=(c[3]?\"http://\":\"mailto:\")+w),m=c.index,r(n.substr(0,m)),x(w,c[0].replace(t,\"\")),n=n.substring(m+c[0].length);r(n);return f(l.join(\"\"))}}])})(window,window.angular);","Magezon_Builder/vendor/angular/angular.min.js":"/*\n AngularJS v1.7.5\n (c) 2010-2018 Google, Inc. http://angularjs.org\n License: MIT\n*/\n(function(B){'use strict';function oe(a){if(F(a))v(a.objectMaxDepth)&&(Vb.objectMaxDepth=Wb(a.objectMaxDepth)?a.objectMaxDepth:NaN),v(a.urlErrorParamsEnabled)&&Fa(a.urlErrorParamsEnabled)&&(Vb.urlErrorParamsEnabled=a.urlErrorParamsEnabled);else return Vb}function Wb(a){return ba(a)&&0<a}function M(a,b){b=b||Error;return function(){var d=arguments[0],c;c=\"[\"+(a?a+\":\":\"\")+d+\"] http://errors.angularjs.org/1.7.5/\"+(a?a+\"/\":\"\")+d;for(d=1;d<arguments.length;d++){c=c+(1==d?\"?\":\"&\")+\"p\"+(d-1)+\"=\";var e=encodeURIComponent,\nf;f=arguments[d];f=\"function\"==typeof f?f.toString().replace(/ \\{[\\s\\S]*$/,\"\"):\"undefined\"==typeof f?\"undefined\":\"string\"!=typeof f?JSON.stringify(f):f;c+=e(f)}return new b(c)}}function xa(a){if(null==a||$a(a))return!1;if(I(a)||C(a)||y&&a instanceof y)return!0;var b=\"length\"in Object(a)&&a.length;return ba(b)&&(0<=b&&b-1 in a||\"function\"===typeof a.item)}function r(a,b,d){var c,e;if(a)if(z(a))for(c in a)\"prototype\"!==c&&\"length\"!==c&&\"name\"!==c&&a.hasOwnProperty(c)&&b.call(d,a[c],c,a);else if(I(a)||\nxa(a)){var f=\"object\"!==typeof a;c=0;for(e=a.length;c<e;c++)(f||c in a)&&b.call(d,a[c],c,a)}else if(a.forEach&&a.forEach!==r)a.forEach(b,d,a);else if(Mc(a))for(c in a)b.call(d,a[c],c,a);else if(\"function\"===typeof a.hasOwnProperty)for(c in a)a.hasOwnProperty(c)&&b.call(d,a[c],c,a);else for(c in a)sa.call(a,c)&&b.call(d,a[c],c,a);return a}function Nc(a,b,d){for(var c=Object.keys(a).sort(),e=0;e<c.length;e++)b.call(d,a[c[e]],c[e]);return c}function Xb(a){return function(b,d){a(d,b)}}function pe(){return++pb}\nfunction Yb(a,b,d){for(var c=a.$$hashKey,e=0,f=b.length;e<f;++e){var g=b[e];if(F(g)||z(g))for(var k=Object.keys(g),h=0,l=k.length;h<l;h++){var m=k[h],q=g[m];d&&F(q)?ha(q)?a[m]=new Date(q.valueOf()):ab(q)?a[m]=new RegExp(q):q.nodeName?a[m]=q.cloneNode(!0):Zb(q)?a[m]=q.clone():(F(a[m])||(a[m]=I(q)?[]:{}),Yb(a[m],[q],!0)):a[m]=q}}c?a.$$hashKey=c:delete a.$$hashKey;return a}function R(a){return Yb(a,Ga.call(arguments,1),!1)}function qe(a){return Yb(a,Ga.call(arguments,1),!0)}function da(a){return parseInt(a,\n10)}function $b(a,b){return R(Object.create(a),b)}function A(){}function Ta(a){return a}function ia(a){return function(){return a}}function ac(a){return z(a.toString)&&a.toString!==ma}function x(a){return\"undefined\"===typeof a}function v(a){return\"undefined\"!==typeof a}function F(a){return null!==a&&\"object\"===typeof a}function Mc(a){return null!==a&&\"object\"===typeof a&&!Oc(a)}function C(a){return\"string\"===typeof a}function ba(a){return\"number\"===typeof a}function ha(a){return\"[object Date]\"===\nma.call(a)}function I(a){return Array.isArray(a)||a instanceof Array}function bc(a){switch(ma.call(a)){case \"[object Error]\":return!0;case \"[object Exception]\":return!0;case \"[object DOMException]\":return!0;default:return a instanceof Error}}function z(a){return\"function\"===typeof a}function ab(a){return\"[object RegExp]\"===ma.call(a)}function $a(a){return a&&a.window===a}function bb(a){return a&&a.$evalAsync&&a.$watch}function Fa(a){return\"boolean\"===typeof a}function re(a){return a&&ba(a.length)&&\nse.test(ma.call(a))}function Zb(a){return!(!a||!(a.nodeName||a.prop&&a.attr&&a.find))}function te(a){var b={};a=a.split(\",\");var d;for(d=0;d<a.length;d++)b[a[d]]=!0;return b}function ta(a){return O(a.nodeName||a[0]&&a[0].nodeName)}function cb(a,b){var d=a.indexOf(b);0<=d&&a.splice(d,1);return d}function Ha(a,b,d){function c(a,b,c){c--;if(0>c)return\"...\";var d=b.$$hashKey,f;if(I(a)){f=0;for(var g=a.length;f<g;f++)b.push(e(a[f],c))}else if(Mc(a))for(f in a)b[f]=e(a[f],c);else if(a&&\"function\"===typeof a.hasOwnProperty)for(f in a)a.hasOwnProperty(f)&&\n(b[f]=e(a[f],c));else for(f in a)sa.call(a,f)&&(b[f]=e(a[f],c));d?b.$$hashKey=d:delete b.$$hashKey;return b}function e(a,b){if(!F(a))return a;var d=g.indexOf(a);if(-1!==d)return k[d];if($a(a)||bb(a))throw Ia(\"cpws\");var d=!1,e=f(a);void 0===e&&(e=I(a)?[]:Object.create(Oc(a)),d=!0);g.push(a);k.push(e);return d?c(a,e,b):e}function f(a){switch(ma.call(a)){case \"[object Int8Array]\":case \"[object Int16Array]\":case \"[object Int32Array]\":case \"[object Float32Array]\":case \"[object Float64Array]\":case \"[object Uint8Array]\":case \"[object Uint8ClampedArray]\":case \"[object Uint16Array]\":case \"[object Uint32Array]\":return new a.constructor(e(a.buffer),\na.byteOffset,a.length);case \"[object ArrayBuffer]\":if(!a.slice){var b=new ArrayBuffer(a.byteLength);(new Uint8Array(b)).set(new Uint8Array(a));return b}return a.slice(0);case \"[object Boolean]\":case \"[object Number]\":case \"[object String]\":case \"[object Date]\":return new a.constructor(a.valueOf());case \"[object RegExp]\":return b=new RegExp(a.source,a.toString().match(/[^/]*$/)[0]),b.lastIndex=a.lastIndex,b;case \"[object Blob]\":return new a.constructor([a],{type:a.type})}if(z(a.cloneNode))return a.cloneNode(!0)}\nvar g=[],k=[];d=Wb(d)?d:NaN;if(b){if(re(b)||\"[object ArrayBuffer]\"===ma.call(b))throw Ia(\"cpta\");if(a===b)throw Ia(\"cpi\");I(b)?b.length=0:r(b,function(a,c){\"$$hashKey\"!==c&&delete b[c]});g.push(a);k.push(b);return c(a,b,d)}return e(a,d)}function cc(a,b){return a===b||a!==a&&b!==b}function ua(a,b){if(a===b)return!0;if(null===a||null===b)return!1;if(a!==a&&b!==b)return!0;var d=typeof a,c;if(d===typeof b&&\"object\"===d)if(I(a)){if(!I(b))return!1;if((d=a.length)===b.length){for(c=0;c<d;c++)if(!ua(a[c],\nb[c]))return!1;return!0}}else{if(ha(a))return ha(b)?cc(a.getTime(),b.getTime()):!1;if(ab(a))return ab(b)?a.toString()===b.toString():!1;if(bb(a)||bb(b)||$a(a)||$a(b)||I(b)||ha(b)||ab(b))return!1;d=S();for(c in a)if(\"$\"!==c.charAt(0)&&!z(a[c])){if(!ua(a[c],b[c]))return!1;d[c]=!0}for(c in b)if(!(c in d)&&\"$\"!==c.charAt(0)&&v(b[c])&&!z(b[c]))return!1;return!0}return!1}function db(a,b,d){return a.concat(Ga.call(b,d))}function Va(a,b){var d=2<arguments.length?Ga.call(arguments,2):[];return!z(b)||b instanceof\nRegExp?b:d.length?function(){return arguments.length?b.apply(a,db(d,arguments,0)):b.apply(a,d)}:function(){return arguments.length?b.apply(a,arguments):b.call(a)}}function Pc(a,b){var d=b;\"string\"===typeof a&&\"$\"===a.charAt(0)&&\"$\"===a.charAt(1)?d=void 0:$a(b)?d=\"$WINDOW\":b&&B.document===b?d=\"$DOCUMENT\":bb(b)&&(d=\"$SCOPE\");return d}function eb(a,b){if(!x(a))return ba(b)||(b=b?2:null),JSON.stringify(a,Pc,b)}function Qc(a){return C(a)?JSON.parse(a):a}function dc(a,b){a=a.replace(ue,\"\");var d=Date.parse(\"Jan 01, 1970 00:00:00 \"+\na)/6E4;return V(d)?b:d}function Rc(a,b){a=new Date(a.getTime());a.setMinutes(a.getMinutes()+b);return a}function ec(a,b,d){d=d?-1:1;var c=a.getTimezoneOffset();b=dc(b,c);return Rc(a,d*(b-c))}function ya(a){a=y(a).clone().empty();var b=y(\"<div></div>\").append(a).html();try{return a[0].nodeType===Oa?O(b):b.match(/^(<[^>]+>)/)[1].replace(/^<([\\w-]+)/,function(a,b){return\"<\"+O(b)})}catch(d){return O(b)}}function Sc(a){try{return decodeURIComponent(a)}catch(b){}}function fc(a){var b={};r((a||\"\").split(\"&\"),\nfunction(a){var c,e,f;a&&(e=a=a.replace(/\\+/g,\"%20\"),c=a.indexOf(\"=\"),-1!==c&&(e=a.substring(0,c),f=a.substring(c+1)),e=Sc(e),v(e)&&(f=v(f)?Sc(f):!0,sa.call(b,e)?I(b[e])?b[e].push(f):b[e]=[b[e],f]:b[e]=f))});return b}function ve(a){var b=[];r(a,function(a,c){I(a)?r(a,function(a){b.push(ca(c,!0)+(!0===a?\"\":\"=\"+ca(a,!0)))}):b.push(ca(c,!0)+(!0===a?\"\":\"=\"+ca(a,!0)))});return b.length?b.join(\"&\"):\"\"}function gc(a){return ca(a,!0).replace(/%26/gi,\"&\").replace(/%3D/gi,\"=\").replace(/%2B/gi,\"+\")}function ca(a,\nb){return encodeURIComponent(a).replace(/%40/gi,\"@\").replace(/%3A/gi,\":\").replace(/%24/g,\"$\").replace(/%2C/gi,\",\").replace(/%3B/gi,\";\").replace(/%20/g,b?\"%20\":\"+\")}function we(a,b){var d,c,e=Pa.length;for(c=0;c<e;++c)if(d=Pa[c]+b,C(d=a.getAttribute(d)))return d;return null}function xe(a,b){var d,c,e={};r(Pa,function(b){b+=\"app\";!d&&a.hasAttribute&&a.hasAttribute(b)&&(d=a,c=a.getAttribute(b))});r(Pa,function(b){b+=\"app\";var e;!d&&(e=a.querySelector(\"[\"+b.replace(\":\",\"\\\\:\")+\"]\"))&&(d=e,c=e.getAttribute(b))});\nif(d)if(ye)e.strictDi=null!==we(d,\"strict-di\"),b(d,c?[c]:[],e);else try{B.console.error(\"AngularJS: disabling automatic bootstrap. <script> protocol indicates an extension, document.location.href does not match.\")}catch(f){}}function Tc(a,b,d){F(d)||(d={});d=R({strictDi:!1},d);var c=function(){a=y(a);if(a.injector()){var c=a[0]===B.document?\"document\":ya(a);throw Ia(\"btstrpd\",c.replace(/</,\"&lt;\").replace(/>/,\"&gt;\"));}b=b||[];b.unshift([\"$provide\",function(b){b.value(\"$rootElement\",a)}]);d.debugInfoEnabled&&\nb.push([\"$compileProvider\",function(a){a.debugInfoEnabled(!0)}]);b.unshift(\"ng\");c=fb(b,d.strictDi);c.invoke([\"$rootScope\",\"$rootElement\",\"$compile\",\"$injector\",function(a,b,c,d){a.$apply(function(){b.data(\"$injector\",d);c(b)(a)})}]);return c},e=/^NG_ENABLE_DEBUG_INFO!/,f=/^NG_DEFER_BOOTSTRAP!/;B&&e.test(B.name)&&(d.debugInfoEnabled=!0,B.name=B.name.replace(e,\"\"));if(B&&!f.test(B.name))return c();B.name=B.name.replace(f,\"\");ea.resumeBootstrap=function(a){r(a,function(a){b.push(a)});return c()};z(ea.resumeDeferredBootstrap)&&\nea.resumeDeferredBootstrap()}function ze(){B.name=\"NG_ENABLE_DEBUG_INFO!\"+B.name;B.location.reload()}function Ae(a){a=ea.element(a).injector();if(!a)throw Ia(\"test\");return a.get(\"$$testability\")}function Uc(a,b){b=b||\"_\";return a.replace(Be,function(a,c){return(c?b:\"\")+a.toLowerCase()})}function Ce(){var a;if(!Vc){var b=qb();(rb=x(b)?B.jQuery:b?B[b]:void 0)&&rb.fn.on?(y=rb,R(rb.fn,{scope:Wa.scope,isolateScope:Wa.isolateScope,controller:Wa.controller,injector:Wa.injector,inheritedData:Wa.inheritedData})):\ny=W;a=y.cleanData;y.cleanData=function(b){for(var c,e=0,f;null!=(f=b[e]);e++)(c=(y._data(f)||{}).events)&&c.$destroy&&y(f).triggerHandler(\"$destroy\");a(b)};ea.element=y;Vc=!0}}function gb(a,b,d){if(!a)throw Ia(\"areq\",b||\"?\",d||\"required\");return a}function sb(a,b,d){d&&I(a)&&(a=a[a.length-1]);gb(z(a),b,\"not a function, got \"+(a&&\"object\"===typeof a?a.constructor.name||\"Object\":typeof a));return a}function Qa(a,b){if(\"hasOwnProperty\"===a)throw Ia(\"badname\",b);}function De(a,b,d){if(!b)return a;b=b.split(\".\");\nfor(var c,e=a,f=b.length,g=0;g<f;g++)c=b[g],a&&(a=(e=a)[c]);return!d&&z(a)?Va(e,a):a}function tb(a){for(var b=a[0],d=a[a.length-1],c,e=1;b!==d&&(b=b.nextSibling);e++)if(c||a[e]!==b)c||(c=y(Ga.call(a,0,e))),c.push(b);return c||a}function S(){return Object.create(null)}function hc(a){if(null==a)return\"\";switch(typeof a){case \"string\":break;case \"number\":a=\"\"+a;break;default:a=!ac(a)||I(a)||ha(a)?eb(a):a.toString()}return a}function Ee(a){function b(a,b,c){return a[b]||(a[b]=c())}var d=M(\"$injector\"),\nc=M(\"ng\");a=b(a,\"angular\",Object);a.$$minErr=a.$$minErr||M;return b(a,\"module\",function(){var a={};return function(f,g,k){var h={};if(\"hasOwnProperty\"===f)throw c(\"badname\",\"module\");g&&a.hasOwnProperty(f)&&(a[f]=null);return b(a,f,function(){function a(b,c,d,f){f||(f=e);return function(){f[d||\"push\"]([b,c,arguments]);return u}}function b(a,c,d){d||(d=e);return function(b,e){e&&z(e)&&(e.$$moduleName=f);d.push([a,c,arguments]);return u}}if(!g)throw d(\"nomod\",f);var e=[],n=[],s=[],t=a(\"$injector\",\"invoke\",\n\"push\",n),u={_invokeQueue:e,_configBlocks:n,_runBlocks:s,info:function(a){if(v(a)){if(!F(a))throw c(\"aobj\",\"value\");h=a;return this}return h},requires:g,name:f,provider:b(\"$provide\",\"provider\"),factory:b(\"$provide\",\"factory\"),service:b(\"$provide\",\"service\"),value:a(\"$provide\",\"value\"),constant:a(\"$provide\",\"constant\",\"unshift\"),decorator:b(\"$provide\",\"decorator\",n),animation:b(\"$animateProvider\",\"register\"),filter:b(\"$filterProvider\",\"register\"),controller:b(\"$controllerProvider\",\"register\"),directive:b(\"$compileProvider\",\n\"directive\"),component:b(\"$compileProvider\",\"component\"),config:t,run:function(a){s.push(a);return this}};k&&t(k);return u})}})}function oa(a,b){if(I(a)){b=b||[];for(var d=0,c=a.length;d<c;d++)b[d]=a[d]}else if(F(a))for(d in b=b||{},a)if(\"$\"!==d.charAt(0)||\"$\"!==d.charAt(1))b[d]=a[d];return b||a}function Fe(a,b){var d=[];Wb(b)&&(a=ea.copy(a,null,b));return JSON.stringify(a,function(a,b){b=Pc(a,b);if(F(b)){if(0<=d.indexOf(b))return\"...\";d.push(b)}return b})}function Ge(a){R(a,{errorHandlingConfig:oe,\nbootstrap:Tc,copy:Ha,extend:R,merge:qe,equals:ua,element:y,forEach:r,injector:fb,noop:A,bind:Va,toJson:eb,fromJson:Qc,identity:Ta,isUndefined:x,isDefined:v,isString:C,isFunction:z,isObject:F,isNumber:ba,isElement:Zb,isArray:I,version:He,isDate:ha,callbacks:{$$counter:0},getTestability:Ae,reloadWithDebugInfo:ze,$$minErr:M,$$csp:pa,$$encodeUriSegment:gc,$$encodeUriQuery:ca,$$lowercase:O,$$stringify:hc,$$uppercase:ub});jc=Ee(B);jc(\"ng\",[\"ngLocale\"],[\"$provide\",function(a){a.provider({$$sanitizeUri:Ie});\na.provider(\"$compile\",Wc).directive({a:Je,input:Xc,textarea:Xc,form:Ke,script:Le,select:Me,option:Ne,ngBind:Oe,ngBindHtml:Pe,ngBindTemplate:Qe,ngClass:Re,ngClassEven:Se,ngClassOdd:Te,ngCloak:Ue,ngController:Ve,ngForm:We,ngHide:Xe,ngIf:Ye,ngInclude:Ze,ngInit:$e,ngNonBindable:af,ngPluralize:bf,ngRef:cf,ngRepeat:df,ngShow:ef,ngStyle:ff,ngSwitch:gf,ngSwitchWhen:hf,ngSwitchDefault:jf,ngOptions:kf,ngTransclude:lf,ngModel:mf,ngList:nf,ngChange:of,pattern:Yc,ngPattern:Yc,required:Zc,ngRequired:Zc,minlength:$c,\nngMinlength:$c,maxlength:ad,ngMaxlength:ad,ngValue:pf,ngModelOptions:qf}).directive({ngInclude:rf}).directive(vb).directive(bd);a.provider({$anchorScroll:sf,$animate:tf,$animateCss:uf,$$animateJs:vf,$$animateQueue:wf,$$AnimateRunner:xf,$$animateAsyncRun:yf,$browser:zf,$cacheFactory:Af,$controller:Bf,$document:Cf,$$isDocumentHidden:Df,$exceptionHandler:Ef,$filter:cd,$$forceReflow:Ff,$interpolate:Gf,$interval:Hf,$$intervalFactory:If,$http:Jf,$httpParamSerializer:Kf,$httpParamSerializerJQLike:Lf,$httpBackend:Mf,\n$xhrFactory:Nf,$jsonpCallbacks:Of,$location:Pf,$log:Qf,$parse:Rf,$rootScope:Sf,$q:Tf,$$q:Uf,$sce:Vf,$sceDelegate:Wf,$sniffer:Xf,$$taskTrackerFactory:Yf,$templateCache:Zf,$templateRequest:$f,$$testability:ag,$timeout:bg,$window:cg,$$rAF:dg,$$jqLite:eg,$$Map:fg,$$cookieReader:gg})}]).info({angularVersion:\"1.7.5\"})}function wb(a,b){return b.toUpperCase()}function xb(a){return a.replace(hg,wb)}function kc(a){a=a.nodeType;return 1===a||!a||9===a}function dd(a,b){var d,c,e=b.createDocumentFragment(),f=\n[];if(lc.test(a)){d=e.appendChild(b.createElement(\"div\"));c=(ig.exec(a)||[\"\",\"\"])[1].toLowerCase();c=ja[c]||ja._default;d.innerHTML=c[1]+a.replace(jg,\"<$1></$2>\")+c[2];for(c=c[0];c--;)d=d.lastChild;f=db(f,d.childNodes);d=e.firstChild;d.textContent=\"\"}else f.push(b.createTextNode(a));e.textContent=\"\";e.innerHTML=\"\";r(f,function(a){e.appendChild(a)});return e}function W(a){if(a instanceof W)return a;var b;C(a)&&(a=T(a),b=!0);if(!(this instanceof W)){if(b&&\"<\"!==a.charAt(0))throw mc(\"nosel\");return new W(a)}if(b){b=\nB.document;var d;a=(d=kg.exec(a))?[b.createElement(d[1])]:(d=dd(a,b))?d.childNodes:[];nc(this,a)}else z(a)?ed(a):nc(this,a)}function oc(a){return a.cloneNode(!0)}function yb(a,b){!b&&kc(a)&&y.cleanData([a]);a.querySelectorAll&&y.cleanData(a.querySelectorAll(\"*\"))}function fd(a){for(var b in a)return!1;return!0}function gd(a){var b=a.ng339,d=b&&Ja[b],c=d&&d.events,d=d&&d.data;d&&!fd(d)||c&&!fd(c)||(delete Ja[b],a.ng339=void 0)}function hd(a,b,d,c){if(v(c))throw mc(\"offargs\");var e=(c=zb(a))&&c.events,\nf=c&&c.handle;if(f){if(b){var g=function(b){var c=e[b];v(d)&&cb(c||[],d);v(d)&&c&&0<c.length||(a.removeEventListener(b,f),delete e[b])};r(b.split(\" \"),function(a){g(a);Ab[a]&&g(Ab[a])})}else for(b in e)\"$destroy\"!==b&&a.removeEventListener(b,f),delete e[b];gd(a)}}function pc(a,b){var d=a.ng339;if(d=d&&Ja[d])b?delete d.data[b]:d.data={},gd(a)}function zb(a,b){var d=a.ng339,d=d&&Ja[d];b&&!d&&(a.ng339=d=++lg,d=Ja[d]={events:{},data:{},handle:void 0});return d}function qc(a,b,d){if(kc(a)){var c,e=v(d),\nf=!e&&b&&!F(b),g=!b;a=(a=zb(a,!f))&&a.data;if(e)a[xb(b)]=d;else{if(g)return a;if(f)return a&&a[xb(b)];for(c in b)a[xb(c)]=b[c]}}}function Bb(a,b){return a.getAttribute?-1<(\" \"+(a.getAttribute(\"class\")||\"\")+\" \").replace(/[\\n\\t]/g,\" \").indexOf(\" \"+b+\" \"):!1}function Cb(a,b){if(b&&a.setAttribute){var d=(\" \"+(a.getAttribute(\"class\")||\"\")+\" \").replace(/[\\n\\t]/g,\" \"),c=d;r(b.split(\" \"),function(a){a=T(a);c=c.replace(\" \"+a+\" \",\" \")});c!==d&&a.setAttribute(\"class\",T(c))}}function Db(a,b){if(b&&a.setAttribute){var d=\n(\" \"+(a.getAttribute(\"class\")||\"\")+\" \").replace(/[\\n\\t]/g,\" \"),c=d;r(b.split(\" \"),function(a){a=T(a);-1===c.indexOf(\" \"+a+\" \")&&(c+=a+\" \")});c!==d&&a.setAttribute(\"class\",T(c))}}function nc(a,b){if(b)if(b.nodeType)a[a.length++]=b;else{var d=b.length;if(\"number\"===typeof d&&b.window!==b){if(d)for(var c=0;c<d;c++)a[a.length++]=b[c]}else a[a.length++]=b}}function id(a,b){return Eb(a,\"$\"+(b||\"ngController\")+\"Controller\")}function Eb(a,b,d){9===a.nodeType&&(a=a.documentElement);for(b=I(b)?b:[b];a;){for(var c=\n0,e=b.length;c<e;c++)if(v(d=y.data(a,b[c])))return d;a=a.parentNode||11===a.nodeType&&a.host}}function jd(a){for(yb(a,!0);a.firstChild;)a.removeChild(a.firstChild)}function Fb(a,b){b||yb(a);var d=a.parentNode;d&&d.removeChild(a)}function mg(a,b){b=b||B;if(\"complete\"===b.document.readyState)b.setTimeout(a);else y(b).on(\"load\",a)}function ed(a){function b(){B.document.removeEventListener(\"DOMContentLoaded\",b);B.removeEventListener(\"load\",b);a()}\"complete\"===B.document.readyState?B.setTimeout(a):(B.document.addEventListener(\"DOMContentLoaded\",\nb),B.addEventListener(\"load\",b))}function kd(a,b){var d=Gb[b.toLowerCase()];return d&&ld[ta(a)]&&d}function ng(a,b){var d=function(c,d){c.isDefaultPrevented=function(){return c.defaultPrevented};var f=b[d||c.type],g=f?f.length:0;if(g){if(x(c.immediatePropagationStopped)){var k=c.stopImmediatePropagation;c.stopImmediatePropagation=function(){c.immediatePropagationStopped=!0;c.stopPropagation&&c.stopPropagation();k&&k.call(c)}}c.isImmediatePropagationStopped=function(){return!0===c.immediatePropagationStopped};\nvar h=f.specialHandlerWrapper||og;1<g&&(f=oa(f));for(var l=0;l<g;l++)c.isImmediatePropagationStopped()||h(a,c,f[l])}};d.elem=a;return d}function og(a,b,d){d.call(a,b)}function pg(a,b,d){var c=b.relatedTarget;c&&(c===a||qg.call(a,c))||d.call(a,b)}function eg(){this.$get=function(){return R(W,{hasClass:function(a,b){a.attr&&(a=a[0]);return Bb(a,b)},addClass:function(a,b){a.attr&&(a=a[0]);return Db(a,b)},removeClass:function(a,b){a.attr&&(a=a[0]);return Cb(a,b)}})}}function Ka(a,b){var d=a&&a.$$hashKey;\nif(d)return\"function\"===typeof d&&(d=a.$$hashKey()),d;d=typeof a;return d=\"function\"===d||\"object\"===d&&null!==a?a.$$hashKey=d+\":\"+(b||pe)():d+\":\"+a}function md(){this._keys=[];this._values=[];this._lastKey=NaN;this._lastIndex=-1}function nd(a){a=Function.prototype.toString.call(a).replace(rg,\"\");return a.match(sg)||a.match(tg)}function ug(a){return(a=nd(a))?\"function(\"+(a[1]||\"\").replace(/[\\s\\r\\n]+/,\" \")+\")\":\"fn\"}function fb(a,b){function d(a){return function(b,c){if(F(b))r(b,Xb(a));else return a(b,\nc)}}function c(a,b){Qa(a,\"service\");if(z(b)||I(b))b=n.instantiate(b);if(!b.$get)throw za(\"pget\",a);return q[a+\"Provider\"]=b}function e(a,b){return function(){var c=u.invoke(b,this);if(x(c))throw za(\"undef\",a);return c}}function f(a,b,d){return c(a,{$get:!1!==d?e(a,b):b})}function g(a){gb(x(a)||I(a),\"modulesToLoad\",\"not an array\");var b=[],c;r(a,function(a){function d(a){var b,c;b=0;for(c=a.length;b<c;b++){var e=a[b],f=n.get(e[0]);f[e[1]].apply(f,e[2])}}if(!m.get(a)){m.set(a,!0);try{C(a)?(c=jc(a),\nu.modules[a]=c,b=b.concat(g(c.requires)).concat(c._runBlocks),d(c._invokeQueue),d(c._configBlocks)):z(a)?b.push(n.invoke(a)):I(a)?b.push(n.invoke(a)):sb(a,\"module\")}catch(e){throw I(a)&&(a=a[a.length-1]),e.message&&e.stack&&-1===e.stack.indexOf(e.message)&&(e=e.message+\"\\n\"+e.stack),za(\"modulerr\",a,e.stack||e.message||e);}}});return b}function k(a,c){function d(b,e){if(a.hasOwnProperty(b)){if(a[b]===h)throw za(\"cdep\",b+\" <- \"+l.join(\" <- \"));return a[b]}try{return l.unshift(b),a[b]=h,a[b]=c(b,e),\na[b]}catch(f){throw a[b]===h&&delete a[b],f;}finally{l.shift()}}function e(a,c,f){var g=[];a=fb.$$annotate(a,b,f);for(var h=0,k=a.length;h<k;h++){var l=a[h];if(\"string\"!==typeof l)throw za(\"itkn\",l);g.push(c&&c.hasOwnProperty(l)?c[l]:d(l,f))}return g}return{invoke:function(a,b,c,d){\"string\"===typeof c&&(d=c,c=null);c=e(a,c,d);I(a)&&(a=a[a.length-1]);d=a;if(Aa||\"function\"!==typeof d)d=!1;else{var f=d.$$ngIsClass;Fa(f)||(f=d.$$ngIsClass=/^class\\b/.test(Function.prototype.toString.call(d)));d=f}return d?\n(c.unshift(null),new (Function.prototype.bind.apply(a,c))):a.apply(b,c)},instantiate:function(a,b,c){var d=I(a)?a[a.length-1]:a;a=e(a,b,c);a.unshift(null);return new (Function.prototype.bind.apply(d,a))},get:d,annotate:fb.$$annotate,has:function(b){return q.hasOwnProperty(b+\"Provider\")||a.hasOwnProperty(b)}}}b=!0===b;var h={},l=[],m=new Hb,q={$provide:{provider:d(c),factory:d(f),service:d(function(a,b){return f(a,[\"$injector\",function(a){return a.instantiate(b)}])}),value:d(function(a,b){return f(a,\nia(b),!1)}),constant:d(function(a,b){Qa(a,\"constant\");q[a]=b;s[a]=b}),decorator:function(a,b){var c=n.get(a+\"Provider\"),d=c.$get;c.$get=function(){var a=u.invoke(d,c);return u.invoke(b,null,{$delegate:a})}}}},n=q.$injector=k(q,function(a,b){ea.isString(b)&&l.push(b);throw za(\"unpr\",l.join(\" <- \"));}),s={},t=k(s,function(a,b){var c=n.get(a+\"Provider\",b);return u.invoke(c.$get,c,void 0,a)}),u=t;q.$injectorProvider={$get:ia(t)};u.modules=n.modules=S();var D=g(a),u=t.get(\"$injector\");u.strictDi=b;r(D,\nfunction(a){a&&u.invoke(a)});u.loadNewModules=function(a){r(g(a),function(a){a&&u.invoke(a)})};return u}function sf(){var a=!0;this.disableAutoScrolling=function(){a=!1};this.$get=[\"$window\",\"$location\",\"$rootScope\",function(b,d,c){function e(a){var b=null;Array.prototype.some.call(a,function(a){if(\"a\"===ta(a))return b=a,!0});return b}function f(a){if(a){a.scrollIntoView();var c;c=g.yOffset;z(c)?c=c():Zb(c)?(c=c[0],c=\"fixed\"!==b.getComputedStyle(c).position?0:c.getBoundingClientRect().bottom):ba(c)||\n(c=0);c&&(a=a.getBoundingClientRect().top,b.scrollBy(0,a-c))}else b.scrollTo(0,0)}function g(a){a=C(a)?a:ba(a)?a.toString():d.hash();var b;a?(b=k.getElementById(a))?f(b):(b=e(k.getElementsByName(a)))?f(b):\"top\"===a&&f(null):f(null)}var k=b.document;a&&c.$watch(function(){return d.hash()},function(a,b){a===b&&\"\"===a||mg(function(){c.$evalAsync(g)})});return g}]}function hb(a,b){if(!a&&!b)return\"\";if(!a)return b;if(!b)return a;I(a)&&(a=a.join(\" \"));I(b)&&(b=b.join(\" \"));return a+\" \"+b}function vg(a){C(a)&&\n(a=a.split(\" \"));var b=S();r(a,function(a){a.length&&(b[a]=!0)});return b}function Ba(a){return F(a)?a:{}}function wg(a,b,d,c,e){function f(){Z=null;k()}function g(){u=E();u=x(u)?null:u;ua(u,H)&&(u=H);D=H=u}function k(){var a=D;g();if(w!==h.url()||a!==u)w=h.url(),D=u,r(G,function(a){a(h.url(),u)})}var h=this,l=a.location,m=a.history,q=a.setTimeout,n=a.clearTimeout,s={},t=e(d);h.isMock=!1;h.$$completeOutstandingRequest=t.completeTask;h.$$incOutstandingRequestCount=t.incTaskCount;h.notifyWhenNoOutstandingRequests=\nt.notifyWhenNoPendingTasks;var u,D,w=l.href,ic=b.find(\"base\"),Z=null,E=c.history?function(){try{return m.state}catch(a){}}:A;g();h.url=function(b,d,e){x(e)&&(e=null);l!==a.location&&(l=a.location);m!==a.history&&(m=a.history);if(b){var f=D===e;if(w===b&&(!c.history||f))return h;var k=w&&qa(w)===qa(b);w=b;D=e;!c.history||k&&f?(k||(Z=b),d?l.replace(b):k?(d=l,e=b.indexOf(\"#\"),e=-1===e?\"\":b.substr(e),d.hash=e):l.href=b,l.href!==b&&(Z=b)):(m[d?\"replaceState\":\"pushState\"](e,\"\",b),g());Z&&(Z=b);return h}return(Z||\nl.href).replace(/#$/,\"\")};h.state=function(){return u};var G=[],J=!1,H=null;h.onUrlChange=function(b){if(!J){if(c.history)y(a).on(\"popstate\",f);y(a).on(\"hashchange\",f);J=!0}G.push(b);return b};h.$$applicationDestroyed=function(){y(a).off(\"hashchange popstate\",f)};h.$$checkUrlChange=k;h.baseHref=function(){var a=ic.attr(\"href\");return a?a.replace(/^(https?:)?\\/\\/[^/]*/,\"\"):\"\"};h.defer=function(a,b,c){var d;b=b||0;c=c||t.DEFAULT_TASK_TYPE;t.incTaskCount(c);d=q(function(){delete s[d];t.completeTask(a,\nc)},b);s[d]=c;return d};h.defer.cancel=function(a){if(s.hasOwnProperty(a)){var b=s[a];delete s[a];n(a);t.completeTask(A,b);return!0}return!1}}function zf(){this.$get=[\"$window\",\"$log\",\"$sniffer\",\"$document\",\"$$taskTrackerFactory\",function(a,b,d,c,e){return new wg(a,c,b,d,e)}]}function Af(){this.$get=function(){function a(a,c){function e(a){a!==q&&(n?n===a&&(n=a.n):n=a,f(a.n,a.p),f(a,q),q=a,q.n=null)}function f(a,b){a!==b&&(a&&(a.p=b),b&&(b.n=a))}if(a in b)throw M(\"$cacheFactory\")(\"iid\",a);var g=0,\nk=R({},c,{id:a}),h=S(),l=c&&c.capacity||Number.MAX_VALUE,m=S(),q=null,n=null;return b[a]={put:function(a,b){if(!x(b)){if(l<Number.MAX_VALUE){var c=m[a]||(m[a]={key:a});e(c)}a in h||g++;h[a]=b;g>l&&this.remove(n.key);return b}},get:function(a){if(l<Number.MAX_VALUE){var b=m[a];if(!b)return;e(b)}return h[a]},remove:function(a){if(l<Number.MAX_VALUE){var b=m[a];if(!b)return;b===q&&(q=b.p);b===n&&(n=b.n);f(b.n,b.p);delete m[a]}a in h&&(delete h[a],g--)},removeAll:function(){h=S();g=0;m=S();q=n=null},\ndestroy:function(){m=k=h=null;delete b[a]},info:function(){return R({},k,{size:g})}}}var b={};a.info=function(){var a={};r(b,function(b,e){a[e]=b.info()});return a};a.get=function(a){return b[a]};return a}}function Zf(){this.$get=[\"$cacheFactory\",function(a){return a(\"templates\")}]}function Wc(a,b){function d(a,b,c){var d=/^([@&]|[=<](\\*?))(\\??)\\s*([\\w$]*)$/,e=S();r(a,function(a,f){a=a.trim();if(a in q)e[f]=q[a];else{var g=a.match(d);if(!g)throw aa(\"iscp\",b,f,a,c?\"controller bindings definition\":\n\"isolate scope definition\");e[f]={mode:g[1][0],collection:\"*\"===g[2],optional:\"?\"===g[3],attrName:g[4]||f};g[4]&&(q[a]=e[f])}});return e}function c(a){var b=a.charAt(0);if(!b||b!==O(b))throw aa(\"baddir\",a);if(a!==a.trim())throw aa(\"baddir\",a);}function e(a){var b=a.require||a.controller&&a.name;!I(b)&&F(b)&&r(b,function(a,c){var d=a.match(l);a.substring(d[0].length)||(b[c]=d[0]+c)});return b}var f={},g=/^\\s*directive:\\s*([\\w-]+)\\s+(.*)$/,k=/(([\\w-]+)(?::([^;]+))?;?)/,h=te(\"ngSrc,ngSrcset,src,srcset\"),\nl=/^(?:(\\^\\^?)?(\\?)?(\\^\\^?)?)?/,m=/^(on[a-z]+|formaction)$/,q=S();this.directive=function Z(b,d){gb(b,\"name\");Qa(b,\"directive\");C(b)?(c(b),gb(d,\"directiveFactory\"),f.hasOwnProperty(b)||(f[b]=[],a.factory(b+\"Directive\",[\"$injector\",\"$exceptionHandler\",function(a,c){var d=[];r(f[b],function(f,g){try{var h=a.invoke(f);z(h)?h={compile:ia(h)}:!h.compile&&h.link&&(h.compile=ia(h.link));h.priority=h.priority||0;h.index=g;h.name=h.name||b;h.require=e(h);var k=h,l=h.restrict;if(l&&(!C(l)||!/[EACM]/.test(l)))throw aa(\"badrestrict\",\nl,b);k.restrict=l||\"EA\";h.$$moduleName=f.$$moduleName;d.push(h)}catch(m){c(m)}});return d}])),f[b].push(d)):r(b,Xb(Z));return this};this.component=function E(a,b){function c(a){function e(b){return z(b)||I(b)?function(c,d){return a.invoke(b,this,{$element:c,$attrs:d})}:b}var f=b.template||b.templateUrl?b.template:\"\",g={controller:d,controllerAs:xg(b.controller)||b.controllerAs||\"$ctrl\",template:e(f),templateUrl:e(b.templateUrl),transclude:b.transclude,scope:{},bindToController:b.bindings||{},restrict:\"E\",\nrequire:b.require};r(b,function(a,b){\"$\"===b.charAt(0)&&(g[b]=a)});return g}if(!C(a))return r(a,Xb(Va(this,E))),this;var d=b.controller||function(){};r(b,function(a,b){\"$\"===b.charAt(0)&&(c[b]=a,z(d)&&(d[b]=a))});c.$inject=[\"$injector\"];return this.directive(a,c)};this.aHrefSanitizationWhitelist=function(a){return v(a)?(b.aHrefSanitizationWhitelist(a),this):b.aHrefSanitizationWhitelist()};this.imgSrcSanitizationWhitelist=function(a){return v(a)?(b.imgSrcSanitizationWhitelist(a),this):b.imgSrcSanitizationWhitelist()};\nvar n=!0;this.debugInfoEnabled=function(a){return v(a)?(n=a,this):n};var s=!1;this.strictComponentBindingsEnabled=function(a){return v(a)?(s=a,this):s};var t=10;this.onChangesTtl=function(a){return arguments.length?(t=a,this):t};var u=!0;this.commentDirectivesEnabled=function(a){return arguments.length?(u=a,this):u};var D=!0;this.cssClassDirectivesEnabled=function(a){return arguments.length?(D=a,this):D};var w=S();this.addPropertySecurityContext=function(a,b,c){var d=a.toLowerCase()+\"|\"+b.toLowerCase();\nif(d in w&&w[d]!==c)throw aa(\"ctxoverride\",a,b,w[d],c);w[d]=c;return this};(function(){function a(b,c){r(c,function(a){w[a.toLowerCase()]=b})}a(U.HTML,[\"iframe|srcdoc\",\"*|innerHTML\",\"*|outerHTML\"]);a(U.CSS,[\"*|style\"]);a(U.URL,\"area|href area|ping a|href a|ping blockquote|cite body|background del|cite input|src ins|cite q|cite\".split(\" \"));a(U.MEDIA_URL,\"audio|src img|src img|srcset source|src source|srcset track|src video|src video|poster\".split(\" \"));a(U.RESOURCE_URL,\"*|formAction applet|code applet|codebase base|href embed|src frame|src form|action head|profile html|manifest iframe|src link|href media|src object|codebase object|data script|src\".split(\" \"))})();\nthis.$get=[\"$injector\",\"$interpolate\",\"$exceptionHandler\",\"$templateRequest\",\"$parse\",\"$controller\",\"$rootScope\",\"$sce\",\"$animate\",function(a,b,c,e,q,K,L,P,Q){function p(){try{if(!--Ja)throw Ua=void 0,aa(\"infchng\",t);L.$apply(function(){for(var a=0,b=Ua.length;a<b;++a)try{Ua[a]()}catch(d){c(d)}Ua=void 0})}finally{Ja++}}function na(a,b){if(!a)return a;if(!C(a))throw aa(\"srcset\",b,a.toString());for(var c=\"\",d=T(a),e=/(\\s+\\d+x\\s*,|\\s+\\d+w\\s*,|\\s+,|,\\s+)/,e=/\\s/.test(d)?e:/(,)/,d=d.split(e),e=Math.floor(d.length/\n2),f=0;f<e;f++)var g=2*f,c=c+P.getTrustedMediaUrl(T(d[g])),c=c+(\" \"+T(d[g+1]));d=T(d[2*f]).split(/\\s/);c+=P.getTrustedMediaUrl(T(d[0]));2===d.length&&(c+=\" \"+T(d[1]));return c}function v(a,b){if(b){var c=Object.keys(b),d,e,f;d=0;for(e=c.length;d<e;d++)f=c[d],this[f]=b[f]}else this.$attr={};this.$$element=a}function N(a,b,c){Ea.innerHTML=\"<span \"+b+\">\";b=Ea.firstChild.attributes;var d=b[0];b.removeNamedItem(d.name);d.value=c;a.attributes.setNamedItem(d)}function ra(a,b){try{a.addClass(b)}catch(c){}}\nfunction fa(a,b,c,d,e){a instanceof y||(a=y(a));var f=Xa(a,b,a,c,d,e);fa.$$addScopeClass(a);var g=null;return function(b,c,d){if(!a)throw aa(\"multilink\");gb(b,\"scope\");e&&e.needsNewScope&&(b=b.$parent.$new());d=d||{};var h=d.parentBoundTranscludeFn,k=d.transcludeControllers;d=d.futureParentElement;h&&h.$$boundTransclude&&(h=h.$$boundTransclude);g||(g=(d=d&&d[0])?\"foreignobject\"!==ta(d)&&ma.call(d).match(/SVG/)?\"svg\":\"html\":\"html\");d=\"html\"!==g?y(ja(g,y(\"<div></div>\").append(a).html())):c?Wa.clone.call(a):\na;if(k)for(var l in k)d.data(\"$\"+l+\"Controller\",k[l].instance);fa.$$addScopeInfo(d,b);c&&c(d,b);f&&f(b,d,d,h);c||(a=f=null);return d}}function Xa(a,b,c,d,e,f){function g(a,c,d,e){var f,k,l,m,q,n,G;if(J)for(G=Array(c.length),m=0;m<h.length;m+=3)f=h[m],G[f]=c[f];else G=c;m=0;for(q=h.length;m<q;)k=G[h[m++]],c=h[m++],f=h[m++],c?(c.scope?(l=a.$new(),fa.$$addScopeInfo(y(k),l)):l=a,n=c.transcludeOnThisElement?ka(a,c.transclude,e):!c.templateOnThisElement&&e?e:!e&&b?ka(a,b):null,c(f,l,k,d,n)):f&&f(a,k.childNodes,\nvoid 0,e)}for(var h=[],k=I(a)||a instanceof y,l,m,q,n,J,G=0;G<a.length;G++){l=new v;11===Aa&&ib(a,G,k);m=rc(a[G],[],l,0===G?d:void 0,e);(f=m.length?ba(m,a[G],l,b,c,null,[],[],f):null)&&f.scope&&fa.$$addScopeClass(l.$$element);l=f&&f.terminal||!(q=a[G].childNodes)||!q.length?null:Xa(q,f?(f.transcludeOnThisElement||!f.templateOnThisElement)&&f.transclude:b);if(f||l)h.push(G,f,l),n=!0,J=J||f;f=null}return n?g:null}function ib(a,b,c){var d=a[b],e=d.parentNode,f;if(d.nodeType===Oa)for(;;){f=e?d.nextSibling:\na[b+1];if(!f||f.nodeType!==Oa)break;d.nodeValue+=f.nodeValue;f.parentNode&&f.parentNode.removeChild(f);c&&f===a[b+1]&&a.splice(b+1,1)}}function ka(a,b,c){function d(e,f,g,h,k){e||(e=a.$new(!1,k),e.$$transcluded=!0);return b(e,f,{parentBoundTranscludeFn:c,transcludeControllers:g,futureParentElement:h})}var e=d.$$slots=S(),f;for(f in b.$$slots)e[f]=b.$$slots[f]?ka(a,b.$$slots[f],c):null;return d}function rc(a,b,d,e,f){var g=d.$attr,h;switch(a.nodeType){case 1:h=ta(a);V(b,va(h),\"E\",e,f);for(var l,m,\nn,G,u,s=a.attributes,w=0,E=s&&s.length;w<E;w++){var D=!1,r=!1,P=!1,H=!1,t=!1,K;l=s[w];m=l.name;G=l.value;n=va(m.toLowerCase());(u=n.match(Ra))?(P=\"Attr\"===u[1],H=\"Prop\"===u[1],t=\"On\"===u[1],m=m.replace(od,\"\").toLowerCase().substr(4+u[1].length).replace(/_(.)/g,function(a,b){return b.toUpperCase()})):(K=n.match(Sa))&&ea(K[1])&&(D=m,r=m.substr(0,m.length-5)+\"end\",m=m.substr(0,m.length-6));if(H||t)d[n]=G,g[n]=l.name,H?Ha(a,b,n,m):b.push(pd(q,L,c,n,m,!1));else{n=va(m.toLowerCase());g[n]=m;if(P||!d.hasOwnProperty(n))d[n]=\nG,kd(a,n)&&(d[n]=!0);Ia(a,b,G,n,P);V(b,n,\"A\",e,f,D,r)}}\"input\"===h&&\"hidden\"===a.getAttribute(\"type\")&&a.setAttribute(\"autocomplete\",\"off\");if(!Qa)break;g=a.className;F(g)&&(g=g.animVal);if(C(g)&&\"\"!==g)for(;a=k.exec(g);)n=va(a[2]),V(b,n,\"C\",e,f)&&(d[n]=T(a[3])),g=g.substr(a.index+a[0].length);break;case Oa:oa(b,a.nodeValue);break;case 8:if(!Pa)break;M(a,b,d,e,f)}b.sort(la);return b}function M(a,b,c,d,e){try{var f=g.exec(a.nodeValue);if(f){var h=va(f[1]);V(b,h,\"M\",d,e)&&(c[h]=T(f[2]))}}catch(k){}}\nfunction U(a,b,c){var d=[],e=0;if(b&&a.hasAttribute&&a.hasAttribute(b)){do{if(!a)throw aa(\"uterdir\",b,c);1===a.nodeType&&(a.hasAttribute(b)&&e++,a.hasAttribute(c)&&e--);d.push(a);a=a.nextSibling}while(0<e)}else d.push(a);return y(d)}function W(a,b,c){return function(d,e,f,g,h){e=U(e[0],b,c);return a(d,e,f,g,h)}}function Y(a,b,c,d,e,f){var g;return a?fa(b,c,d,e,f):function(){g||(g=fa(b,c,d,e,f),b=c=f=null);return g.apply(this,arguments)}}function ba(a,b,d,e,f,g,h,k,l){function m(a,b,c,d){if(a){c&&\n(a=W(a,c,d));a.require=t.require;a.directiveName=K;if(s===t||t.$$isolateScope)a=za(a,{isolateScope:!0});h.push(a)}if(b){c&&(b=W(b,c,d));b.require=t.require;b.directiveName=K;if(s===t||t.$$isolateScope)b=za(b,{isolateScope:!0});k.push(b)}}function q(a,e,f,g,l){function m(a,b,c,d){var e;bb(a)||(d=c,c=b,b=a,a=void 0);P&&(e=D);c||(c=P?K.parent():K);if(d){var f=l.$$slots[d];if(f)return f(a,b,e,c,Q);if(x(f))throw aa(\"noslot\",d,ya(K));}else return l(a,b,e,c,Q)}var n,t,L,H,E,D,X,K;b===f?(g=d,K=d.$$element):\n(K=y(f),g=new v(K,d));E=e;s?H=e.$new(!0):G&&(E=e.$parent);l&&(X=m,X.$$boundTransclude=l,X.isSlotFilled=function(a){return!!l.$$slots[a]});u&&(D=ga(K,g,X,u,H,e,s));s&&(fa.$$addScopeInfo(K,H,!0,!(w&&(w===s||w===s.$$originalDirective))),fa.$$addScopeClass(K,!0),H.$$isolateBindings=s.$$isolateBindings,t=Ca(e,g,H,H.$$isolateBindings,s),t.removeWatches&&H.$on(\"$destroy\",t.removeWatches));for(n in D){t=u[n];L=D[n];var yg=t.$$bindings.bindToController;L.instance=L();K.data(\"$\"+t.name+\"Controller\",L.instance);\nL.bindingInfo=Ca(E,g,L.instance,yg,t)}r(u,function(a,b){var c=a.require;a.bindToController&&!I(c)&&F(c)&&R(D[b].instance,$(b,c,K,D))});r(D,function(a){var b=a.instance;if(z(b.$onChanges))try{b.$onChanges(a.bindingInfo.initialChanges)}catch(d){c(d)}if(z(b.$onInit))try{b.$onInit()}catch(e){c(e)}z(b.$doCheck)&&(E.$watch(function(){b.$doCheck()}),b.$doCheck());z(b.$onDestroy)&&E.$on(\"$destroy\",function(){b.$onDestroy()})});n=0;for(t=h.length;n<t;n++)L=h[n],Ba(L,L.isolateScope?H:e,K,g,L.require&&$(L.directiveName,\nL.require,K,D),X);var Q=e;s&&(s.template||null===s.templateUrl)&&(Q=H);a&&a(Q,f.childNodes,void 0,l);for(n=k.length-1;0<=n;n--)L=k[n],Ba(L,L.isolateScope?H:e,K,g,L.require&&$(L.directiveName,L.require,K,D),X);r(D,function(a){a=a.instance;z(a.$postLink)&&a.$postLink()})}l=l||{};for(var n=-Number.MAX_VALUE,G=l.newScopeDirective,u=l.controllerDirectives,s=l.newIsolateScopeDirective,w=l.templateDirective,L=l.nonTlbTranscludeDirective,E=!1,D=!1,P=l.hasElementTranscludeDirective,H=d.$$element=y(b),t,K,\nX,Q=e,p,na=!1,Ib=!1,N,ra=0,C=a.length;ra<C;ra++){t=a[ra];var A=t.$$start,ib=t.$$end;A&&(H=U(b,A,ib));X=void 0;if(n>t.priority)break;if(N=t.scope)t.templateUrl||(F(N)?(ca(\"new/isolated scope\",s||G,t,H),s=t):ca(\"new/isolated scope\",s,t,H)),G=G||t;K=t.name;if(!na&&(t.replace&&(t.templateUrl||t.template)||t.transclude&&!t.$$tlb)){for(N=ra+1;na=a[N++];)if(na.transclude&&!na.$$tlb||na.replace&&(na.templateUrl||na.template)){Ib=!0;break}na=!0}!t.templateUrl&&t.controller&&(u=u||S(),ca(\"'\"+K+\"' controller\",\nu[K],t,H),u[K]=t);if(N=t.transclude)if(E=!0,t.$$tlb||(ca(\"transclusion\",L,t,H),L=t),\"element\"===N)P=!0,n=t.priority,X=H,H=d.$$element=y(fa.$$createComment(K,d[K])),b=H[0],pa(f,Ga.call(X,0),b),Q=Y(Ib,X,e,n,g&&g.name,{nonTlbTranscludeDirective:L});else{var ka=S();if(F(N)){X=B.document.createDocumentFragment();var Xa=S(),M=S();r(N,function(a,b){var c=\"?\"===a.charAt(0);a=c?a.substring(1):a;Xa[a]=b;ka[b]=null;M[b]=c});r(H.contents(),function(a){var b=Xa[va(ta(a))];b?(M[b]=!0,ka[b]=ka[b]||B.document.createDocumentFragment(),\nka[b].appendChild(a)):X.appendChild(a)});r(M,function(a,b){if(!a)throw aa(\"reqslot\",b);});for(var O in ka)ka[O]&&(Q=y(ka[O].childNodes),ka[O]=Y(Ib,Q,e));X=y(X.childNodes)}else X=y(oc(b)).contents();H.empty();Q=Y(Ib,X,e,void 0,void 0,{needsNewScope:t.$$isolateScope||t.$$newScope});Q.$$slots=ka}if(t.template)if(D=!0,ca(\"template\",w,t,H),w=t,N=z(t.template)?t.template(H,d):t.template,N=Na(N),t.replace){g=t;X=lc.test(N)?qd(ja(t.templateNamespace,T(N))):[];b=X[0];if(1!==X.length||1!==b.nodeType)throw aa(\"tplrt\",\nK,\"\");pa(f,H,b);C={$attr:{}};N=rc(b,[],C);var zg=a.splice(ra+1,a.length-(ra+1));(s||G)&&da(N,s,G);a=a.concat(N).concat(zg);ha(d,C);C=a.length}else H.html(N);if(t.templateUrl)D=!0,ca(\"template\",w,t,H),w=t,t.replace&&(g=t),q=ia(a.splice(ra,a.length-ra),H,d,f,E&&Q,h,k,{controllerDirectives:u,newScopeDirective:G!==t&&G,newIsolateScopeDirective:s,templateDirective:w,nonTlbTranscludeDirective:L}),C=a.length;else if(t.compile)try{p=t.compile(H,d,Q);var V=t.$$originalDirective||t;z(p)?m(null,Va(V,p),A,ib):\np&&m(Va(V,p.pre),Va(V,p.post),A,ib)}catch(ea){c(ea,ya(H))}t.terminal&&(q.terminal=!0,n=Math.max(n,t.priority))}q.scope=G&&!0===G.scope;q.transcludeOnThisElement=E;q.templateOnThisElement=D;q.transclude=Q;l.hasElementTranscludeDirective=P;return q}function $(a,b,c,d){var e;if(C(b)){var f=b.match(l);b=b.substring(f[0].length);var g=f[1]||f[3],f=\"?\"===f[2];\"^^\"===g?c=c.parent():e=(e=d&&d[b])&&e.instance;if(!e){var h=\"$\"+b+\"Controller\";e=\"^^\"===g&&c[0]&&9===c[0].nodeType?null:g?c.inheritedData(h):c.data(h)}if(!e&&\n!f)throw aa(\"ctreq\",b,a);}else if(I(b))for(e=[],g=0,f=b.length;g<f;g++)e[g]=$(a,b[g],c,d);else F(b)&&(e={},r(b,function(b,f){e[f]=$(a,b,c,d)}));return e||null}function ga(a,b,c,d,e,f,g){var h=S(),k;for(k in d){var l=d[k],m={$scope:l===g||l.$$isolateScope?e:f,$element:a,$attrs:b,$transclude:c},n=l.controller;\"@\"===n&&(n=b[l.name]);m=K(n,m,!0,l.controllerAs);h[l.name]=m;a.data(\"$\"+l.name+\"Controller\",m.instance)}return h}function da(a,b,c){for(var d=0,e=a.length;d<e;d++)a[d]=$b(a[d],{$$isolateScope:b,\n$$newScope:c})}function V(b,c,e,g,h,k,l){if(c===h)return null;var m=null;if(f.hasOwnProperty(c)){h=a.get(c+\"Directive\");for(var n=0,q=h.length;n<q;n++)if(c=h[n],(x(g)||g>c.priority)&&-1!==c.restrict.indexOf(e)){k&&(c=$b(c,{$$start:k,$$end:l}));if(!c.$$bindings){var J=m=c,G=c.name,u={isolateScope:null,bindToController:null};F(J.scope)&&(!0===J.bindToController?(u.bindToController=d(J.scope,G,!0),u.isolateScope={}):u.isolateScope=d(J.scope,G,!1));F(J.bindToController)&&(u.bindToController=d(J.bindToController,\nG,!0));if(u.bindToController&&!J.controller)throw aa(\"noctrl\",G);m=m.$$bindings=u;F(m.isolateScope)&&(c.$$isolateBindings=m.isolateScope)}b.push(c);m=c}}return m}function ea(b){if(f.hasOwnProperty(b))for(var c=a.get(b+\"Directive\"),d=0,e=c.length;d<e;d++)if(b=c[d],b.multiElement)return!0;return!1}function ha(a,b){var c=b.$attr,d=a.$attr;r(a,function(d,e){\"$\"!==e.charAt(0)&&(b[e]&&b[e]!==d&&(d=d.length?d+((\"style\"===e?\";\":\" \")+b[e]):b[e]),a.$set(e,d,!0,c[e]))});r(b,function(b,e){a.hasOwnProperty(e)||\n\"$\"===e.charAt(0)||(a[e]=b,\"class\"!==e&&\"style\"!==e&&(d[e]=c[e]))})}function ia(a,b,d,f,g,h,k,l){var m=[],n,q,G=b[0],u=a.shift(),t=$b(u,{templateUrl:null,transclude:null,replace:null,$$originalDirective:u}),s=z(u.templateUrl)?u.templateUrl(b,d):u.templateUrl,L=u.templateNamespace;b.empty();e(s).then(function(c){var e,J;c=Na(c);if(u.replace){c=lc.test(c)?qd(ja(L,T(c))):[];e=c[0];if(1!==c.length||1!==e.nodeType)throw aa(\"tplrt\",u.name,s);c={$attr:{}};pa(f,b,e);var w=rc(e,[],c);F(u.scope)&&da(w,!0);\na=w.concat(a);ha(d,c)}else e=G,b.html(c);a.unshift(t);n=ba(a,e,d,g,b,u,h,k,l);r(f,function(a,c){a===e&&(f[c]=b[0])});for(q=Xa(b[0].childNodes,g);m.length;){c=m.shift();J=m.shift();var H=m.shift(),D=m.shift(),w=b[0];if(!c.$$destroyed){if(J!==G){var E=J.className;l.hasElementTranscludeDirective&&u.replace||(w=oc(e));pa(H,y(J),w);ra(y(w),E)}J=n.transcludeOnThisElement?ka(c,n.transclude,D):D;n(q,c,w,f,J)}}m=null}).catch(function(a){bc(a)&&c(a)});return function(a,b,c,d,e){a=e;b.$$destroyed||(m?m.push(b,\nc,d,a):(n.transcludeOnThisElement&&(a=ka(b,n.transclude,e)),n(q,b,c,d,a)))}}function la(a,b){var c=b.priority-a.priority;return 0!==c?c:a.name!==b.name?a.name<b.name?-1:1:a.index-b.index}function ca(a,b,c,d){function e(a){return a?\" (module: \"+a+\")\":\"\"}if(b)throw aa(\"multidir\",b.name,e(b.$$moduleName),c.name,e(c.$$moduleName),a,ya(d));}function oa(a,c){var d=b(c,!0);d&&a.push({priority:0,compile:function(a){a=a.parent();var b=!!a.length;b&&fa.$$addBindingClass(a);return function(a,c){var e=c.parent();\nb||fa.$$addBindingClass(e);fa.$$addBindingInfo(e,d.expressions);a.$watch(d,function(a){c[0].nodeValue=a})}}})}function ja(a,b){a=O(a||\"html\");switch(a){case \"svg\":case \"math\":var c=B.document.createElement(\"div\");c.innerHTML=\"<\"+a+\">\"+b+\"</\"+a+\">\";return c.childNodes[0].childNodes;default:return b}}function wa(a,b){if(\"srcdoc\"===b)return P.HTML;if(\"src\"===b||\"ngSrc\"===b)return-1===[\"img\",\"video\",\"audio\",\"source\",\"track\"].indexOf(a)?P.RESOURCE_URL:P.MEDIA_URL;if(\"xlinkHref\"===b)return\"image\"===a?P.MEDIA_URL:\n\"a\"===a?P.URL:P.RESOURCE_URL;if(\"form\"===a&&\"action\"===b||\"base\"===a&&\"href\"===b||\"link\"===a&&\"href\"===b)return P.RESOURCE_URL;if(\"a\"===a&&(\"href\"===b||\"ngHref\"===b))return P.URL}function xa(a,b){var c=b.toLowerCase();return w[a+\"|\"+c]||w[\"*|\"+c]}function Da(a){return na(P.valueOf(a),\"ng-prop-srcset\")}function Ha(a,b,c,d){if(m.test(d))throw aa(\"nodomevents\");a=ta(a);var e=xa(a,d),f=Ta;\"srcset\"!==d||\"img\"!==a&&\"source\"!==a?e&&(f=P.getTrusted.bind(P,e)):f=Da;b.push({priority:100,compile:function(a,\nb){var e=q(b[c]),g=q(b[c],function(a){return P.valueOf(a)});return{pre:function(a,b){function c(){var g=e(a);b.prop(d,f(g))}c();a.$watch(g,c)}}}})}function Ia(a,c,d,e,f){var g=ta(a),k=wa(g,e),l=h[e]||f,n=b(d,!f,k,l);if(n){if(\"multiple\"===e&&\"select\"===g)throw aa(\"selmulti\",ya(a));if(m.test(e))throw aa(\"nodomevents\");c.push({priority:100,compile:function(){return{pre:function(a,c,f){c=f.$$observers||(f.$$observers=S());var g=f[e];g!==d&&(n=g&&b(g,!0,k,l),d=g);n&&(f[e]=n(a),(c[e]||(c[e]=[])).$$inter=\n!0,(f.$$observers&&f.$$observers[e].$$scope||a).$watch(n,function(a,b){\"class\"===e&&a!==b?f.$updateClass(a,b):f.$set(e,a)}))}}}})}}function pa(a,b,c){var d=b[0],e=b.length,f=d.parentNode,g,h;if(a)for(g=0,h=a.length;g<h;g++)if(a[g]===d){a[g++]=c;h=g+e-1;for(var k=a.length;g<k;g++,h++)h<k?a[g]=a[h]:delete a[g];a.length-=e-1;a.context===d&&(a.context=c);break}f&&f.replaceChild(c,d);a=B.document.createDocumentFragment();for(g=0;g<e;g++)a.appendChild(b[g]);y.hasData(d)&&(y.data(c,y.data(d)),y(d).off(\"$destroy\"));\ny.cleanData(a.querySelectorAll(\"*\"));for(g=1;g<e;g++)delete b[g];b[0]=c;b.length=1}function za(a,b){return R(function(){return a.apply(null,arguments)},a,b)}function Ba(a,b,d,e,f,g){try{a(b,d,e,f,g)}catch(h){c(h,ya(d))}}function qa(a,b){if(s)throw aa(\"missingattr\",a,b);}function Ca(a,c,d,e,f){function g(b,c,e){z(d.$onChanges)&&!cc(c,e)&&(Ua||(a.$$postDigest(p),Ua=[]),m||(m={},Ua.push(h)),m[b]&&(e=m[b].previousValue),m[b]=new Jb(e,c))}function h(){d.$onChanges(m);m=void 0}var k=[],l={},m;r(e,function(e,\nh){var m=e.attrName,n=e.optional,J,u,t,s;switch(e.mode){case \"@\":n||sa.call(c,m)||(qa(m,f.name),d[h]=c[m]=void 0);n=c.$observe(m,function(a){if(C(a)||Fa(a))g(h,a,d[h]),d[h]=a});c.$$observers[m].$$scope=a;J=c[m];C(J)?d[h]=b(J)(a):Fa(J)&&(d[h]=J);l[h]=new Jb(sc,d[h]);k.push(n);break;case \"=\":if(!sa.call(c,m)){if(n)break;qa(m,f.name);c[m]=void 0}if(n&&!c[m])break;u=q(c[m]);s=u.literal?ua:cc;t=u.assign||function(){J=d[h]=u(a);throw aa(\"nonassign\",c[m],m,f.name);};J=d[h]=u(a);n=function(b){s(b,d[h])||\n(s(b,J)?t(a,b=d[h]):d[h]=b);return J=b};n.$stateful=!0;n=e.collection?a.$watchCollection(c[m],n):a.$watch(q(c[m],n),null,u.literal);k.push(n);break;case \"<\":if(!sa.call(c,m)){if(n)break;qa(m,f.name);c[m]=void 0}if(n&&!c[m])break;u=q(c[m]);var L=u.literal,w=d[h]=u(a);l[h]=new Jb(sc,d[h]);n=a[e.collection?\"$watchCollection\":\"$watch\"](u,function(a,b){if(b===a){if(b===w||L&&ua(b,w))return;b=w}g(h,a,b);d[h]=a});k.push(n);break;case \"&\":n||sa.call(c,m)||qa(m,f.name);u=c.hasOwnProperty(m)?q(c[m]):A;if(u===\nA&&n)break;d[h]=function(b){return u(a,b)}}});return{initialChanges:l,removeWatches:k.length&&function(){for(var a=0,b=k.length;a<b;++a)k[a]()}}}var Ma=/^\\w/,Ea=B.document.createElement(\"div\"),Pa=u,Qa=D,Ja=t,Ua;v.prototype={$normalize:va,$addClass:function(a){a&&0<a.length&&Q.addClass(this.$$element,a)},$removeClass:function(a){a&&0<a.length&&Q.removeClass(this.$$element,a)},$updateClass:function(a,b){var c=rd(a,b);c&&c.length&&Q.addClass(this.$$element,c);(c=rd(b,a))&&c.length&&Q.removeClass(this.$$element,\nc)},$set:function(a,b,d,e){var f=kd(this.$$element[0],a),g=sd[a],h=a;f?(this.$$element.prop(a,b),e=f):g&&(this[g]=b,h=g);this[a]=b;e?this.$attr[a]=e:(e=this.$attr[a])||(this.$attr[a]=e=Uc(a,\"-\"));\"img\"===ta(this.$$element)&&\"srcset\"===a&&(this[a]=b=na(b,\"$set('srcset', value)\"));!1!==d&&(null===b||x(b)?this.$$element.removeAttr(e):Ma.test(e)?this.$$element.attr(e,b):N(this.$$element[0],e,b));(a=this.$$observers)&&r(a[h],function(a){try{a(b)}catch(d){c(d)}})},$observe:function(a,b){var c=this,d=c.$$observers||\n(c.$$observers=S()),e=d[a]||(d[a]=[]);e.push(b);L.$evalAsync(function(){e.$$inter||!c.hasOwnProperty(a)||x(c[a])||b(c[a])});return function(){cb(e,b)}}};var Ka=b.startSymbol(),La=b.endSymbol(),Na=\"{{\"===Ka&&\"}}\"===La?Ta:function(a){return a.replace(/\\{\\{/g,Ka).replace(/}}/g,La)},Ra=/^ng(Attr|Prop|On)([A-Z].*)$/,Sa=/^(.+)Start$/;fa.$$addBindingInfo=n?function(a,b){var c=a.data(\"$binding\")||[];I(b)?c=c.concat(b):c.push(b);a.data(\"$binding\",c)}:A;fa.$$addBindingClass=n?function(a){ra(a,\"ng-binding\")}:\nA;fa.$$addScopeInfo=n?function(a,b,c,d){a.data(c?d?\"$isolateScopeNoTemplate\":\"$isolateScope\":\"$scope\",b)}:A;fa.$$addScopeClass=n?function(a,b){ra(a,b?\"ng-isolate-scope\":\"ng-scope\")}:A;fa.$$createComment=function(a,b){var c=\"\";n&&(c=\" \"+(a||\"\")+\": \",b&&(c+=b+\" \"));return B.document.createComment(c)};return fa}]}function Jb(a,b){this.previousValue=a;this.currentValue=b}function va(a){return a.replace(od,\"\").replace(Ag,function(a,d,c){return c?d.toUpperCase():d})}function rd(a,b){var d=\"\",c=a.split(/\\s+/),\ne=b.split(/\\s+/),f=0;a:for(;f<c.length;f++){for(var g=c[f],k=0;k<e.length;k++)if(g===e[k])continue a;d+=(0<d.length?\" \":\"\")+g}return d}function qd(a){a=y(a);var b=a.length;if(1>=b)return a;for(;b--;){var d=a[b];(8===d.nodeType||d.nodeType===Oa&&\"\"===d.nodeValue.trim())&&Bg.call(a,b,1)}return a}function xg(a,b){if(b&&C(b))return b;if(C(a)){var d=td.exec(a);if(d)return d[3]}}function Bf(){var a={};this.has=function(b){return a.hasOwnProperty(b)};this.register=function(b,d){Qa(b,\"controller\");F(b)?R(a,\nb):a[b]=d};this.$get=[\"$injector\",function(b){function d(a,b,d,g){if(!a||!F(a.$scope))throw M(\"$controller\")(\"noscp\",g,b);a.$scope[b]=d}return function(c,e,f,g){var k,h,l;f=!0===f;g&&C(g)&&(l=g);if(C(c)){g=c.match(td);if(!g)throw ud(\"ctrlfmt\",c);h=g[1];l=l||g[3];c=a.hasOwnProperty(h)?a[h]:De(e.$scope,h,!0);if(!c)throw ud(\"ctrlreg\",h);sb(c,h,!0)}if(f)return f=(I(c)?c[c.length-1]:c).prototype,k=Object.create(f||null),l&&d(e,l,k,h||c.name),R(function(){var a=b.invoke(c,k,e,h);a!==k&&(F(a)||z(a))&&(k=\na,l&&d(e,l,k,h||c.name));return k},{instance:k,identifier:l});k=b.instantiate(c,e,h);l&&d(e,l,k,h||c.name);return k}}]}function Cf(){this.$get=[\"$window\",function(a){return y(a.document)}]}function Df(){this.$get=[\"$document\",\"$rootScope\",function(a,b){function d(){e=c.hidden}var c=a[0],e=c&&c.hidden;a.on(\"visibilitychange\",d);b.$on(\"$destroy\",function(){a.off(\"visibilitychange\",d)});return function(){return e}}]}function Ef(){this.$get=[\"$log\",function(a){return function(b,d){a.error.apply(a,arguments)}}]}\nfunction tc(a){return F(a)?ha(a)?a.toISOString():eb(a):a}function Kf(){this.$get=function(){return function(a){if(!a)return\"\";var b=[];Nc(a,function(a,c){null===a||x(a)||z(a)||(I(a)?r(a,function(a){b.push(ca(c)+\"=\"+ca(tc(a)))}):b.push(ca(c)+\"=\"+ca(tc(a))))});return b.join(\"&\")}}}function Lf(){this.$get=function(){return function(a){function b(a,e,f){I(a)?r(a,function(a,c){b(a,e+\"[\"+(F(a)?c:\"\")+\"]\")}):F(a)&&!ha(a)?Nc(a,function(a,c){b(a,e+(f?\"\":\"[\")+c+(f?\"\":\"]\"))}):(z(a)&&(a=a()),d.push(ca(e)+\"=\"+\n(null==a?\"\":ca(tc(a)))))}if(!a)return\"\";var d=[];b(a,\"\",!0);return d.join(\"&\")}}}function uc(a,b){if(C(a)){var d=a.replace(Cg,\"\").trim();if(d){var c=b(\"Content-Type\"),c=c&&0===c.indexOf(vd),e;(e=c)||(e=(e=d.match(Dg))&&Eg[e[0]].test(d));if(e)try{a=Qc(d)}catch(f){if(!c)return a;throw Kb(\"baddata\",a,f);}}}return a}function wd(a){var b=S(),d;C(a)?r(a.split(\"\\n\"),function(a){d=a.indexOf(\":\");var e=O(T(a.substr(0,d)));a=T(a.substr(d+1));e&&(b[e]=b[e]?b[e]+\", \"+a:a)}):F(a)&&r(a,function(a,d){var f=O(d),\ng=T(a);f&&(b[f]=b[f]?b[f]+\", \"+g:g)});return b}function xd(a){var b;return function(d){b||(b=wd(a));return d?(d=b[O(d)],void 0===d&&(d=null),d):b}}function yd(a,b,d,c){if(z(c))return c(a,b,d);r(c,function(c){a=c(a,b,d)});return a}function Jf(){var a=this.defaults={transformResponse:[uc],transformRequest:[function(a){return F(a)&&\"[object File]\"!==ma.call(a)&&\"[object Blob]\"!==ma.call(a)&&\"[object FormData]\"!==ma.call(a)?eb(a):a}],headers:{common:{Accept:\"application/json, text/plain, */*\"},post:oa(vc),\nput:oa(vc),patch:oa(vc)},xsrfCookieName:\"XSRF-TOKEN\",xsrfHeaderName:\"X-XSRF-TOKEN\",paramSerializer:\"$httpParamSerializer\",jsonpCallbackParam:\"callback\"},b=!1;this.useApplyAsync=function(a){return v(a)?(b=!!a,this):b};var d=this.interceptors=[],c=this.xsrfWhitelistedOrigins=[];this.$get=[\"$browser\",\"$httpBackend\",\"$$cookieReader\",\"$cacheFactory\",\"$rootScope\",\"$q\",\"$injector\",\"$sce\",function(e,f,g,k,h,l,m,q){function n(b){function c(a,b){for(var d=0,e=b.length;d<e;){var f=b[d++],g=b[d++];a=a.then(f,\ng)}b.length=0;return a}function d(a,b){var c,e={};r(a,function(a,d){z(a)?(c=a(b),null!=c&&(e[d]=c)):e[d]=a});return e}function f(a){var b=R({},a);b.data=yd(a.data,a.headers,a.status,g.transformResponse);a=a.status;return 200<=a&&300>a?b:l.reject(b)}if(!F(b))throw M(\"$http\")(\"badreq\",b);if(!C(q.valueOf(b.url)))throw M(\"$http\")(\"badreq\",b.url);var g=R({method:\"get\",transformRequest:a.transformRequest,transformResponse:a.transformResponse,paramSerializer:a.paramSerializer,jsonpCallbackParam:a.jsonpCallbackParam},\nb);g.headers=function(b){var c=a.headers,e=R({},b.headers),f,g,h,c=R({},c.common,c[O(b.method)]);a:for(f in c){g=O(f);for(h in e)if(O(h)===g)continue a;e[f]=c[f]}return d(e,oa(b))}(b);g.method=ub(g.method);g.paramSerializer=C(g.paramSerializer)?m.get(g.paramSerializer):g.paramSerializer;e.$$incOutstandingRequestCount(\"$http\");var h=[],k=[];b=l.resolve(g);r(w,function(a){(a.request||a.requestError)&&h.unshift(a.request,a.requestError);(a.response||a.responseError)&&k.push(a.response,a.responseError)});\nb=c(b,h);b=b.then(function(b){var c=b.headers,d=yd(b.data,xd(c),void 0,b.transformRequest);x(d)&&r(c,function(a,b){\"content-type\"===O(b)&&delete c[b]});x(b.withCredentials)&&!x(a.withCredentials)&&(b.withCredentials=a.withCredentials);return s(b,d).then(f,f)});b=c(b,k);return b=b.finally(function(){e.$$completeOutstandingRequest(A,\"$http\")})}function s(c,d){function e(a){if(a){var c={};r(a,function(a,d){c[d]=function(c){function d(){a(c)}b?h.$applyAsync(d):h.$$phase?d():h.$apply(d)}});return c}}function k(a,\nc,d,e,f){function g(){m(c,a,d,e,f)}Q&&(200<=a&&300>a?Q.put(N,[a,c,wd(d),e,f]):Q.remove(N));b?h.$applyAsync(g):(g(),h.$$phase||h.$apply())}function m(a,b,d,e,f){b=-1<=b?b:0;(200<=b&&300>b?L.resolve:L.reject)({data:a,status:b,headers:xd(d),config:c,statusText:e,xhrStatus:f})}function s(a){m(a.data,a.status,oa(a.headers()),a.statusText,a.xhrStatus)}function w(){var a=n.pendingRequests.indexOf(c);-1!==a&&n.pendingRequests.splice(a,1)}var L=l.defer(),P=L.promise,Q,p,na=c.headers,y=\"jsonp\"===O(c.method),\nN=c.url;y?N=q.getTrustedResourceUrl(N):C(N)||(N=q.valueOf(N));N=t(N,c.paramSerializer(c.params));y&&(N=u(N,c.jsonpCallbackParam));n.pendingRequests.push(c);P.then(w,w);!c.cache&&!a.cache||!1===c.cache||\"GET\"!==c.method&&\"JSONP\"!==c.method||(Q=F(c.cache)?c.cache:F(a.cache)?a.cache:D);Q&&(p=Q.get(N),v(p)?p&&z(p.then)?p.then(s,s):I(p)?m(p[1],p[0],oa(p[2]),p[3],p[4]):m(p,200,{},\"OK\",\"complete\"):Q.put(N,P));x(p)&&((p=ic(c.url)?g()[c.xsrfCookieName||a.xsrfCookieName]:void 0)&&(na[c.xsrfHeaderName||a.xsrfHeaderName]=\np),f(c.method,N,d,k,na,c.timeout,c.withCredentials,c.responseType,e(c.eventHandlers),e(c.uploadEventHandlers)));return P}function t(a,b){0<b.length&&(a+=(-1===a.indexOf(\"?\")?\"?\":\"&\")+b);return a}function u(a,b){var c=a.split(\"?\");if(2<c.length)throw Kb(\"badjsonp\",a);c=fc(c[1]);r(c,function(c,d){if(\"JSON_CALLBACK\"===c)throw Kb(\"badjsonp\",a);if(d===b)throw Kb(\"badjsonp\",b,a);});return a+=(-1===a.indexOf(\"?\")?\"?\":\"&\")+b+\"=JSON_CALLBACK\"}var D=k(\"$http\");a.paramSerializer=C(a.paramSerializer)?m.get(a.paramSerializer):\na.paramSerializer;var w=[];r(d,function(a){w.unshift(C(a)?m.get(a):m.invoke(a))});var ic=Fg(c);n.pendingRequests=[];(function(a){r(arguments,function(a){n[a]=function(b,c){return n(R({},c||{},{method:a,url:b}))}})})(\"get\",\"delete\",\"head\",\"jsonp\");(function(a){r(arguments,function(a){n[a]=function(b,c,d){return n(R({},d||{},{method:a,url:b,data:c}))}})})(\"post\",\"put\",\"patch\");n.defaults=a;return n}]}function Nf(){this.$get=function(){return function(){return new B.XMLHttpRequest}}}function Mf(){this.$get=\n[\"$browser\",\"$jsonpCallbacks\",\"$document\",\"$xhrFactory\",function(a,b,d,c){return Gg(a,c,a.defer,b,d[0])}]}function Gg(a,b,d,c,e){function f(a,b,d){a=a.replace(\"JSON_CALLBACK\",b);var f=e.createElement(\"script\"),m=null;f.type=\"text/javascript\";f.src=a;f.async=!0;m=function(a){f.removeEventListener(\"load\",m);f.removeEventListener(\"error\",m);e.body.removeChild(f);f=null;var g=-1,s=\"unknown\";a&&(\"load\"!==a.type||c.wasCalled(b)||(a={type:\"error\"}),s=a.type,g=\"error\"===a.type?404:200);d&&d(g,s)};f.addEventListener(\"load\",\nm);f.addEventListener(\"error\",m);e.body.appendChild(f);return m}return function(e,k,h,l,m,q,n,s,t,u){function D(a){G=\"timeout\"===a;Z&&Z();E&&E.abort()}function w(a,b,c,e,f,g){v(H)&&d.cancel(H);Z=E=null;a(b,c,e,f,g)}k=k||a.url();if(\"jsonp\"===O(e))var p=c.createCallback(k),Z=f(k,p,function(a,b){var d=200===a&&c.getResponse(p);w(l,a,d,\"\",b,\"complete\");c.removeCallback(p)});else{var E=b(e,k),G=!1;E.open(e,k,!0);r(m,function(a,b){v(a)&&E.setRequestHeader(b,a)});E.onload=function(){var a=E.statusText||\n\"\",b=\"response\"in E?E.response:E.responseText,c=1223===E.status?204:E.status;0===c&&(c=b?200:\"file\"===la(k).protocol?404:0);w(l,c,b,E.getAllResponseHeaders(),a,\"complete\")};E.onerror=function(){w(l,-1,null,null,\"\",\"error\")};E.ontimeout=function(){w(l,-1,null,null,\"\",\"timeout\")};E.onabort=function(){w(l,-1,null,null,\"\",G?\"timeout\":\"abort\")};r(t,function(a,b){E.addEventListener(b,a)});r(u,function(a,b){E.upload.addEventListener(b,a)});n&&(E.withCredentials=!0);if(s)try{E.responseType=s}catch(J){if(\"json\"!==\ns)throw J;}E.send(x(h)?null:h)}if(0<q)var H=d(function(){D(\"timeout\")},q);else q&&z(q.then)&&q.then(function(){D(v(q.$$timeoutId)?\"timeout\":\"abort\")})}}function Gf(){var a=\"{{\",b=\"}}\";this.startSymbol=function(b){return b?(a=b,this):a};this.endSymbol=function(a){return a?(b=a,this):b};this.$get=[\"$parse\",\"$exceptionHandler\",\"$sce\",function(d,c,e){function f(a){return\"\\\\\\\\\\\\\"+a}function g(c){return c.replace(q,a).replace(n,b)}function k(a,b,c,d){var e=a.$watch(function(a){e();return d(a)},b,c);return e}\nfunction h(f,h,n,q){function w(a){try{return a=n&&!r?e.getTrusted(n,a):e.valueOf(a),q&&!v(a)?a:hc(a)}catch(b){c(Ca.interr(f,b))}}var r=n===e.URL||n===e.MEDIA_URL;if(!f.length||-1===f.indexOf(a)){if(h&&!r)return;h=g(f);r&&(h=e.getTrusted(n,h));h=ia(h);h.exp=f;h.expressions=[];h.$$watchDelegate=k;return h}q=!!q;for(var p,E,G=0,J=[],H,X=f.length,K=[],L=[],P;G<X;)if(-1!==(p=f.indexOf(a,G))&&-1!==(E=f.indexOf(b,p+l)))G!==p&&K.push(g(f.substring(G,p))),G=f.substring(p+l,E),J.push(G),G=E+m,L.push(K.length),\nK.push(\"\");else{G!==X&&K.push(g(f.substring(G)));break}P=1===K.length&&1===L.length;var Q=r&&P?void 0:w;H=J.map(function(a){return d(a,Q)});if(!h||J.length){var y=function(a){for(var b=0,c=J.length;b<c;b++){if(q&&x(a[b]))return;K[L[b]]=a[b]}if(r)return e.getTrusted(n,P?K[0]:K.join(\"\"));n&&1<K.length&&Ca.throwNoconcat(f);return K.join(\"\")};return R(function(a){var b=0,d=J.length,e=Array(d);try{for(;b<d;b++)e[b]=H[b](a);return y(e)}catch(g){c(Ca.interr(f,g))}},{exp:f,expressions:J,$$watchDelegate:function(a,\nb){var c;return a.$watchGroup(H,function(d,e){var f=y(d);b.call(this,f,d!==e?c:f,a);c=f})}})}}var l=a.length,m=b.length,q=new RegExp(a.replace(/./g,f),\"g\"),n=new RegExp(b.replace(/./g,f),\"g\");h.startSymbol=function(){return a};h.endSymbol=function(){return b};return h}]}function Hf(){this.$get=[\"$$intervalFactory\",\"$window\",function(a,b){var d={},c=function(a){b.clearInterval(a);delete d[a]},e=a(function(a,c,e){a=b.setInterval(a,c);d[a]=e;return a},c);e.cancel=function(a){if(!a)return!1;if(!a.hasOwnProperty(\"$$intervalId\"))throw Hg(\"badprom\");\nif(!d.hasOwnProperty(a.$$intervalId))return!1;a=a.$$intervalId;var b=d[a];b.promise.$$state.pur=!0;b.reject(\"canceled\");c(a);return!0};return e}]}function If(){this.$get=[\"$browser\",\"$q\",\"$$q\",\"$rootScope\",function(a,b,d,c){return function(e,f){return function(g,k,h,l){function m(){q?g.apply(null,n):g(s)}var q=4<arguments.length,n=q?Ga.call(arguments,4):[],s=0,t=v(l)&&!l,u=(t?d:b).defer(),D=u.promise;h=v(h)?h:0;D.$$intervalId=e(function(){t?a.defer(m):c.$evalAsync(m);u.notify(s++);0<h&&s>=h&&(u.resolve(s),\nf(D.$$intervalId));t||c.$apply()},k,u,t);return D}}}]}function zd(a,b){var d=la(a);b.$$protocol=d.protocol;b.$$host=d.hostname;b.$$port=da(d.port)||Ig[d.protocol]||null}function Ad(a,b,d){if(Jg.test(a))throw jb(\"badpath\",a);var c=\"/\"!==a.charAt(0);c&&(a=\"/\"+a);a=la(a);for(var c=(c&&\"/\"===a.pathname.charAt(0)?a.pathname.substring(1):a.pathname).split(\"/\"),e=c.length;e--;)c[e]=decodeURIComponent(c[e]),d&&(c[e]=c[e].replace(/\\//g,\"%2F\"));d=c.join(\"/\");b.$$path=d;b.$$search=fc(a.search);b.$$hash=decodeURIComponent(a.hash);\nb.$$path&&\"/\"!==b.$$path.charAt(0)&&(b.$$path=\"/\"+b.$$path)}function wc(a,b){return a.slice(0,b.length)===b}function wa(a,b){if(wc(b,a))return b.substr(a.length)}function qa(a){var b=a.indexOf(\"#\");return-1===b?a:a.substr(0,b)}function xc(a,b,d){this.$$html5=!0;d=d||\"\";zd(a,this);this.$$parse=function(a){var d=wa(b,a);if(!C(d))throw jb(\"ipthprfx\",a,b);Ad(d,this,!0);this.$$path||(this.$$path=\"/\");this.$$compose()};this.$$normalizeUrl=function(a){return b+a.substr(1)};this.$$parseLinkUrl=function(c,\ne){if(e&&\"#\"===e[0])return this.hash(e.slice(1)),!0;var f,g;v(f=wa(a,c))?(g=f,g=d&&v(f=wa(d,f))?b+(wa(\"/\",f)||f):a+g):v(f=wa(b,c))?g=b+f:b===c+\"/\"&&(g=b);g&&this.$$parse(g);return!!g}}function yc(a,b,d){zd(a,this);this.$$parse=function(c){var e=wa(a,c)||wa(b,c),f;x(e)||\"#\"!==e.charAt(0)?this.$$html5?f=e:(f=\"\",x(e)&&(a=c,this.replace())):(f=wa(d,e),x(f)&&(f=e));Ad(f,this,!1);c=this.$$path;var e=a,g=/^\\/[A-Z]:(\\/.*)/;wc(f,e)&&(f=f.replace(e,\"\"));g.exec(f)||(c=(f=g.exec(c))?f[1]:c);this.$$path=c;this.$$compose()};\nthis.$$normalizeUrl=function(b){return a+(b?d+b:\"\")};this.$$parseLinkUrl=function(b,d){return qa(a)===qa(b)?(this.$$parse(b),!0):!1}}function Bd(a,b,d){this.$$html5=!0;yc.apply(this,arguments);this.$$parseLinkUrl=function(c,e){if(e&&\"#\"===e[0])return this.hash(e.slice(1)),!0;var f,g;a===qa(c)?f=c:(g=wa(b,c))?f=a+d+g:b===c+\"/\"&&(f=b);f&&this.$$parse(f);return!!f};this.$$normalizeUrl=function(b){return a+d+b}}function Lb(a){return function(){return this[a]}}function Cd(a,b){return function(d){if(x(d))return this[a];\nthis[a]=b(d);this.$$compose();return this}}function Pf(){var a=\"!\",b={enabled:!1,requireBase:!0,rewriteLinks:!0};this.hashPrefix=function(b){return v(b)?(a=b,this):a};this.html5Mode=function(a){if(Fa(a))return b.enabled=a,this;if(F(a)){Fa(a.enabled)&&(b.enabled=a.enabled);Fa(a.requireBase)&&(b.requireBase=a.requireBase);if(Fa(a.rewriteLinks)||C(a.rewriteLinks))b.rewriteLinks=a.rewriteLinks;return this}return b};this.$get=[\"$rootScope\",\"$browser\",\"$sniffer\",\"$rootElement\",\"$window\",function(d,c,e,\nf,g){function k(a,b){return a===b||la(a).href===la(b).href}function h(a,b,d){var e=m.url(),f=m.$$state;try{c.url(a,b,d),m.$$state=c.state()}catch(g){throw m.url(e),m.$$state=f,g;}}function l(a,b){d.$broadcast(\"$locationChangeSuccess\",m.absUrl(),a,m.$$state,b)}var m,q;q=c.baseHref();var n=c.url(),s;if(b.enabled){if(!q&&b.requireBase)throw jb(\"nobase\");s=n.substring(0,n.indexOf(\"/\",n.indexOf(\"//\")+2))+(q||\"/\");q=e.history?xc:Bd}else s=qa(n),q=yc;var t=s.substr(0,qa(s).lastIndexOf(\"/\")+1);m=new q(s,\nt,\"#\"+a);m.$$parseLinkUrl(n,n);m.$$state=c.state();var u=/^\\s*(javascript|mailto):/i;f.on(\"click\",function(a){var e=b.rewriteLinks;if(e&&!a.ctrlKey&&!a.metaKey&&!a.shiftKey&&2!==a.which&&2!==a.button){for(var g=y(a.target);\"a\"!==ta(g[0]);)if(g[0]===f[0]||!(g=g.parent())[0])return;if(!C(e)||!x(g.attr(e))){var e=g.prop(\"href\"),h=g.attr(\"href\")||g.attr(\"xlink:href\");F(e)&&\"[object SVGAnimatedString]\"===e.toString()&&(e=la(e.animVal).href);u.test(e)||!e||g.attr(\"target\")||a.isDefaultPrevented()||!m.$$parseLinkUrl(e,\nh)||(a.preventDefault(),m.absUrl()!==c.url()&&d.$apply())}}});m.absUrl()!==n&&c.url(m.absUrl(),!0);var D=!0;c.onUrlChange(function(a,b){wc(a,t)?(d.$evalAsync(function(){var c=m.absUrl(),e=m.$$state,f;m.$$parse(a);m.$$state=b;f=d.$broadcast(\"$locationChangeStart\",a,c,b,e).defaultPrevented;m.absUrl()===a&&(f?(m.$$parse(c),m.$$state=e,h(c,!1,e)):(D=!1,l(c,e)))}),d.$$phase||d.$digest()):g.location.href=a});d.$watch(function(){if(D||m.$$urlUpdatedByLocation){m.$$urlUpdatedByLocation=!1;var a=c.url(),b=\nm.absUrl(),f=c.state(),g=m.$$replace,n=!k(a,b)||m.$$html5&&e.history&&f!==m.$$state;if(D||n)D=!1,d.$evalAsync(function(){var b=m.absUrl(),c=d.$broadcast(\"$locationChangeStart\",b,a,m.$$state,f).defaultPrevented;m.absUrl()===b&&(c?(m.$$parse(a),m.$$state=f):(n&&h(b,g,f===m.$$state?null:m.$$state),l(a,f)))})}m.$$replace=!1});return m}]}function Qf(){var a=!0,b=this;this.debugEnabled=function(b){return v(b)?(a=b,this):a};this.$get=[\"$window\",function(d){function c(a){bc(a)&&(a.stack&&f?a=a.message&&-1===\na.stack.indexOf(a.message)?\"Error: \"+a.message+\"\\n\"+a.stack:a.stack:a.sourceURL&&(a=a.message+\"\\n\"+a.sourceURL+\":\"+a.line));return a}function e(a){var b=d.console||{},e=b[a]||b.log||A;return function(){var a=[];r(arguments,function(b){a.push(c(b))});return Function.prototype.apply.call(e,b,a)}}var f=Aa||/\\bEdge\\//.test(d.navigator&&d.navigator.userAgent);return{log:e(\"log\"),info:e(\"info\"),warn:e(\"warn\"),error:e(\"error\"),debug:function(){var c=e(\"debug\");return function(){a&&c.apply(b,arguments)}}()}}]}\nfunction Kg(a){return a+\"\"}function Lg(a,b){return\"undefined\"!==typeof a?a:b}function Dd(a,b){return\"undefined\"===typeof a?b:\"undefined\"===typeof b?a:a+b}function Mg(a,b){switch(a.type){case p.MemberExpression:if(a.computed)return!1;break;case p.UnaryExpression:return 1;case p.BinaryExpression:return\"+\"!==a.operator?1:!1;case p.CallExpression:return!1}return void 0===b?Ed:b}function Y(a,b,d){var c,e,f=a.isPure=Mg(a,d);switch(a.type){case p.Program:c=!0;r(a.body,function(a){Y(a.expression,b,f);c=c&&\na.expression.constant});a.constant=c;break;case p.Literal:a.constant=!0;a.toWatch=[];break;case p.UnaryExpression:Y(a.argument,b,f);a.constant=a.argument.constant;a.toWatch=a.argument.toWatch;break;case p.BinaryExpression:Y(a.left,b,f);Y(a.right,b,f);a.constant=a.left.constant&&a.right.constant;a.toWatch=a.left.toWatch.concat(a.right.toWatch);break;case p.LogicalExpression:Y(a.left,b,f);Y(a.right,b,f);a.constant=a.left.constant&&a.right.constant;a.toWatch=a.constant?[]:[a];break;case p.ConditionalExpression:Y(a.test,\nb,f);Y(a.alternate,b,f);Y(a.consequent,b,f);a.constant=a.test.constant&&a.alternate.constant&&a.consequent.constant;a.toWatch=a.constant?[]:[a];break;case p.Identifier:a.constant=!1;a.toWatch=[a];break;case p.MemberExpression:Y(a.object,b,f);a.computed&&Y(a.property,b,f);a.constant=a.object.constant&&(!a.computed||a.property.constant);a.toWatch=a.constant?[]:[a];break;case p.CallExpression:c=d=a.filter?!b(a.callee.name).$stateful:!1;e=[];r(a.arguments,function(a){Y(a,b,f);c=c&&a.constant;e.push.apply(e,\na.toWatch)});a.constant=c;a.toWatch=d?e:[a];break;case p.AssignmentExpression:Y(a.left,b,f);Y(a.right,b,f);a.constant=a.left.constant&&a.right.constant;a.toWatch=[a];break;case p.ArrayExpression:c=!0;e=[];r(a.elements,function(a){Y(a,b,f);c=c&&a.constant;e.push.apply(e,a.toWatch)});a.constant=c;a.toWatch=e;break;case p.ObjectExpression:c=!0;e=[];r(a.properties,function(a){Y(a.value,b,f);c=c&&a.value.constant;e.push.apply(e,a.value.toWatch);a.computed&&(Y(a.key,b,!1),c=c&&a.key.constant,e.push.apply(e,\na.key.toWatch))});a.constant=c;a.toWatch=e;break;case p.ThisExpression:a.constant=!1;a.toWatch=[];break;case p.LocalsExpression:a.constant=!1,a.toWatch=[]}}function Fd(a){if(1===a.length){a=a[0].expression;var b=a.toWatch;return 1!==b.length?b:b[0]!==a?b:void 0}}function Gd(a){return a.type===p.Identifier||a.type===p.MemberExpression}function Hd(a){if(1===a.body.length&&Gd(a.body[0].expression))return{type:p.AssignmentExpression,left:a.body[0].expression,right:{type:p.NGValueParameter},operator:\"=\"}}\nfunction Id(a){this.$filter=a}function Jd(a){this.$filter=a}function Mb(a,b,d){this.ast=new p(a,d);this.astCompiler=d.csp?new Jd(b):new Id(b)}function zc(a){return z(a.valueOf)?a.valueOf():Ng.call(a)}function Rf(){var a=S(),b={\"true\":!0,\"false\":!1,\"null\":null,undefined:void 0},d,c;this.addLiteral=function(a,c){b[a]=c};this.setIdentifierFns=function(a,b){d=a;c=b;return this};this.$get=[\"$filter\",function(e){function f(b,c){var d,f;switch(typeof b){case \"string\":return f=b=b.trim(),d=a[f],d||(d=new Nb(t),\nd=(new Mb(d,e,t)).parse(b),a[f]=q(d)),s(d,c);case \"function\":return s(b,c);default:return s(A,c)}}function g(a,b,c){return null==a||null==b?a===b:\"object\"!==typeof a||(a=zc(a),\"object\"!==typeof a||c)?a===b||a!==a&&b!==b:!1}function k(a,b,c,d,e){var f=d.inputs,h;if(1===f.length){var k=g,f=f[0];return a.$watch(function(a){var b=f(a);g(b,k,f.isPure)||(h=d(a,void 0,void 0,[b]),k=b&&zc(b));return h},b,c,e)}for(var l=[],m=[],n=0,q=f.length;n<q;n++)l[n]=g,m[n]=null;return a.$watch(function(a){for(var b=\n!1,c=0,e=f.length;c<e;c++){var k=f[c](a);if(b||(b=!g(k,l[c],f[c].isPure)))m[c]=k,l[c]=k&&zc(k)}b&&(h=d(a,void 0,void 0,m));return h},b,c,e)}function h(a,b,c,d,e){function f(){h(m)&&k()}function g(a,b,c,d){m=s&&d?d[0]:n(a,b,c,d);h(m)&&a.$$postDigest(f);return t(m)}var h=d.literal?l:v,k,m,n=d.$$intercepted||d,t=d.$$interceptor||Ta,s=d.inputs&&!n.inputs;g.literal=d.literal;g.constant=d.constant;g.inputs=d.inputs;q(g);return k=a.$watch(g,b,c,e)}function l(a){var b=!0;r(a,function(a){v(a)||(b=!1)});return b}\nfunction m(a,b,c,d){var e=a.$watch(function(a){e();return d(a)},b,c);return e}function q(a){a.constant?a.$$watchDelegate=m:a.oneTime?a.$$watchDelegate=h:a.inputs&&(a.$$watchDelegate=k);return a}function n(a,b){function c(d){return b(a(d))}c.$stateful=a.$stateful||b.$stateful;c.$$pure=a.$$pure&&b.$$pure;return c}function s(a,b){if(!b)return a;a.$$interceptor&&(b=n(a.$$interceptor,b),a=a.$$intercepted);var c=!1,d=function(d,e,f,g){d=c&&g?g[0]:a(d,e,f,g);return b(d)};d.$$intercepted=a;d.$$interceptor=\nb;d.literal=a.literal;d.oneTime=a.oneTime;d.constant=a.constant;b.$stateful||(c=!a.inputs,d.inputs=a.inputs?a.inputs:[a],b.$$pure||(d.inputs=d.inputs.map(function(a){return a.isPure===Ed?function(b){return a(b)}:a})));return q(d)}var t={csp:pa().noUnsafeEval,literals:Ha(b),isIdentifierStart:z(d)&&d,isIdentifierContinue:z(c)&&c};f.$$getAst=function(a){var b=new Nb(t);return(new Mb(b,e,t)).getAst(a).ast};return f}]}function Tf(){var a=!0;this.$get=[\"$rootScope\",\"$exceptionHandler\",function(b,d){return Kd(function(a){b.$evalAsync(a)},\nd,a)}];this.errorOnUnhandledRejections=function(b){return v(b)?(a=b,this):a}}function Uf(){var a=!0;this.$get=[\"$browser\",\"$exceptionHandler\",function(b,d){return Kd(function(a){b.defer(a)},d,a)}];this.errorOnUnhandledRejections=function(b){return v(b)?(a=b,this):a}}function Kd(a,b,d){function c(){return new e}function e(){var a=this.promise=new f;this.resolve=function(b){h(a,b)};this.reject=function(b){m(a,b)};this.notify=function(b){n(a,b)}}function f(){this.$$state={status:0}}function g(){for(;!v&&\nZ.length;){var a=Z.shift();if(!a.pur){a.pur=!0;var c=a.value,c=\"Possibly unhandled rejection: \"+(\"function\"===typeof c?c.toString().replace(/ \\{[\\s\\S]*$/,\"\"):x(c)?\"undefined\":\"string\"!==typeof c?Fe(c,void 0):c);bc(a.value)?b(a.value,c):b(c)}}}function k(c){!d||c.pending||2!==c.status||c.pur||(0===v&&0===Z.length&&a(g),Z.push(c));!c.processScheduled&&c.pending&&(c.processScheduled=!0,++v,a(function(){var e,f,k;k=c.pending;c.processScheduled=!1;c.pending=void 0;try{for(var l=0,n=k.length;l<n;++l){c.pur=\n!0;f=k[l][0];e=k[l][c.status];try{z(e)?h(f,e(c.value)):1===c.status?h(f,c.value):m(f,c.value)}catch(q){m(f,q),q&&!0===q.$$passToExceptionHandler&&b(q)}}}finally{--v,d&&0===v&&a(g)}}))}function h(a,b){a.$$state.status||(b===a?q(a,w(\"qcycle\",b)):l(a,b))}function l(a,b){function c(b){g||(g=!0,l(a,b))}function d(b){g||(g=!0,q(a,b))}function e(b){n(a,b)}var f,g=!1;try{if(F(b)||z(b))f=b.then;z(f)?(a.$$state.status=-1,f.call(b,c,d,e)):(a.$$state.value=b,a.$$state.status=1,k(a.$$state))}catch(h){d(h)}}function m(a,\nb){a.$$state.status||q(a,b)}function q(a,b){a.$$state.value=b;a.$$state.status=2;k(a.$$state)}function n(c,d){var e=c.$$state.pending;0>=c.$$state.status&&e&&e.length&&a(function(){for(var a,c,f=0,g=e.length;f<g;f++){c=e[f][0];a=e[f][3];try{n(c,z(a)?a(d):d)}catch(h){b(h)}}})}function s(a){var b=new f;m(b,a);return b}function t(a,b,c){var d=null;try{z(c)&&(d=c())}catch(e){return s(e)}return d&&z(d.then)?d.then(function(){return b(a)},s):b(a)}function u(a,b,c,d){var e=new f;h(e,a);return e.then(b,c,\nd)}function p(a){if(!z(a))throw w(\"norslvr\",a);var b=new f;a(function(a){h(b,a)},function(a){m(b,a)});return b}var w=M(\"$q\",TypeError),v=0,Z=[];R(f.prototype,{then:function(a,b,c){if(x(a)&&x(b)&&x(c))return this;var d=new f;this.$$state.pending=this.$$state.pending||[];this.$$state.pending.push([d,a,b,c]);0<this.$$state.status&&k(this.$$state);return d},\"catch\":function(a){return this.then(null,a)},\"finally\":function(a,b){return this.then(function(b){return t(b,E,a)},function(b){return t(b,s,a)},\nb)}});var E=u;p.prototype=f.prototype;p.defer=c;p.reject=s;p.when=u;p.resolve=E;p.all=function(a){var b=new f,c=0,d=I(a)?[]:{};r(a,function(a,e){c++;u(a).then(function(a){d[e]=a;--c||h(b,d)},function(a){m(b,a)})});0===c&&h(b,d);return b};p.race=function(a){var b=c();r(a,function(a){u(a).then(b.resolve,b.reject)});return b.promise};return p}function dg(){this.$get=[\"$window\",\"$timeout\",function(a,b){var d=a.requestAnimationFrame||a.webkitRequestAnimationFrame,c=a.cancelAnimationFrame||a.webkitCancelAnimationFrame||\na.webkitCancelRequestAnimationFrame,e=!!d,f=e?function(a){var b=d(a);return function(){c(b)}}:function(a){var c=b(a,16.66,!1);return function(){b.cancel(c)}};f.supported=e;return f}]}function Sf(){function a(a){function b(){this.$$watchers=this.$$nextSibling=this.$$childHead=this.$$childTail=null;this.$$listeners={};this.$$listenerCount={};this.$$watchersCount=0;this.$id=++pb;this.$$ChildScope=null;this.$$suspended=!1}b.prototype=a;return b}var b=10,d=M(\"$rootScope\"),c=null,e=null;this.digestTtl=\nfunction(a){arguments.length&&(b=a);return b};this.$get=[\"$exceptionHandler\",\"$parse\",\"$browser\",function(f,g,k){function h(a){a.currentScope.$$destroyed=!0}function l(a){9===Aa&&(a.$$childHead&&l(a.$$childHead),a.$$nextSibling&&l(a.$$nextSibling));a.$parent=a.$$nextSibling=a.$$prevSibling=a.$$childHead=a.$$childTail=a.$root=a.$$watchers=null}function m(){this.$id=++pb;this.$$phase=this.$parent=this.$$watchers=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=null;this.$root=\nthis;this.$$suspended=this.$$destroyed=!1;this.$$listeners={};this.$$listenerCount={};this.$$watchersCount=0;this.$$isolateBindings=null}function q(a){if(w.$$phase)throw d(\"inprog\",w.$$phase);w.$$phase=a}function n(a,b){do a.$$watchersCount+=b;while(a=a.$parent)}function s(a,b,c){do a.$$listenerCount[c]-=b,0===a.$$listenerCount[c]&&delete a.$$listenerCount[c];while(a=a.$parent)}function t(){}function u(){for(;E.length;)try{E.shift()()}catch(a){f(a)}e=null}function p(){null===e&&(e=k.defer(function(){w.$apply(u)},\nnull,\"$applyAsync\"))}m.prototype={constructor:m,$new:function(b,c){var d;c=c||this;b?(d=new m,d.$root=this.$root):(this.$$ChildScope||(this.$$ChildScope=a(this)),d=new this.$$ChildScope);d.$parent=c;d.$$prevSibling=c.$$childTail;c.$$childHead?(c.$$childTail.$$nextSibling=d,c.$$childTail=d):c.$$childHead=c.$$childTail=d;(b||c!==this)&&d.$on(\"$destroy\",h);return d},$watch:function(a,b,d,e){var f=g(a);b=z(b)?b:A;if(f.$$watchDelegate)return f.$$watchDelegate(this,b,d,f,a);var h=this,k=h.$$watchers,l=\n{fn:b,last:t,get:f,exp:e||a,eq:!!d};c=null;k||(k=h.$$watchers=[],k.$$digestWatchIndex=-1);k.unshift(l);k.$$digestWatchIndex++;n(this,1);return function(){var a=cb(k,l);0<=a&&(n(h,-1),a<k.$$digestWatchIndex&&k.$$digestWatchIndex--);c=null}},$watchGroup:function(a,b){function c(){h=!1;try{k?(k=!1,b(e,e,g)):b(e,d,g)}finally{for(var f=0;f<a.length;f++)d[f]=e[f]}}var d=Array(a.length),e=Array(a.length),f=[],g=this,h=!1,k=!0;if(!a.length){var l=!0;g.$evalAsync(function(){l&&b(e,e,g)});return function(){l=\n!1}}if(1===a.length)return this.$watch(a[0],function(a,c,f){e[0]=a;d[0]=c;b(e,a===c?e:d,f)});r(a,function(a,b){var d=g.$watch(a,function(a){e[b]=a;h||(h=!0,g.$evalAsync(c))});f.push(d)});return function(){for(;f.length;)f.shift()()}},$watchCollection:function(a,b){function c(a){e=a;var b,d,g,h;if(!x(e)){if(F(e))if(xa(e))for(f!==n&&(f=n,s=f.length=0,l++),a=e.length,s!==a&&(l++,f.length=s=a),b=0;b<a;b++)h=f[b],g=e[b],d=h!==h&&g!==g,d||h===g||(l++,f[b]=g);else{f!==q&&(f=q={},s=0,l++);a=0;for(b in e)sa.call(e,\nb)&&(a++,g=e[b],h=f[b],b in f?(d=h!==h&&g!==g,d||h===g||(l++,f[b]=g)):(s++,f[b]=g,l++));if(s>a)for(b in l++,f)sa.call(e,b)||(s--,delete f[b])}else f!==e&&(f=e,l++);return l}}c.$$pure=g(a).literal;c.$stateful=!c.$$pure;var d=this,e,f,h,k=1<b.length,l=0,m=g(a,c),n=[],q={},t=!0,s=0;return this.$watch(m,function(){t?(t=!1,b(e,e,d)):b(e,h,d);if(k)if(F(e))if(xa(e)){h=Array(e.length);for(var a=0;a<e.length;a++)h[a]=e[a]}else for(a in h={},e)sa.call(e,a)&&(h[a]=e[a]);else h=e})},$digest:function(){var a,\ng,h,l,m,n,s,r=b,p,D=v.length?w:this,E=[],x,y;q(\"$digest\");k.$$checkUrlChange();this===w&&null!==e&&(k.defer.cancel(e),u());c=null;do{s=!1;p=D;for(n=0;n<v.length;n++){try{y=v[n],l=y.fn,l(y.scope,y.locals)}catch(C){f(C)}c=null}v.length=0;a:do{if(n=!p.$$suspended&&p.$$watchers)for(n.$$digestWatchIndex=n.length;n.$$digestWatchIndex--;)try{if(a=n[n.$$digestWatchIndex])if(m=a.get,(g=m(p))!==(h=a.last)&&!(a.eq?ua(g,h):V(g)&&V(h)))s=!0,c=a,a.last=a.eq?Ha(g,null):g,l=a.fn,l(g,h===t?g:h,p),5>r&&(x=4-r,E[x]||\n(E[x]=[]),E[x].push({msg:z(a.exp)?\"fn: \"+(a.exp.name||a.exp.toString()):a.exp,newVal:g,oldVal:h}));else if(a===c){s=!1;break a}}catch(B){f(B)}if(!(n=!p.$$suspended&&p.$$watchersCount&&p.$$childHead||p!==D&&p.$$nextSibling))for(;p!==D&&!(n=p.$$nextSibling);)p=p.$parent}while(p=n);if((s||v.length)&&!r--)throw w.$$phase=null,d(\"infdig\",b,E);}while(s||v.length);for(w.$$phase=null;G<Z.length;)try{Z[G++]()}catch(A){f(A)}Z.length=G=0;k.$$checkUrlChange()},$suspend:function(){this.$$suspended=!0},$isSuspended:function(){return this.$$suspended},\n$resume:function(){this.$$suspended=!1},$destroy:function(){if(!this.$$destroyed){var a=this.$parent;this.$broadcast(\"$destroy\");this.$$destroyed=!0;this===w&&k.$$applicationDestroyed();n(this,-this.$$watchersCount);for(var b in this.$$listenerCount)s(this,this.$$listenerCount[b],b);a&&a.$$childHead===this&&(a.$$childHead=this.$$nextSibling);a&&a.$$childTail===this&&(a.$$childTail=this.$$prevSibling);this.$$prevSibling&&(this.$$prevSibling.$$nextSibling=this.$$nextSibling);this.$$nextSibling&&(this.$$nextSibling.$$prevSibling=\nthis.$$prevSibling);this.$destroy=this.$digest=this.$apply=this.$evalAsync=this.$applyAsync=A;this.$on=this.$watch=this.$watchGroup=function(){return A};this.$$listeners={};this.$$nextSibling=null;l(this)}},$eval:function(a,b){return g(a)(this,b)},$evalAsync:function(a,b){w.$$phase||v.length||k.defer(function(){v.length&&w.$digest()},null,\"$evalAsync\");v.push({scope:this,fn:g(a),locals:b})},$$postDigest:function(a){Z.push(a)},$apply:function(a){try{q(\"$apply\");try{return this.$eval(a)}finally{w.$$phase=\nnull}}catch(b){f(b)}finally{try{w.$digest()}catch(c){throw f(c),c;}}},$applyAsync:function(a){function b(){c.$eval(a)}var c=this;a&&E.push(b);a=g(a);p()},$on:function(a,b){var c=this.$$listeners[a];c||(this.$$listeners[a]=c=[]);c.push(b);var d=this;do d.$$listenerCount[a]||(d.$$listenerCount[a]=0),d.$$listenerCount[a]++;while(d=d.$parent);var e=this;return function(){var d=c.indexOf(b);-1!==d&&(delete c[d],s(e,1,a))}},$emit:function(a,b){var c=[],d,e=this,g=!1,h={name:a,targetScope:e,stopPropagation:function(){g=\n!0},preventDefault:function(){h.defaultPrevented=!0},defaultPrevented:!1},k=db([h],arguments,1),l,m;do{d=e.$$listeners[a]||c;h.currentScope=e;l=0;for(m=d.length;l<m;l++)if(d[l])try{d[l].apply(null,k)}catch(n){f(n)}else d.splice(l,1),l--,m--;if(g)break;e=e.$parent}while(e);h.currentScope=null;return h},$broadcast:function(a,b){var c=this,d=this,e={name:a,targetScope:this,preventDefault:function(){e.defaultPrevented=!0},defaultPrevented:!1};if(!this.$$listenerCount[a])return e;for(var g=db([e],arguments,\n1),h,k;c=d;){e.currentScope=c;d=c.$$listeners[a]||[];h=0;for(k=d.length;h<k;h++)if(d[h])try{d[h].apply(null,g)}catch(l){f(l)}else d.splice(h,1),h--,k--;if(!(d=c.$$listenerCount[a]&&c.$$childHead||c!==this&&c.$$nextSibling))for(;c!==this&&!(d=c.$$nextSibling);)c=c.$parent}e.currentScope=null;return e}};var w=new m,v=w.$$asyncQueue=[],Z=w.$$postDigestQueue=[],E=w.$$applyAsyncQueue=[],G=0;return w}]}function Ie(){var a=/^\\s*(https?|s?ftp|mailto|tel|file):/,b=/^\\s*((https?|ftp|file|blob):|data:image\\/)/;\nthis.aHrefSanitizationWhitelist=function(b){return v(b)?(a=b,this):a};this.imgSrcSanitizationWhitelist=function(a){return v(a)?(b=a,this):b};this.$get=function(){return function(d,c){var e=c?b:a,f=la(d&&d.trim()).href;return\"\"===f||f.match(e)?d:\"unsafe:\"+f}}}function Og(a){if(\"self\"===a)return a;if(C(a)){if(-1<a.indexOf(\"***\"))throw Da(\"iwcard\",a);a=Ld(a).replace(/\\\\\\*\\\\\\*/g,\".*\").replace(/\\\\\\*/g,\"[^:/.?&;]*\");return new RegExp(\"^\"+a+\"$\")}if(ab(a))return new RegExp(\"^\"+a.source+\"$\");throw Da(\"imatcher\");\n}function Md(a){var b=[];v(a)&&r(a,function(a){b.push(Og(a))});return b}function Wf(){this.SCE_CONTEXTS=U;var a=[\"self\"],b=[];this.resourceUrlWhitelist=function(b){arguments.length&&(a=Md(b));return a};this.resourceUrlBlacklist=function(a){arguments.length&&(b=Md(a));return b};this.$get=[\"$injector\",\"$$sanitizeUri\",function(d,c){function e(a,b){var c;\"self\"===a?(c=Ac(b,Nd))||(B.document.baseURI?c=B.document.baseURI:(La||(La=B.document.createElement(\"a\"),La.href=\".\",La=La.cloneNode(!1)),c=La.href),\nc=Ac(b,c)):c=!!a.exec(b.href);return c}function f(a){var b=function(a){this.$$unwrapTrustedValue=function(){return a}};a&&(b.prototype=new a);b.prototype.valueOf=function(){return this.$$unwrapTrustedValue()};b.prototype.toString=function(){return this.$$unwrapTrustedValue().toString()};return b}var g=function(a){throw Da(\"unsafe\");};d.has(\"$sanitize\")&&(g=d.get(\"$sanitize\"));var k=f(),h={};h[U.HTML]=f(k);h[U.CSS]=f(k);h[U.MEDIA_URL]=f(k);h[U.URL]=f(h[U.MEDIA_URL]);h[U.JS]=f(k);h[U.RESOURCE_URL]=\nf(h[U.URL]);return{trustAs:function(a,b){var c=h.hasOwnProperty(a)?h[a]:null;if(!c)throw Da(\"icontext\",a,b);if(null===b||x(b)||\"\"===b)return b;if(\"string\"!==typeof b)throw Da(\"itype\",a);return new c(b)},getTrusted:function(d,f){if(null===f||x(f)||\"\"===f)return f;var k=h.hasOwnProperty(d)?h[d]:null;if(k&&f instanceof k)return f.$$unwrapTrustedValue();z(f.$$unwrapTrustedValue)&&(f=f.$$unwrapTrustedValue());if(d===U.MEDIA_URL||d===U.URL)return c(f.toString(),d===U.MEDIA_URL);if(d===U.RESOURCE_URL){var k=\nla(f.toString()),n,s,t=!1;n=0;for(s=a.length;n<s;n++)if(e(a[n],k)){t=!0;break}if(t)for(n=0,s=b.length;n<s;n++)if(e(b[n],k)){t=!1;break}if(t)return f;throw Da(\"insecurl\",f.toString());}if(d===U.HTML)return g(f);throw Da(\"unsafe\");},valueOf:function(a){return a instanceof k?a.$$unwrapTrustedValue():a}}}]}function Vf(){var a=!0;this.enabled=function(b){arguments.length&&(a=!!b);return a};this.$get=[\"$parse\",\"$sceDelegate\",function(b,d){if(a&&8>Aa)throw Da(\"iequirks\");var c=oa(U);c.isEnabled=function(){return a};\nc.trustAs=d.trustAs;c.getTrusted=d.getTrusted;c.valueOf=d.valueOf;a||(c.trustAs=c.getTrusted=function(a,b){return b},c.valueOf=Ta);c.parseAs=function(a,d){var e=b(d);return e.literal&&e.constant?e:b(d,function(b){return c.getTrusted(a,b)})};var e=c.parseAs,f=c.getTrusted,g=c.trustAs;r(U,function(a,b){var d=O(b);c[(\"parse_as_\"+d).replace(Bc,wb)]=function(b){return e(a,b)};c[(\"get_trusted_\"+d).replace(Bc,wb)]=function(b){return f(a,b)};c[(\"trust_as_\"+d).replace(Bc,wb)]=function(b){return g(a,b)}});\nreturn c}]}function Xf(){this.$get=[\"$window\",\"$document\",function(a,b){var d={},c=!((!a.nw||!a.nw.process)&&a.chrome&&(a.chrome.app&&a.chrome.app.runtime||!a.chrome.app&&a.chrome.runtime&&a.chrome.runtime.id))&&a.history&&a.history.pushState,e=da((/android (\\d+)/.exec(O((a.navigator||{}).userAgent))||[])[1]),f=/Boxee/i.test((a.navigator||{}).userAgent),g=b[0]||{},k=g.body&&g.body.style,h=!1,l=!1;k&&(h=!!(\"transition\"in k||\"webkitTransition\"in k),l=!!(\"animation\"in k||\"webkitAnimation\"in k));return{history:!(!c||\n4>e||f),hasEvent:function(a){if(\"input\"===a&&Aa)return!1;if(x(d[a])){var b=g.createElement(\"div\");d[a]=\"on\"+a in b}return d[a]},csp:pa(),transitions:h,animations:l,android:e}}]}function Yf(){this.$get=ia(function(a){return new Pg(a)})}function Pg(a){function b(){var a=e.pop();return a&&a.cb}function d(a){for(var b=e.length-1;0<=b;--b){var c=e[b];if(c.type===a)return e.splice(b,1),c.cb}}var c={},e=[],f=this.ALL_TASKS_TYPE=\"$$all$$\",g=this.DEFAULT_TASK_TYPE=\"$$default$$\";this.completeTask=function(e,\nh){h=h||g;try{e()}finally{var l;l=h||g;c[l]&&(c[l]--,c[f]--);l=c[h];var m=c[f];if(!m||!l)for(l=m?d:b;m=l(h);)try{m()}catch(q){a.error(q)}}};this.incTaskCount=function(a){a=a||g;c[a]=(c[a]||0)+1;c[f]=(c[f]||0)+1};this.notifyWhenNoPendingTasks=function(a,b){b=b||f;c[b]?e.push({type:b,cb:a}):a()}}function $f(){var a;this.httpOptions=function(b){return b?(a=b,this):a};this.$get=[\"$exceptionHandler\",\"$templateCache\",\"$http\",\"$q\",\"$sce\",function(b,d,c,e,f){function g(k,h){g.totalPendingRequests++;if(!C(k)||\nx(d.get(k)))k=f.getTrustedResourceUrl(k);var l=c.defaults&&c.defaults.transformResponse;I(l)?l=l.filter(function(a){return a!==uc}):l===uc&&(l=null);return c.get(k,R({cache:d,transformResponse:l},a)).finally(function(){g.totalPendingRequests--}).then(function(a){return d.put(k,a.data)},function(a){h||(a=Qg(\"tpload\",k,a.status,a.statusText),b(a));return e.reject(a)})}g.totalPendingRequests=0;return g}]}function ag(){this.$get=[\"$rootScope\",\"$browser\",\"$location\",function(a,b,d){return{findBindings:function(a,\nb,d){a=a.getElementsByClassName(\"ng-binding\");var g=[];r(a,function(a){var c=ea.element(a).data(\"$binding\");c&&r(c,function(c){d?(new RegExp(\"(^|\\\\s)\"+Ld(b)+\"(\\\\s|\\\\||$)\")).test(c)&&g.push(a):-1!==c.indexOf(b)&&g.push(a)})});return g},findModels:function(a,b,d){for(var g=[\"ng-\",\"data-ng-\",\"ng\\\\:\"],k=0;k<g.length;++k){var h=a.querySelectorAll(\"[\"+g[k]+\"model\"+(d?\"=\":\"*=\")+'\"'+b+'\"]');if(h.length)return h}},getLocation:function(){return d.url()},setLocation:function(b){b!==d.url()&&(d.url(b),a.$digest())},\nwhenStable:function(a){b.notifyWhenNoOutstandingRequests(a)}}}]}function bg(){this.$get=[\"$rootScope\",\"$browser\",\"$q\",\"$$q\",\"$exceptionHandler\",function(a,b,d,c,e){function f(f,h,l){z(f)||(l=h,h=f,f=A);var m=Ga.call(arguments,3),q=v(l)&&!l,n=(q?c:d).defer(),s=n.promise,t;t=b.defer(function(){try{n.resolve(f.apply(null,m))}catch(b){n.reject(b),e(b)}finally{delete g[s.$$timeoutId]}q||a.$apply()},h,\"$timeout\");s.$$timeoutId=t;g[t]=n;return s}var g={};f.cancel=function(a){if(!a)return!1;if(!a.hasOwnProperty(\"$$timeoutId\"))throw Rg(\"badprom\");\nif(!g.hasOwnProperty(a.$$timeoutId))return!1;a=a.$$timeoutId;var c=g[a];c.promise.$$state.pur=!0;c.reject(\"canceled\");delete g[a];return b.defer.cancel(a)};return f}]}function la(a){if(!C(a))return a;Aa&&($.setAttribute(\"href\",a),a=$.href);$.setAttribute(\"href\",a);return{href:$.href,protocol:$.protocol?$.protocol.replace(/:$/,\"\"):\"\",host:$.host,search:$.search?$.search.replace(/^\\?/,\"\"):\"\",hash:$.hash?$.hash.replace(/^#/,\"\"):\"\",hostname:$.hostname,port:$.port,pathname:\"/\"===$.pathname.charAt(0)?$.pathname:\n\"/\"+$.pathname}}function Fg(a){var b=[Nd].concat(a.map(la));return function(a){a=la(a);return b.some(Ac.bind(null,a))}}function Ac(a,b){a=la(a);b=la(b);return a.protocol===b.protocol&&a.host===b.host}function cg(){this.$get=ia(B)}function Od(a){function b(a){try{return decodeURIComponent(a)}catch(b){return a}}var d=a[0]||{},c={},e=\"\";return function(){var a,g,k,h,l;try{a=d.cookie||\"\"}catch(m){a=\"\"}if(a!==e)for(e=a,a=e.split(\"; \"),c={},k=0;k<a.length;k++)g=a[k],h=g.indexOf(\"=\"),0<h&&(l=b(g.substring(0,\nh)),x(c[l])&&(c[l]=b(g.substring(h+1))));return c}}function gg(){this.$get=Od}function cd(a){function b(d,c){if(F(d)){var e={};r(d,function(a,c){e[c]=b(c,a)});return e}return a.factory(d+\"Filter\",c)}this.register=b;this.$get=[\"$injector\",function(a){return function(b){return a.get(b+\"Filter\")}}];b(\"currency\",Pd);b(\"date\",Qd);b(\"filter\",Sg);b(\"json\",Tg);b(\"limitTo\",Ug);b(\"lowercase\",Vg);b(\"number\",Rd);b(\"orderBy\",Sd);b(\"uppercase\",Wg)}function Sg(){return function(a,b,d,c){if(!xa(a)){if(null==a)return a;\nthrow M(\"filter\")(\"notarray\",a);}c=c||\"$\";var e;switch(Cc(b)){case \"function\":break;case \"boolean\":case \"null\":case \"number\":case \"string\":e=!0;case \"object\":b=Xg(b,d,c,e);break;default:return a}return Array.prototype.filter.call(a,b)}}function Xg(a,b,d,c){var e=F(a)&&d in a;!0===b?b=ua:z(b)||(b=function(a,b){if(x(a))return!1;if(null===a||null===b)return a===b;if(F(b)||F(a)&&!ac(a))return!1;a=O(\"\"+a);b=O(\"\"+b);return-1!==a.indexOf(b)});return function(f){return e&&!F(f)?Ma(f,a[d],b,d,!1):Ma(f,a,b,\nd,c)}}function Ma(a,b,d,c,e,f){var g=Cc(a),k=Cc(b);if(\"string\"===k&&\"!\"===b.charAt(0))return!Ma(a,b.substring(1),d,c,e);if(I(a))return a.some(function(a){return Ma(a,b,d,c,e)});switch(g){case \"object\":var h;if(e){for(h in a)if(h.charAt&&\"$\"!==h.charAt(0)&&Ma(a[h],b,d,c,!0))return!0;return f?!1:Ma(a,b,d,c,!1)}if(\"object\"===k){for(h in b)if(f=b[h],!z(f)&&!x(f)&&(g=h===c,!Ma(g?a:a[h],f,d,c,g,g)))return!1;return!0}return d(a,b);case \"function\":return!1;default:return d(a,b)}}function Cc(a){return null===\na?\"null\":typeof a}function Pd(a){var b=a.NUMBER_FORMATS;return function(a,c,e){x(c)&&(c=b.CURRENCY_SYM);x(e)&&(e=b.PATTERNS[1].maxFrac);var f=c?/\\u00A4/g:/\\s*\\u00A4\\s*/g;return null==a?a:Td(a,b.PATTERNS[1],b.GROUP_SEP,b.DECIMAL_SEP,e).replace(f,c)}}function Rd(a){var b=a.NUMBER_FORMATS;return function(a,c){return null==a?a:Td(a,b.PATTERNS[0],b.GROUP_SEP,b.DECIMAL_SEP,c)}}function Yg(a){var b=0,d,c,e,f,g;-1<(c=a.indexOf(Ud))&&(a=a.replace(Ud,\"\"));0<(e=a.search(/e/i))?(0>c&&(c=e),c+=+a.slice(e+1),a=\na.substring(0,e)):0>c&&(c=a.length);for(e=0;a.charAt(e)===Dc;e++);if(e===(g=a.length))d=[0],c=1;else{for(g--;a.charAt(g)===Dc;)g--;c-=e;d=[];for(f=0;e<=g;e++,f++)d[f]=+a.charAt(e)}c>Vd&&(d=d.splice(0,Vd-1),b=c-1,c=1);return{d:d,e:b,i:c}}function Zg(a,b,d,c){var e=a.d,f=e.length-a.i;b=x(b)?Math.min(Math.max(d,f),c):+b;d=b+a.i;c=e[d];if(0<d){e.splice(Math.max(a.i,d));for(var g=d;g<e.length;g++)e[g]=0}else for(f=Math.max(0,f),a.i=1,e.length=Math.max(1,d=b+1),e[0]=0,g=1;g<d;g++)e[g]=0;if(5<=c)if(0>d-\n1){for(c=0;c>d;c--)e.unshift(0),a.i++;e.unshift(1);a.i++}else e[d-1]++;for(;f<Math.max(0,b);f++)e.push(0);if(b=e.reduceRight(function(a,b,c,d){b+=a;d[c]=b%10;return Math.floor(b/10)},0))e.unshift(b),a.i++}function Td(a,b,d,c,e){if(!C(a)&&!ba(a)||isNaN(a))return\"\";var f=!isFinite(a),g=!1,k=Math.abs(a)+\"\",h=\"\";if(f)h=\"\\u221e\";else{g=Yg(k);Zg(g,e,b.minFrac,b.maxFrac);h=g.d;k=g.i;e=g.e;f=[];for(g=h.reduce(function(a,b){return a&&!b},!0);0>k;)h.unshift(0),k++;0<k?f=h.splice(k,h.length):(f=h,h=[0]);k=[];\nfor(h.length>=b.lgSize&&k.unshift(h.splice(-b.lgSize,h.length).join(\"\"));h.length>b.gSize;)k.unshift(h.splice(-b.gSize,h.length).join(\"\"));h.length&&k.unshift(h.join(\"\"));h=k.join(d);f.length&&(h+=c+f.join(\"\"));e&&(h+=\"e+\"+e)}return 0>a&&!g?b.negPre+h+b.negSuf:b.posPre+h+b.posSuf}function Ob(a,b,d,c){var e=\"\";if(0>a||c&&0>=a)c?a=-a+1:(a=-a,e=\"-\");for(a=\"\"+a;a.length<b;)a=Dc+a;d&&(a=a.substr(a.length-b));return e+a}function ga(a,b,d,c,e){d=d||0;return function(f){f=f[\"get\"+a]();if(0<d||f>-d)f+=d;0===\nf&&-12===d&&(f=12);return Ob(f,b,c,e)}}function kb(a,b,d){return function(c,e){var f=c[\"get\"+a](),g=ub((d?\"STANDALONE\":\"\")+(b?\"SHORT\":\"\")+a);return e[g][f]}}function Wd(a){var b=(new Date(a,0,1)).getDay();return new Date(a,0,(4>=b?5:12)-b)}function Xd(a){return function(b){var d=Wd(b.getFullYear());b=+new Date(b.getFullYear(),b.getMonth(),b.getDate()+(4-b.getDay()))-+d;b=1+Math.round(b/6048E5);return Ob(b,a)}}function Ec(a,b){return 0>=a.getFullYear()?b.ERAS[0]:b.ERAS[1]}function Qd(a){function b(a){var b;\nif(b=a.match(d)){a=new Date(0);var f=0,g=0,k=b[8]?a.setUTCFullYear:a.setFullYear,h=b[8]?a.setUTCHours:a.setHours;b[9]&&(f=da(b[9]+b[10]),g=da(b[9]+b[11]));k.call(a,da(b[1]),da(b[2])-1,da(b[3]));f=da(b[4]||0)-f;g=da(b[5]||0)-g;k=da(b[6]||0);b=Math.round(1E3*parseFloat(\"0.\"+(b[7]||0)));h.call(a,f,g,k,b)}return a}var d=/^(\\d{4})-?(\\d\\d)-?(\\d\\d)(?:T(\\d\\d)(?::?(\\d\\d)(?::?(\\d\\d)(?:\\.(\\d+))?)?)?(Z|([+-])(\\d\\d):?(\\d\\d))?)?$/;return function(c,d,f){var g=\"\",k=[],h,l;d=d||\"mediumDate\";d=a.DATETIME_FORMATS[d]||\nd;C(c)&&(c=$g.test(c)?da(c):b(c));ba(c)&&(c=new Date(c));if(!ha(c)||!isFinite(c.getTime()))return c;for(;d;)(l=ah.exec(d))?(k=db(k,l,1),d=k.pop()):(k.push(d),d=null);var m=c.getTimezoneOffset();f&&(m=dc(f,m),c=ec(c,f,!0));r(k,function(b){h=bh[b];g+=h?h(c,a.DATETIME_FORMATS,m):\"''\"===b?\"'\":b.replace(/(^'|'$)/g,\"\").replace(/''/g,\"'\")});return g}}function Tg(){return function(a,b){x(b)&&(b=2);return eb(a,b)}}function Ug(){return function(a,b,d){b=Infinity===Math.abs(Number(b))?Number(b):da(b);if(V(b))return a;\nba(a)&&(a=a.toString());if(!xa(a))return a;d=!d||isNaN(d)?0:da(d);d=0>d?Math.max(0,a.length+d):d;return 0<=b?Fc(a,d,d+b):0===d?Fc(a,b,a.length):Fc(a,Math.max(0,d+b),d)}}function Fc(a,b,d){return C(a)?a.slice(b,d):Ga.call(a,b,d)}function Sd(a){function b(b){return b.map(function(b){var c=1,d=Ta;if(z(b))d=b;else if(C(b)){if(\"+\"===b.charAt(0)||\"-\"===b.charAt(0))c=\"-\"===b.charAt(0)?-1:1,b=b.substring(1);if(\"\"!==b&&(d=a(b),d.constant))var e=d(),d=function(a){return a[e]}}return{get:d,descending:c}})}function d(a){switch(typeof a){case \"number\":case \"boolean\":case \"string\":return!0;\ndefault:return!1}}function c(a,b){var c=0,d=a.type,h=b.type;if(d===h){var h=a.value,l=b.value;\"string\"===d?(h=h.toLowerCase(),l=l.toLowerCase()):\"object\"===d&&(F(h)&&(h=a.index),F(l)&&(l=b.index));h!==l&&(c=h<l?-1:1)}else c=\"undefined\"===d?1:\"undefined\"===h?-1:\"null\"===d?1:\"null\"===h?-1:d<h?-1:1;return c}return function(a,f,g,k){if(null==a)return a;if(!xa(a))throw M(\"orderBy\")(\"notarray\",a);I(f)||(f=[f]);0===f.length&&(f=[\"+\"]);var h=b(f),l=g?-1:1,m=z(k)?k:c;a=Array.prototype.map.call(a,function(a,\nb){return{value:a,tieBreaker:{value:b,type:\"number\",index:b},predicateValues:h.map(function(c){var e=c.get(a);c=typeof e;if(null===e)c=\"null\";else if(\"object\"===c)a:{if(z(e.valueOf)&&(e=e.valueOf(),d(e)))break a;ac(e)&&(e=e.toString(),d(e))}return{value:e,type:c,index:b}})}});a.sort(function(a,b){for(var d=0,e=h.length;d<e;d++){var f=m(a.predicateValues[d],b.predicateValues[d]);if(f)return f*h[d].descending*l}return(m(a.tieBreaker,b.tieBreaker)||c(a.tieBreaker,b.tieBreaker))*l});return a=a.map(function(a){return a.value})}}\nfunction Na(a){z(a)&&(a={link:a});a.restrict=a.restrict||\"AC\";return ia(a)}function Pb(a,b,d,c,e){this.$$controls=[];this.$error={};this.$$success={};this.$pending=void 0;this.$name=e(b.name||b.ngForm||\"\")(d);this.$dirty=!1;this.$valid=this.$pristine=!0;this.$submitted=this.$invalid=!1;this.$$parentForm=lb;this.$$element=a;this.$$animate=c;Yd(this)}function Yd(a){a.$$classCache={};a.$$classCache[Zd]=!(a.$$classCache[mb]=a.$$element.hasClass(mb))}function $d(a){function b(a,b,c){c&&!a.$$classCache[b]?\n(a.$$animate.addClass(a.$$element,b),a.$$classCache[b]=!0):!c&&a.$$classCache[b]&&(a.$$animate.removeClass(a.$$element,b),a.$$classCache[b]=!1)}function d(a,c,d){c=c?\"-\"+Uc(c,\"-\"):\"\";b(a,mb+c,!0===d);b(a,Zd+c,!1===d)}var c=a.set,e=a.unset;a.clazz.prototype.$setValidity=function(a,g,k){x(g)?(this.$pending||(this.$pending={}),c(this.$pending,a,k)):(this.$pending&&e(this.$pending,a,k),ae(this.$pending)&&(this.$pending=void 0));Fa(g)?g?(e(this.$error,a,k),c(this.$$success,a,k)):(c(this.$error,a,k),e(this.$$success,\na,k)):(e(this.$error,a,k),e(this.$$success,a,k));this.$pending?(b(this,\"ng-pending\",!0),this.$valid=this.$invalid=void 0,d(this,\"\",null)):(b(this,\"ng-pending\",!1),this.$valid=ae(this.$error),this.$invalid=!this.$valid,d(this,\"\",this.$valid));g=this.$pending&&this.$pending[a]?void 0:this.$error[a]?!1:this.$$success[a]?!0:null;d(this,a,g);this.$$parentForm.$setValidity(a,g,this)}}function ae(a){if(a)for(var b in a)if(a.hasOwnProperty(b))return!1;return!0}function Gc(a){a.$formatters.push(function(b){return a.$isEmpty(b)?\nb:b.toString()})}function Ra(a,b,d,c,e,f){var g=O(b[0].type);if(!e.android){var k=!1;b.on(\"compositionstart\",function(){k=!0});b.on(\"compositionupdate\",function(a){if(x(a.data)||\"\"===a.data)k=!1});b.on(\"compositionend\",function(){k=!1;l()})}var h,l=function(a){h&&(f.defer.cancel(h),h=null);if(!k){var e=b.val();a=a&&a.type;\"password\"===g||d.ngTrim&&\"false\"===d.ngTrim||(e=T(e));(c.$viewValue!==e||\"\"===e&&c.$$hasNativeValidators)&&c.$setViewValue(e,a)}};if(e.hasEvent(\"input\"))b.on(\"input\",l);else{var m=\nfunction(a,b,c){h||(h=f.defer(function(){h=null;b&&b.value===c||l(a)}))};b.on(\"keydown\",function(a){var b=a.keyCode;91===b||15<b&&19>b||37<=b&&40>=b||m(a,this,this.value)});if(e.hasEvent(\"paste\"))b.on(\"paste cut drop\",m)}b.on(\"change\",l);if(be[g]&&c.$$hasNativeValidators&&g===d.type)b.on(\"keydown wheel mousedown\",function(a){if(!h){var b=this.validity,c=b.badInput,d=b.typeMismatch;h=f.defer(function(){h=null;b.badInput===c&&b.typeMismatch===d||l(a)})}});c.$render=function(){var a=c.$isEmpty(c.$viewValue)?\n\"\":c.$viewValue;b.val()!==a&&b.val(a)}}function Qb(a,b){return function(d,c){var e,f;if(ha(d))return d;if(C(d)){'\"'===d.charAt(0)&&'\"'===d.charAt(d.length-1)&&(d=d.substring(1,d.length-1));if(ch.test(d))return new Date(d);a.lastIndex=0;if(e=a.exec(d))return e.shift(),f=c?{yyyy:c.getFullYear(),MM:c.getMonth()+1,dd:c.getDate(),HH:c.getHours(),mm:c.getMinutes(),ss:c.getSeconds(),sss:c.getMilliseconds()/1E3}:{yyyy:1970,MM:1,dd:1,HH:0,mm:0,ss:0,sss:0},r(e,function(a,c){c<b.length&&(f[b[c]]=+a)}),e=new Date(f.yyyy,\nf.MM-1,f.dd,f.HH,f.mm,f.ss||0,1E3*f.sss||0),100>f.yyyy&&e.setFullYear(f.yyyy),e}return NaN}}function nb(a,b,d,c){return function(e,f,g,k,h,l,m){function q(a){return a&&!(a.getTime&&a.getTime()!==a.getTime())}function n(a){return v(a)&&!ha(a)?s(a)||void 0:a}function s(a,b){var c=k.$options.getOption(\"timezone\");p&&p!==c&&(b=Rc(b,dc(p)));var e=d(a,b);!isNaN(e)&&c&&(e=ec(e,c));return e}Hc(e,f,g,k,a);Ra(e,f,g,k,h,l);var t=\"time\"===a||\"datetimelocal\"===a,u,p;k.$parsers.push(function(c){if(k.$isEmpty(c))return null;\nif(b.test(c))return s(c,u);k.$$parserName=a});k.$formatters.push(function(a){if(a&&!ha(a))throw ob(\"datefmt\",a);if(q(a)){u=a;var b=k.$options.getOption(\"timezone\");b&&(p=b,u=ec(u,b,!0));var d=c;t&&C(k.$options.getOption(\"timeSecondsFormat\"))&&(d=c.replace(\"ss.sss\",k.$options.getOption(\"timeSecondsFormat\")).replace(/:$/,\"\"));a=m(\"date\")(a,d,b);t&&k.$options.getOption(\"timeStripZeroSeconds\")&&(a=a.replace(/(?::00)?(?:\\.000)?$/,\"\"));return a}p=u=null;return\"\"});if(v(g.min)||g.ngMin){var r;k.$validators.min=\nfunction(a){return!q(a)||x(r)||d(a)>=r};g.$observe(\"min\",function(a){r=n(a);k.$validate()})}if(v(g.max)||g.ngMax){var y;k.$validators.max=function(a){return!q(a)||x(y)||d(a)<=y};g.$observe(\"max\",function(a){y=n(a);k.$validate()})}}}function Hc(a,b,d,c,e){(c.$$hasNativeValidators=F(b[0].validity))&&c.$parsers.push(function(a){var d=b.prop(\"validity\")||{};if(d.badInput||d.typeMismatch)c.$$parserName=e;else return a})}function ce(a){a.$parsers.push(function(b){if(a.$isEmpty(b))return null;if(dh.test(b))return parseFloat(b);\na.$$parserName=\"number\"});a.$formatters.push(function(b){if(!a.$isEmpty(b)){if(!ba(b))throw ob(\"numfmt\",b);b=b.toString()}return b})}function Sa(a){v(a)&&!ba(a)&&(a=parseFloat(a));return V(a)?void 0:a}function Ic(a){var b=a.toString(),d=b.indexOf(\".\");return-1===d?-1<a&&1>a&&(a=/e-(\\d+)$/.exec(b))?Number(a[1]):0:b.length-d-1}function de(a,b,d){a=Number(a);var c=(a|0)!==a,e=(b|0)!==b,f=(d|0)!==d;if(c||e||f){var g=c?Ic(a):0,k=e?Ic(b):0,h=f?Ic(d):0,g=Math.max(g,k,h),g=Math.pow(10,g);a*=g;b*=g;d*=g;c&&\n(a=Math.round(a));e&&(b=Math.round(b));f&&(d=Math.round(d))}return 0===(a-b)%d}function ee(a,b,d,c,e){if(v(c)){a=a(c);if(!a.constant)throw ob(\"constexpr\",d,c);return a(b)}return e}function Jc(a,b){function d(a,b){if(!a||!a.length)return[];if(!b||!b.length)return a;var c=[],d=0;a:for(;d<a.length;d++){for(var e=a[d],m=0;m<b.length;m++)if(e===b[m])continue a;c.push(e)}return c}function c(a){if(!a)return a;var b=a;I(a)?b=a.map(c).join(\" \"):F(a)?b=Object.keys(a).filter(function(b){return a[b]}).join(\" \"):\nC(a)||(b=a+\"\");return b}a=\"ngClass\"+a;var e;return[\"$parse\",function(f){return{restrict:\"AC\",link:function(g,k,h){function l(a,b){var c=[];r(a,function(a){if(0<b||q[a])q[a]=(q[a]||0)+b,q[a]===+(0<b)&&c.push(a)});return c.join(\" \")}function m(a){if(a===b){var c=s,c=l(c&&c.split(\" \"),1);h.$addClass(c)}else c=s,c=l(c&&c.split(\" \"),-1),h.$removeClass(c);n=a}var q=k.data(\"$classCounts\"),n=!0,s;q||(q=S(),k.data(\"$classCounts\",q));\"ngClass\"!==a&&(e||(e=f(\"$index\",function(a){return a&1})),g.$watch(e,m));\ng.$watch(f(h[a],c),function(a){if(n===b){var c=s&&s.split(\" \"),e=a&&a.split(\" \"),f=d(c,e),c=d(e,c),f=l(f,-1),c=l(c,1);h.$addClass(c);h.$removeClass(f)}s=a})}}}]}function pd(a,b,d,c,e,f){return{restrict:\"A\",compile:function(g,k){var h=a(k[c]);return function(a,c){c.on(e,function(c){var e=function(){h(a,{$event:c})};if(b.$$phase)if(f)a.$evalAsync(e);else try{e()}catch(g){d(g)}else a.$apply(e)})}}}}function Rb(a,b,d,c,e,f,g,k,h){this.$modelValue=this.$viewValue=Number.NaN;this.$$rawModelValue=void 0;\nthis.$validators={};this.$asyncValidators={};this.$parsers=[];this.$formatters=[];this.$viewChangeListeners=[];this.$untouched=!0;this.$touched=!1;this.$pristine=!0;this.$dirty=!1;this.$valid=!0;this.$invalid=!1;this.$error={};this.$$success={};this.$pending=void 0;this.$name=h(d.name||\"\",!1)(a);this.$$parentForm=lb;this.$options=Sb;this.$$updateEvents=\"\";this.$$updateEventHandler=this.$$updateEventHandler.bind(this);this.$$parsedNgModel=e(d.ngModel);this.$$parsedNgModelAssign=this.$$parsedNgModel.assign;\nthis.$$ngModelGet=this.$$parsedNgModel;this.$$ngModelSet=this.$$parsedNgModelAssign;this.$$pendingDebounce=null;this.$$parserValid=void 0;this.$$parserName=\"parse\";this.$$currentValidationRunId=0;this.$$scope=a;this.$$rootScope=a.$root;this.$$attr=d;this.$$element=c;this.$$animate=f;this.$$timeout=g;this.$$parse=e;this.$$q=k;this.$$exceptionHandler=b;Yd(this);eh(this)}function eh(a){a.$$scope.$watch(function(b){b=a.$$ngModelGet(b);b===a.$modelValue||a.$modelValue!==a.$modelValue&&b!==b||a.$$setModelValue(b);\nreturn b})}function Kc(a){this.$$options=a}function fe(a,b){r(b,function(b,c){v(a[c])||(a[c]=b)})}function Ea(a,b){a.prop(\"selected\",b);a.attr(\"selected\",b)}var Vb={objectMaxDepth:5,urlErrorParamsEnabled:!0},fh=/^\\/(.+)\\/([a-z]*)$/,sa=Object.prototype.hasOwnProperty,O=function(a){return C(a)?a.toLowerCase():a},ub=function(a){return C(a)?a.toUpperCase():a},Aa,y,rb,Ga=[].slice,Bg=[].splice,gh=[].push,ma=Object.prototype.toString,Oc=Object.getPrototypeOf,Ia=M(\"ng\"),ea=B.angular||(B.angular={}),jc,pb=\n0;Aa=B.document.documentMode;var V=Number.isNaN||function(a){return a!==a};A.$inject=[];Ta.$inject=[];var se=/^\\[object (?:Uint8|Uint8Clamped|Uint16|Uint32|Int8|Int16|Int32|Float32|Float64)Array]$/,T=function(a){return C(a)?a.trim():a},Ld=function(a){return a.replace(/([-()[\\]{}+?*.$^|,:#<!\\\\])/g,\"\\\\$1\").replace(/\\x08/g,\"\\\\x08\")},pa=function(){if(!v(pa.rules)){var a=B.document.querySelector(\"[ng-csp]\")||B.document.querySelector(\"[data-ng-csp]\");if(a){var b=a.getAttribute(\"ng-csp\")||a.getAttribute(\"data-ng-csp\");\npa.rules={noUnsafeEval:!b||-1!==b.indexOf(\"no-unsafe-eval\"),noInlineStyle:!b||-1!==b.indexOf(\"no-inline-style\")}}else{a=pa;try{new Function(\"\"),b=!1}catch(d){b=!0}a.rules={noUnsafeEval:b,noInlineStyle:!1}}}return pa.rules},qb=function(){if(v(qb.name_))return qb.name_;var a,b,d=Pa.length,c,e;for(b=0;b<d;++b)if(c=Pa[b],a=B.document.querySelector(\"[\"+c.replace(\":\",\"\\\\:\")+\"jq]\")){e=a.getAttribute(c+\"jq\");break}return qb.name_=e},ue=/:/g,Pa=[\"ng-\",\"data-ng-\",\"ng:\",\"x-ng-\"],ye=function(a){var b=a.currentScript;\nif(!b)return!0;if(!(b instanceof B.HTMLScriptElement||b instanceof B.SVGScriptElement))return!1;b=b.attributes;return[b.getNamedItem(\"src\"),b.getNamedItem(\"href\"),b.getNamedItem(\"xlink:href\")].every(function(b){if(!b)return!0;if(!b.value)return!1;var c=a.createElement(\"a\");c.href=b.value;if(a.location.origin===c.origin)return!0;switch(c.protocol){case \"http:\":case \"https:\":case \"ftp:\":case \"blob:\":case \"file:\":case \"data:\":return!0;default:return!1}})}(B.document),Be=/[A-Z]/g,Vc=!1,Oa=3,He={full:\"1.7.5\",\nmajor:1,minor:7,dot:5,codeName:\"anti-prettification\"};W.expando=\"ng339\";var Ja=W.cache={},lg=1;W._data=function(a){return this.cache[a[this.expando]]||{}};var hg=/-([a-z])/g,hh=/^-ms-/,Ab={mouseleave:\"mouseout\",mouseenter:\"mouseover\"},mc=M(\"jqLite\"),kg=/^<([\\w-]+)\\s*\\/?>(?:<\\/\\1>|)$/,lc=/<|&#?\\w+;/,ig=/<([\\w:-]+)/,jg=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\\w:-]+)[^>]*)\\/>/gi,ja={option:[1,'<select multiple=\"multiple\">',\"</select>\"],thead:[1,\"<table>\",\"</table>\"],col:[2,\"<table><colgroup>\",\n\"</colgroup></table>\"],tr:[2,\"<table><tbody>\",\"</tbody></table>\"],td:[3,\"<table><tbody><tr>\",\"</tr></tbody></table>\"],_default:[0,\"\",\"\"]};ja.optgroup=ja.option;ja.tbody=ja.tfoot=ja.colgroup=ja.caption=ja.thead;ja.th=ja.td;var qg=B.Node.prototype.contains||function(a){return!!(this.compareDocumentPosition(a)&16)},Wa=W.prototype={ready:ed,toString:function(){var a=[];r(this,function(b){a.push(\"\"+b)});return\"[\"+a.join(\", \")+\"]\"},eq:function(a){return 0<=a?y(this[a]):y(this[this.length+a])},length:0,\npush:gh,sort:[].sort,splice:[].splice},Gb={};r(\"multiple selected checked disabled readOnly required open\".split(\" \"),function(a){Gb[O(a)]=a});var ld={};r(\"input select option textarea button form details\".split(\" \"),function(a){ld[a]=!0});var sd={ngMinlength:\"minlength\",ngMaxlength:\"maxlength\",ngMin:\"min\",ngMax:\"max\",ngPattern:\"pattern\",ngStep:\"step\"};r({data:qc,removeData:pc,hasData:function(a){for(var b in Ja[a.ng339])return!0;return!1},cleanData:function(a){for(var b=0,d=a.length;b<d;b++)pc(a[b]),\nhd(a[b])}},function(a,b){W[b]=a});r({data:qc,inheritedData:Eb,scope:function(a){return y.data(a,\"$scope\")||Eb(a.parentNode||a,[\"$isolateScope\",\"$scope\"])},isolateScope:function(a){return y.data(a,\"$isolateScope\")||y.data(a,\"$isolateScopeNoTemplate\")},controller:id,injector:function(a){return Eb(a,\"$injector\")},removeAttr:function(a,b){a.removeAttribute(b)},hasClass:Bb,css:function(a,b,d){b=xb(b.replace(hh,\"ms-\"));if(v(d))a.style[b]=d;else return a.style[b]},attr:function(a,b,d){var c=a.nodeType;if(c!==\nOa&&2!==c&&8!==c&&a.getAttribute){var c=O(b),e=Gb[c];if(v(d))null===d||!1===d&&e?a.removeAttribute(b):a.setAttribute(b,e?c:d);else return a=a.getAttribute(b),e&&null!==a&&(a=c),null===a?void 0:a}},prop:function(a,b,d){if(v(d))a[b]=d;else return a[b]},text:function(){function a(a,d){if(x(d)){var c=a.nodeType;return 1===c||c===Oa?a.textContent:\"\"}a.textContent=d}a.$dv=\"\";return a}(),val:function(a,b){if(x(b)){if(a.multiple&&\"select\"===ta(a)){var d=[];r(a.options,function(a){a.selected&&d.push(a.value||\na.text)});return d}return a.value}a.value=b},html:function(a,b){if(x(b))return a.innerHTML;yb(a,!0);a.innerHTML=b},empty:jd},function(a,b){W.prototype[b]=function(b,c){var e,f,g=this.length;if(a!==jd&&x(2===a.length&&a!==Bb&&a!==id?b:c)){if(F(b)){for(e=0;e<g;e++)if(a===qc)a(this[e],b);else for(f in b)a(this[e],f,b[f]);return this}e=a.$dv;g=x(e)?Math.min(g,1):g;for(f=0;f<g;f++){var k=a(this[f],b,c);e=e?e+k:k}return e}for(e=0;e<g;e++)a(this[e],b,c);return this}});r({removeData:pc,on:function(a,b,d,\nc){if(v(c))throw mc(\"onargs\");if(kc(a)){c=zb(a,!0);var e=c.events,f=c.handle;f||(f=c.handle=ng(a,e));c=0<=b.indexOf(\" \")?b.split(\" \"):[b];for(var g=c.length,k=function(b,c,g){var k=e[b];k||(k=e[b]=[],k.specialHandlerWrapper=c,\"$destroy\"===b||g||a.addEventListener(b,f));k.push(d)};g--;)b=c[g],Ab[b]?(k(Ab[b],pg),k(b,void 0,!0)):k(b)}},off:hd,one:function(a,b,d){a=y(a);a.on(b,function e(){a.off(b,d);a.off(b,e)});a.on(b,d)},replaceWith:function(a,b){var d,c=a.parentNode;yb(a);r(new W(b),function(b){d?\nc.insertBefore(b,d.nextSibling):c.replaceChild(b,a);d=b})},children:function(a){var b=[];r(a.childNodes,function(a){1===a.nodeType&&b.push(a)});return b},contents:function(a){return a.contentDocument||a.childNodes||[]},append:function(a,b){var d=a.nodeType;if(1===d||11===d){b=new W(b);for(var d=0,c=b.length;d<c;d++)a.appendChild(b[d])}},prepend:function(a,b){if(1===a.nodeType){var d=a.firstChild;r(new W(b),function(b){a.insertBefore(b,d)})}},wrap:function(a,b){var d=y(b).eq(0).clone()[0],c=a.parentNode;\nc&&c.replaceChild(d,a);d.appendChild(a)},remove:Fb,detach:function(a){Fb(a,!0)},after:function(a,b){var d=a,c=a.parentNode;if(c){b=new W(b);for(var e=0,f=b.length;e<f;e++){var g=b[e];c.insertBefore(g,d.nextSibling);d=g}}},addClass:Db,removeClass:Cb,toggleClass:function(a,b,d){b&&r(b.split(\" \"),function(b){var e=d;x(e)&&(e=!Bb(a,b));(e?Db:Cb)(a,b)})},parent:function(a){return(a=a.parentNode)&&11!==a.nodeType?a:null},next:function(a){return a.nextElementSibling},find:function(a,b){return a.getElementsByTagName?\na.getElementsByTagName(b):[]},clone:oc,triggerHandler:function(a,b,d){var c,e,f=b.type||b,g=zb(a);if(g=(g=g&&g.events)&&g[f])c={preventDefault:function(){this.defaultPrevented=!0},isDefaultPrevented:function(){return!0===this.defaultPrevented},stopImmediatePropagation:function(){this.immediatePropagationStopped=!0},isImmediatePropagationStopped:function(){return!0===this.immediatePropagationStopped},stopPropagation:A,type:f,target:a},b.type&&(c=R(c,b)),b=oa(g),e=d?[c].concat(d):[c],r(b,function(b){c.isImmediatePropagationStopped()||\nb.apply(a,e)})}},function(a,b){W.prototype[b]=function(b,c,e){for(var f,g=0,k=this.length;g<k;g++)x(f)?(f=a(this[g],b,c,e),v(f)&&(f=y(f))):nc(f,a(this[g],b,c,e));return v(f)?f:this}});W.prototype.bind=W.prototype.on;W.prototype.unbind=W.prototype.off;var ih=Object.create(null);md.prototype={_idx:function(a){a!==this._lastKey&&(this._lastKey=a,this._lastIndex=this._keys.indexOf(a));return this._lastIndex},_transformKey:function(a){return V(a)?ih:a},get:function(a){a=this._transformKey(a);a=this._idx(a);\nif(-1!==a)return this._values[a]},has:function(a){a=this._transformKey(a);return-1!==this._idx(a)},set:function(a,b){a=this._transformKey(a);var d=this._idx(a);-1===d&&(d=this._lastIndex=this._keys.length);this._keys[d]=a;this._values[d]=b},delete:function(a){a=this._transformKey(a);a=this._idx(a);if(-1===a)return!1;this._keys.splice(a,1);this._values.splice(a,1);this._lastKey=NaN;this._lastIndex=-1;return!0}};var Hb=md,fg=[function(){this.$get=[function(){return Hb}]}],sg=/^([^(]+?)=>/,tg=/^[^(]*\\(\\s*([^)]*)\\)/m,\njh=/,/,kh=/^\\s*(_?)(\\S+?)\\1\\s*$/,rg=/((\\/\\/.*$)|(\\/\\*[\\s\\S]*?\\*\\/))/mg,za=M(\"$injector\");fb.$$annotate=function(a,b,d){var c;if(\"function\"===typeof a){if(!(c=a.$inject)){c=[];if(a.length){if(b)throw C(d)&&d||(d=a.name||ug(a)),za(\"strictdi\",d);b=nd(a);r(b[1].split(jh),function(a){a.replace(kh,function(a,b,d){c.push(d)})})}a.$inject=c}}else I(a)?(b=a.length-1,sb(a[b],\"fn\"),c=a.slice(0,b)):sb(a,\"fn\",!0);return c};var ge=M(\"$animate\"),vf=function(){this.$get=A},wf=function(){var a=new Hb,b=[];this.$get=\n[\"$$AnimateRunner\",\"$rootScope\",function(d,c){function e(a,b,c){var d=!1;b&&(b=C(b)?b.split(\" \"):I(b)?b:[],r(b,function(b){b&&(d=!0,a[b]=c)}));return d}function f(){r(b,function(b){var c=a.get(b);if(c){var d=vg(b.attr(\"class\")),e=\"\",f=\"\";r(c,function(a,b){a!==!!d[b]&&(a?e+=(e.length?\" \":\"\")+b:f+=(f.length?\" \":\"\")+b)});r(b,function(a){e&&Db(a,e);f&&Cb(a,f)});a.delete(b)}});b.length=0}return{enabled:A,on:A,off:A,pin:A,push:function(g,k,h,l){l&&l();h=h||{};h.from&&g.css(h.from);h.to&&g.css(h.to);if(h.addClass||\nh.removeClass)if(k=h.addClass,l=h.removeClass,h=a.get(g)||{},k=e(h,k,!0),l=e(h,l,!1),k||l)a.set(g,h),b.push(g),1===b.length&&c.$$postDigest(f);g=new d;g.complete();return g}}}]},tf=[\"$provide\",function(a){var b=this,d=null,c=null;this.$$registeredAnimations=Object.create(null);this.register=function(c,d){if(c&&\".\"!==c.charAt(0))throw ge(\"notcsel\",c);var g=c+\"-animation\";b.$$registeredAnimations[c.substr(1)]=g;a.factory(g,d)};this.customFilter=function(a){1===arguments.length&&(c=z(a)?a:null);return c};\nthis.classNameFilter=function(a){if(1===arguments.length&&(d=a instanceof RegExp?a:null)&&/[(\\s|\\/)]ng-animate[(\\s|\\/)]/.test(d.toString()))throw d=null,ge(\"nongcls\",\"ng-animate\");return d};this.$get=[\"$$animateQueue\",function(a){function b(a,c,d){if(d){var e;a:{for(e=0;e<d.length;e++){var f=d[e];if(1===f.nodeType){e=f;break a}}e=void 0}!e||e.parentNode||e.previousElementSibling||(d=null)}d?d.after(a):c.prepend(a)}return{on:a.on,off:a.off,pin:a.pin,enabled:a.enabled,cancel:function(a){a.cancel&&a.cancel()},\nenter:function(c,d,h,l){d=d&&y(d);h=h&&y(h);d=d||h.parent();b(c,d,h);return a.push(c,\"enter\",Ba(l))},move:function(c,d,h,l){d=d&&y(d);h=h&&y(h);d=d||h.parent();b(c,d,h);return a.push(c,\"move\",Ba(l))},leave:function(b,c){return a.push(b,\"leave\",Ba(c),function(){b.remove()})},addClass:function(b,c,d){d=Ba(d);d.addClass=hb(d.addclass,c);return a.push(b,\"addClass\",d)},removeClass:function(b,c,d){d=Ba(d);d.removeClass=hb(d.removeClass,c);return a.push(b,\"removeClass\",d)},setClass:function(b,c,d,f){f=Ba(f);\nf.addClass=hb(f.addClass,c);f.removeClass=hb(f.removeClass,d);return a.push(b,\"setClass\",f)},animate:function(b,c,d,f,m){m=Ba(m);m.from=m.from?R(m.from,c):c;m.to=m.to?R(m.to,d):d;m.tempClasses=hb(m.tempClasses,f||\"ng-inline-animate\");return a.push(b,\"animate\",m)}}}]}],yf=function(){this.$get=[\"$$rAF\",function(a){function b(b){d.push(b);1<d.length||a(function(){for(var a=0;a<d.length;a++)d[a]();d=[]})}var d=[];return function(){var a=!1;b(function(){a=!0});return function(d){a?d():b(d)}}}]},xf=function(){this.$get=\n[\"$q\",\"$sniffer\",\"$$animateAsyncRun\",\"$$isDocumentHidden\",\"$timeout\",function(a,b,d,c,e){function f(a){this.setHost(a);var b=d();this._doneCallbacks=[];this._tick=function(a){c()?e(a,0,!1):b(a)};this._state=0}f.chain=function(a,b){function c(){if(d===a.length)b(!0);else a[d](function(a){!1===a?b(!1):(d++,c())})}var d=0;c()};f.all=function(a,b){function c(f){e=e&&f;++d===a.length&&b(e)}var d=0,e=!0;r(a,function(a){a.done(c)})};f.prototype={setHost:function(a){this.host=a||{}},done:function(a){2===\nthis._state?a():this._doneCallbacks.push(a)},progress:A,getPromise:function(){if(!this.promise){var b=this;this.promise=a(function(a,c){b.done(function(b){!1===b?c():a()})})}return this.promise},then:function(a,b){return this.getPromise().then(a,b)},\"catch\":function(a){return this.getPromise()[\"catch\"](a)},\"finally\":function(a){return this.getPromise()[\"finally\"](a)},pause:function(){this.host.pause&&this.host.pause()},resume:function(){this.host.resume&&this.host.resume()},end:function(){this.host.end&&\nthis.host.end();this._resolve(!0)},cancel:function(){this.host.cancel&&this.host.cancel();this._resolve(!1)},complete:function(a){var b=this;0===b._state&&(b._state=1,b._tick(function(){b._resolve(a)}))},_resolve:function(a){2!==this._state&&(r(this._doneCallbacks,function(b){b(a)}),this._doneCallbacks.length=0,this._state=2)}};return f}]},uf=function(){this.$get=[\"$$rAF\",\"$q\",\"$$AnimateRunner\",function(a,b,d){return function(b,e){function f(){a(function(){g.addClass&&(b.addClass(g.addClass),g.addClass=\nnull);g.removeClass&&(b.removeClass(g.removeClass),g.removeClass=null);g.to&&(b.css(g.to),g.to=null);k||h.complete();k=!0});return h}var g=e||{};g.$$prepared||(g=Ha(g));g.cleanupStyles&&(g.from=g.to=null);g.from&&(b.css(g.from),g.from=null);var k,h=new d;return{start:f,end:f}}}]},aa=M(\"$compile\"),sc=new function(){};Wc.$inject=[\"$provide\",\"$$sanitizeUriProvider\"];Jb.prototype.isFirstChange=function(){return this.previousValue===sc};var od=/^((?:x|data)[:\\-_])/i,Ag=/[:\\-_]+(.)/g,ud=M(\"$controller\"),\ntd=/^(\\S+)(\\s+as\\s+([\\w$]+))?$/,Ff=function(){this.$get=[\"$document\",function(a){return function(b){b?!b.nodeType&&b instanceof y&&(b=b[0]):b=a[0].body;return b.offsetWidth+1}}]},vd=\"application/json\",vc={\"Content-Type\":vd+\";charset=utf-8\"},Dg=/^\\[|^\\{(?!\\{)/,Eg={\"[\":/]$/,\"{\":/}$/},Cg=/^\\)]\\}',?\\n/,Kb=M(\"$http\"),Ca=ea.$interpolateMinErr=M(\"$interpolate\");Ca.throwNoconcat=function(a){throw Ca(\"noconcat\",a);};Ca.interr=function(a,b){return Ca(\"interr\",a,b.toString())};var Hg=M(\"$interval\"),Of=function(){this.$get=\nfunction(){function a(a){var b=function(a){b.data=a;b.called=!0};b.id=a;return b}var b=ea.callbacks,d={};return{createCallback:function(c){c=\"_\"+(b.$$counter++).toString(36);var e=\"angular.callbacks.\"+c,f=a(c);d[e]=b[c]=f;return e},wasCalled:function(a){return d[a].called},getResponse:function(a){return d[a].data},removeCallback:function(a){delete b[d[a].id];delete d[a]}}}},lh=/^([^?#]*)(\\?([^#]*))?(#(.*))?$/,Ig={http:80,https:443,ftp:21},jb=M(\"$location\"),Jg=/^\\s*[\\\\/]{2,}/,mh={$$absUrl:\"\",$$html5:!1,\n$$replace:!1,$$compose:function(){for(var a=this.$$path,b=this.$$hash,d=ve(this.$$search),b=b?\"#\"+gc(b):\"\",a=a.split(\"/\"),c=a.length;c--;)a[c]=gc(a[c].replace(/%2F/g,\"/\"));this.$$url=a.join(\"/\")+(d?\"?\"+d:\"\")+b;this.$$absUrl=this.$$normalizeUrl(this.$$url);this.$$urlUpdatedByLocation=!0},absUrl:Lb(\"$$absUrl\"),url:function(a){if(x(a))return this.$$url;var b=lh.exec(a);(b[1]||\"\"===a)&&this.path(decodeURIComponent(b[1]));(b[2]||b[1]||\"\"===a)&&this.search(b[3]||\"\");this.hash(b[5]||\"\");return this},protocol:Lb(\"$$protocol\"),\nhost:Lb(\"$$host\"),port:Lb(\"$$port\"),path:Cd(\"$$path\",function(a){a=null!==a?a.toString():\"\";return\"/\"===a.charAt(0)?a:\"/\"+a}),search:function(a,b){switch(arguments.length){case 0:return this.$$search;case 1:if(C(a)||ba(a))a=a.toString(),this.$$search=fc(a);else if(F(a))a=Ha(a,{}),r(a,function(b,c){null==b&&delete a[c]}),this.$$search=a;else throw jb(\"isrcharg\");break;default:x(b)||null===b?delete this.$$search[a]:this.$$search[a]=b}this.$$compose();return this},hash:Cd(\"$$hash\",function(a){return null!==\na?a.toString():\"\"}),replace:function(){this.$$replace=!0;return this}};r([Bd,yc,xc],function(a){a.prototype=Object.create(mh);a.prototype.state=function(b){if(!arguments.length)return this.$$state;if(a!==xc||!this.$$html5)throw jb(\"nostate\");this.$$state=x(b)?null:b;this.$$urlUpdatedByLocation=!0;return this}});var Ya=M(\"$parse\"),Ng={}.constructor.prototype.valueOf,Tb=S();r(\"+ - * / % === !== == != < > <= >= && || ! = |\".split(\" \"),function(a){Tb[a]=!0});var nh={n:\"\\n\",f:\"\\f\",r:\"\\r\",t:\"\\t\",v:\"\\v\",\n\"'\":\"'\",'\"':'\"'},Nb=function(a){this.options=a};Nb.prototype={constructor:Nb,lex:function(a){this.text=a;this.index=0;for(this.tokens=[];this.index<this.text.length;)if(a=this.text.charAt(this.index),'\"'===a||\"'\"===a)this.readString(a);else if(this.isNumber(a)||\".\"===a&&this.isNumber(this.peek()))this.readNumber();else if(this.isIdentifierStart(this.peekMultichar()))this.readIdent();else if(this.is(a,\"(){}[].,;:?\"))this.tokens.push({index:this.index,text:a}),this.index++;else if(this.isWhitespace(a))this.index++;\nelse{var b=a+this.peek(),d=b+this.peek(2),c=Tb[b],e=Tb[d];Tb[a]||c||e?(a=e?d:c?b:a,this.tokens.push({index:this.index,text:a,operator:!0}),this.index+=a.length):this.throwError(\"Unexpected next character \",this.index,this.index+1)}return this.tokens},is:function(a,b){return-1!==b.indexOf(a)},peek:function(a){a=a||1;return this.index+a<this.text.length?this.text.charAt(this.index+a):!1},isNumber:function(a){return\"0\"<=a&&\"9\">=a&&\"string\"===typeof a},isWhitespace:function(a){return\" \"===a||\"\\r\"===a||\n\"\\t\"===a||\"\\n\"===a||\"\\v\"===a||\"\\u00a0\"===a},isIdentifierStart:function(a){return this.options.isIdentifierStart?this.options.isIdentifierStart(a,this.codePointAt(a)):this.isValidIdentifierStart(a)},isValidIdentifierStart:function(a){return\"a\"<=a&&\"z\">=a||\"A\"<=a&&\"Z\">=a||\"_\"===a||\"$\"===a},isIdentifierContinue:function(a){return this.options.isIdentifierContinue?this.options.isIdentifierContinue(a,this.codePointAt(a)):this.isValidIdentifierContinue(a)},isValidIdentifierContinue:function(a,b){return this.isValidIdentifierStart(a,\nb)||this.isNumber(a)},codePointAt:function(a){return 1===a.length?a.charCodeAt(0):(a.charCodeAt(0)<<10)+a.charCodeAt(1)-56613888},peekMultichar:function(){var a=this.text.charAt(this.index),b=this.peek();if(!b)return a;var d=a.charCodeAt(0),c=b.charCodeAt(0);return 55296<=d&&56319>=d&&56320<=c&&57343>=c?a+b:a},isExpOperator:function(a){return\"-\"===a||\"+\"===a||this.isNumber(a)},throwError:function(a,b,d){d=d||this.index;b=v(b)?\"s \"+b+\"-\"+this.index+\" [\"+this.text.substring(b,d)+\"]\":\" \"+d;throw Ya(\"lexerr\",\na,b,this.text);},readNumber:function(){for(var a=\"\",b=this.index;this.index<this.text.length;){var d=O(this.text.charAt(this.index));if(\".\"===d||this.isNumber(d))a+=d;else{var c=this.peek();if(\"e\"===d&&this.isExpOperator(c))a+=d;else if(this.isExpOperator(d)&&c&&this.isNumber(c)&&\"e\"===a.charAt(a.length-1))a+=d;else if(!this.isExpOperator(d)||c&&this.isNumber(c)||\"e\"!==a.charAt(a.length-1))break;else this.throwError(\"Invalid exponent\")}this.index++}this.tokens.push({index:b,text:a,constant:!0,value:Number(a)})},\nreadIdent:function(){var a=this.index;for(this.index+=this.peekMultichar().length;this.index<this.text.length;){var b=this.peekMultichar();if(!this.isIdentifierContinue(b))break;this.index+=b.length}this.tokens.push({index:a,text:this.text.slice(a,this.index),identifier:!0})},readString:function(a){var b=this.index;this.index++;for(var d=\"\",c=a,e=!1;this.index<this.text.length;){var f=this.text.charAt(this.index),c=c+f;if(e)\"u\"===f?(e=this.text.substring(this.index+1,this.index+5),e.match(/[\\da-f]{4}/i)||\nthis.throwError(\"Invalid unicode escape [\\\\u\"+e+\"]\"),this.index+=4,d+=String.fromCharCode(parseInt(e,16))):d+=nh[f]||f,e=!1;else if(\"\\\\\"===f)e=!0;else{if(f===a){this.index++;this.tokens.push({index:b,text:c,constant:!0,value:d});return}d+=f}this.index++}this.throwError(\"Unterminated quote\",b)}};var p=function(a,b){this.lexer=a;this.options=b};p.Program=\"Program\";p.ExpressionStatement=\"ExpressionStatement\";p.AssignmentExpression=\"AssignmentExpression\";p.ConditionalExpression=\"ConditionalExpression\";\np.LogicalExpression=\"LogicalExpression\";p.BinaryExpression=\"BinaryExpression\";p.UnaryExpression=\"UnaryExpression\";p.CallExpression=\"CallExpression\";p.MemberExpression=\"MemberExpression\";p.Identifier=\"Identifier\";p.Literal=\"Literal\";p.ArrayExpression=\"ArrayExpression\";p.Property=\"Property\";p.ObjectExpression=\"ObjectExpression\";p.ThisExpression=\"ThisExpression\";p.LocalsExpression=\"LocalsExpression\";p.NGValueParameter=\"NGValueParameter\";p.prototype={ast:function(a){this.text=a;this.tokens=this.lexer.lex(a);\na=this.program();0!==this.tokens.length&&this.throwError(\"is an unexpected token\",this.tokens[0]);return a},program:function(){for(var a=[];;)if(0<this.tokens.length&&!this.peek(\"}\",\")\",\";\",\"]\")&&a.push(this.expressionStatement()),!this.expect(\";\"))return{type:p.Program,body:a}},expressionStatement:function(){return{type:p.ExpressionStatement,expression:this.filterChain()}},filterChain:function(){for(var a=this.expression();this.expect(\"|\");)a=this.filter(a);return a},expression:function(){return this.assignment()},\nassignment:function(){var a=this.ternary();if(this.expect(\"=\")){if(!Gd(a))throw Ya(\"lval\");a={type:p.AssignmentExpression,left:a,right:this.assignment(),operator:\"=\"}}return a},ternary:function(){var a=this.logicalOR(),b,d;return this.expect(\"?\")&&(b=this.expression(),this.consume(\":\"))?(d=this.expression(),{type:p.ConditionalExpression,test:a,alternate:b,consequent:d}):a},logicalOR:function(){for(var a=this.logicalAND();this.expect(\"||\");)a={type:p.LogicalExpression,operator:\"||\",left:a,right:this.logicalAND()};\nreturn a},logicalAND:function(){for(var a=this.equality();this.expect(\"&&\");)a={type:p.LogicalExpression,operator:\"&&\",left:a,right:this.equality()};return a},equality:function(){for(var a=this.relational(),b;b=this.expect(\"==\",\"!=\",\"===\",\"!==\");)a={type:p.BinaryExpression,operator:b.text,left:a,right:this.relational()};return a},relational:function(){for(var a=this.additive(),b;b=this.expect(\"<\",\">\",\"<=\",\">=\");)a={type:p.BinaryExpression,operator:b.text,left:a,right:this.additive()};return a},additive:function(){for(var a=\nthis.multiplicative(),b;b=this.expect(\"+\",\"-\");)a={type:p.BinaryExpression,operator:b.text,left:a,right:this.multiplicative()};return a},multiplicative:function(){for(var a=this.unary(),b;b=this.expect(\"*\",\"/\",\"%\");)a={type:p.BinaryExpression,operator:b.text,left:a,right:this.unary()};return a},unary:function(){var a;return(a=this.expect(\"+\",\"-\",\"!\"))?{type:p.UnaryExpression,operator:a.text,prefix:!0,argument:this.unary()}:this.primary()},primary:function(){var a;this.expect(\"(\")?(a=this.filterChain(),\nthis.consume(\")\")):this.expect(\"[\")?a=this.arrayDeclaration():this.expect(\"{\")?a=this.object():this.selfReferential.hasOwnProperty(this.peek().text)?a=Ha(this.selfReferential[this.consume().text]):this.options.literals.hasOwnProperty(this.peek().text)?a={type:p.Literal,value:this.options.literals[this.consume().text]}:this.peek().identifier?a=this.identifier():this.peek().constant?a=this.constant():this.throwError(\"not a primary expression\",this.peek());for(var b;b=this.expect(\"(\",\"[\",\".\");)\"(\"===\nb.text?(a={type:p.CallExpression,callee:a,arguments:this.parseArguments()},this.consume(\")\")):\"[\"===b.text?(a={type:p.MemberExpression,object:a,property:this.expression(),computed:!0},this.consume(\"]\")):\".\"===b.text?a={type:p.MemberExpression,object:a,property:this.identifier(),computed:!1}:this.throwError(\"IMPOSSIBLE\");return a},filter:function(a){a=[a];for(var b={type:p.CallExpression,callee:this.identifier(),arguments:a,filter:!0};this.expect(\":\");)a.push(this.expression());return b},parseArguments:function(){var a=\n[];if(\")\"!==this.peekToken().text){do a.push(this.filterChain());while(this.expect(\",\"))}return a},identifier:function(){var a=this.consume();a.identifier||this.throwError(\"is not a valid identifier\",a);return{type:p.Identifier,name:a.text}},constant:function(){return{type:p.Literal,value:this.consume().value}},arrayDeclaration:function(){var a=[];if(\"]\"!==this.peekToken().text){do{if(this.peek(\"]\"))break;a.push(this.expression())}while(this.expect(\",\"))}this.consume(\"]\");return{type:p.ArrayExpression,\nelements:a}},object:function(){var a=[],b;if(\"}\"!==this.peekToken().text){do{if(this.peek(\"}\"))break;b={type:p.Property,kind:\"init\"};this.peek().constant?(b.key=this.constant(),b.computed=!1,this.consume(\":\"),b.value=this.expression()):this.peek().identifier?(b.key=this.identifier(),b.computed=!1,this.peek(\":\")?(this.consume(\":\"),b.value=this.expression()):b.value=b.key):this.peek(\"[\")?(this.consume(\"[\"),b.key=this.expression(),this.consume(\"]\"),b.computed=!0,this.consume(\":\"),b.value=this.expression()):\nthis.throwError(\"invalid key\",this.peek());a.push(b)}while(this.expect(\",\"))}this.consume(\"}\");return{type:p.ObjectExpression,properties:a}},throwError:function(a,b){throw Ya(\"syntax\",b.text,a,b.index+1,this.text,this.text.substring(b.index));},consume:function(a){if(0===this.tokens.length)throw Ya(\"ueoe\",this.text);var b=this.expect(a);b||this.throwError(\"is unexpected, expecting [\"+a+\"]\",this.peek());return b},peekToken:function(){if(0===this.tokens.length)throw Ya(\"ueoe\",this.text);return this.tokens[0]},\npeek:function(a,b,d,c){return this.peekAhead(0,a,b,d,c)},peekAhead:function(a,b,d,c,e){if(this.tokens.length>a){a=this.tokens[a];var f=a.text;if(f===b||f===d||f===c||f===e||!(b||d||c||e))return a}return!1},expect:function(a,b,d,c){return(a=this.peek(a,b,d,c))?(this.tokens.shift(),a):!1},selfReferential:{\"this\":{type:p.ThisExpression},$locals:{type:p.LocalsExpression}}};var Ed=2;Id.prototype={compile:function(a){var b=this;this.state={nextId:0,filters:{},fn:{vars:[],body:[],own:{}},assign:{vars:[],\nbody:[],own:{}},inputs:[]};Y(a,b.$filter);var d=\"\",c;this.stage=\"assign\";if(c=Hd(a))this.state.computing=\"assign\",d=this.nextId(),this.recurse(c,d),this.return_(d),d=\"fn.assign=\"+this.generateFunction(\"assign\",\"s,v,l\");c=Fd(a.body);b.stage=\"inputs\";r(c,function(a,c){var d=\"fn\"+c;b.state[d]={vars:[],body:[],own:{}};b.state.computing=d;var k=b.nextId();b.recurse(a,k);b.return_(k);b.state.inputs.push({name:d,isPure:a.isPure});a.watchId=c});this.state.computing=\"fn\";this.stage=\"main\";this.recurse(a);\na='\"'+this.USE+\" \"+this.STRICT+'\";\\n'+this.filterPrefix()+\"var fn=\"+this.generateFunction(\"fn\",\"s,l,a,i\")+d+this.watchFns()+\"return fn;\";a=(new Function(\"$filter\",\"getStringValue\",\"ifDefined\",\"plus\",a))(this.$filter,Kg,Lg,Dd);this.state=this.stage=void 0;return a},USE:\"use\",STRICT:\"strict\",watchFns:function(){var a=[],b=this.state.inputs,d=this;r(b,function(b){a.push(\"var \"+b.name+\"=\"+d.generateFunction(b.name,\"s\"));b.isPure&&a.push(b.name,\".isPure=\"+JSON.stringify(b.isPure)+\";\")});b.length&&a.push(\"fn.inputs=[\"+\nb.map(function(a){return a.name}).join(\",\")+\"];\");return a.join(\"\")},generateFunction:function(a,b){return\"function(\"+b+\"){\"+this.varsPrefix(a)+this.body(a)+\"};\"},filterPrefix:function(){var a=[],b=this;r(this.state.filters,function(d,c){a.push(d+\"=$filter(\"+b.escape(c)+\")\")});return a.length?\"var \"+a.join(\",\")+\";\":\"\"},varsPrefix:function(a){return this.state[a].vars.length?\"var \"+this.state[a].vars.join(\",\")+\";\":\"\"},body:function(a){return this.state[a].body.join(\"\")},recurse:function(a,b,d,c,e,\nf){var g,k,h=this,l,m,q;c=c||A;if(!f&&v(a.watchId))b=b||this.nextId(),this.if_(\"i\",this.lazyAssign(b,this.computedMember(\"i\",a.watchId)),this.lazyRecurse(a,b,d,c,e,!0));else switch(a.type){case p.Program:r(a.body,function(b,c){h.recurse(b.expression,void 0,void 0,function(a){k=a});c!==a.body.length-1?h.current().body.push(k,\";\"):h.return_(k)});break;case p.Literal:m=this.escape(a.value);this.assign(b,m);c(b||m);break;case p.UnaryExpression:this.recurse(a.argument,void 0,void 0,function(a){k=a});m=\na.operator+\"(\"+this.ifDefined(k,0)+\")\";this.assign(b,m);c(m);break;case p.BinaryExpression:this.recurse(a.left,void 0,void 0,function(a){g=a});this.recurse(a.right,void 0,void 0,function(a){k=a});m=\"+\"===a.operator?this.plus(g,k):\"-\"===a.operator?this.ifDefined(g,0)+a.operator+this.ifDefined(k,0):\"(\"+g+\")\"+a.operator+\"(\"+k+\")\";this.assign(b,m);c(m);break;case p.LogicalExpression:b=b||this.nextId();h.recurse(a.left,b);h.if_(\"&&\"===a.operator?b:h.not(b),h.lazyRecurse(a.right,b));c(b);break;case p.ConditionalExpression:b=\nb||this.nextId();h.recurse(a.test,b);h.if_(b,h.lazyRecurse(a.alternate,b),h.lazyRecurse(a.consequent,b));c(b);break;case p.Identifier:b=b||this.nextId();d&&(d.context=\"inputs\"===h.stage?\"s\":this.assign(this.nextId(),this.getHasOwnProperty(\"l\",a.name)+\"?l:s\"),d.computed=!1,d.name=a.name);h.if_(\"inputs\"===h.stage||h.not(h.getHasOwnProperty(\"l\",a.name)),function(){h.if_(\"inputs\"===h.stage||\"s\",function(){e&&1!==e&&h.if_(h.isNull(h.nonComputedMember(\"s\",a.name)),h.lazyAssign(h.nonComputedMember(\"s\",a.name),\n\"{}\"));h.assign(b,h.nonComputedMember(\"s\",a.name))})},b&&h.lazyAssign(b,h.nonComputedMember(\"l\",a.name)));c(b);break;case p.MemberExpression:g=d&&(d.context=this.nextId())||this.nextId();b=b||this.nextId();h.recurse(a.object,g,void 0,function(){h.if_(h.notNull(g),function(){a.computed?(k=h.nextId(),h.recurse(a.property,k),h.getStringValue(k),e&&1!==e&&h.if_(h.not(h.computedMember(g,k)),h.lazyAssign(h.computedMember(g,k),\"{}\")),m=h.computedMember(g,k),h.assign(b,m),d&&(d.computed=!0,d.name=k)):(e&&\n1!==e&&h.if_(h.isNull(h.nonComputedMember(g,a.property.name)),h.lazyAssign(h.nonComputedMember(g,a.property.name),\"{}\")),m=h.nonComputedMember(g,a.property.name),h.assign(b,m),d&&(d.computed=!1,d.name=a.property.name))},function(){h.assign(b,\"undefined\")});c(b)},!!e);break;case p.CallExpression:b=b||this.nextId();a.filter?(k=h.filter(a.callee.name),l=[],r(a.arguments,function(a){var b=h.nextId();h.recurse(a,b);l.push(b)}),m=k+\"(\"+l.join(\",\")+\")\",h.assign(b,m),c(b)):(k=h.nextId(),g={},l=[],h.recurse(a.callee,\nk,g,function(){h.if_(h.notNull(k),function(){r(a.arguments,function(b){h.recurse(b,a.constant?void 0:h.nextId(),void 0,function(a){l.push(a)})});m=g.name?h.member(g.context,g.name,g.computed)+\"(\"+l.join(\",\")+\")\":k+\"(\"+l.join(\",\")+\")\";h.assign(b,m)},function(){h.assign(b,\"undefined\")});c(b)}));break;case p.AssignmentExpression:k=this.nextId();g={};this.recurse(a.left,void 0,g,function(){h.if_(h.notNull(g.context),function(){h.recurse(a.right,k);m=h.member(g.context,g.name,g.computed)+a.operator+k;\nh.assign(b,m);c(b||m)})},1);break;case p.ArrayExpression:l=[];r(a.elements,function(b){h.recurse(b,a.constant?void 0:h.nextId(),void 0,function(a){l.push(a)})});m=\"[\"+l.join(\",\")+\"]\";this.assign(b,m);c(b||m);break;case p.ObjectExpression:l=[];q=!1;r(a.properties,function(a){a.computed&&(q=!0)});q?(b=b||this.nextId(),this.assign(b,\"{}\"),r(a.properties,function(a){a.computed?(g=h.nextId(),h.recurse(a.key,g)):g=a.key.type===p.Identifier?a.key.name:\"\"+a.key.value;k=h.nextId();h.recurse(a.value,k);h.assign(h.member(b,\ng,a.computed),k)})):(r(a.properties,function(b){h.recurse(b.value,a.constant?void 0:h.nextId(),void 0,function(a){l.push(h.escape(b.key.type===p.Identifier?b.key.name:\"\"+b.key.value)+\":\"+a)})}),m=\"{\"+l.join(\",\")+\"}\",this.assign(b,m));c(b||m);break;case p.ThisExpression:this.assign(b,\"s\");c(b||\"s\");break;case p.LocalsExpression:this.assign(b,\"l\");c(b||\"l\");break;case p.NGValueParameter:this.assign(b,\"v\"),c(b||\"v\")}},getHasOwnProperty:function(a,b){var d=a+\".\"+b,c=this.current().own;c.hasOwnProperty(d)||\n(c[d]=this.nextId(!1,a+\"&&(\"+this.escape(b)+\" in \"+a+\")\"));return c[d]},assign:function(a,b){if(a)return this.current().body.push(a,\"=\",b,\";\"),a},filter:function(a){this.state.filters.hasOwnProperty(a)||(this.state.filters[a]=this.nextId(!0));return this.state.filters[a]},ifDefined:function(a,b){return\"ifDefined(\"+a+\",\"+this.escape(b)+\")\"},plus:function(a,b){return\"plus(\"+a+\",\"+b+\")\"},return_:function(a){this.current().body.push(\"return \",a,\";\")},if_:function(a,b,d){if(!0===a)b();else{var c=this.current().body;\nc.push(\"if(\",a,\"){\");b();c.push(\"}\");d&&(c.push(\"else{\"),d(),c.push(\"}\"))}},not:function(a){return\"!(\"+a+\")\"},isNull:function(a){return a+\"==null\"},notNull:function(a){return a+\"!=null\"},nonComputedMember:function(a,b){var d=/[^$_a-zA-Z0-9]/g;return/^[$_a-zA-Z][$_a-zA-Z0-9]*$/.test(b)?a+\".\"+b:a+'[\"'+b.replace(d,this.stringEscapeFn)+'\"]'},computedMember:function(a,b){return a+\"[\"+b+\"]\"},member:function(a,b,d){return d?this.computedMember(a,b):this.nonComputedMember(a,b)},getStringValue:function(a){this.assign(a,\n\"getStringValue(\"+a+\")\")},lazyRecurse:function(a,b,d,c,e,f){var g=this;return function(){g.recurse(a,b,d,c,e,f)}},lazyAssign:function(a,b){var d=this;return function(){d.assign(a,b)}},stringEscapeRegex:/[^ a-zA-Z0-9]/g,stringEscapeFn:function(a){return\"\\\\u\"+(\"0000\"+a.charCodeAt(0).toString(16)).slice(-4)},escape:function(a){if(C(a))return\"'\"+a.replace(this.stringEscapeRegex,this.stringEscapeFn)+\"'\";if(ba(a))return a.toString();if(!0===a)return\"true\";if(!1===a)return\"false\";if(null===a)return\"null\";\nif(\"undefined\"===typeof a)return\"undefined\";throw Ya(\"esc\");},nextId:function(a,b){var d=\"v\"+this.state.nextId++;a||this.current().vars.push(d+(b?\"=\"+b:\"\"));return d},current:function(){return this.state[this.state.computing]}};Jd.prototype={compile:function(a){var b=this;Y(a,b.$filter);var d,c;if(d=Hd(a))c=this.recurse(d);d=Fd(a.body);var e;d&&(e=[],r(d,function(a,c){var d=b.recurse(a);d.isPure=a.isPure;a.input=d;e.push(d);a.watchId=c}));var f=[];r(a.body,function(a){f.push(b.recurse(a.expression))});\na=0===a.body.length?A:1===a.body.length?f[0]:function(a,b){var c;r(f,function(d){c=d(a,b)});return c};c&&(a.assign=function(a,b,d){return c(a,d,b)});e&&(a.inputs=e);return a},recurse:function(a,b,d){var c,e,f=this,g;if(a.input)return this.inputs(a.input,a.watchId);switch(a.type){case p.Literal:return this.value(a.value,b);case p.UnaryExpression:return e=this.recurse(a.argument),this[\"unary\"+a.operator](e,b);case p.BinaryExpression:return c=this.recurse(a.left),e=this.recurse(a.right),this[\"binary\"+\na.operator](c,e,b);case p.LogicalExpression:return c=this.recurse(a.left),e=this.recurse(a.right),this[\"binary\"+a.operator](c,e,b);case p.ConditionalExpression:return this[\"ternary?:\"](this.recurse(a.test),this.recurse(a.alternate),this.recurse(a.consequent),b);case p.Identifier:return f.identifier(a.name,b,d);case p.MemberExpression:return c=this.recurse(a.object,!1,!!d),a.computed||(e=a.property.name),a.computed&&(e=this.recurse(a.property)),a.computed?this.computedMember(c,e,b,d):this.nonComputedMember(c,\ne,b,d);case p.CallExpression:return g=[],r(a.arguments,function(a){g.push(f.recurse(a))}),a.filter&&(e=this.$filter(a.callee.name)),a.filter||(e=this.recurse(a.callee,!0)),a.filter?function(a,c,d,f){for(var q=[],n=0;n<g.length;++n)q.push(g[n](a,c,d,f));a=e.apply(void 0,q,f);return b?{context:void 0,name:void 0,value:a}:a}:function(a,c,d,f){var q=e(a,c,d,f),n;if(null!=q.value){n=[];for(var s=0;s<g.length;++s)n.push(g[s](a,c,d,f));n=q.value.apply(q.context,n)}return b?{value:n}:n};case p.AssignmentExpression:return c=\nthis.recurse(a.left,!0,1),e=this.recurse(a.right),function(a,d,f,g){var q=c(a,d,f,g);a=e(a,d,f,g);q.context[q.name]=a;return b?{value:a}:a};case p.ArrayExpression:return g=[],r(a.elements,function(a){g.push(f.recurse(a))}),function(a,c,d,e){for(var f=[],n=0;n<g.length;++n)f.push(g[n](a,c,d,e));return b?{value:f}:f};case p.ObjectExpression:return g=[],r(a.properties,function(a){a.computed?g.push({key:f.recurse(a.key),computed:!0,value:f.recurse(a.value)}):g.push({key:a.key.type===p.Identifier?a.key.name:\n\"\"+a.key.value,computed:!1,value:f.recurse(a.value)})}),function(a,c,d,e){for(var f={},n=0;n<g.length;++n)g[n].computed?f[g[n].key(a,c,d,e)]=g[n].value(a,c,d,e):f[g[n].key]=g[n].value(a,c,d,e);return b?{value:f}:f};case p.ThisExpression:return function(a){return b?{value:a}:a};case p.LocalsExpression:return function(a,c){return b?{value:c}:c};case p.NGValueParameter:return function(a,c,d){return b?{value:d}:d}}},\"unary+\":function(a,b){return function(d,c,e,f){d=a(d,c,e,f);d=v(d)?+d:0;return b?{value:d}:\nd}},\"unary-\":function(a,b){return function(d,c,e,f){d=a(d,c,e,f);d=v(d)?-d:-0;return b?{value:d}:d}},\"unary!\":function(a,b){return function(d,c,e,f){d=!a(d,c,e,f);return b?{value:d}:d}},\"binary+\":function(a,b,d){return function(c,e,f,g){var k=a(c,e,f,g);c=b(c,e,f,g);k=Dd(k,c);return d?{value:k}:k}},\"binary-\":function(a,b,d){return function(c,e,f,g){var k=a(c,e,f,g);c=b(c,e,f,g);k=(v(k)?k:0)-(v(c)?c:0);return d?{value:k}:k}},\"binary*\":function(a,b,d){return function(c,e,f,g){c=a(c,e,f,g)*b(c,e,f,g);\nreturn d?{value:c}:c}},\"binary/\":function(a,b,d){return function(c,e,f,g){c=a(c,e,f,g)/b(c,e,f,g);return d?{value:c}:c}},\"binary%\":function(a,b,d){return function(c,e,f,g){c=a(c,e,f,g)%b(c,e,f,g);return d?{value:c}:c}},\"binary===\":function(a,b,d){return function(c,e,f,g){c=a(c,e,f,g)===b(c,e,f,g);return d?{value:c}:c}},\"binary!==\":function(a,b,d){return function(c,e,f,g){c=a(c,e,f,g)!==b(c,e,f,g);return d?{value:c}:c}},\"binary==\":function(a,b,d){return function(c,e,f,g){c=a(c,e,f,g)==b(c,e,f,g);return d?\n{value:c}:c}},\"binary!=\":function(a,b,d){return function(c,e,f,g){c=a(c,e,f,g)!=b(c,e,f,g);return d?{value:c}:c}},\"binary<\":function(a,b,d){return function(c,e,f,g){c=a(c,e,f,g)<b(c,e,f,g);return d?{value:c}:c}},\"binary>\":function(a,b,d){return function(c,e,f,g){c=a(c,e,f,g)>b(c,e,f,g);return d?{value:c}:c}},\"binary<=\":function(a,b,d){return function(c,e,f,g){c=a(c,e,f,g)<=b(c,e,f,g);return d?{value:c}:c}},\"binary>=\":function(a,b,d){return function(c,e,f,g){c=a(c,e,f,g)>=b(c,e,f,g);return d?{value:c}:\nc}},\"binary&&\":function(a,b,d){return function(c,e,f,g){c=a(c,e,f,g)&&b(c,e,f,g);return d?{value:c}:c}},\"binary||\":function(a,b,d){return function(c,e,f,g){c=a(c,e,f,g)||b(c,e,f,g);return d?{value:c}:c}},\"ternary?:\":function(a,b,d,c){return function(e,f,g,k){e=a(e,f,g,k)?b(e,f,g,k):d(e,f,g,k);return c?{value:e}:e}},value:function(a,b){return function(){return b?{context:void 0,name:void 0,value:a}:a}},identifier:function(a,b,d){return function(c,e,f,g){c=e&&a in e?e:c;d&&1!==d&&c&&null==c[a]&&(c[a]=\n{});e=c?c[a]:void 0;return b?{context:c,name:a,value:e}:e}},computedMember:function(a,b,d,c){return function(e,f,g,k){var h=a(e,f,g,k),l,m;null!=h&&(l=b(e,f,g,k),l+=\"\",c&&1!==c&&h&&!h[l]&&(h[l]={}),m=h[l]);return d?{context:h,name:l,value:m}:m}},nonComputedMember:function(a,b,d,c){return function(e,f,g,k){e=a(e,f,g,k);c&&1!==c&&e&&null==e[b]&&(e[b]={});f=null!=e?e[b]:void 0;return d?{context:e,name:b,value:f}:f}},inputs:function(a,b){return function(d,c,e,f){return f?f[b]:a(d,c,e)}}};Mb.prototype=\n{constructor:Mb,parse:function(a){a=this.getAst(a);var b=this.astCompiler.compile(a.ast),d=a.ast;b.literal=0===d.body.length||1===d.body.length&&(d.body[0].expression.type===p.Literal||d.body[0].expression.type===p.ArrayExpression||d.body[0].expression.type===p.ObjectExpression);b.constant=a.ast.constant;b.oneTime=a.oneTime;return b},getAst:function(a){var b=!1;a=a.trim();\":\"===a.charAt(0)&&\":\"===a.charAt(1)&&(b=!0,a=a.substring(2));return{ast:this.ast.ast(a),oneTime:b}}};var Da=M(\"$sce\"),U={HTML:\"html\",\nCSS:\"css\",MEDIA_URL:\"mediaUrl\",URL:\"url\",RESOURCE_URL:\"resourceUrl\",JS:\"js\"},Bc=/_([a-z])/g,Qg=M(\"$templateRequest\"),Rg=M(\"$timeout\"),$=B.document.createElement(\"a\"),Nd=la(B.location.href),La;Od.$inject=[\"$document\"];cd.$inject=[\"$provide\"];var Vd=22,Ud=\".\",Dc=\"0\";Pd.$inject=[\"$locale\"];Rd.$inject=[\"$locale\"];var bh={yyyy:ga(\"FullYear\",4,0,!1,!0),yy:ga(\"FullYear\",2,0,!0,!0),y:ga(\"FullYear\",1,0,!1,!0),MMMM:kb(\"Month\"),MMM:kb(\"Month\",!0),MM:ga(\"Month\",2,1),M:ga(\"Month\",1,1),LLLL:kb(\"Month\",!1,!0),dd:ga(\"Date\",\n2),d:ga(\"Date\",1),HH:ga(\"Hours\",2),H:ga(\"Hours\",1),hh:ga(\"Hours\",2,-12),h:ga(\"Hours\",1,-12),mm:ga(\"Minutes\",2),m:ga(\"Minutes\",1),ss:ga(\"Seconds\",2),s:ga(\"Seconds\",1),sss:ga(\"Milliseconds\",3),EEEE:kb(\"Day\"),EEE:kb(\"Day\",!0),a:function(a,b){return 12>a.getHours()?b.AMPMS[0]:b.AMPMS[1]},Z:function(a,b,d){a=-1*d;return a=(0<=a?\"+\":\"\")+(Ob(Math[0<a?\"floor\":\"ceil\"](a/60),2)+Ob(Math.abs(a%60),2))},ww:Xd(2),w:Xd(1),G:Ec,GG:Ec,GGG:Ec,GGGG:function(a,b){return 0>=a.getFullYear()?b.ERANAMES[0]:b.ERANAMES[1]}},\nah=/((?:[^yMLdHhmsaZEwG']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|L+|d+|H+|h+|m+|s+|a|Z|G+|w+))([\\s\\S]*)/,$g=/^-?\\d+$/;Qd.$inject=[\"$locale\"];var Vg=ia(O),Wg=ia(ub);Sd.$inject=[\"$parse\"];var Je=ia({restrict:\"E\",compile:function(a,b){if(!b.href&&!b.xlinkHref)return function(a,b){if(\"a\"===b[0].nodeName.toLowerCase()){var e=\"[object SVGAnimatedString]\"===ma.call(b.prop(\"href\"))?\"xlink:href\":\"href\";b.on(\"click\",function(a){b.attr(e)||a.preventDefault()})}}}}),vb={};r(Gb,function(a,b){function d(a,d,e){a.$watch(e[c],\nfunction(a){e.$set(b,!!a)})}if(\"multiple\"!==a){var c=va(\"ng-\"+b),e=d;\"checked\"===a&&(e=function(a,b,e){e.ngModel!==e[c]&&d(a,b,e)});vb[c]=function(){return{restrict:\"A\",priority:100,link:e}}}});r(sd,function(a,b){vb[b]=function(){return{priority:100,link:function(a,c,e){if(\"ngPattern\"===b&&\"/\"===e.ngPattern.charAt(0)&&(c=e.ngPattern.match(fh))){e.$set(\"ngPattern\",new RegExp(c[1],c[2]));return}a.$watch(e[b],function(a){e.$set(b,a)})}}}});r([\"src\",\"srcset\",\"href\"],function(a){var b=va(\"ng-\"+a);vb[b]=\nfunction(){return{priority:99,link:function(d,c,e){var f=a,g=a;\"href\"===a&&\"[object SVGAnimatedString]\"===ma.call(c.prop(\"href\"))&&(g=\"xlinkHref\",e.$attr[g]=\"xlink:href\",f=null);e.$observe(b,function(b){b?(e.$set(g,b),Aa&&f&&c.prop(f,e[g])):\"href\"===a&&e.$set(g,null)})}}}});var lb={$addControl:A,$getControls:ia([]),$$renameControl:function(a,b){a.$name=b},$removeControl:A,$setValidity:A,$setDirty:A,$setPristine:A,$setSubmitted:A,$$setSubmitted:A};Pb.$inject=[\"$element\",\"$attrs\",\"$scope\",\"$animate\",\n\"$interpolate\"];Pb.prototype={$rollbackViewValue:function(){r(this.$$controls,function(a){a.$rollbackViewValue()})},$commitViewValue:function(){r(this.$$controls,function(a){a.$commitViewValue()})},$addControl:function(a){Qa(a.$name,\"input\");this.$$controls.push(a);a.$name&&(this[a.$name]=a);a.$$parentForm=this},$getControls:function(){return oa(this.$$controls)},$$renameControl:function(a,b){var d=a.$name;this[d]===a&&delete this[d];this[b]=a;a.$name=b},$removeControl:function(a){a.$name&&this[a.$name]===\na&&delete this[a.$name];r(this.$pending,function(b,d){this.$setValidity(d,null,a)},this);r(this.$error,function(b,d){this.$setValidity(d,null,a)},this);r(this.$$success,function(b,d){this.$setValidity(d,null,a)},this);cb(this.$$controls,a);a.$$parentForm=lb},$setDirty:function(){this.$$animate.removeClass(this.$$element,Za);this.$$animate.addClass(this.$$element,Ub);this.$dirty=!0;this.$pristine=!1;this.$$parentForm.$setDirty()},$setPristine:function(){this.$$animate.setClass(this.$$element,Za,Ub+\n\" ng-submitted\");this.$dirty=!1;this.$pristine=!0;this.$submitted=!1;r(this.$$controls,function(a){a.$setPristine()})},$setUntouched:function(){r(this.$$controls,function(a){a.$setUntouched()})},$setSubmitted:function(){for(var a=this;a.$$parentForm&&a.$$parentForm!==lb;)a=a.$$parentForm;a.$$setSubmitted()},$$setSubmitted:function(){this.$$animate.addClass(this.$$element,\"ng-submitted\");this.$submitted=!0;r(this.$$controls,function(a){a.$$setSubmitted&&a.$$setSubmitted()})}};$d({clazz:Pb,set:function(a,\nb,d){var c=a[b];c?-1===c.indexOf(d)&&c.push(d):a[b]=[d]},unset:function(a,b,d){var c=a[b];c&&(cb(c,d),0===c.length&&delete a[b])}});var he=function(a){return[\"$timeout\",\"$parse\",function(b,d){function c(a){return\"\"===a?d('this[\"\"]').assign:d(a).assign||A}return{name:\"form\",restrict:a?\"EAC\":\"E\",require:[\"form\",\"^^?form\"],controller:Pb,compile:function(d,f){d.addClass(Za).addClass(mb);var g=f.name?\"name\":a&&f.ngForm?\"ngForm\":!1;return{pre:function(a,d,e,f){var q=f[0];if(!(\"action\"in e)){var n=function(b){a.$apply(function(){q.$commitViewValue();\nq.$setSubmitted()});b.preventDefault()};d[0].addEventListener(\"submit\",n);d.on(\"$destroy\",function(){b(function(){d[0].removeEventListener(\"submit\",n)},0,!1)})}(f[1]||q.$$parentForm).$addControl(q);var s=g?c(q.$name):A;g&&(s(a,q),e.$observe(g,function(b){q.$name!==b&&(s(a,void 0),q.$$parentForm.$$renameControl(q,b),s=c(q.$name),s(a,q))}));d.on(\"$destroy\",function(){q.$$parentForm.$removeControl(q);s(a,void 0);R(q,lb)})}}}}}]},Ke=he(),We=he(!0),ch=/^\\d{4,}-[01]\\d-[0-3]\\dT[0-2]\\d:[0-5]\\d:[0-5]\\d\\.\\d+(?:[+-][0-2]\\d:[0-5]\\d|Z)$/,\noh=/^[a-z][a-z\\d.+-]*:\\/*(?:[^:@]+(?::[^@]+)?@)?(?:[^\\s:/?#]+|\\[[a-f\\d:]+])(?::\\d+)?(?:\\/[^?#]*)?(?:\\?[^#]*)?(?:#.*)?$/i,ph=/^(?=.{1,254}$)(?=.{1,64}@)[-!#$%&'*+/0-9=?A-Z^_`a-z{|}~]+(\\.[-!#$%&'*+/0-9=?A-Z^_`a-z{|}~]+)*@[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?(\\.[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?)*$/,dh=/^\\s*(-|\\+)?(\\d+|(\\d*(\\.\\d*)))([eE][+-]?\\d+)?\\s*$/,ie=/^(\\d{4,})-(\\d{2})-(\\d{2})$/,je=/^(\\d{4,})-(\\d\\d)-(\\d\\d)T(\\d\\d):(\\d\\d)(?::(\\d\\d)(\\.\\d{1,3})?)?$/,Lc=/^(\\d{4,})-W(\\d\\d)$/,ke=/^(\\d{4,})-(\\d\\d)$/,\nle=/^(\\d\\d):(\\d\\d)(?::(\\d\\d)(\\.\\d{1,3})?)?$/,be=S();r([\"date\",\"datetime-local\",\"month\",\"time\",\"week\"],function(a){be[a]=!0});var me={text:function(a,b,d,c,e,f){Ra(a,b,d,c,e,f);Gc(c)},date:nb(\"date\",ie,Qb(ie,[\"yyyy\",\"MM\",\"dd\"]),\"yyyy-MM-dd\"),\"datetime-local\":nb(\"datetimelocal\",je,Qb(je,\"yyyy MM dd HH mm ss sss\".split(\" \")),\"yyyy-MM-ddTHH:mm:ss.sss\"),time:nb(\"time\",le,Qb(le,[\"HH\",\"mm\",\"ss\",\"sss\"]),\"HH:mm:ss.sss\"),week:nb(\"week\",Lc,function(a,b){if(ha(a))return a;if(C(a)){Lc.lastIndex=0;var d=Lc.exec(a);\nif(d){var c=+d[1],e=+d[2],f=d=0,g=0,k=0,h=Wd(c),e=7*(e-1);b&&(d=b.getHours(),f=b.getMinutes(),g=b.getSeconds(),k=b.getMilliseconds());return new Date(c,0,h.getDate()+e,d,f,g,k)}}return NaN},\"yyyy-Www\"),month:nb(\"month\",ke,Qb(ke,[\"yyyy\",\"MM\"]),\"yyyy-MM\"),number:function(a,b,d,c,e,f){Hc(a,b,d,c,\"number\");ce(c);Ra(a,b,d,c,e,f);var g,k;if(v(d.min)||d.ngMin)c.$validators.min=function(a,b){return c.$isEmpty(b)||x(g)||b>=g},d.$observe(\"min\",function(a){g=Sa(a);c.$validate()});if(v(d.max)||d.ngMax)c.$validators.max=\nfunction(a,b){return c.$isEmpty(b)||x(k)||b<=k},d.$observe(\"max\",function(a){k=Sa(a);c.$validate()});if(v(d.step)||d.ngStep){var h;c.$validators.step=function(a,b){return c.$isEmpty(b)||x(h)||de(b,g||0,h)};d.$observe(\"step\",function(a){h=Sa(a);c.$validate()})}},url:function(a,b,d,c,e,f){Ra(a,b,d,c,e,f);Gc(c);c.$validators.url=function(a,b){var d=a||b;return c.$isEmpty(d)||oh.test(d)}},email:function(a,b,d,c,e,f){Ra(a,b,d,c,e,f);Gc(c);c.$validators.email=function(a,b){var d=a||b;return c.$isEmpty(d)||\nph.test(d)}},radio:function(a,b,d,c){var e=!d.ngTrim||\"false\"!==T(d.ngTrim);x(d.name)&&b.attr(\"name\",++pb);b.on(\"change\",function(a){var g;b[0].checked&&(g=d.value,e&&(g=T(g)),c.$setViewValue(g,a&&a.type))});c.$render=function(){var a=d.value;e&&(a=T(a));b[0].checked=a===c.$viewValue};d.$observe(\"value\",c.$render)},range:function(a,b,d,c,e,f){function g(a,c){b.attr(a,d[a]);d.$observe(a,c)}function k(a){q=Sa(a);V(c.$modelValue)||(m?(a=b.val(),q>a&&(a=q,b.val(a)),c.$setViewValue(a)):c.$validate())}\nfunction h(a){n=Sa(a);V(c.$modelValue)||(m?(a=b.val(),n<a&&(b.val(n),a=n<q?q:n),c.$setViewValue(a)):c.$validate())}function l(a){s=Sa(a);V(c.$modelValue)||(m&&c.$viewValue!==b.val()?c.$setViewValue(b.val()):c.$validate())}Hc(a,b,d,c,\"range\");ce(c);Ra(a,b,d,c,e,f);var m=c.$$hasNativeValidators&&\"range\"===b[0].type,q=m?0:void 0,n=m?100:void 0,s=m?1:void 0,p=b[0].validity;a=v(d.min);e=v(d.max);f=v(d.step);var r=c.$render;c.$render=m&&v(p.rangeUnderflow)&&v(p.rangeOverflow)?function(){r();c.$setViewValue(b.val())}:\nr;a&&(c.$validators.min=m?function(){return!0}:function(a,b){return c.$isEmpty(b)||x(q)||b>=q},g(\"min\",k));e&&(c.$validators.max=m?function(){return!0}:function(a,b){return c.$isEmpty(b)||x(n)||b<=n},g(\"max\",h));f&&(c.$validators.step=m?function(){return!p.stepMismatch}:function(a,b){return c.$isEmpty(b)||x(s)||de(b,q||0,s)},g(\"step\",l))},checkbox:function(a,b,d,c,e,f,g,k){var h=ee(k,a,\"ngTrueValue\",d.ngTrueValue,!0),l=ee(k,a,\"ngFalseValue\",d.ngFalseValue,!1);b.on(\"change\",function(a){c.$setViewValue(b[0].checked,\na&&a.type)});c.$render=function(){b[0].checked=c.$viewValue};c.$isEmpty=function(a){return!1===a};c.$formatters.push(function(a){return ua(a,h)});c.$parsers.push(function(a){return a?h:l})},hidden:A,button:A,submit:A,reset:A,file:A},Xc=[\"$browser\",\"$sniffer\",\"$filter\",\"$parse\",function(a,b,d,c){return{restrict:\"E\",require:[\"?ngModel\"],link:{pre:function(e,f,g,k){k[0]&&(me[O(g.type)]||me.text)(e,f,g,k[0],b,a,d,c)}}}}],qh=/^(true|false|\\d+)$/,pf=function(){function a(a,d,c){var e=v(c)?c:9===Aa?\"\":null;\na.prop(\"value\",e);d.$set(\"value\",c)}return{restrict:\"A\",priority:100,compile:function(b,d){return qh.test(d.ngValue)?function(b,d,f){b=b.$eval(f.ngValue);a(d,f,b)}:function(b,d,f){b.$watch(f.ngValue,function(b){a(d,f,b)})}}}},Oe=[\"$compile\",function(a){return{restrict:\"AC\",compile:function(b){a.$$addBindingClass(b);return function(b,c,e){a.$$addBindingInfo(c,e.ngBind);c=c[0];b.$watch(e.ngBind,function(a){c.textContent=hc(a)})}}}}],Qe=[\"$interpolate\",\"$compile\",function(a,b){return{compile:function(d){b.$$addBindingClass(d);\nreturn function(c,d,f){c=a(d.attr(f.$attr.ngBindTemplate));b.$$addBindingInfo(d,c.expressions);d=d[0];f.$observe(\"ngBindTemplate\",function(a){d.textContent=x(a)?\"\":a})}}}}],Pe=[\"$sce\",\"$parse\",\"$compile\",function(a,b,d){return{restrict:\"A\",compile:function(c,e){var f=b(e.ngBindHtml),g=b(e.ngBindHtml,function(b){return a.valueOf(b)});d.$$addBindingClass(c);return function(b,c,e){d.$$addBindingInfo(c,e.ngBindHtml);b.$watch(g,function(){var d=f(b);c.html(a.getTrustedHtml(d)||\"\")})}}}}],of=ia({restrict:\"A\",\nrequire:\"ngModel\",link:function(a,b,d,c){c.$viewChangeListeners.push(function(){a.$eval(d.ngChange)})}}),Re=Jc(\"\",!0),Te=Jc(\"Odd\",0),Se=Jc(\"Even\",1),Ue=Na({compile:function(a,b){b.$set(\"ngCloak\",void 0);a.removeClass(\"ng-cloak\")}}),Ve=[function(){return{restrict:\"A\",scope:!0,controller:\"@\",priority:500}}],bd={},rh={blur:!0,focus:!0};r(\"click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste\".split(\" \"),function(a){var b=\nva(\"ng-\"+a);bd[b]=[\"$parse\",\"$rootScope\",\"$exceptionHandler\",function(d,c,e){return pd(d,c,e,b,a,rh[a])}]});var Ye=[\"$animate\",\"$compile\",function(a,b){return{multiElement:!0,transclude:\"element\",priority:600,terminal:!0,restrict:\"A\",$$tlb:!0,link:function(d,c,e,f,g){var k,h,l;d.$watch(e.ngIf,function(d){d?h||g(function(d,f){h=f;d[d.length++]=b.$$createComment(\"end ngIf\",e.ngIf);k={clone:d};a.enter(d,c.parent(),c)}):(l&&(l.remove(),l=null),h&&(h.$destroy(),h=null),k&&(l=tb(k.clone),a.leave(l).done(function(a){!1!==\na&&(l=null)}),k=null))})}}}],Ze=[\"$templateRequest\",\"$anchorScroll\",\"$animate\",function(a,b,d){return{restrict:\"ECA\",priority:400,terminal:!0,transclude:\"element\",controller:ea.noop,compile:function(c,e){var f=e.ngInclude||e.src,g=e.onload||\"\",k=e.autoscroll;return function(c,e,m,q,n){var s=0,p,r,D,w=function(){r&&(r.remove(),r=null);p&&(p.$destroy(),p=null);D&&(d.leave(D).done(function(a){!1!==a&&(r=null)}),r=D,D=null)};c.$watch(f,function(f){var m=function(a){!1===a||!v(k)||k&&!c.$eval(k)||b()},\nr=++s;f?(a(f,!0).then(function(a){if(!c.$$destroyed&&r===s){var b=c.$new();q.template=a;a=n(b,function(a){w();d.enter(a,null,e).done(m)});p=b;D=a;p.$emit(\"$includeContentLoaded\",f);c.$eval(g)}},function(){c.$$destroyed||r!==s||(w(),c.$emit(\"$includeContentError\",f))}),c.$emit(\"$includeContentRequested\",f)):(w(),q.template=null)})}}}}],rf=[\"$compile\",function(a){return{restrict:\"ECA\",priority:-400,require:\"ngInclude\",link:function(b,d,c,e){ma.call(d[0]).match(/SVG/)?(d.empty(),a(dd(e.template,B.document).childNodes)(b,\nfunction(a){d.append(a)},{futureParentElement:d})):(d.html(e.template),a(d.contents())(b))}}}],$e=Na({priority:450,compile:function(){return{pre:function(a,b,d){a.$eval(d.ngInit)}}}}),nf=function(){return{restrict:\"A\",priority:100,require:\"ngModel\",link:function(a,b,d,c){var e=d.ngList||\", \",f=\"false\"!==d.ngTrim,g=f?T(e):e;c.$parsers.push(function(a){if(!x(a)){var b=[];a&&r(a.split(g),function(a){a&&b.push(f?T(a):a)});return b}});c.$formatters.push(function(a){if(I(a))return a.join(e)});c.$isEmpty=\nfunction(a){return!a||!a.length}}}},mb=\"ng-valid\",Zd=\"ng-invalid\",Za=\"ng-pristine\",Ub=\"ng-dirty\",ob=M(\"ngModel\");Rb.$inject=\"$scope $exceptionHandler $attrs $element $parse $animate $timeout $q $interpolate\".split(\" \");Rb.prototype={$$initGetterSetters:function(){if(this.$options.getOption(\"getterSetter\")){var a=this.$$parse(this.$$attr.ngModel+\"()\"),b=this.$$parse(this.$$attr.ngModel+\"($$$p)\");this.$$ngModelGet=function(b){var c=this.$$parsedNgModel(b);z(c)&&(c=a(b));return c};this.$$ngModelSet=\nfunction(a,c){z(this.$$parsedNgModel(a))?b(a,{$$$p:c}):this.$$parsedNgModelAssign(a,c)}}else if(!this.$$parsedNgModel.assign)throw ob(\"nonassign\",this.$$attr.ngModel,ya(this.$$element));},$render:A,$isEmpty:function(a){return x(a)||\"\"===a||null===a||a!==a},$$updateEmptyClasses:function(a){this.$isEmpty(a)?(this.$$animate.removeClass(this.$$element,\"ng-not-empty\"),this.$$animate.addClass(this.$$element,\"ng-empty\")):(this.$$animate.removeClass(this.$$element,\"ng-empty\"),this.$$animate.addClass(this.$$element,\n\"ng-not-empty\"))},$setPristine:function(){this.$dirty=!1;this.$pristine=!0;this.$$animate.removeClass(this.$$element,Ub);this.$$animate.addClass(this.$$element,Za)},$setDirty:function(){this.$dirty=!0;this.$pristine=!1;this.$$animate.removeClass(this.$$element,Za);this.$$animate.addClass(this.$$element,Ub);this.$$parentForm.$setDirty()},$setUntouched:function(){this.$touched=!1;this.$untouched=!0;this.$$animate.setClass(this.$$element,\"ng-untouched\",\"ng-touched\")},$setTouched:function(){this.$touched=\n!0;this.$untouched=!1;this.$$animate.setClass(this.$$element,\"ng-touched\",\"ng-untouched\")},$rollbackViewValue:function(){this.$$timeout.cancel(this.$$pendingDebounce);this.$viewValue=this.$$lastCommittedViewValue;this.$render()},$validate:function(){if(!V(this.$modelValue)){var a=this.$$lastCommittedViewValue,b=this.$$rawModelValue,d=this.$valid,c=this.$modelValue,e=this.$options.getOption(\"allowInvalid\"),f=this;this.$$runValidators(b,a,function(a){e||d===a||(f.$modelValue=a?b:void 0,f.$modelValue!==\nc&&f.$$writeModelToScope())})}},$$runValidators:function(a,b,d){function c(){var c=!0;r(h.$validators,function(d,e){var g=Boolean(d(a,b));c=c&&g;f(e,g)});return c?!0:(r(h.$asyncValidators,function(a,b){f(b,null)}),!1)}function e(){var c=[],d=!0;r(h.$asyncValidators,function(e,g){var h=e(a,b);if(!h||!z(h.then))throw ob(\"nopromise\",h);f(g,void 0);c.push(h.then(function(){f(g,!0)},function(){d=!1;f(g,!1)}))});c.length?h.$$q.all(c).then(function(){g(d)},A):g(!0)}function f(a,b){k===h.$$currentValidationRunId&&\nh.$setValidity(a,b)}function g(a){k===h.$$currentValidationRunId&&d(a)}this.$$currentValidationRunId++;var k=this.$$currentValidationRunId,h=this;(function(){var a=h.$$parserName;if(x(h.$$parserValid))f(a,null);else return h.$$parserValid||(r(h.$validators,function(a,b){f(b,null)}),r(h.$asyncValidators,function(a,b){f(b,null)})),f(a,h.$$parserValid),h.$$parserValid;return!0})()?c()?e():g(!1):g(!1)},$commitViewValue:function(){var a=this.$viewValue;this.$$timeout.cancel(this.$$pendingDebounce);if(this.$$lastCommittedViewValue!==\na||\"\"===a&&this.$$hasNativeValidators)this.$$updateEmptyClasses(a),this.$$lastCommittedViewValue=a,this.$pristine&&this.$setDirty(),this.$$parseAndValidate()},$$parseAndValidate:function(){var a=this.$$lastCommittedViewValue,b=this;this.$$parserValid=x(a)?void 0:!0;this.$setValidity(this.$$parserName,null);this.$$parserName=\"parse\";if(this.$$parserValid)for(var d=0;d<this.$parsers.length;d++)if(a=this.$parsers[d](a),x(a)){this.$$parserValid=!1;break}V(this.$modelValue)&&(this.$modelValue=this.$$ngModelGet(this.$$scope));\nvar c=this.$modelValue,e=this.$options.getOption(\"allowInvalid\");this.$$rawModelValue=a;e&&(this.$modelValue=a,b.$modelValue!==c&&b.$$writeModelToScope());this.$$runValidators(a,this.$$lastCommittedViewValue,function(d){e||(b.$modelValue=d?a:void 0,b.$modelValue!==c&&b.$$writeModelToScope())})},$$writeModelToScope:function(){this.$$ngModelSet(this.$$scope,this.$modelValue);r(this.$viewChangeListeners,function(a){try{a()}catch(b){this.$$exceptionHandler(b)}},this)},$setViewValue:function(a,b){this.$viewValue=\na;this.$options.getOption(\"updateOnDefault\")&&this.$$debounceViewValueCommit(b)},$$debounceViewValueCommit:function(a){var b=this.$options.getOption(\"debounce\");ba(b[a])?b=b[a]:ba(b[\"default\"])&&-1===this.$options.getOption(\"updateOn\").indexOf(a)?b=b[\"default\"]:ba(b[\"*\"])&&(b=b[\"*\"]);this.$$timeout.cancel(this.$$pendingDebounce);var d=this;0<b?this.$$pendingDebounce=this.$$timeout(function(){d.$commitViewValue()},b):this.$$rootScope.$$phase?this.$commitViewValue():this.$$scope.$apply(function(){d.$commitViewValue()})},\n$overrideModelOptions:function(a){this.$options=this.$options.createChild(a);this.$$setUpdateOnEvents()},$processModelValue:function(){var a=this.$$format();this.$viewValue!==a&&(this.$$updateEmptyClasses(a),this.$viewValue=this.$$lastCommittedViewValue=a,this.$render(),this.$$runValidators(this.$modelValue,this.$viewValue,A))},$$format:function(){for(var a=this.$formatters,b=a.length,d=this.$modelValue;b--;)d=a[b](d);return d},$$setModelValue:function(a){this.$modelValue=this.$$rawModelValue=a;this.$$parserValid=\nvoid 0;this.$processModelValue()},$$setUpdateOnEvents:function(){this.$$updateEvents&&this.$$element.off(this.$$updateEvents,this.$$updateEventHandler);if(this.$$updateEvents=this.$options.getOption(\"updateOn\"))this.$$element.on(this.$$updateEvents,this.$$updateEventHandler)},$$updateEventHandler:function(a){this.$$debounceViewValueCommit(a&&a.type)}};$d({clazz:Rb,set:function(a,b){a[b]=!0},unset:function(a,b){delete a[b]}});var mf=[\"$rootScope\",function(a){return{restrict:\"A\",require:[\"ngModel\",\n\"^?form\",\"^?ngModelOptions\"],controller:Rb,priority:1,compile:function(b){b.addClass(Za).addClass(\"ng-untouched\").addClass(mb);return{pre:function(a,b,e,f){var g=f[0];b=f[1]||g.$$parentForm;if(f=f[2])g.$options=f.$options;g.$$initGetterSetters();b.$addControl(g);e.$observe(\"name\",function(a){g.$name!==a&&g.$$parentForm.$$renameControl(g,a)});a.$on(\"$destroy\",function(){g.$$parentForm.$removeControl(g)})},post:function(b,c,e,f){function g(){k.$setTouched()}var k=f[0];k.$$setUpdateOnEvents();c.on(\"blur\",\nfunction(){k.$touched||(a.$$phase?b.$evalAsync(g):b.$apply(g))})}}}}}],Sb,sh=/(\\s+|^)default(\\s+|$)/;Kc.prototype={getOption:function(a){return this.$$options[a]},createChild:function(a){var b=!1;a=R({},a);r(a,function(d,c){\"$inherit\"===d?\"*\"===c?b=!0:(a[c]=this.$$options[c],\"updateOn\"===c&&(a.updateOnDefault=this.$$options.updateOnDefault)):\"updateOn\"===c&&(a.updateOnDefault=!1,a[c]=T(d.replace(sh,function(){a.updateOnDefault=!0;return\" \"})))},this);b&&(delete a[\"*\"],fe(a,this.$$options));fe(a,Sb.$$options);\nreturn new Kc(a)}};Sb=new Kc({updateOn:\"\",updateOnDefault:!0,debounce:0,getterSetter:!1,allowInvalid:!1,timezone:null});var qf=function(){function a(a,d){this.$$attrs=a;this.$$scope=d}a.$inject=[\"$attrs\",\"$scope\"];a.prototype={$onInit:function(){var a=this.parentCtrl?this.parentCtrl.$options:Sb,d=this.$$scope.$eval(this.$$attrs.ngModelOptions);this.$options=a.createChild(d)}};return{restrict:\"A\",priority:10,require:{parentCtrl:\"?^^ngModelOptions\"},bindToController:!0,controller:a}},af=Na({terminal:!0,\npriority:1E3}),th=M(\"ngOptions\"),uh=/^\\s*([\\s\\S]+?)(?:\\s+as\\s+([\\s\\S]+?))?(?:\\s+group\\s+by\\s+([\\s\\S]+?))?(?:\\s+disable\\s+when\\s+([\\s\\S]+?))?\\s+for\\s+(?:([$\\w][$\\w]*)|(?:\\(\\s*([$\\w][$\\w]*)\\s*,\\s*([$\\w][$\\w]*)\\s*\\)))\\s+in\\s+([\\s\\S]+?)(?:\\s+track\\s+by\\s+([\\s\\S]+?))?$/,kf=[\"$compile\",\"$document\",\"$parse\",function(a,b,d){function c(a,b,c){function e(a,b,c,d,f){this.selectValue=a;this.viewValue=b;this.label=c;this.group=d;this.disabled=f}function f(a){var b;if(!p&&xa(a))b=a;else{b=[];for(var c in a)a.hasOwnProperty(c)&&\n\"$\"!==c.charAt(0)&&b.push(c)}return b}var q=a.match(uh);if(!q)throw th(\"iexp\",a,ya(b));var n=q[5]||q[7],p=q[6];a=/ as /.test(q[0])&&q[1];var r=q[9];b=d(q[2]?q[1]:n);var u=a&&d(a)||b,v=r&&d(r),w=r?function(a,b){return v(c,b)}:function(a){return Ka(a)},y=function(a,b){return w(a,C(a,b))},x=d(q[2]||q[1]),E=d(q[3]||\"\"),G=d(q[4]||\"\"),J=d(q[8]),z={},C=p?function(a,b){z[p]=b;z[n]=a;return z}:function(a){z[n]=a;return z};return{trackBy:r,getTrackByValue:y,getWatchables:d(J,function(a){var b=[];a=a||[];for(var d=\nf(a),e=d.length,g=0;g<e;g++){var k=a===d?g:d[g],l=a[k],k=C(l,k),l=w(l,k);b.push(l);if(q[2]||q[1])l=x(c,k),b.push(l);q[4]&&(k=G(c,k),b.push(k))}return b}),getOptions:function(){for(var a=[],b={},d=J(c)||[],g=f(d),k=g.length,n=0;n<k;n++){var q=d===g?n:g[n],p=C(d[q],q),s=u(c,p),q=w(s,p),v=x(c,p),D=E(c,p),p=G(c,p),s=new e(q,s,v,D,p);a.push(s);b[q]=s}return{items:a,selectValueMap:b,getOptionFromViewValue:function(a){return b[y(a)]},getViewValueFromOption:function(a){return r?Ha(a.viewValue):a.viewValue}}}}}\nvar e=B.document.createElement(\"option\"),f=B.document.createElement(\"optgroup\");return{restrict:\"A\",terminal:!0,require:[\"select\",\"ngModel\"],link:{pre:function(a,b,c,d){d[0].registerOption=A},post:function(d,k,h,l){function m(a){var b=(a=w.getOptionFromViewValue(a))&&a.element;b&&!b.selected&&(b.selected=!0);return a}function q(a,b){a.element=b;b.disabled=a.disabled;a.label!==b.label&&(b.label=a.label,b.textContent=a.label);b.value=a.selectValue}var n=l[0],p=l[1],t=h.multiple;l=0;for(var u=k.children(),\nD=u.length;l<D;l++)if(\"\"===u[l].value){n.hasEmptyOption=!0;n.emptyOption=u.eq(l);break}k.empty();l=!!n.emptyOption;y(e.cloneNode(!1)).val(\"?\");var w,x=c(h.ngOptions,k,d),z=b[0].createDocumentFragment();n.generateUnknownOptionValue=function(a){return\"?\"};t?(n.writeValue=function(a){if(w){var b=a&&a.map(m)||[];w.items.forEach(function(a){a.element.selected&&-1===Array.prototype.indexOf.call(b,a)&&(a.element.selected=!1)})}},n.readValue=function(){var a=k.val()||[],b=[];r(a,function(a){(a=w.selectValueMap[a])&&\n!a.disabled&&b.push(w.getViewValueFromOption(a))});return b},x.trackBy&&d.$watchCollection(function(){if(I(p.$viewValue))return p.$viewValue.map(function(a){return x.getTrackByValue(a)})},function(){p.$render()})):(n.writeValue=function(a){if(w){var b=k[0].options[k[0].selectedIndex],c=w.getOptionFromViewValue(a);b&&b.removeAttribute(\"selected\");c?(k[0].value!==c.selectValue&&(n.removeUnknownOption(),k[0].value=c.selectValue,c.element.selected=!0),c.element.setAttribute(\"selected\",\"selected\")):n.selectUnknownOrEmptyOption(a)}},\nn.readValue=function(){var a=w.selectValueMap[k.val()];return a&&!a.disabled?(n.unselectEmptyOption(),n.removeUnknownOption(),w.getViewValueFromOption(a)):null},x.trackBy&&d.$watch(function(){return x.getTrackByValue(p.$viewValue)},function(){p.$render()}));l&&(a(n.emptyOption)(d),k.prepend(n.emptyOption),8===n.emptyOption[0].nodeType?(n.hasEmptyOption=!1,n.registerOption=function(a,b){\"\"===b.val()&&(n.hasEmptyOption=!0,n.emptyOption=b,n.emptyOption.removeClass(\"ng-scope\"),p.$render(),b.on(\"$destroy\",\nfunction(){var a=n.$isEmptyOptionSelected();n.hasEmptyOption=!1;n.emptyOption=void 0;a&&p.$render()}))}):n.emptyOption.removeClass(\"ng-scope\"));d.$watchCollection(x.getWatchables,function(){var a=w&&n.readValue();if(w)for(var b=w.items.length-1;0<=b;b--){var c=w.items[b];v(c.group)?Fb(c.element.parentNode):Fb(c.element)}w=x.getOptions();var d={};w.items.forEach(function(a){var b;if(v(a.group)){b=d[a.group];b||(b=f.cloneNode(!1),z.appendChild(b),b.label=null===a.group?\"null\":a.group,d[a.group]=b);\nvar c=e.cloneNode(!1);b.appendChild(c);q(a,c)}else b=e.cloneNode(!1),z.appendChild(b),q(a,b)});k[0].appendChild(z);p.$render();p.$isEmpty(a)||(b=n.readValue(),(x.trackBy||t?ua(a,b):a===b)||(p.$setViewValue(b),p.$render()))})}}}}],bf=[\"$locale\",\"$interpolate\",\"$log\",function(a,b,d){var c=/{}/g,e=/^when(Minus)?(.+)$/;return{link:function(f,g,k){function h(a){g.text(a||\"\")}var l=k.count,m=k.$attr.when&&g.attr(k.$attr.when),q=k.offset||0,n=f.$eval(m)||{},p={},t=b.startSymbol(),u=b.endSymbol(),v=t+l+\"-\"+\nq+u,w=ea.noop,y;r(k,function(a,b){var c=e.exec(b);c&&(c=(c[1]?\"-\":\"\")+O(c[2]),n[c]=g.attr(k.$attr[b]))});r(n,function(a,d){p[d]=b(a.replace(c,v))});f.$watch(l,function(b){var c=parseFloat(b),e=V(c);e||c in n||(c=a.pluralCat(c-q));c===y||e&&V(y)||(w(),e=p[c],x(e)?(null!=b&&d.debug(\"ngPluralize: no rule defined for '\"+c+\"' in \"+m),w=A,h()):w=f.$watch(e,h),y=c)})}}}],ne=M(\"ngRef\"),cf=[\"$parse\",function(a){return{priority:-1,restrict:\"A\",compile:function(b,d){var c=va(ta(b)),e=a(d.ngRef),f=e.assign||\nfunction(){throw ne(\"nonassign\",d.ngRef);};return function(a,b,h){var l;if(h.hasOwnProperty(\"ngRefRead\"))if(\"$element\"===h.ngRefRead)l=b;else{if(l=b.data(\"$\"+h.ngRefRead+\"Controller\"),!l)throw ne(\"noctrl\",h.ngRefRead,d.ngRef);}else l=b.data(\"$\"+c+\"Controller\");l=l||b;f(a,l);b.on(\"$destroy\",function(){e(a)===l&&f(a,null)})}}}}],df=[\"$parse\",\"$animate\",\"$compile\",function(a,b,d){var c=M(\"ngRepeat\"),e=function(a,b,c,d,e,m,q){a[c]=d;e&&(a[e]=m);a.$index=b;a.$first=0===b;a.$last=b===q-1;a.$middle=!(a.$first||\na.$last);a.$odd=!(a.$even=0===(b&1))};return{restrict:\"A\",multiElement:!0,transclude:\"element\",priority:1E3,terminal:!0,$$tlb:!0,compile:function(f,g){var k=g.ngRepeat,h=d.$$createComment(\"end ngRepeat\",k),l=k.match(/^\\s*([\\s\\S]+?)\\s+in\\s+([\\s\\S]+?)(?:\\s+as\\s+([\\s\\S]+?))?(?:\\s+track\\s+by\\s+([\\s\\S]+?))?\\s*$/);if(!l)throw c(\"iexp\",k);var m=l[1],q=l[2],n=l[3],p=l[4],l=m.match(/^(?:(\\s*[$\\w]+)|\\(\\s*([$\\w]+)\\s*,\\s*([$\\w]+)\\s*\\))$/);if(!l)throw c(\"iidexp\",m);var t=l[3]||l[1],u=l[2];if(n&&(!/^[$a-zA-Z_][$a-zA-Z0-9_]*$/.test(n)||\n/^(null|undefined|this|\\$index|\\$first|\\$middle|\\$last|\\$even|\\$odd|\\$parent|\\$root|\\$id)$/.test(n)))throw c(\"badident\",n);var v,w,x,y,z={$id:Ka};p?v=a(p):(x=function(a,b){return Ka(b)},y=function(a){return a});return function(a,d,f,g,l){v&&(w=function(b,c,d){u&&(z[u]=b);z[t]=c;z.$index=d;return v(a,z)});var m=S();a.$watchCollection(q,function(f){var g,q,p=d[0],s,v=S(),D,z,C,B,E,A,F;n&&(a[n]=f);if(xa(f))E=f,q=w||x;else for(F in q=w||y,E=[],f)sa.call(f,F)&&\"$\"!==F.charAt(0)&&E.push(F);D=E.length;F=\nArray(D);for(g=0;g<D;g++)if(z=f===E?g:E[g],C=f[z],B=q(z,C,g),m[B])A=m[B],delete m[B],v[B]=A,F[g]=A;else{if(v[B])throw r(F,function(a){a&&a.scope&&(m[a.id]=a)}),c(\"dupes\",k,B,C);F[g]={id:B,scope:void 0,clone:void 0};v[B]=!0}for(s in m){A=m[s];B=tb(A.clone);b.leave(B);if(B[0].parentNode)for(g=0,q=B.length;g<q;g++)B[g].$$NG_REMOVED=!0;A.scope.$destroy()}for(g=0;g<D;g++)if(z=f===E?g:E[g],C=f[z],A=F[g],A.scope){s=p;do s=s.nextSibling;while(s&&s.$$NG_REMOVED);A.clone[0]!==s&&b.move(tb(A.clone),null,p);\np=A.clone[A.clone.length-1];e(A.scope,g,t,C,u,z,D)}else l(function(a,c){A.scope=c;var d=h.cloneNode(!1);a[a.length++]=d;b.enter(a,null,p);p=d;A.clone=a;v[A.id]=A;e(A.scope,g,t,C,u,z,D)});m=v})}}}}],ef=[\"$animate\",function(a){return{restrict:\"A\",multiElement:!0,link:function(b,d,c){b.$watch(c.ngShow,function(b){a[b?\"removeClass\":\"addClass\"](d,\"ng-hide\",{tempClasses:\"ng-hide-animate\"})})}}}],Xe=[\"$animate\",function(a){return{restrict:\"A\",multiElement:!0,link:function(b,d,c){b.$watch(c.ngHide,function(b){a[b?\n\"addClass\":\"removeClass\"](d,\"ng-hide\",{tempClasses:\"ng-hide-animate\"})})}}}],ff=Na(function(a,b,d){a.$watchCollection(d.ngStyle,function(a,d){d&&a!==d&&r(d,function(a,c){b.css(c,\"\")});a&&b.css(a)})}),gf=[\"$animate\",\"$compile\",function(a,b){return{require:\"ngSwitch\",controller:[\"$scope\",function(){this.cases={}}],link:function(d,c,e,f){var g=[],k=[],h=[],l=[],m=function(a,b){return function(c){!1!==c&&a.splice(b,1)}};d.$watch(e.ngSwitch||e.on,function(c){for(var d,e;h.length;)a.cancel(h.pop());d=0;\nfor(e=l.length;d<e;++d){var p=tb(k[d].clone);l[d].$destroy();(h[d]=a.leave(p)).done(m(h,d))}k.length=0;l.length=0;(g=f.cases[\"!\"+c]||f.cases[\"?\"])&&r(g,function(c){c.transclude(function(d,e){l.push(e);var f=c.element;d[d.length++]=b.$$createComment(\"end ngSwitchWhen\");k.push({clone:d});a.enter(d,f.parent(),f)})})})}}}],hf=Na({transclude:\"element\",priority:1200,require:\"^ngSwitch\",multiElement:!0,link:function(a,b,d,c,e){a=d.ngSwitchWhen.split(d.ngSwitchWhenSeparator).sort().filter(function(a,b,c){return c[b-\n1]!==a});r(a,function(a){c.cases[\"!\"+a]=c.cases[\"!\"+a]||[];c.cases[\"!\"+a].push({transclude:e,element:b})})}}),jf=Na({transclude:\"element\",priority:1200,require:\"^ngSwitch\",multiElement:!0,link:function(a,b,d,c,e){c.cases[\"?\"]=c.cases[\"?\"]||[];c.cases[\"?\"].push({transclude:e,element:b})}}),vh=M(\"ngTransclude\"),lf=[\"$compile\",function(a){return{restrict:\"EAC\",compile:function(b){var d=a(b.contents());b.empty();return function(a,b,f,g,k){function h(){d(a,function(a){b.append(a)})}if(!k)throw vh(\"orphan\",\nya(b));f.ngTransclude===f.$attr.ngTransclude&&(f.ngTransclude=\"\");f=f.ngTransclude||f.ngTranscludeSlot;k(function(a,c){var d;if(d=a.length)a:{d=0;for(var f=a.length;d<f;d++){var g=a[d];if(g.nodeType!==Oa||g.nodeValue.trim()){d=!0;break a}}d=void 0}d?b.append(a):(h(),c.$destroy())},null,f);f&&!k.isSlotFilled(f)&&h()}}}}],Le=[\"$templateCache\",function(a){return{restrict:\"E\",terminal:!0,compile:function(b,d){\"text/ng-template\"===d.type&&a.put(d.id,b[0].text)}}}],wh={$setViewValue:A,$render:A},xh=[\"$element\",\n\"$scope\",function(a,b){function d(){g||(g=!0,b.$$postDigest(function(){g=!1;e.ngModelCtrl.$render()}))}function c(a){k||(k=!0,b.$$postDigest(function(){b.$$destroyed||(k=!1,e.ngModelCtrl.$setViewValue(e.readValue()),a&&e.ngModelCtrl.$render())}))}var e=this,f=new Hb;e.selectValueMap={};e.ngModelCtrl=wh;e.multiple=!1;e.unknownOption=y(B.document.createElement(\"option\"));e.hasEmptyOption=!1;e.emptyOption=void 0;e.renderUnknownOption=function(b){b=e.generateUnknownOptionValue(b);e.unknownOption.val(b);\na.prepend(e.unknownOption);Ea(e.unknownOption,!0);a.val(b)};e.updateUnknownOption=function(b){b=e.generateUnknownOptionValue(b);e.unknownOption.val(b);Ea(e.unknownOption,!0);a.val(b)};e.generateUnknownOptionValue=function(a){return\"? \"+Ka(a)+\" ?\"};e.removeUnknownOption=function(){e.unknownOption.parent()&&e.unknownOption.remove()};e.selectEmptyOption=function(){e.emptyOption&&(a.val(\"\"),Ea(e.emptyOption,!0))};e.unselectEmptyOption=function(){e.hasEmptyOption&&Ea(e.emptyOption,!1)};b.$on(\"$destroy\",\nfunction(){e.renderUnknownOption=A});e.readValue=function(){var b=a.val(),b=b in e.selectValueMap?e.selectValueMap[b]:b;return e.hasOption(b)?b:null};e.writeValue=function(b){var c=a[0].options[a[0].selectedIndex];c&&Ea(y(c),!1);e.hasOption(b)?(e.removeUnknownOption(),c=Ka(b),a.val(c in e.selectValueMap?c:b),Ea(y(a[0].options[a[0].selectedIndex]),!0)):e.selectUnknownOrEmptyOption(b)};e.addOption=function(a,b){if(8!==b[0].nodeType){Qa(a,'\"option value\"');\"\"===a&&(e.hasEmptyOption=!0,e.emptyOption=\nb);var c=f.get(a)||0;f.set(a,c+1);d()}};e.removeOption=function(a){var b=f.get(a);b&&(1===b?(f.delete(a),\"\"===a&&(e.hasEmptyOption=!1,e.emptyOption=void 0)):f.set(a,b-1))};e.hasOption=function(a){return!!f.get(a)};e.$hasEmptyOption=function(){return e.hasEmptyOption};e.$isUnknownOptionSelected=function(){return a[0].options[0]===e.unknownOption[0]};e.$isEmptyOptionSelected=function(){return e.hasEmptyOption&&a[0].options[a[0].selectedIndex]===e.emptyOption[0]};e.selectUnknownOrEmptyOption=function(a){null==\na&&e.emptyOption?(e.removeUnknownOption(),e.selectEmptyOption()):e.unknownOption.parent().length?e.updateUnknownOption(a):e.renderUnknownOption(a)};var g=!1,k=!1;e.registerOption=function(a,b,f,g,k){if(f.$attr.ngValue){var p,r;f.$observe(\"value\",function(a){var d,f=b.prop(\"selected\");v(r)&&(e.removeOption(p),delete e.selectValueMap[r],d=!0);r=Ka(a);p=a;e.selectValueMap[r]=a;e.addOption(a,b);b.attr(\"value\",r);d&&f&&c()})}else g?f.$observe(\"value\",function(a){e.readValue();var d,f=b.prop(\"selected\");\nv(p)&&(e.removeOption(p),d=!0);p=a;e.addOption(a,b);d&&f&&c()}):k?a.$watch(k,function(a,d){f.$set(\"value\",a);var g=b.prop(\"selected\");d!==a&&e.removeOption(d);e.addOption(a,b);d&&g&&c()}):e.addOption(f.value,b);f.$observe(\"disabled\",function(a){if(\"true\"===a||a&&b.prop(\"selected\"))e.multiple?c(!0):(e.ngModelCtrl.$setViewValue(null),e.ngModelCtrl.$render())});b.on(\"$destroy\",function(){var a=e.readValue(),b=f.value;e.removeOption(b);d();(e.multiple&&a&&-1!==a.indexOf(b)||a===b)&&c(!0)})}}],Me=function(){return{restrict:\"E\",\nrequire:[\"select\",\"?ngModel\"],controller:xh,priority:1,link:{pre:function(a,b,d,c){var e=c[0],f=c[1];if(f){if(e.ngModelCtrl=f,b.on(\"change\",function(){e.removeUnknownOption();a.$apply(function(){f.$setViewValue(e.readValue())})}),d.multiple){e.multiple=!0;e.readValue=function(){var a=[];r(b.find(\"option\"),function(b){b.selected&&!b.disabled&&(b=b.value,a.push(b in e.selectValueMap?e.selectValueMap[b]:b))});return a};e.writeValue=function(a){r(b.find(\"option\"),function(b){var c=!!a&&(-1!==Array.prototype.indexOf.call(a,\nb.value)||-1!==Array.prototype.indexOf.call(a,e.selectValueMap[b.value]));c!==b.selected&&Ea(y(b),c)})};var g,k=NaN;a.$watch(function(){k!==f.$viewValue||ua(g,f.$viewValue)||(g=oa(f.$viewValue),f.$render());k=f.$viewValue});f.$isEmpty=function(a){return!a||0===a.length}}}else e.registerOption=A},post:function(a,b,d,c){var e=c[1];if(e){var f=c[0];e.$render=function(){f.writeValue(e.$viewValue)}}}}}},Ne=[\"$interpolate\",function(a){return{restrict:\"E\",priority:100,compile:function(b,d){var c,e;v(d.ngValue)||\n(v(d.value)?c=a(d.value,!0):(e=a(b.text(),!0))||d.$set(\"value\",b.text()));return function(a,b,d){var h=b.parent();(h=h.data(\"$selectController\")||h.parent().data(\"$selectController\"))&&h.registerOption(a,b,d,c,e)}}}}],Zc=function(){return{restrict:\"A\",require:\"?ngModel\",link:function(a,b,d,c){c&&(d.required=!0,c.$validators.required=function(a,b){return!d.required||!c.$isEmpty(b)},d.$observe(\"required\",function(){c.$validate()}))}}},Yc=function(){return{restrict:\"A\",require:\"?ngModel\",link:function(a,\nb,d,c){if(c){var e,f=d.ngPattern||d.pattern;d.$observe(\"pattern\",function(a){C(a)&&0<a.length&&(a=new RegExp(\"^\"+a+\"$\"));if(a&&!a.test)throw M(\"ngPattern\")(\"noregexp\",f,a,ya(b));e=a||void 0;c.$validate()});c.$validators.pattern=function(a,b){return c.$isEmpty(b)||x(e)||e.test(b)}}}}},ad=function(){return{restrict:\"A\",require:\"?ngModel\",link:function(a,b,d,c){if(c){var e=-1;d.$observe(\"maxlength\",function(a){a=da(a);e=V(a)?-1:a;c.$validate()});c.$validators.maxlength=function(a,b){return 0>e||c.$isEmpty(b)||\nb.length<=e}}}}},$c=function(){return{restrict:\"A\",require:\"?ngModel\",link:function(a,b,d,c){if(c){var e=0;d.$observe(\"minlength\",function(a){e=da(a)||0;c.$validate()});c.$validators.minlength=function(a,b){return c.$isEmpty(b)||b.length>=e}}}}};B.angular.bootstrap?B.console&&console.log(\"WARNING: Tried to load AngularJS more than once.\"):(Ce(),Ge(ea),ea.module(\"ngLocale\",[],[\"$provide\",function(a){function b(a){a+=\"\";var b=a.indexOf(\".\");return-1==b?0:a.length-b-1}a.value(\"$locale\",{DATETIME_FORMATS:{AMPMS:[\"AM\",\n\"PM\"],DAY:\"Sunday Monday Tuesday Wednesday Thursday Friday Saturday\".split(\" \"),ERANAMES:[\"Before Christ\",\"Anno Domini\"],ERAS:[\"BC\",\"AD\"],FIRSTDAYOFWEEK:6,MONTH:\"January February March April May June July August September October November December\".split(\" \"),SHORTDAY:\"Sun Mon Tue Wed Thu Fri Sat\".split(\" \"),SHORTMONTH:\"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec\".split(\" \"),STANDALONEMONTH:\"January February March April May June July August September October November December\".split(\" \"),WEEKENDRANGE:[5,\n6],fullDate:\"EEEE, MMMM d, y\",longDate:\"MMMM d, y\",medium:\"MMM d, y h:mm:ss a\",mediumDate:\"MMM d, y\",mediumTime:\"h:mm:ss a\",\"short\":\"M/d/yy h:mm a\",shortDate:\"M/d/yy\",shortTime:\"h:mm a\"},NUMBER_FORMATS:{CURRENCY_SYM:\"$\",DECIMAL_SEP:\".\",GROUP_SEP:\",\",PATTERNS:[{gSize:3,lgSize:3,maxFrac:3,minFrac:0,minInt:1,negPre:\"-\",negSuf:\"\",posPre:\"\",posSuf:\"\"},{gSize:3,lgSize:3,maxFrac:2,minFrac:2,minInt:1,negPre:\"-\\u00a4\",negSuf:\"\",posPre:\"\\u00a4\",posSuf:\"\"}]},id:\"en-us\",localeID:\"en_US\",pluralCat:function(a,\nc){var e=a|0,f=c;void 0===f&&(f=Math.min(b(a),3));Math.pow(10,f);return 1==e&&0==f?\"one\":\"other\"}})}]),y(function(){xe(B.document,Tc)}))})(window);!window.angular.$$csp().noInlineStyle&&window.angular.element(document.head).prepend('<style type=\"text/css\">@charset \"UTF-8\";[ng\\\\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide:not(.ng-hide-animate){display:none !important;}ng\\\\:form{display:block;}.ng-animate-shim{visibility:hidden;}.ng-anchor{position:absolute;}</style>');","Magezon_Builder/vendor/angular-drag-and-drop-lists/angular-drag-and-drop-lists.js":"/**\n * angular-drag-and-drop-lists v2.1.0\n *\n * Copyright (c) 2014 Marcel Juenemann marcel@juenemann.cc\n * Copyright (c) 2014-2017 Google Inc.\n * https://github.com/marceljuenemann/angular-drag-and-drop-lists\n *\n * License: MIT\n */\n(function(dndLists) {\n\n  // In standard-compliant browsers we use a custom mime type and also encode the dnd-type in it.\n  // However, IE and Edge only support a limited number of mime types. The workarounds are described\n  // in https://github.com/marceljuenemann/angular-drag-and-drop-lists/wiki/Data-Transfer-Design\n  var MIME_TYPE = 'application/x-dnd';\n  var EDGE_MIME_TYPE = 'application/json';\n  var MSIE_MIME_TYPE = 'Text';\n\n  // All valid HTML5 drop effects, in the order in which we prefer to use them.\n  var ALL_EFFECTS = ['move', 'copy', 'link'];\n\n  /**\n   * Use the dnd-draggable attribute to make your element draggable\n   *\n   * Attributes:\n   * - dnd-draggable      Required attribute. The value has to be an object that represents the data\n   *                      of the element. In case of a drag and drop operation the object will be\n   *                      serialized and unserialized on the receiving end.\n   * - dnd-effect-allowed Use this attribute to limit the operations that can be performed. Valid\n   *                      options are \"move\", \"copy\" and \"link\", as well as \"all\", \"copyMove\",\n   *                      \"copyLink\" and \"linkMove\". The semantics of these operations are up to you\n   *                      and have to be implemented using the callbacks described below. If you\n   *                      allow multiple options, the user can choose between them by using the\n   *                      modifier keys (OS specific). The cursor will be changed accordingly,\n   *                      expect for IE and Edge, where this is not supported.\n   * - dnd-type           Use this attribute if you have different kinds of items in your\n   *                      application and you want to limit which items can be dropped into which\n   *                      lists. Combine with dnd-allowed-types on the dnd-list(s). This attribute\n   *                      must be a lower case string. Upper case characters can be used, but will\n   *                      be converted to lower case automatically.\n   * - dnd-disable-if     You can use this attribute to dynamically disable the draggability of the\n   *                      element. This is useful if you have certain list items that you don't want\n   *                      to be draggable, or if you want to disable drag & drop completely without\n   *                      having two different code branches (e.g. only allow for admins).\n   *\n   * Callbacks:\n   * - dnd-dragstart      Callback that is invoked when the element was dragged. The original\n   *                      dragstart event will be provided in the local event variable.\n   * - dnd-moved          Callback that is invoked when the element was moved. Usually you will\n   *                      remove your element from the original list in this callback, since the\n   *                      directive is not doing that for you automatically. The original dragend\n   *                      event will be provided in the local event variable.\n   * - dnd-copied         Same as dnd-moved, just that it is called when the element was copied\n   *                      instead of moved, so you probably want to implement a different logic.\n   * - dnd-linked         Same as dnd-moved, just that it is called when the element was linked\n   *                      instead of moved, so you probably want to implement a different logic.\n   * - dnd-canceled       Callback that is invoked if the element was dragged, but the operation was\n   *                      canceled and the element was not dropped. The original dragend event will\n   *                      be provided in the local event variable.\n   * - dnd-dragend        Callback that is invoked when the drag operation ended. Available local\n   *                      variables are event and dropEffect.\n   * - dnd-selected       Callback that is invoked when the element was clicked but not dragged.\n   *                      The original click event will be provided in the local event variable.\n   * - dnd-callback       Custom callback that is passed to dropzone callbacks and can be used to\n   *                      communicate between source and target scopes. The dropzone can pass user\n   *                      defined variables to this callback.\n   *\n   * CSS classes:\n   * - dndDragging        This class will be added to the element while the element is being\n   *                      dragged. It will affect both the element you see while dragging and the\n   *                      source element that stays at it's position. Do not try to hide the source\n   *                      element with this class, because that will abort the drag operation.\n   * - dndDraggingSource  This class will be added to the element after the drag operation was\n   *                      started, meaning it only affects the original element that is still at\n   *                      it's source position, and not the \"element\" that the user is dragging with\n   *                      his mouse pointer.\n   */\n  dndLists.directive('dndDraggable', ['$parse', '$timeout', function($parse, $timeout) {\n    return function(scope, element, attr) {\n\n\n      // Set the HTML5 draggable attribute on the element.\n      element.attr(\"draggable\", \"true\");\n\n      // If the dnd-disable-if attribute is set, we have to watch that.\n      if (attr.dndDisableIf) {\n        scope.$watch(attr.dndDisableIf, function(disabled) {\n          element.attr(\"draggable\", !disabled);\n        });\n      }\n\n      /**\n       * When the drag operation is started we have to prepare the dataTransfer object,\n       * which is the primary way we communicate with the target element\n       */\n      element.on('dragstart', function(event) {\n        event = event.originalEvent || event;\n\n        // Check whether the element is draggable, since dragstart might be triggered on a child.\n        if (element.attr('draggable') == 'false') return true;\n\n        // Initialize global state.\n        dndState.isDragging = true;\n        dndState.itemType = attr.dndType && scope.$eval(attr.dndType).toLowerCase();\n\n        // Set the allowed drop effects. See below for special IE handling.\n        dndState.dropEffect = \"none\";\n        dndState.effectAllowed = attr.dndEffectAllowed || ALL_EFFECTS[0];\n        event.dataTransfer.effectAllowed = dndState.effectAllowed;\n\n        // Internet Explorer and Microsoft Edge don't support custom mime types, see design doc:\n        // https://github.com/marceljuenemann/angular-drag-and-drop-lists/wiki/Data-Transfer-Design\n        var item = scope.$eval(attr.dndDraggable);\n        var mimeType = MIME_TYPE + (dndState.itemType ? ('-' + dndState.itemType) : '');\n        try {\n          event.dataTransfer.setData(mimeType, angular.toJson(item));\n        } catch (e) {\n          // Setting a custom MIME type did not work, we are probably in IE or Edge.\n          var data = angular.toJson({item: item, type: dndState.itemType});\n          try {\n            event.dataTransfer.setData(EDGE_MIME_TYPE, data);\n          } catch (e) {\n            // We are in Internet Explorer and can only use the Text MIME type. Also note that IE\n            // does not allow changing the cursor in the dragover event, therefore we have to choose\n            // the one we want to display now by setting effectAllowed.\n            var effectsAllowed = filterEffects(ALL_EFFECTS, dndState.effectAllowed);\n            event.dataTransfer.effectAllowed = effectsAllowed[0];\n            event.dataTransfer.setData(MSIE_MIME_TYPE, data);\n          }\n        }\n\n        // Add CSS classes. See documentation above.\n        element.addClass(\"dndDragging\");\n        $timeout(function() { element.addClass(\"dndDraggingSource\"); }, 0);\n\n        // Try setting a proper drag image if triggered on a dnd-handle (won't work in IE).\n        if (event._dndHandle && event.dataTransfer.setDragImage) {\n          var dragImageElement = element.children('.mgz-element-inner');\n          dragImageElement.css('overflow', 'hidden');\n          dragImageElement.css('outline', 'none');\n          dragImageElement.children('.mgz-element-inner').css('padding', '10px');\n          dragImageElement.children('.mgz-element-controls').hide();\n          event.dataTransfer.setDragImage(dragImageElement[0], 0, 0);\n        }\n\n        // Invoke dragstart callback and prepare extra callback for dropzone.\n        $parse(attr.dndDragstart)(scope, {event: event});\n        if (attr.dndCallback) {\n          var callback = $parse(attr.dndCallback);\n          dndState.callback = function(params) { return callback(scope, params || {}); };\n        }\n\n        event.stopPropagation();\n      });\n\n      /**\n       * The dragend event is triggered when the element was dropped or when the drag\n       * operation was aborted (e.g. hit escape button). Depending on the executed action\n       * we will invoke the callbacks specified with the dnd-moved or dnd-copied attribute.\n       */\n      element.on('dragend', function(event) {\n        event = event.originalEvent || event;\n\n        // Invoke callbacks. Usually we would use event.dataTransfer.dropEffect to determine\n        // the used effect, but Chrome has not implemented that field correctly. On Windows\n        // it always sets it to 'none', while Chrome on Linux sometimes sets it to something\n        // else when it's supposed to send 'none' (drag operation aborted).\n        scope.$apply(function() {\n          var dropEffect = dndState.dropEffect;\n          var cb = {copy: 'dndCopied', link: 'dndLinked', move: 'dndMoved', none: 'dndCanceled'};\n          $parse(attr[cb[dropEffect]])(scope, {event: event});\n          $parse(attr.dndDragend)(scope, {event: event, dropEffect: dropEffect});\n        });\n\n        var dragImageElement = element.children('.mgz-element-inner');\n        dragImageElement.css('overflow', '');\n        dragImageElement.css('outline', '');\n        dragImageElement.children('.mgz-element-inner').css('padding', '');\n        dragImageElement.children('.mgz-element-controls').show();\n\n        // Clean up\n        dndState.isDragging = false;\n        dndState.callback = undefined;\n        element.removeClass(\"dndDragging\");\n        element.removeClass(\"dndDraggingSource\");\n        event.stopPropagation();\n\n        // In IE9 it is possible that the timeout from dragstart triggers after the dragend handler.\n        $timeout(function() { element.removeClass(\"dndDraggingSource\"); }, 0);\n      });\n\n      /**\n       * When the element is clicked we invoke the callback function\n       * specified with the dnd-selected attribute.\n       */\n      element.on('click', function(event) {\n        if (!attr.dndSelected) return;\n\n        event = event.originalEvent || event;\n        scope.$apply(function() {\n          $parse(attr.dndSelected)(scope, {event: event});\n        });\n\n        // Prevent triggering dndSelected in parent elements.\n        event.stopPropagation();\n      });\n\n      /**\n       * Workaround to make element draggable in IE9\n       */\n      element.on('selectstart', function() {\n        if (this.dragDrop) this.dragDrop();\n      });\n    };\n  }]);\n\n  dndLists.directive('dndDraggableParent', ['$parse', '$timeout', function($parse, $timeout) {\n    return function(scope, element, attr) {\n\n\n      // Set the HTML5 draggable attribute on the element.\n      element.attr(\"draggable\", \"true\");\n\n      // If the dnd-disable-if attribute is set, we have to watch that.\n      if (attr.dndDisableIf) {\n        scope.$watch(attr.dndDisableIf, function(disabled) {\n          element.attr(\"draggable\", !disabled);\n        });\n      }\n\n      /**\n       * When the drag operation is started we have to prepare the dataTransfer object,\n       * which is the primary way we communicate with the target element\n       */\n      element.on('dragstart', function(event) {\n        event = event.originalEvent || event;\n\n        // Check whether the element is draggable, since dragstart might be triggered on a child.\n        if (element.attr('draggable') == 'false') return true;\n\n        // Initialize global state.\n        dndState.isDragging = true;\n        dndState.itemType = attr.dndType && scope.$eval(attr.dndType).toLowerCase();\n\n        // Set the allowed drop effects. See below for special IE handling.\n        dndState.dropEffect = \"none\";\n        dndState.effectAllowed = attr.dndEffectAllowed || ALL_EFFECTS[0];\n        event.dataTransfer.effectAllowed = dndState.effectAllowed;\n\n        // Internet Explorer and Microsoft Edge don't support custom mime types, see design doc:\n        // https://github.com/marceljuenemann/angular-drag-and-drop-lists/wiki/Data-Transfer-Design\n        var item     = scope.$eval(attr.dndDraggableParent);\n        var mimeType = MIME_TYPE + (dndState.itemType ? ('-' + dndState.itemType) : '');\n        var parent = angular.element(jQuery('.' + item.id));\n        jQuery('.mgz-element-control-dropdown').addClass('mgz-hidden');\n        jQuery(event.target).parent().parent().css('background', 'transparent');\n        jQuery(event.target).css('border-radius', '5px');\n\n        try {\n          event.dataTransfer.setData(mimeType, angular.toJson(item));\n        } catch (e) {\n          // Setting a custom MIME type did not work, we are probably in IE or Edge.\n          var data = angular.toJson({item: item, type: dndState.itemType});\n          try {\n            event.dataTransfer.setData(EDGE_MIME_TYPE, data);\n          } catch (e) {\n            // We are in Internet Explorer and can only use the Text MIME type. Also note that IE\n            // does not allow changing the cursor in the dragover event, therefore we have to choose\n            // the one we want to display now by setting effectAllowed.\n            var effectsAllowed = filterEffects(ALL_EFFECTS, dndState.effectAllowed);\n            event.dataTransfer.effectAllowed = effectsAllowed[0];\n            event.dataTransfer.setData(MSIE_MIME_TYPE, data);\n          }\n        }\n\n        // Add CSS classes. See documentation above.\n        parent.addClass(\"dndDragging\");\n        $timeout(function() { parent.addClass(\"dndDraggingSource\"); }, 0);\n\n        // Try setting a proper drag image if triggered on a dnd-handle (won't work in IE).\n        if (event._dndHandle && event.dataTransfer.setDragImage) {\n          if (item.type !== 'row') {\n            event.dataTransfer.setDragImage(parent[0], 0, 0);\n          }\n        }\n\n        // Invoke dragstart callback and prepare extra callback for dropzone.\n        $parse(attr.dndDragstart)(scope, {event: event});\n        if (attr.dndCallback) {\n          var callback = $parse(attr.dndCallback);\n          dndState.callback = function(params) { return callback(scope, params || {}); };\n        }\n\n        event.stopPropagation();\n      });\n\n      /**\n       * The dragend event is triggered when the element was dropped or when the drag\n       * operation was aborted (e.g. hit escape button). Depending on the executed action\n       * we will invoke the callbacks specified with the dnd-moved or dnd-copied attribute.\n       */\n      element.on('dragend', function(event) {\n        event = event.originalEvent || event;\n\n        // Invoke callbacks. Usually we would use event.dataTransfer.dropEffect to determine\n        // the used effect, but Chrome has not implemented that field correctly. On Windows\n        // it always sets it to 'none', while Chrome on Linux sometimes sets it to something\n        // else when it's supposed to send 'none' (drag operation aborted).\n        scope.$apply(function() {\n          var dropEffect = dndState.dropEffect;\n          var cb = {copy: 'dndCopied', link: 'dndLinked', move: 'dndMoved', none: 'dndCanceled'};\n          $parse(attr[cb[dropEffect]])(scope, {event: event});\n          $parse(attr.dndDragend)(scope, {event: event, dropEffect: dropEffect});\n        });\n\n        var item   = scope.$eval(attr.dndDraggableParent);\n        var parent = angular.element(jQuery('.' + item.id));\n        jQuery('.mgz-element-control-dropdown').removeClass('mgz-hidden');\n        jQuery(event.target).parent().parent().css('background', '');\n        jQuery(event.target).css('border-radius', '');\n\n        // Clean up\n        dndState.isDragging = false;\n        dndState.callback = undefined;\n        parent.removeClass(\"dndDragging\");\n        parent.removeClass(\"dndDraggingSource\");\n        event.stopPropagation();\n\n        // In IE9 it is possible that the timeout from dragstart triggers after the dragend handler.\n        $timeout(function() { parent.removeClass(\"dndDraggingSource\"); }, 0);\n      });\n\n      /**\n       * When the element is clicked we invoke the callback function\n       * specified with the dnd-selected attribute.\n       */\n      element.on('click', function(event) {\n        if (!attr.dndSelected) return;\n\n        event = event.originalEvent || event;\n        scope.$apply(function() {\n          $parse(attr.dndSelected)(scope, {event: event});\n        });\n\n        // Prevent triggering dndSelected in parent elements.\n        event.stopPropagation();\n      });\n\n      /**\n       * Workaround to make element draggable in IE9\n       */\n      element.on('selectstart', function() {\n        if (this.dragDrop) this.dragDrop();\n      });\n    };\n  }]);\n\n  /**\n   * Use the dnd-list attribute to make your list element a dropzone. Usually you will add a single\n   * li element as child with the ng-repeat directive. If you don't do that, we will not be able to\n   * position the dropped element correctly. If you want your list to be sortable, also add the\n   * dnd-draggable directive to your li element(s).\n   *\n   * Attributes:\n   * - dnd-list             Required attribute. The value has to be the array in which the data of\n   *                        the dropped element should be inserted. The value can be blank if used\n   *                        with a custom dnd-drop handler that always returns true.\n   * - dnd-allowed-types    Optional array of allowed item types. When used, only items that had a\n   *                        matching dnd-type attribute will be dropable. Upper case characters will\n   *                        automatically be converted to lower case.\n   * - dnd-effect-allowed   Optional string expression that limits the drop effects that can be\n   *                        performed in the list. See dnd-effect-allowed on dnd-draggable for more\n   *                        details on allowed options. The default value is all.\n   * - dnd-disable-if       Optional boolean expresssion. When it evaluates to true, no dropping\n   *                        into the list is possible. Note that this also disables rearranging\n   *                        items inside the list.\n   * - dnd-horizontal-list  Optional boolean expresssion. When it evaluates to true, the positioning\n   *                        algorithm will use the left and right halfs of the list items instead of\n   *                        the upper and lower halfs.\n   * - dnd-external-sources Optional boolean expression. When it evaluates to true, the list accepts\n   *                        drops from sources outside of the current browser tab. This allows to\n   *                        drag and drop accross different browser tabs. The only major browser\n   *                        that does not support this is currently Microsoft Edge.\n   *\n   * Callbacks:\n   * - dnd-dragover         Optional expression that is invoked when an element is dragged over the\n   *                        list. If the expression is set, but does not return true, the element is\n   *                        not allowed to be dropped. The following variables will be available:\n   *                        - event: The original dragover event sent by the browser.\n   *                        - index: The position in the list at which the element would be dropped.\n   *                        - type: The dnd-type set on the dnd-draggable, or undefined if non was\n   *                          set. Will be null for drops from external sources in IE and Edge,\n   *                          since we don't know the type in those cases.\n   *                        - dropEffect: One of move, copy or link, see dnd-effect-allowed.\n   *                        - external: Whether the element was dragged from an external source.\n   *                        - callback: If dnd-callback was set on the source element, this is a\n   *                          function reference to the callback. The callback can be invoked with\n   *                          custom variables like this: callback({var1: value1, var2: value2}).\n   *                          The callback will be executed on the scope of the source element. If\n   *                          dnd-external-sources was set and external is true, this callback will\n   *                          not be available.\n   * - dnd-drop             Optional expression that is invoked when an element is dropped on the\n   *                        list. The same variables as for dnd-dragover will be available, with the\n   *                        exception that type is always known and therefore never null. There\n   *                        will also be an item variable, which is the transferred object. The\n   *                        return value determines the further handling of the drop:\n   *                        - falsy: The drop will be canceled and the element won't be inserted.\n   *                        - true: Signalises that the drop is allowed, but the dnd-drop\n   *                          callback already took care of inserting the element.\n   *                        - otherwise: All other return values will be treated as the object to\n   *                          insert into the array. In most cases you want to simply return the\n   *                          item parameter, but there are no restrictions on what you can return.\n   * - dnd-inserted         Optional expression that is invoked after a drop if the element was\n   *                        actually inserted into the list. The same local variables as for\n   *                        dnd-drop will be available. Note that for reorderings inside the same\n   *                        list the old element will still be in the list due to the fact that\n   *                        dnd-moved was not called yet.\n   *\n   * CSS classes:\n   * - dndPlaceholder       When an element is dragged over the list, a new placeholder child\n   *                        element will be added. This element is of type li and has the class\n   *                        dndPlaceholder set. Alternatively, you can define your own placeholder\n   *                        by creating a child element with dndPlaceholder class.\n   * - dndDragover          Will be added to the list while an element is dragged over the list.\n   */\n  dndLists.directive('dndList', ['$parse', '$compile', function($parse, $compile) {\n    return function(scope, element, attr) {\n      // While an element is dragged over the list, this placeholder element is inserted\n      // at the location where the element would be inserted after dropping.\n      var placeholder = getPlaceholderElement();\n      placeholder.remove();\n\n      var placeholderNode = placeholder[0];\n      var listNode = element[0];\n      var listSettings = {};\n\n      if (attr.dndDisableBuilder && scope.$eval(attr.dndDisableBuilder)) return;\n      \n\n      /**\n       * The dragenter event is fired when a dragged element or text selection enters a valid drop\n       * target. According to the spec, we either need to have a dropzone attribute or listen on\n       * dragenter events and call preventDefault(). It should be noted though that no browser seems\n       * to enforce this behaviour.\n       */\n      element.on('dragenter', function (event) {\n        event = event.originalEvent || event;\n\n        // Calculate list properties, so that we don't have to repeat this on every dragover event.\n        var types = attr.dndAllowedTypes && scope.$eval(attr.dndAllowedTypes);\n        listSettings = {\n          allowedTypes: angular.isArray(types) && types.join('|').toLowerCase().split('|'),\n          disabled: attr.dndDisableIf && scope.$eval(attr.dndDisableIf),\n          externalSources: attr.dndExternalSources && scope.$eval(attr.dndExternalSources),\n          horizontal: attr.dndHorizontalList && scope.$eval(attr.dndHorizontalList)\n        };\n\n        var mimeType = getMimeType(event.dataTransfer.types);\n        if (!mimeType || !isDropAllowed(getItemType(mimeType))) return true;\n        event.preventDefault();\n      });\n\n      /**\n       * The dragover event is triggered \"every few hundred milliseconds\" while an element\n       * is being dragged over our list, or over an child element.\n       */\n      element.on('dragover', function(event) {\n        if (angular.element(event.target).hasClass('mgz-builder-dnd-disable')) {\n            return true;\n        }\n        event = event.originalEvent || event;\n\n        // Check whether the drop is allowed and determine mime type.\n        var mimeType = getMimeType(event.dataTransfer.types);\n        var itemType = getItemType(mimeType);\n        if (!mimeType || !isDropAllowed(itemType)) return true;\n\n        // Make sure the placeholder is shown, which is especially important if the list is empty.\n        if (placeholderNode.parentNode != listNode) {\n          element.append(placeholder);\n        }\n\n        if (event.target != listNode) {\n          // Try to find the node direct directly below the list node.\n          var listItemNode = event.target;\n          while (listItemNode.parentNode != listNode && listItemNode.parentNode) {\n            listItemNode = listItemNode.parentNode;\n          }\n\n          if (listItemNode.parentNode == listNode && listItemNode != placeholderNode) {\n            // If the mouse pointer is in the upper half of the list item element,\n            // we position the placeholder before the list item, otherwise after it.\n            var rect = listItemNode.getBoundingClientRect();\n            if (listSettings.horizontal) {\n              var isFirstHalf = event.clientX < rect.left + rect.width / 2;\n            } else {\n              var isFirstHalf = event.clientY < rect.top + rect.height / 2;\n            }\n\n            var _elem = jQuery(listItemNode);\n            if (!_elem.hasClass('mgz-placeholder')) {\n              if(isFirstHalf) {\n                if (!_elem.prev('.mgz-placeholder').length) {\n                  jQuery('.mgz-placeholder').remove();\n                  _elem.before(placeholder);\n                }\n              } else {\n                if (!_elem.next('.mgz-placeholder').length) {\n                  jQuery('.mgz-placeholder').remove();\n                  _elem.after(placeholder);\n                }\n              }\n            }\n          }\n        }\n\n        // In IE we set a fake effectAllowed in dragstart to get the correct cursor, we therefore\n        // ignore the effectAllowed passed in dataTransfer. We must also not access dataTransfer for\n        // drops from external sources, as that throws an exception.\n        var ignoreDataTransfer = mimeType == MSIE_MIME_TYPE;\n        var dropEffect = getDropEffect(event, ignoreDataTransfer);\n        if (dropEffect == 'none') return stopDragover();\n\n        // At this point we invoke the callback, which still can disallow the drop.\n        // We can't do this earlier because we want to pass the index of the placeholder.\n        if (attr.dndDragover && !invokeCallback(attr.dndDragover, event, dropEffect, itemType)) {\n          return stopDragover();\n        }\n\n        // Set dropEffect to modify the cursor shown by the browser, unless we're in IE, where this\n        // is not supported. This must be done after preventDefault in Firefox.\n        event.preventDefault();\n        if (!ignoreDataTransfer) {\n          event.dataTransfer.dropEffect = dropEffect;\n        }\n\n        element.addClass(\"dndDragover\");\n        element.addClass(\"mgz-dndDragover\");\n        element.parent().addClass(\"parent-dndDragover\");\n        event.stopPropagation();\n        return false;\n      });\n\n      /**\n       * When the element is dropped, we use the position of the placeholder element as the\n       * position where we insert the transferred data. This assumes that the list has exactly\n       * one child element per array element.\n       */\n      element.on('drop', function(event) {\n        event = event.originalEvent || event;\n\n        // Check whether the drop is allowed and determine mime type.\n        var mimeType = getMimeType(event.dataTransfer.types);\n        var itemType = getItemType(mimeType);\n        if (!mimeType || !isDropAllowed(itemType)) return true;\n\n        // The default behavior in Firefox is to interpret the dropped element as URL and\n        // forward to it. We want to prevent that even if our drop is aborted.\n        event.preventDefault();\n\n        // Unserialize the data that was serialized in dragstart.\n        try {\n          var data = JSON.parse(event.dataTransfer.getData(mimeType));\n        } catch(e) {\n          return stopDragover();\n        }\n\n        // Drops with invalid types from external sources might not have been filtered out yet.\n        if (mimeType == MSIE_MIME_TYPE || mimeType == EDGE_MIME_TYPE) {\n          itemType = data.type || undefined;\n          data = data.item;\n          if (!isDropAllowed(itemType)) return stopDragover();\n        }\n\n        // Special handling for internal IE drops, see dragover handler.\n        var ignoreDataTransfer = mimeType == MSIE_MIME_TYPE;\n        var dropEffect = getDropEffect(event, ignoreDataTransfer);\n        if (dropEffect == 'none') return stopDragover();\n\n        // Invoke the callback, which can transform the transferredObject and even abort the drop.\n        var index = getPlaceholderIndex();\n        if (attr.dndDrop) {\n          data = invokeCallback(attr.dndDrop, event, dropEffect, itemType, index, data);\n          if (!data) return stopDragover();\n        }\n\n        // The drop is definitely going to happen now, store the dropEffect.\n        dndState.dropEffect = dropEffect;\n        if (!ignoreDataTransfer) {\n          event.dataTransfer.dropEffect = dropEffect;\n        }\n\n        // Insert the object into the array, unless dnd-drop took care of that (returned true).\n        if (data !== true) {\n          scope.$apply(function() {\n            scope.$eval(attr.dndList).splice(index, 0, data);\n          });\n        }\n        invokeCallback(attr.dndInserted, event, dropEffect, itemType, index, data);\n\n        // Clean up\n        stopDragover();\n        event.stopPropagation();\n        return false;\n      });\n\n      /**\n       * We have to remove the placeholder when the element is no longer dragged over our list. The\n       * problem is that the dragleave event is not only fired when the element leaves our list,\n       * but also when it leaves a child element. Therefore, we determine whether the mouse cursor\n       * is still pointing to an element inside the list or not.\n       */\n      element.on('dragleave', function(event) {\n        event = event.originalEvent || event;\n\n        var newTarget = document.elementFromPoint(event.clientX, event.clientY);\n        if (listNode.contains(newTarget) && !event._dndPhShown) {\n          // Signalize to potential parent lists that a placeholder is already shown.\n          event._dndPhShown = true;\n        } else {\n          stopDragover();\n        }\n      });\n\n      /**\n       * Given the types array from the DataTransfer object, returns the first valid mime type.\n       * A type is valid if it starts with MIME_TYPE, or it equals MSIE_MIME_TYPE or EDGE_MIME_TYPE.\n       */\n      function getMimeType(types) {\n        if (!types) return MSIE_MIME_TYPE; // IE 9 workaround.\n        for (var i = 0; i < types.length; i++) {\n          if (types[i] == MSIE_MIME_TYPE || types[i] == EDGE_MIME_TYPE ||\n              types[i].substr(0, MIME_TYPE.length) == MIME_TYPE) {\n            return types[i];\n          }\n        }\n        return null;\n      }\n\n      /**\n       * Determines the type of the item from the dndState, or from the mime type for items from\n       * external sources. Returns undefined if no item type was set and null if the item type could\n       * not be determined.\n       */\n      function getItemType(mimeType) {\n        if (dndState.isDragging) return dndState.itemType || undefined;\n        if (mimeType == MSIE_MIME_TYPE || mimeType == EDGE_MIME_TYPE) return null;\n        return (mimeType && mimeType.substr(MIME_TYPE.length + 1)) || undefined;\n      }\n\n      /**\n       * Checks various conditions that must be fulfilled for a drop to be allowed, including the\n       * dnd-allowed-types attribute. If the item Type is unknown (null), the drop will be allowed.\n       */\n      function isDropAllowed(itemType) {\n        if (listSettings.disabled) return false;\n        if (!listSettings.externalSources && !dndState.isDragging) return false;\n        if (!listSettings.allowedTypes || itemType === null) return true;\n        return itemType && listSettings.allowedTypes.indexOf(itemType) != -1;\n      }\n\n      /**\n       * Determines which drop effect to use for the given event. In Internet Explorer we have to\n       * ignore the effectAllowed field on dataTransfer, since we set a fake value in dragstart.\n       * In those cases we rely on dndState to filter effects. Read the design doc for more details:\n       * https://github.com/marceljuenemann/angular-drag-and-drop-lists/wiki/Data-Transfer-Design\n       */\n      function getDropEffect(event, ignoreDataTransfer) {\n        var effects = ALL_EFFECTS;\n        if (!ignoreDataTransfer) {\n          effects = filterEffects(effects, event.dataTransfer.effectAllowed);\n        }\n        if (dndState.isDragging) {\n          effects = filterEffects(effects, dndState.effectAllowed);\n        }\n        if (attr.dndEffectAllowed) {\n          effects = filterEffects(effects, attr.dndEffectAllowed);\n        }\n        // MacOS automatically filters dataTransfer.effectAllowed depending on the modifier keys,\n        // therefore the following modifier keys will only affect other operating systems.\n        if (!effects.length) {\n          return 'none';\n        } else if (event.ctrlKey && effects.indexOf('copy') != -1) {\n          return 'copy';\n        } else if (event.altKey && effects.indexOf('link') != -1) {\n          return 'link';\n        } else {\n          return effects[0];\n        }\n      }\n\n      /**\n       * Small helper function that cleans up if we aborted a drop.\n       */\n      function stopDragover() {\n        placeholder.remove();\n        element.removeClass(\"dndDragover\");\n        element.removeClass(\"mgz-dndDragover\");\n        element.parent().removeClass(\"parent-dndDragover\");\n        return true;\n      }\n\n      /**\n       * Invokes a callback with some interesting parameters and returns the callbacks return value.\n       */\n      function invokeCallback(expression, event, dropEffect, itemType, index, item) {\n        return $parse(expression)(scope, {\n          callback: dndState.callback,\n          dropEffect: dropEffect,\n          event: event,\n          external: !dndState.isDragging,\n          index: index !== undefined ? index : getPlaceholderIndex(),\n          item: item || undefined,\n          type: itemType\n        });\n      }\n\n      /**\n       * We use the position of the placeholder node to determine at which position of the array the\n       * object needs to be inserted\n       */\n      function getPlaceholderIndex() {\n        return Array.prototype.indexOf.call(listNode.children, placeholderNode);\n      }\n\n      /**\n       * Tries to find a child element that has the dndPlaceholder class set. If none was found, a\n       * new li element is created.\n       */\n      function getPlaceholderElement() {\n        var placeholder;\n        angular.forEach(element.children(), function(childNode) {\n          var child = angular.element(childNode);\n          if (child.hasClass('dndPlaceholder')) {\n            placeholder = child;\n          }\n        });\n        if (!placeholder && scope.element && scope.element.builder && scope.element.builder.is_collection) {\n          var parallaxHtml = '<div class=\"dndPlaceholder mgz-placeholder\" ng-class=\"getPlaceHolderClassess()\"></div>';\n          var placeholderHtml = angular.element($compile(parallaxHtml)(scope));\n          element.append(placeholderHtml);\n          placeholder = element.children('.mgz-placeholder');\n        }\n        return placeholder || angular.element(\"<li class='dndPlaceholder mgz-placeholder'></li>\");\n      }\n    };\n  }]);\n\n  /**\n   * Use the dnd-nodrag attribute inside of dnd-draggable elements to prevent them from starting\n   * drag operations. This is especially useful if you want to use input elements inside of\n   * dnd-draggable elements or create specific handle elements. Note: This directive does not work\n   * in Internet Explorer 9.\n   */\n  dndLists.directive('dndNodrag', function() {\n    return function(scope, element, attr) {\n      // Set as draggable so that we can cancel the events explicitly\n      element.attr(\"draggable\", \"true\");\n\n      /**\n       * Since the element is draggable, the browser's default operation is to drag it on dragstart.\n       * We will prevent that and also stop the event from bubbling up.\n       */\n      element.on('dragstart', function(event) {\n        event = event.originalEvent || event;\n\n        if (!event._dndHandle) {\n          // If a child element already reacted to dragstart and set a dataTransfer object, we will\n          // allow that. For example, this is the case for user selections inside of input elements.\n          if (!(event.dataTransfer.types && event.dataTransfer.types.length)) {\n            event.preventDefault();\n          }\n          event.stopPropagation();\n        }\n      });\n\n      /**\n       * Stop propagation of dragend events, otherwise dnd-moved might be triggered and the element\n       * would be removed.\n       */\n      element.on('dragend', function(event) {\n        event = event.originalEvent || event;\n        if (!event._dndHandle) {\n          event.stopPropagation();\n        }\n      });\n    };\n  });\n\n  /**\n   * Use the dnd-handle directive within a dnd-nodrag element in order to allow dragging with that\n   * element after all. Therefore, by combining dnd-nodrag and dnd-handle you can allow\n   * dnd-draggable elements to only be dragged via specific \"handle\" elements. Note that Internet\n   * Explorer will show the handle element as drag image instead of the dnd-draggable element. You\n   * can work around this by styling the handle element differently when it is being dragged. Use\n   * the CSS selector .dndDragging:not(.dndDraggingSource) [dnd-handle] for that.\n   */\n  dndLists.directive('dndHandle', function() {\n    return function(scope, element, attr) {\n      element.attr(\"draggable\", \"true\");\n\n      element.on('dragstart dragend', function(event) {\n        event = event.originalEvent || event;\n        event._dndHandle = true;\n      });\n    };\n  });\n\n  /**\n   * Filters an array of drop effects using a HTML5 effectAllowed string.\n   */\n  function filterEffects(effects, effectAllowed) {\n    if (effectAllowed == 'all') return effects;\n    return effects.filter(function(effect) {\n      return effectAllowed.toLowerCase().indexOf(effect) != -1;\n    });\n  }\n\n  /**\n   * For some features we need to maintain global state. This is done here, with these fields:\n   * - callback: A callback function set at dragstart that is passed to internal dropzone handlers.\n   * - dropEffect: Set in dragstart to \"none\" and to the actual value in the drop handler. We don't\n   *   rely on the dropEffect passed by the browser, since there are various bugs in Chrome and\n   *   Safari, and Internet Explorer defaults to copy if effectAllowed is copyMove.\n   * - effectAllowed: Set in dragstart based on dnd-effect-allowed. This is needed for IE because\n   *   setting effectAllowed on dataTransfer might result in an undesired cursor.\n   * - isDragging: True between dragstart and dragend. Falsy for drops from external sources.\n   * - itemType: The item type of the dragged element set via dnd-type. This is needed because IE\n   *   and Edge don't support custom mime types that we can use to transfer this information.\n   */\n  var dndState = {};\n\n})(angular.module('dndLists', []));\n","Magezon_Builder/vendor/angular-ui-select/dist/select.min.js":"/*!\n * ui-select\n * http://github.com/angular-ui/ui-select\n * Version: 0.19.7 - 2017-04-15T14:28:36.649Z\n * License: MIT\n */\n\n\n(function () { \n\"use strict\";\nvar KEY = {\n    TAB: 9,\n    ENTER: 13,\n    ESC: 27,\n    SPACE: 32,\n    LEFT: 37,\n    UP: 38,\n    RIGHT: 39,\n    DOWN: 40,\n    SHIFT: 16,\n    CTRL: 17,\n    ALT: 18,\n    PAGE_UP: 33,\n    PAGE_DOWN: 34,\n    HOME: 36,\n    END: 35,\n    BACKSPACE: 8,\n    DELETE: 46,\n    COMMAND: 91,\n\n    MAP: { 91 : \"COMMAND\", 8 : \"BACKSPACE\" , 9 : \"TAB\" , 13 : \"ENTER\" , 16 : \"SHIFT\" , 17 : \"CTRL\" , 18 : \"ALT\" , 19 : \"PAUSEBREAK\" , 20 : \"CAPSLOCK\" , 27 : \"ESC\" , 32 : \"SPACE\" , 33 : \"PAGE_UP\", 34 : \"PAGE_DOWN\" , 35 : \"END\" , 36 : \"HOME\" , 37 : \"LEFT\" , 38 : \"UP\" , 39 : \"RIGHT\" , 40 : \"DOWN\" , 43 : \"+\" , 44 : \"PRINTSCREEN\" , 45 : \"INSERT\" , 46 : \"DELETE\", 48 : \"0\" , 49 : \"1\" , 50 : \"2\" , 51 : \"3\" , 52 : \"4\" , 53 : \"5\" , 54 : \"6\" , 55 : \"7\" , 56 : \"8\" , 57 : \"9\" , 59 : \";\", 61 : \"=\" , 65 : \"A\" , 66 : \"B\" , 67 : \"C\" , 68 : \"D\" , 69 : \"E\" , 70 : \"F\" , 71 : \"G\" , 72 : \"H\" , 73 : \"I\" , 74 : \"J\" , 75 : \"K\" , 76 : \"L\", 77 : \"M\" , 78 : \"N\" , 79 : \"O\" , 80 : \"P\" , 81 : \"Q\" , 82 : \"R\" , 83 : \"S\" , 84 : \"T\" , 85 : \"U\" , 86 : \"V\" , 87 : \"W\" , 88 : \"X\" , 89 : \"Y\" , 90 : \"Z\", 96 : \"0\" , 97 : \"1\" , 98 : \"2\" , 99 : \"3\" , 100 : \"4\" , 101 : \"5\" , 102 : \"6\" , 103 : \"7\" , 104 : \"8\" , 105 : \"9\", 106 : \"*\" , 107 : \"+\" , 109 : \"-\" , 110 : \".\" , 111 : \"/\", 112 : \"F1\" , 113 : \"F2\" , 114 : \"F3\" , 115 : \"F4\" , 116 : \"F5\" , 117 : \"F6\" , 118 : \"F7\" , 119 : \"F8\" , 120 : \"F9\" , 121 : \"F10\" , 122 : \"F11\" , 123 : \"F12\", 144 : \"NUMLOCK\" , 145 : \"SCROLLLOCK\" , 186 : \";\" , 187 : \"=\" , 188 : \",\" , 189 : \"-\" , 190 : \".\" , 191 : \"/\" , 192 : \"`\" , 219 : \"[\" , 220 : \"\\\\\" , 221 : \"]\" , 222 : \"'\"\n    },\n\n    isControl: function (e) {\n        var k = e.which;\n        switch (k) {\n        case KEY.COMMAND:\n        case KEY.SHIFT:\n        case KEY.CTRL:\n        case KEY.ALT:\n            return true;\n        }\n\n        if (e.metaKey || e.ctrlKey || e.altKey) return true;\n\n        return false;\n    },\n    isFunctionKey: function (k) {\n        k = k.which ? k.which : k;\n        return k >= 112 && k <= 123;\n    },\n    isVerticalMovement: function (k){\n      return ~[KEY.UP, KEY.DOWN].indexOf(k);\n    },\n    isHorizontalMovement: function (k){\n      return ~[KEY.LEFT,KEY.RIGHT,KEY.BACKSPACE,KEY.DELETE].indexOf(k);\n    },\n    toSeparator: function (k) {\n      var sep = {ENTER:\"\\n\",TAB:\"\\t\",SPACE:\" \"}[k];\n      if (sep) return sep;\n      // return undefined for special keys other than enter, tab or space.\n      // no way to use them to cut strings.\n      return KEY[k] ? undefined : k;\n    }\n  };\n\nfunction isNil(value) {\n  return angular.isUndefined(value) || value === null;\n}\n\n/**\n * Add querySelectorAll() to jqLite.\n *\n * jqLite find() is limited to lookups by tag name.\n * TODO This will change with future versions of AngularJS, to be removed when this happens\n *\n * See jqLite.find - why not use querySelectorAll? https://github.com/angular/angular.js/issues/3586\n * See feat(jqLite): use querySelectorAll instead of getElementsByTagName in jqLite.find https://github.com/angular/angular.js/pull/3598\n */\nif (angular.element.prototype.querySelectorAll === undefined) {\n  angular.element.prototype.querySelectorAll = function(selector) {\n    return angular.element(this[0].querySelectorAll(selector));\n  };\n}\n\n/**\n * Add closest() to jqLite.\n */\nif (angular.element.prototype.closest === undefined) {\n  angular.element.prototype.closest = function( selector) {\n    var elem = this[0];\n    var matchesSelector = elem.matches || elem.webkitMatchesSelector || elem.mozMatchesSelector || elem.msMatchesSelector;\n\n    while (elem) {\n      if (matchesSelector.bind(elem)(selector)) {\n        return elem;\n      } else {\n        elem = elem.parentElement;\n      }\n    }\n    return false;\n  };\n}\n\nvar latestId = 0;\n\nvar uis = angular.module('ui.select', [])\n\n.constant('uiSelectConfig', {\n  theme: 'bootstrap',\n  searchEnabled: true,\n  sortable: false,\n  placeholder: '', // Empty by default, like HTML tag <select>\n  refreshDelay: 1000, // In milliseconds\n  closeOnSelect: true,\n  skipFocusser: false,\n  dropdownPosition: 'auto',\n  removeSelected: true,\n  resetSearchInput: true,\n  generateId: function() {\n    return latestId++;\n  },\n  appendToBody: false,\n  spinnerEnabled: false,\n  spinnerClass: 'glyphicon glyphicon-refresh ui-select-spin',\n  backspaceReset: true\n})\n\n// See Rename minErr and make it accessible from outside https://github.com/angular/angular.js/issues/6913\n.service('uiSelectMinErr', function() {\n  var minErr = angular.$$minErr('ui.select');\n  return function() {\n    var error = minErr.apply(this, arguments);\n    var message = error.message.replace(new RegExp('\\nhttp://errors.angularjs.org/.*'), '');\n    return new Error(message);\n  };\n})\n\n// Recreates old behavior of ng-transclude. Used internally.\n.directive('uisTranscludeAppend', function () {\n  return {\n    link: function (scope, element, attrs, ctrl, transclude) {\n        transclude(scope, function (clone) {\n          element.append(clone);\n        });\n      }\n    };\n})\n\n/**\n * Highlights text that matches $select.search.\n *\n * Taken from AngularUI Bootstrap Typeahead\n * See https://github.com/angular-ui/bootstrap/blob/0.10.0/src/typeahead/typeahead.js#L340\n */\n.filter('highlight', function() {\n  function escapeRegexp(queryToEscape) {\n    return ('' + queryToEscape).replace(/([.?*+^$[\\]\\\\(){}|-])/g, '\\\\$1');\n  }\n\n  return function(matchItem, query) {\n    return query && matchItem ? ('' + matchItem).replace(new RegExp(escapeRegexp(query), 'gi'), '<span class=\"ui-select-highlight\">$&</span>') : matchItem;\n  };\n})\n\n/**\n * A read-only equivalent of jQuery's offset function: http://api.jquery.com/offset/\n *\n * Taken from AngularUI Bootstrap Position:\n * See https://github.com/angular-ui/bootstrap/blob/master/src/position/position.js#L70\n */\n.factory('uisOffset',\n  ['$document', '$window',\n  function ($document, $window) {\n\n  return function(element) {\n    var boundingClientRect = element[0].getBoundingClientRect();\n    return {\n      width: boundingClientRect.width || element.prop('offsetWidth'),\n      height: boundingClientRect.height || element.prop('offsetHeight'),\n      top: boundingClientRect.top + ($window.pageYOffset || $document[0].documentElement.scrollTop),\n      left: boundingClientRect.left + ($window.pageXOffset || $document[0].documentElement.scrollLeft)\n    };\n  };\n}]);\n\n/**\n * Debounces functions\n *\n * Taken from UI Bootstrap $$debounce source code\n * See https://github.com/angular-ui/bootstrap/blob/master/src/debounce/debounce.js\n *\n */\nuis.factory('$$uisDebounce', ['$timeout', function($timeout) {\n  return function(callback, debounceTime) {\n    var timeoutPromise;\n\n    return function() {\n      var self = this;\n      var args = Array.prototype.slice.call(arguments);\n      if (timeoutPromise) {\n        $timeout.cancel(timeoutPromise);\n      }\n\n      timeoutPromise = $timeout(function() {\n        callback.apply(self, args);\n      }, debounceTime);\n    };\n  };\n}]);\n\nuis.directive('uiSelectChoices',\n  ['uiSelectConfig', 'uisRepeatParser', 'uiSelectMinErr', '$compile', '$window',\n  function(uiSelectConfig, RepeatParser, uiSelectMinErr, $compile, $window) {\n\n  return {\n    restrict: 'EA',\n    require: '^uiSelect',\n    replace: true,\n    transclude: true,\n    templateUrl: function(tElement) {\n      // Needed so the uiSelect can detect the transcluded content\n      tElement.addClass('ui-select-choices');\n\n      // Gets theme attribute from parent (ui-select)\n      var theme = tElement.parent().attr('theme') || uiSelectConfig.theme;\n      return theme + '/choices.tpl.html';\n    },\n\n    compile: function(tElement, tAttrs) {\n\n      if (!tAttrs.repeat) throw uiSelectMinErr('repeat', \"Expected 'repeat' expression.\");\n\n      // var repeat = RepeatParser.parse(attrs.repeat);\n      var groupByExp = tAttrs.groupBy;\n      var groupFilterExp = tAttrs.groupFilter;\n\n      if (groupByExp) {\n        var groups = tElement.querySelectorAll('.ui-select-choices-group');\n        if (groups.length !== 1) throw uiSelectMinErr('rows', \"Expected 1 .ui-select-choices-group but got '{0}'.\", groups.length);\n        groups.attr('ng-repeat', RepeatParser.getGroupNgRepeatExpression());\n      }\n\n      var parserResult = RepeatParser.parse(tAttrs.repeat);\n\n      var choices = tElement.querySelectorAll('.ui-select-choices-row');\n      if (choices.length !== 1) {\n        throw uiSelectMinErr('rows', \"Expected 1 .ui-select-choices-row but got '{0}'.\", choices.length);\n      }\n\n      choices.attr('ng-repeat', parserResult.repeatExpression(groupByExp))\n             .attr('ng-if', '$select.open'); //Prevent unnecessary watches when dropdown is closed\n\n\n      var rowsInner = tElement.querySelectorAll('.ui-select-choices-row-inner');\n      if (rowsInner.length !== 1) {\n        throw uiSelectMinErr('rows', \"Expected 1 .ui-select-choices-row-inner but got '{0}'.\", rowsInner.length);\n      }\n      rowsInner.attr('uis-transclude-append', ''); //Adding uisTranscludeAppend directive to row element after choices element has ngRepeat\n\n      // If IE8 then need to target rowsInner to apply the ng-click attr as choices will not capture the event.\n      var clickTarget = $window.document.addEventListener ? choices : rowsInner;\n      clickTarget.attr('ng-click', '$select.select(' + parserResult.itemName + ',$select.skipFocusser,$event)');\n\n      return function link(scope, element, attrs, $select) {\n\n\n        $select.parseRepeatAttr(attrs.repeat, groupByExp, groupFilterExp); //Result ready at $select.parserResult\n        $select.disableChoiceExpression = attrs.uiDisableChoice;\n        $select.onHighlightCallback = attrs.onHighlight;\n        $select.minimumInputLength = parseInt(attrs.minimumInputLength) || 0;\n        $select.dropdownPosition = attrs.position ? attrs.position.toLowerCase() : uiSelectConfig.dropdownPosition;\n\n        scope.$watch('$select.search', function(newValue) {\n          if(newValue && !$select.open && $select.multiple) $select.activate(false, true);\n          $select.activeIndex = $select.tagging.isActivated ? -1 : 0;\n          if (!attrs.minimumInputLength || $select.search.length >= attrs.minimumInputLength) {\n            $select.refresh(attrs.refresh);\n          } else {\n            $select.items = [];\n          }\n        });\n\n        attrs.$observe('refreshDelay', function() {\n          // $eval() is needed otherwise we get a string instead of a number\n          var refreshDelay = scope.$eval(attrs.refreshDelay);\n          $select.refreshDelay = refreshDelay !== undefined ? refreshDelay : uiSelectConfig.refreshDelay;\n        });\n\n        scope.$watch('$select.open', function(open) {\n          if (open) {\n            tElement.attr('role', 'listbox');\n            $select.refresh(attrs.refresh);\n          } else {\n            element.removeAttr('role');\n          }\n        });\n      };\n    }\n  };\n}]);\n\n/**\n * Contains ui-select \"intelligence\".\n *\n * The goal is to limit dependency on the DOM whenever possible and\n * put as much logic in the controller (instead of the link functions) as possible so it can be easily tested.\n */\nuis.controller('uiSelectCtrl',\n  ['$scope', '$element', '$timeout', '$filter', '$$uisDebounce', 'uisRepeatParser', 'uiSelectMinErr', 'uiSelectConfig', '$parse', '$injector', '$window',\n  function($scope, $element, $timeout, $filter, $$uisDebounce, RepeatParser, uiSelectMinErr, uiSelectConfig, $parse, $injector, $window) {\n\n  var ctrl = this;\n\n  var EMPTY_SEARCH = '';\n\n  ctrl.placeholder = uiSelectConfig.placeholder;\n  ctrl.searchEnabled = uiSelectConfig.searchEnabled;\n  ctrl.sortable = uiSelectConfig.sortable;\n  ctrl.refreshDelay = uiSelectConfig.refreshDelay;\n  ctrl.paste = uiSelectConfig.paste;\n  ctrl.resetSearchInput = uiSelectConfig.resetSearchInput;\n  ctrl.refreshing = false;\n  ctrl.spinnerEnabled = uiSelectConfig.spinnerEnabled;\n  ctrl.spinnerClass = uiSelectConfig.spinnerClass;\n  ctrl.removeSelected = uiSelectConfig.removeSelected; //If selected item(s) should be removed from dropdown list\n  ctrl.closeOnSelect = true; //Initialized inside uiSelect directive link function\n  ctrl.skipFocusser = false; //Set to true to avoid returning focus to ctrl when item is selected\n  ctrl.search = EMPTY_SEARCH;\n\n  ctrl.activeIndex = 0; //Dropdown of choices\n  ctrl.items = []; //All available choices\n\n  ctrl.open = false;\n  ctrl.focus = false;\n  ctrl.disabled = false;\n  ctrl.selected = undefined;\n\n  ctrl.dropdownPosition = 'auto';\n\n  ctrl.focusser = undefined; //Reference to input element used to handle focus events\n  ctrl.multiple = undefined; // Initialized inside uiSelect directive link function\n  ctrl.disableChoiceExpression = undefined; // Initialized inside uiSelectChoices directive link function\n  ctrl.tagging = {isActivated: false, fct: undefined};\n  ctrl.taggingTokens = {isActivated: false, tokens: undefined};\n  ctrl.lockChoiceExpression = undefined; // Initialized inside uiSelectMatch directive link function\n  ctrl.clickTriggeredSelect = false;\n  ctrl.$filter = $filter;\n  ctrl.$element = $element;\n\n  // Use $injector to check for $animate and store a reference to it\n  ctrl.$animate = (function () {\n    try {\n      return $injector.get('$animate');\n    } catch (err) {\n      // $animate does not exist\n      return null;\n    }\n  })();\n\n  ctrl.searchInput = $element.querySelectorAll('input.ui-select-search');\n  if (ctrl.searchInput.length !== 1) {\n    throw uiSelectMinErr('searchInput', \"Expected 1 input.ui-select-search but got '{0}'.\", ctrl.searchInput.length);\n  }\n\n  ctrl.isEmpty = function() {\n    return isNil(ctrl.selected) || ctrl.selected === '' || (ctrl.multiple && ctrl.selected.length === 0);\n  };\n\n  function _findIndex(collection, predicate, thisArg){\n    if (collection.findIndex){\n      return collection.findIndex(predicate, thisArg);\n    } else {\n      var list = Object(collection);\n      var length = list.length >>> 0;\n      var value;\n\n      for (var i = 0; i < length; i++) {\n        value = list[i];\n        if (predicate.call(thisArg, value, i, list)) {\n          return i;\n        }\n      }\n      return -1;\n    }\n  }\n\n  // Most of the time the user does not want to empty the search input when in typeahead mode\n  function _resetSearchInput() {\n    if (ctrl.resetSearchInput) {\n      ctrl.search = EMPTY_SEARCH;\n      //reset activeIndex\n      if (ctrl.selected && ctrl.items.length && !ctrl.multiple) {\n        ctrl.activeIndex = _findIndex(ctrl.items, function(item){\n          return angular.equals(this, item);\n        }, ctrl.selected);\n      }\n    }\n  }\n\n    function _groupsFilter(groups, groupNames) {\n      var i, j, result = [];\n      for(i = 0; i < groupNames.length ;i++){\n        for(j = 0; j < groups.length ;j++){\n          if(groups[j].name == [groupNames[i]]){\n            result.push(groups[j]);\n          }\n        }\n      }\n      return result;\n    }\n\n  // When the user clicks on ui-select, displays the dropdown list\n  ctrl.activate = function(initSearchValue, avoidReset) {\n    if (!ctrl.disabled  && !ctrl.open) {\n      if(!avoidReset) _resetSearchInput();\n\n      $scope.$broadcast('uis:activate');\n      ctrl.open = true;\n      ctrl.activeIndex = ctrl.activeIndex >= ctrl.items.length ? 0 : ctrl.activeIndex;\n      // ensure that the index is set to zero for tagging variants\n      // that where first option is auto-selected\n      if ( ctrl.activeIndex === -1 && ctrl.taggingLabel !== false ) {\n        ctrl.activeIndex = 0;\n      }\n\n      var container = $element.querySelectorAll('.ui-select-choices-content');\n      var searchInput = $element.querySelectorAll('.ui-select-search');\n      if (ctrl.$animate && ctrl.$animate.on && ctrl.$animate.enabled(container[0])) {\n        var animateHandler = function(elem, phase) {\n          if (phase === 'start' && ctrl.items.length === 0) {\n            // Only focus input after the animation has finished\n            ctrl.$animate.off('removeClass', searchInput[0], animateHandler);\n            $timeout(function () {\n              ctrl.focusSearchInput(initSearchValue);\n            });\n          } else if (phase === 'close') {\n            // Only focus input after the animation has finished\n            ctrl.$animate.off('enter', container[0], animateHandler);\n            $timeout(function () {\n              ctrl.focusSearchInput(initSearchValue);\n            });\n          }\n        };\n\n        if (ctrl.items.length > 0) {\n          ctrl.$animate.on('enter', container[0], animateHandler);\n        } else {\n          ctrl.$animate.on('removeClass', searchInput[0], animateHandler);\n        }\n      } else {\n        $timeout(function () {\n          ctrl.focusSearchInput(initSearchValue);\n          if(!ctrl.tagging.isActivated && ctrl.items.length > 1) {\n            _ensureHighlightVisible();\n          }\n        });\n      }\n    }\n    else if (ctrl.open && !ctrl.searchEnabled) {\n      // Close the selection if we don't have search enabled, and we click on the select again\n      ctrl.close();\n    }\n  };\n\n  ctrl.focusSearchInput = function (initSearchValue) {\n    ctrl.search = initSearchValue || ctrl.search;\n    ctrl.searchInput[0].focus();\n  };\n\n  ctrl.findGroupByName = function(name) {\n    return ctrl.groups && ctrl.groups.filter(function(group) {\n      return group.name === name;\n    })[0];\n  };\n\n  ctrl.parseRepeatAttr = function(repeatAttr, groupByExp, groupFilterExp) {\n    function updateGroups(items) {\n      var groupFn = $scope.$eval(groupByExp);\n      ctrl.groups = [];\n      angular.forEach(items, function(item) {\n        var groupName = angular.isFunction(groupFn) ? groupFn(item) : item[groupFn];\n        var group = ctrl.findGroupByName(groupName);\n        if(group) {\n          group.items.push(item);\n        }\n        else {\n          ctrl.groups.push({name: groupName, items: [item]});\n        }\n      });\n      if(groupFilterExp){\n        var groupFilterFn = $scope.$eval(groupFilterExp);\n        if( angular.isFunction(groupFilterFn)){\n          ctrl.groups = groupFilterFn(ctrl.groups);\n        } else if(angular.isArray(groupFilterFn)){\n          ctrl.groups = _groupsFilter(ctrl.groups, groupFilterFn);\n        }\n      }\n      ctrl.items = [];\n      ctrl.groups.forEach(function(group) {\n        ctrl.items = ctrl.items.concat(group.items);\n      });\n    }\n\n    function setPlainItems(items) {\n      ctrl.items = items || [];\n    }\n\n    ctrl.setItemsFn = groupByExp ? updateGroups : setPlainItems;\n\n    ctrl.parserResult = RepeatParser.parse(repeatAttr);\n\n    ctrl.isGrouped = !!groupByExp;\n    ctrl.itemProperty = ctrl.parserResult.itemName;\n\n    //If collection is an Object, convert it to Array\n\n    var originalSource = ctrl.parserResult.source;\n\n    //When an object is used as source, we better create an array and use it as 'source'\n    var createArrayFromObject = function(){\n      var origSrc = originalSource($scope);\n      $scope.$uisSource = Object.keys(origSrc).map(function(v){\n        var result = {};\n        result[ctrl.parserResult.keyName] = v;\n        result.value = origSrc[v];\n        return result;\n      });\n    };\n\n    if (ctrl.parserResult.keyName){ // Check for (key,value) syntax\n      createArrayFromObject();\n      ctrl.parserResult.source = $parse('$uisSource' + ctrl.parserResult.filters);\n      $scope.$watch(originalSource, function(newVal, oldVal){\n        if (newVal !== oldVal) createArrayFromObject();\n      }, true);\n    }\n\n    ctrl.refreshItems = function (data){\n      data = data || ctrl.parserResult.source($scope);\n      var selectedItems = ctrl.selected;\n      //TODO should implement for single mode removeSelected\n      if (ctrl.isEmpty() || (angular.isArray(selectedItems) && !selectedItems.length) || !ctrl.multiple || !ctrl.removeSelected) {\n        ctrl.setItemsFn(data);\n      }else{\n        if ( data !== undefined && data !== null ) {\n          var filteredItems = data.filter(function(i) {\n            return angular.isArray(selectedItems) ? selectedItems.every(function(selectedItem) {\n              return !angular.equals(i, selectedItem);\n            }) : !angular.equals(i, selectedItems);\n          });\n          ctrl.setItemsFn(filteredItems);\n        }\n      }\n      if (ctrl.dropdownPosition === 'auto' || ctrl.dropdownPosition === 'up'){\n        $scope.calculateDropdownPos();\n      }\n      $scope.$broadcast('uis:refresh');\n    };\n\n    // See https://github.com/angular/angular.js/blob/v1.2.15/src/ng/directive/ngRepeat.js#L259\n    $scope.$watchCollection(ctrl.parserResult.source, function(items) {\n      if (items === undefined || items === null) {\n        // If the user specifies undefined or null => reset the collection\n        // Special case: items can be undefined if the user did not initialized the collection on the scope\n        // i.e $scope.addresses = [] is missing\n        ctrl.items = [];\n      } else {\n        if (!angular.isArray(items)) {\n          throw uiSelectMinErr('items', \"Expected an array but got '{0}'.\", items);\n        } else {\n          //Remove already selected items (ex: while searching)\n          //TODO Should add a test\n          ctrl.refreshItems(items);\n\n          //update the view value with fresh data from items, if there is a valid model value\n          if(angular.isDefined(ctrl.ngModel.$modelValue)) {\n            ctrl.ngModel.$modelValue = null; //Force scope model value and ngModel value to be out of sync to re-run formatters\n          }\n        }\n      }\n    });\n\n  };\n\n  var _refreshDelayPromise;\n\n  /**\n   * Typeahead mode: lets the user refresh the collection using his own function.\n   *\n   * See Expose $select.search for external / remote filtering https://github.com/angular-ui/ui-select/pull/31\n   */\n  ctrl.refresh = function(refreshAttr) {\n    if (refreshAttr !== undefined) {\n      // Debounce\n      // See https://github.com/angular-ui/bootstrap/blob/0.10.0/src/typeahead/typeahead.js#L155\n      // FYI AngularStrap typeahead does not have debouncing: https://github.com/mgcrea/angular-strap/blob/v2.0.0-rc.4/src/typeahead/typeahead.js#L177\n      if (_refreshDelayPromise) {\n        $timeout.cancel(_refreshDelayPromise);\n      }\n      _refreshDelayPromise = $timeout(function() {\n        if ($scope.$select.search.length >= $scope.$select.minimumInputLength) {\n          var refreshPromise = $scope.$eval(refreshAttr);\n          if (refreshPromise && angular.isFunction(refreshPromise.then) && !ctrl.refreshing) {\n            ctrl.refreshing = true;\n            refreshPromise.finally(function() {\n              ctrl.refreshing = false;\n            });\n          }\n        }\n      }, ctrl.refreshDelay);\n    }\n  };\n\n  ctrl.isActive = function(itemScope) {\n    if ( !ctrl.open ) {\n      return false;\n    }\n    var itemIndex = ctrl.items.indexOf(itemScope[ctrl.itemProperty]);\n    var isActive =  itemIndex == ctrl.activeIndex;\n\n    if ( !isActive || itemIndex < 0 ) {\n      return false;\n    }\n\n    if (isActive && !angular.isUndefined(ctrl.onHighlightCallback)) {\n      itemScope.$eval(ctrl.onHighlightCallback);\n    }\n\n    return isActive;\n  };\n\n  var _isItemSelected = function (item) {\n    return (ctrl.selected && angular.isArray(ctrl.selected) &&\n        ctrl.selected.filter(function (selection) { return angular.equals(selection, item); }).length > 0);\n  };\n\n  var disabledItems = [];\n\n  function _updateItemDisabled(item, isDisabled) {\n    var disabledItemIndex = disabledItems.indexOf(item);\n    if (isDisabled && disabledItemIndex === -1) {\n      disabledItems.push(item);\n    }\n\n    if (!isDisabled && disabledItemIndex > -1) {\n      disabledItems.splice(disabledItemIndex, 1);\n    }\n  }\n\n  function _isItemDisabled(item) {\n    return disabledItems.indexOf(item) > -1;\n  }\n\n  ctrl.isDisabled = function(itemScope) {\n\n    if (!ctrl.open) return;\n\n    var item = itemScope[ctrl.itemProperty];\n    var itemIndex = ctrl.items.indexOf(item);\n    var isDisabled = false;\n\n    if (itemIndex >= 0 && (angular.isDefined(ctrl.disableChoiceExpression) || ctrl.multiple)) {\n\n      if (item.isTag) return false;\n\n      if (ctrl.multiple) {\n        isDisabled = _isItemSelected(item);\n      }\n\n      if (!isDisabled && angular.isDefined(ctrl.disableChoiceExpression)) {\n        isDisabled = !!(itemScope.$eval(ctrl.disableChoiceExpression));\n      }\n\n      _updateItemDisabled(item, isDisabled);\n    }\n\n    return isDisabled;\n  };\n\n\n  // When the user selects an item with ENTER or clicks the dropdown\n  ctrl.select = function(item, skipFocusser, $event) {\n    if (isNil(item) || !_isItemDisabled(item)) {\n\n      if ( ! ctrl.items && ! ctrl.search && ! ctrl.tagging.isActivated) return;\n\n      if (!item || !_isItemDisabled(item)) {\n        // if click is made on existing item, prevent from tagging, ctrl.search does not matter\n        ctrl.clickTriggeredSelect = false;\n        if($event && ($event.type === 'click' || $event.type === 'touchend') && item)\n          ctrl.clickTriggeredSelect = true;\n\n        if(ctrl.tagging.isActivated && ctrl.clickTriggeredSelect === false) {\n          // if taggingLabel is disabled and item is undefined we pull from ctrl.search\n          if ( ctrl.taggingLabel === false ) {\n            if ( ctrl.activeIndex < 0 ) {\n              if (item === undefined) {\n                item = ctrl.tagging.fct !== undefined ? ctrl.tagging.fct(ctrl.search) : ctrl.search;\n              }\n              if (!item || angular.equals( ctrl.items[0], item ) ) {\n                return;\n              }\n            } else {\n              // keyboard nav happened first, user selected from dropdown\n              item = ctrl.items[ctrl.activeIndex];\n            }\n          } else {\n            // tagging always operates at index zero, taggingLabel === false pushes\n            // the ctrl.search value without having it injected\n            if ( ctrl.activeIndex === 0 ) {\n              // ctrl.tagging pushes items to ctrl.items, so we only have empty val\n              // for `item` if it is a detected duplicate\n              if ( item === undefined ) return;\n\n              // create new item on the fly if we don't already have one;\n              // use tagging function if we have one\n              if ( ctrl.tagging.fct !== undefined && typeof item === 'string' ) {\n                item = ctrl.tagging.fct(item);\n                if (!item) return;\n              // if item type is 'string', apply the tagging label\n              } else if ( typeof item === 'string' ) {\n                // trim the trailing space\n                item = item.replace(ctrl.taggingLabel,'').trim();\n              }\n            }\n          }\n          // search ctrl.selected for dupes potentially caused by tagging and return early if found\n          if (_isItemSelected(item)) {\n            ctrl.close(skipFocusser);\n            return;\n          }\n        }\n        _resetSearchInput();\n        $scope.$broadcast('uis:select', item);\n\n        if (ctrl.closeOnSelect) {\n          ctrl.close(skipFocusser);\n        }\n      }\n    }\n  };\n\n  // Closes the dropdown\n  ctrl.close = function(skipFocusser) {\n    if (!ctrl.open) return;\n    if (ctrl.ngModel && ctrl.ngModel.$setTouched) ctrl.ngModel.$setTouched();\n    ctrl.open = false;\n    _resetSearchInput();\n    $scope.$broadcast('uis:close', skipFocusser);\n\n  };\n\n  ctrl.setFocus = function(){\n    if (!ctrl.focus) ctrl.focusInput[0].focus();\n  };\n\n  ctrl.clear = function($event) {\n    ctrl.select(null);\n    $event.stopPropagation();\n    $timeout(function() {\n      ctrl.focusser[0].focus();\n    }, 0, false);\n  };\n\n  // Toggle dropdown\n  ctrl.toggle = function(e) {\n    if (ctrl.open) {\n      ctrl.close();\n      e.preventDefault();\n      e.stopPropagation();\n    } else {\n      ctrl.activate();\n    }\n  };\n\n  // Set default function for locked choices - avoids unnecessary\n  // logic if functionality is not being used\n  ctrl.isLocked = function () {\n    return false;\n  };\n\n  $scope.$watch(function () {\n    return angular.isDefined(ctrl.lockChoiceExpression) && ctrl.lockChoiceExpression !== \"\";\n  }, _initaliseLockedChoices);\n\n  function _initaliseLockedChoices(doInitalise) {\n    if(!doInitalise) return;\n\n    var lockedItems = [];\n\n    function _updateItemLocked(item, isLocked) {\n      var lockedItemIndex = lockedItems.indexOf(item);\n      if (isLocked && lockedItemIndex === -1) {\n        lockedItems.push(item);\n        }\n\n      if (!isLocked && lockedItemIndex > -1) {\n        lockedItems.splice(lockedItemIndex, 1);\n      }\n    }\n\n    function _isItemlocked(item) {\n      return lockedItems.indexOf(item) > -1;\n    }\n\n    ctrl.isLocked = function (itemScope, itemIndex) {\n      var isLocked = false,\n          item = ctrl.selected[itemIndex];\n\n      if(item) {\n        if (itemScope) {\n          isLocked = !!(itemScope.$eval(ctrl.lockChoiceExpression));\n          _updateItemLocked(item, isLocked);\n        } else {\n          isLocked = _isItemlocked(item);\n        }\n      }\n\n      return isLocked;\n    };\n  }\n\n\n  var sizeWatch = null;\n  var updaterScheduled = false;\n  ctrl.sizeSearchInput = function() {\n\n    var input = ctrl.searchInput[0],\n        container = ctrl.$element[0],\n        calculateContainerWidth = function() {\n          // Return the container width only if the search input is visible\n          return container.clientWidth * !!input.offsetParent;\n        },\n        updateIfVisible = function(containerWidth) {\n          if (containerWidth === 0) {\n            return false;\n          }\n          var inputWidth = containerWidth - input.offsetLeft;\n          if (inputWidth < 50) inputWidth = containerWidth;\n          ctrl.searchInput.css('width', inputWidth+'px');\n          return true;\n        };\n\n    ctrl.searchInput.css('width', '10px');\n    $timeout(function() { //Give tags time to render correctly\n      if (sizeWatch === null && !updateIfVisible(calculateContainerWidth())) {\n        sizeWatch = $scope.$watch(function() {\n          if (!updaterScheduled) {\n            updaterScheduled = true;\n            $scope.$$postDigest(function() {\n              updaterScheduled = false;\n              if (updateIfVisible(calculateContainerWidth())) {\n                sizeWatch();\n                sizeWatch = null;\n              }\n            });\n          }\n        }, angular.noop);\n      }\n    });\n  };\n\n  function _handleDropDownSelection(key) {\n    var processed = true;\n    switch (key) {\n      case KEY.DOWN:\n        if (!ctrl.open && ctrl.multiple) ctrl.activate(false, true); //In case its the search input in 'multiple' mode\n        else if (ctrl.activeIndex < ctrl.items.length - 1) {\n          var idx = ++ctrl.activeIndex;\n          while(_isItemDisabled(ctrl.items[idx]) && idx < ctrl.items.length) {\n            ctrl.activeIndex = ++idx;\n          }\n        }\n        break;\n      case KEY.UP:\n        var minActiveIndex = (ctrl.search.length === 0 && ctrl.tagging.isActivated) ? -1 : 0;\n        if (!ctrl.open && ctrl.multiple) ctrl.activate(false, true); //In case its the search input in 'multiple' mode\n        else if (ctrl.activeIndex > minActiveIndex) {\n          var idxmin = --ctrl.activeIndex;\n          while(_isItemDisabled(ctrl.items[idxmin]) && idxmin > minActiveIndex) {\n            ctrl.activeIndex = --idxmin;\n          }\n        }\n        break;\n      case KEY.TAB:\n        if (!ctrl.multiple || ctrl.open) ctrl.select(ctrl.items[ctrl.activeIndex], true);\n        break;\n      case KEY.ENTER:\n        if(ctrl.open && (ctrl.tagging.isActivated || ctrl.activeIndex >= 0)){\n          ctrl.select(ctrl.items[ctrl.activeIndex], ctrl.skipFocusser); // Make sure at least one dropdown item is highlighted before adding if not in tagging mode\n        } else {\n          ctrl.activate(false, true); //In case its the search input in 'multiple' mode\n        }\n        break;\n      case KEY.ESC:\n        ctrl.close();\n        break;\n      default:\n        processed = false;\n    }\n    return processed;\n  }\n\n  // Bind to keyboard shortcuts\n  ctrl.searchInput.on('keydown', function(e) {\n\n    var key = e.which;\n\n    if (~[KEY.ENTER,KEY.ESC].indexOf(key)){\n      e.preventDefault();\n      e.stopPropagation();\n    }\n\n    $scope.$apply(function() {\n\n      var tagged = false;\n\n      if (ctrl.items.length > 0 || ctrl.tagging.isActivated) {\n        if(!_handleDropDownSelection(key) && !ctrl.searchEnabled) {\n          e.preventDefault();\n          e.stopPropagation();\n        }\n        if ( ctrl.taggingTokens.isActivated ) {\n          for (var i = 0; i < ctrl.taggingTokens.tokens.length; i++) {\n            if ( ctrl.taggingTokens.tokens[i] === KEY.MAP[e.keyCode] ) {\n              // make sure there is a new value to push via tagging\n              if ( ctrl.search.length > 0 ) {\n                tagged = true;\n              }\n            }\n          }\n          if ( tagged ) {\n            $timeout(function() {\n              ctrl.searchInput.triggerHandler('tagged');\n              var newItem = ctrl.search.replace(KEY.MAP[e.keyCode],'').trim();\n              if ( ctrl.tagging.fct ) {\n                newItem = ctrl.tagging.fct( newItem );\n              }\n              if (newItem) ctrl.select(newItem, true);\n            });\n          }\n        }\n      }\n\n    });\n\n    if(KEY.isVerticalMovement(key) && ctrl.items.length > 0){\n      _ensureHighlightVisible();\n    }\n\n    if (key === KEY.ENTER || key === KEY.ESC) {\n      e.preventDefault();\n      e.stopPropagation();\n    }\n\n  });\n\n  ctrl.searchInput.on('paste', function (e) {\n    var data;\n\n    if (window.clipboardData && window.clipboardData.getData) { // IE\n      data = window.clipboardData.getData('Text');\n    } else {\n      data = (e.originalEvent || e).clipboardData.getData('text/plain');\n    }\n\n    // Prepend the current input field text to the paste buffer.\n    data = ctrl.search + data;\n\n    if (data && data.length > 0) {\n      // If tagging try to split by tokens and add items\n      if (ctrl.taggingTokens.isActivated) {\n        var items = [];\n        for (var i = 0; i < ctrl.taggingTokens.tokens.length; i++) {  // split by first token that is contained in data\n          var separator = KEY.toSeparator(ctrl.taggingTokens.tokens[i]) || ctrl.taggingTokens.tokens[i];\n          if (data.indexOf(separator) > -1) {\n            items = data.split(separator);\n            break;  // only split by one token\n          }\n        }\n        if (items.length === 0) {\n          items = [data];\n        }\n        var oldsearch = ctrl.search;\n        angular.forEach(items, function (item) {\n          var newItem = ctrl.tagging.fct ? ctrl.tagging.fct(item) : item;\n          if (newItem) {\n            ctrl.select(newItem, true);\n          }\n        });\n        ctrl.search = oldsearch || EMPTY_SEARCH;\n        e.preventDefault();\n        e.stopPropagation();\n      } else if (ctrl.paste) {\n        ctrl.paste(data);\n        ctrl.search = EMPTY_SEARCH;\n        e.preventDefault();\n        e.stopPropagation();\n      }\n    }\n  });\n\n  ctrl.searchInput.on('tagged', function() {\n    $timeout(function() {\n      _resetSearchInput();\n    });\n  });\n\n  // See https://github.com/ivaynberg/select2/blob/3.4.6/select2.js#L1431\n  function _ensureHighlightVisible() {\n    var container = $element.querySelectorAll('.ui-select-choices-content');\n    var choices = container.querySelectorAll('.ui-select-choices-row');\n    if (choices.length < 1) {\n      throw uiSelectMinErr('choices', \"Expected multiple .ui-select-choices-row but got '{0}'.\", choices.length);\n    }\n\n    if (ctrl.activeIndex < 0) {\n      return;\n    }\n\n    var highlighted = choices[ctrl.activeIndex];\n    var posY = highlighted.offsetTop + highlighted.clientHeight - container[0].scrollTop;\n    var height = container[0].offsetHeight;\n\n    if (posY > height) {\n      container[0].scrollTop += posY - height;\n    } else if (posY < highlighted.clientHeight) {\n      if (ctrl.isGrouped && ctrl.activeIndex === 0)\n        container[0].scrollTop = 0; //To make group header visible when going all the way up\n      else\n        container[0].scrollTop -= highlighted.clientHeight - posY;\n    }\n  }\n\n  var onResize = $$uisDebounce(function() {\n    ctrl.sizeSearchInput();\n  }, 50);\n\n  angular.element($window).bind('resize', onResize);\n\n  $scope.$on('$destroy', function() {\n    ctrl.searchInput.off('keyup keydown tagged blur paste');\n    angular.element($window).off('resize', onResize);\n  });\n\n  $scope.$watch('$select.activeIndex', function(activeIndex) {\n    if (activeIndex)\n      $element.find('input').attr(\n        'aria-activedescendant',\n        'ui-select-choices-row-' + ctrl.generatedId + '-' + activeIndex);\n  });\n\n  $scope.$watch('$select.open', function(open) {\n    if (!open)\n      $element.find('input').removeAttr('aria-activedescendant');\n  });\n}]);\n\nuis.directive('uiSelect',\n  ['$document', 'uiSelectConfig', 'uiSelectMinErr', 'uisOffset', '$compile', '$parse', '$timeout',\n  function($document, uiSelectConfig, uiSelectMinErr, uisOffset, $compile, $parse, $timeout) {\n\n  return {\n    restrict: 'EA',\n    templateUrl: function(tElement, tAttrs) {\n      var theme = tAttrs.theme || uiSelectConfig.theme;\n      return theme + (angular.isDefined(tAttrs.multiple) ? '/select-multiple.tpl.html' : '/select.tpl.html');\n    },\n    replace: true,\n    transclude: true,\n    require: ['uiSelect', '^ngModel'],\n    scope: true,\n\n    controller: 'uiSelectCtrl',\n    controllerAs: '$select',\n    compile: function(tElement, tAttrs) {\n\n      // Allow setting ngClass on uiSelect\n      var match = /{(.*)}\\s*{(.*)}/.exec(tAttrs.ngClass);\n      if(match) {\n        var combined = '{'+ match[1] +', '+ match[2] +'}';\n        tAttrs.ngClass = combined;\n        tElement.attr('ng-class', combined);\n      }\n\n      //Multiple or Single depending if multiple attribute presence\n      if (angular.isDefined(tAttrs.multiple))\n        tElement.append('<ui-select-multiple/>').removeAttr('multiple');\n      else\n        tElement.append('<ui-select-single/>');\n\n      if (tAttrs.inputId)\n        tElement.querySelectorAll('input.ui-select-search')[0].id = tAttrs.inputId;\n\n      return function(scope, element, attrs, ctrls, transcludeFn) {\n\n        var $select = ctrls[0];\n        var ngModel = ctrls[1];\n\n        $select.generatedId = uiSelectConfig.generateId();\n        $select.baseTitle = attrs.title || 'Select box';\n        $select.focusserTitle = $select.baseTitle + ' focus';\n        $select.focusserId = 'focusser-' + $select.generatedId;\n\n        $select.closeOnSelect = function() {\n          if (angular.isDefined(attrs.closeOnSelect)) {\n            return $parse(attrs.closeOnSelect)();\n          } else {\n            return uiSelectConfig.closeOnSelect;\n          }\n        }();\n\n        scope.$watch('skipFocusser', function() {\n            var skipFocusser = scope.$eval(attrs.skipFocusser);\n            $select.skipFocusser = skipFocusser !== undefined ? skipFocusser : uiSelectConfig.skipFocusser;\n        });\n\n        $select.onSelectCallback = $parse(attrs.onSelect);\n        $select.onRemoveCallback = $parse(attrs.onRemove);\n\n        //Set reference to ngModel from uiSelectCtrl\n        $select.ngModel = ngModel;\n\n        $select.choiceGrouped = function(group){\n          return $select.isGrouped && group && group.name;\n        };\n\n        if(attrs.tabindex){\n          attrs.$observe('tabindex', function(value) {\n            $select.focusInput.attr('tabindex', value);\n            element.removeAttr('tabindex');\n          });\n        }\n\n        scope.$watch(function () { return scope.$eval(attrs.searchEnabled); }, function(newVal) {\n          $select.searchEnabled = newVal !== undefined ? newVal : uiSelectConfig.searchEnabled;\n        });\n\n        scope.$watch('sortable', function() {\n            var sortable = scope.$eval(attrs.sortable);\n            $select.sortable = sortable !== undefined ? sortable : uiSelectConfig.sortable;\n        });\n\n        attrs.$observe('backspaceReset', function() {\n          // $eval() is needed otherwise we get a string instead of a boolean\n          var backspaceReset = scope.$eval(attrs.backspaceReset);\n          $select.backspaceReset = backspaceReset !== undefined ? backspaceReset : true;\n        });\n\n        attrs.$observe('limit', function() {\n          //Limit the number of selections allowed\n          $select.limit = (angular.isDefined(attrs.limit)) ? parseInt(attrs.limit, 10) : undefined;\n        });\n\n        scope.$watch('removeSelected', function() {\n            var removeSelected = scope.$eval(attrs.removeSelected);\n            $select.removeSelected = removeSelected !== undefined ? removeSelected : uiSelectConfig.removeSelected;\n        });\n\n        attrs.$observe('disabled', function() {\n          // No need to use $eval() (thanks to ng-disabled) since we already get a boolean instead of a string\n          $select.disabled = attrs.disabled !== undefined ? attrs.disabled : false;\n        });\n\n        attrs.$observe('resetSearchInput', function() {\n          // $eval() is needed otherwise we get a string instead of a boolean\n          var resetSearchInput = scope.$eval(attrs.resetSearchInput);\n          $select.resetSearchInput = resetSearchInput !== undefined ? resetSearchInput : true;\n        });\n\n        attrs.$observe('paste', function() {\n          $select.paste = scope.$eval(attrs.paste);\n        });\n\n        attrs.$observe('tagging', function() {\n          if(attrs.tagging !== undefined)\n          {\n            // $eval() is needed otherwise we get a string instead of a boolean\n            var taggingEval = scope.$eval(attrs.tagging);\n            $select.tagging = {isActivated: true, fct: taggingEval !== true ? taggingEval : undefined};\n          }\n          else\n          {\n            $select.tagging = {isActivated: false, fct: undefined};\n          }\n        });\n\n        attrs.$observe('taggingLabel', function() {\n          if(attrs.tagging !== undefined )\n          {\n            // check eval for FALSE, in this case, we disable the labels\n            // associated with tagging\n            if ( attrs.taggingLabel === 'false' ) {\n              $select.taggingLabel = false;\n            }\n            else\n            {\n              $select.taggingLabel = attrs.taggingLabel !== undefined ? attrs.taggingLabel : '(new)';\n            }\n          }\n        });\n\n        attrs.$observe('taggingTokens', function() {\n          if (attrs.tagging !== undefined) {\n            var tokens = attrs.taggingTokens !== undefined ? attrs.taggingTokens.split('|') : [',','ENTER'];\n            $select.taggingTokens = {isActivated: true, tokens: tokens };\n          }\n        });\n\n        attrs.$observe('spinnerEnabled', function() {\n          // $eval() is needed otherwise we get a string instead of a boolean\n          var spinnerEnabled = scope.$eval(attrs.spinnerEnabled);\n          $select.spinnerEnabled = spinnerEnabled !== undefined ? spinnerEnabled : uiSelectConfig.spinnerEnabled;\n        });\n\n        attrs.$observe('spinnerClass', function() {\n          var spinnerClass = attrs.spinnerClass;\n          $select.spinnerClass = spinnerClass !== undefined ? attrs.spinnerClass : uiSelectConfig.spinnerClass;\n        });\n\n        //Automatically gets focus when loaded\n        if (angular.isDefined(attrs.autofocus)){\n          $timeout(function(){\n            $select.setFocus();\n          });\n        }\n\n        //Gets focus based on scope event name (e.g. focus-on='SomeEventName')\n        if (angular.isDefined(attrs.focusOn)){\n          scope.$on(attrs.focusOn, function() {\n              $timeout(function(){\n                $select.setFocus();\n              });\n          });\n        }\n\n        function onDocumentClick(e) {\n          if (!$select.open) return; //Skip it if dropdown is close\n\n          var contains = false;\n\n          if (window.jQuery) {\n            // Firefox 3.6 does not support element.contains()\n            // See Node.contains https://developer.mozilla.org/en-US/docs/Web/API/Node.contains\n            contains = window.jQuery.contains(element[0], e.target);\n          } else {\n            contains = element[0].contains(e.target);\n          }\n\n          if (!contains && !$select.clickTriggeredSelect) {\n            var skipFocusser;\n            if (!$select.skipFocusser) {\n              //Will lose focus only with certain targets\n              var focusableControls = ['input','button','textarea','select'];\n              var targetController = angular.element(e.target).controller('uiSelect'); //To check if target is other ui-select\n              skipFocusser = targetController && targetController !== $select; //To check if target is other ui-select\n              if (!skipFocusser) skipFocusser =  ~focusableControls.indexOf(e.target.tagName.toLowerCase()); //Check if target is input, button or textarea\n            } else {\n              skipFocusser = true;\n            }\n            $select.close(skipFocusser);\n            scope.$digest();\n          }\n          $select.clickTriggeredSelect = false;\n        }\n\n        // See Click everywhere but here event http://stackoverflow.com/questions/12931369\n        $document.on('click', onDocumentClick);\n\n        scope.$on('$destroy', function() {\n          $document.off('click', onDocumentClick);\n        });\n\n        // Move transcluded elements to their correct position in main template\n        transcludeFn(scope, function(clone) {\n          // See Transclude in AngularJS http://blog.omkarpatil.com/2012/11/transclude-in-angularjs.html\n\n          // One day jqLite will be replaced by jQuery and we will be able to write:\n          // var transcludedElement = clone.filter('.my-class')\n          // instead of creating a hackish DOM element:\n          var transcluded = angular.element('<div>').append(clone);\n\n          var transcludedMatch = transcluded.querySelectorAll('.ui-select-match');\n          transcludedMatch.removeAttr('ui-select-match'); //To avoid loop in case directive as attr\n          transcludedMatch.removeAttr('data-ui-select-match'); // Properly handle HTML5 data-attributes\n          if (transcludedMatch.length !== 1) {\n            throw uiSelectMinErr('transcluded', \"Expected 1 .ui-select-match but got '{0}'.\", transcludedMatch.length);\n          }\n          element.querySelectorAll('.ui-select-match').replaceWith(transcludedMatch);\n\n          var transcludedChoices = transcluded.querySelectorAll('.ui-select-choices');\n          transcludedChoices.removeAttr('ui-select-choices'); //To avoid loop in case directive as attr\n          transcludedChoices.removeAttr('data-ui-select-choices'); // Properly handle HTML5 data-attributes\n          if (transcludedChoices.length !== 1) {\n            throw uiSelectMinErr('transcluded', \"Expected 1 .ui-select-choices but got '{0}'.\", transcludedChoices.length);\n          }\n          element.querySelectorAll('.ui-select-choices').replaceWith(transcludedChoices);\n\n          var transcludedNoChoice = transcluded.querySelectorAll('.ui-select-no-choice');\n          transcludedNoChoice.removeAttr('ui-select-no-choice'); //To avoid loop in case directive as attr\n          transcludedNoChoice.removeAttr('data-ui-select-no-choice'); // Properly handle HTML5 data-attributes\n          if (transcludedNoChoice.length == 1) {\n            element.querySelectorAll('.ui-select-no-choice').replaceWith(transcludedNoChoice);\n          }\n        });\n\n        // Support for appending the select field to the body when its open\n        var appendToBody = scope.$eval(attrs.appendToBody);\n        if (appendToBody !== undefined ? appendToBody : uiSelectConfig.appendToBody) {\n          scope.$watch('$select.open', function(isOpen) {\n            if (isOpen) {\n              positionDropdown();\n            } else {\n              resetDropdown();\n            }\n          });\n\n          // Move the dropdown back to its original location when the scope is destroyed. Otherwise\n          // it might stick around when the user routes away or the select field is otherwise removed\n          scope.$on('$destroy', function() {\n            resetDropdown();\n          });\n        }\n\n        // Hold on to a reference to the .ui-select-container element for appendToBody support\n        var placeholder = null,\n            originalWidth = '';\n\n        function positionDropdown() {\n          // Remember the absolute position of the element\n          var offset = uisOffset(element);\n\n          // Clone the element into a placeholder element to take its original place in the DOM\n          placeholder = angular.element('<div class=\"ui-select-placeholder\"></div>');\n          placeholder[0].style.width = offset.width + 'px';\n          placeholder[0].style.height = offset.height + 'px';\n          element.after(placeholder);\n\n          // Remember the original value of the element width inline style, so it can be restored\n          // when the dropdown is closed\n          originalWidth = element[0].style.width;\n\n          // Now move the actual dropdown element to the end of the body\n          $document.find('body').append(element);\n\n          element[0].style.position = 'absolute';\n          element[0].style.left = offset.left + 'px';\n          element[0].style.top = offset.top + 'px';\n          element[0].style.width = offset.width + 'px';\n        }\n\n        function resetDropdown() {\n          if (placeholder === null) {\n            // The dropdown has not actually been display yet, so there's nothing to reset\n            return;\n          }\n\n          // Move the dropdown element back to its original location in the DOM\n          placeholder.replaceWith(element);\n          placeholder = null;\n\n          element[0].style.position = '';\n          element[0].style.left = '';\n          element[0].style.top = '';\n          element[0].style.width = originalWidth;\n\n          // Set focus back on to the moved element\n          $select.setFocus();\n        }\n\n        // Hold on to a reference to the .ui-select-dropdown element for direction support.\n        var dropdown = null,\n            directionUpClassName = 'direction-up';\n\n        // Support changing the direction of the dropdown if there isn't enough space to render it.\n        scope.$watch('$select.open', function() {\n\n          if ($select.dropdownPosition === 'auto' || $select.dropdownPosition === 'up'){\n            scope.calculateDropdownPos();\n          }\n\n        });\n\n        var setDropdownPosUp = function(offset, offsetDropdown){\n\n          offset = offset || uisOffset(element);\n          offsetDropdown = offsetDropdown || uisOffset(dropdown);\n\n          dropdown[0].style.position = 'absolute';\n          dropdown[0].style.top = (offsetDropdown.height * -1) + 'px';\n          element.addClass(directionUpClassName);\n\n        };\n\n        var setDropdownPosDown = function(offset, offsetDropdown){\n\n          element.removeClass(directionUpClassName);\n\n          offset = offset || uisOffset(element);\n          offsetDropdown = offsetDropdown || uisOffset(dropdown);\n\n          dropdown[0].style.position = '';\n          dropdown[0].style.top = '';\n\n        };\n\n        var calculateDropdownPosAfterAnimation = function() {\n          // Delay positioning the dropdown until all choices have been added so its height is correct.\n          $timeout(function() {\n            if ($select.dropdownPosition === 'up') {\n              //Go UP\n              setDropdownPosUp();\n            } else {\n              //AUTO\n              element.removeClass(directionUpClassName);\n\n              var offset = uisOffset(element);\n              var offsetDropdown = uisOffset(dropdown);\n\n              //https://code.google.com/p/chromium/issues/detail?id=342307#c4\n              var scrollTop = $document[0].documentElement.scrollTop || $document[0].body.scrollTop; //To make it cross browser (blink, webkit, IE, Firefox).\n\n              // Determine if the direction of the dropdown needs to be changed.\n              if (offset.top + offset.height + offsetDropdown.height > scrollTop + $document[0].documentElement.clientHeight) {\n                //Go UP\n                setDropdownPosUp(offset, offsetDropdown);\n              }else{\n                //Go DOWN\n                setDropdownPosDown(offset, offsetDropdown);\n              }\n            }\n\n            // Display the dropdown once it has been positioned.\n            dropdown[0].style.opacity = 1;\n          });\n        };\n\n        var opened = false;\n        \n        scope.calculateDropdownPos = function() {\n          if ($select.open) {\n            dropdown = angular.element(element).querySelectorAll('.ui-select-dropdown');\n\n            if (dropdown.length === 0) {\n              return;\n            }\n\n           // Hide the dropdown so there is no flicker until $timeout is done executing.\n           if ($select.search === '' && !opened) {\n              dropdown[0].style.opacity = 0;\n              opened = true;\n           }\n\n            if (!uisOffset(dropdown).height && $select.$animate && $select.$animate.on && $select.$animate.enabled(dropdown)) {\n              var needsCalculated = true;\n\n              $select.$animate.on('enter', dropdown, function (elem, phase) {\n                if (phase === 'close' && needsCalculated) {\n                  calculateDropdownPosAfterAnimation();\n                  needsCalculated = false;\n                }\n              });\n            } else {\n              calculateDropdownPosAfterAnimation();\n            }\n          } else {\n            if (dropdown === null || dropdown.length === 0) {\n              return;\n            }\n\n            // Reset the position of the dropdown.\n            dropdown[0].style.opacity = 0;\n            dropdown[0].style.position = '';\n            dropdown[0].style.top = '';\n            element.removeClass(directionUpClassName);\n          }\n        };\n      };\n    }\n  };\n}]);\n\nuis.directive('uiSelectMatch', ['uiSelectConfig', function(uiSelectConfig) {\n  return {\n    restrict: 'EA',\n    require: '^uiSelect',\n    replace: true,\n    transclude: true,\n    templateUrl: function(tElement) {\n      // Needed so the uiSelect can detect the transcluded content\n      tElement.addClass('ui-select-match');\n\n      var parent = tElement.parent();\n      // Gets theme attribute from parent (ui-select)\n      var theme = getAttribute(parent, 'theme') || uiSelectConfig.theme;\n      var multi = angular.isDefined(getAttribute(parent, 'multiple'));\n\n      return theme + (multi ? '/match-multiple.tpl.html' : '/match.tpl.html');      \n    },\n    link: function(scope, element, attrs, $select) {\n      $select.lockChoiceExpression = attrs.uiLockChoice;\n      attrs.$observe('placeholder', function(placeholder) {\n        $select.placeholder = placeholder !== undefined ? placeholder : uiSelectConfig.placeholder;\n      });\n\n      function setAllowClear(allow) {\n        $select.allowClear = (angular.isDefined(allow)) ? (allow === '') ? true : (allow.toLowerCase() === 'true') : false;\n      }\n\n      attrs.$observe('allowClear', setAllowClear);\n      setAllowClear(attrs.allowClear);\n\n      if($select.multiple){\n        $select.sizeSearchInput();\n      }\n\n    }\n  };\n\n  function getAttribute(elem, attribute) {\n    if (elem[0].hasAttribute(attribute))\n      return elem.attr(attribute);\n\n    if (elem[0].hasAttribute('data-' + attribute))\n      return elem.attr('data-' + attribute);\n\n    if (elem[0].hasAttribute('x-' + attribute))\n      return elem.attr('x-' + attribute);\n  }\n}]);\n\nuis.directive('uiSelectMultiple', ['uiSelectMinErr','$timeout', function(uiSelectMinErr, $timeout) {\n  return {\n    restrict: 'EA',\n    require: ['^uiSelect', '^ngModel'],\n\n    controller: ['$scope','$timeout', function($scope, $timeout){\n\n      var ctrl = this,\n          $select = $scope.$select,\n          ngModel;\n\n      if (angular.isUndefined($select.selected))\n        $select.selected = [];\n\n      //Wait for link fn to inject it\n      $scope.$evalAsync(function(){ ngModel = $scope.ngModel; });\n\n      ctrl.activeMatchIndex = -1;\n\n      ctrl.updateModel = function(){\n        ngModel.$setViewValue(Date.now()); //Set timestamp as a unique string to force changes\n        ctrl.refreshComponent();\n      };\n\n      ctrl.refreshComponent = function(){\n        //Remove already selected items\n        //e.g. When user clicks on a selection, the selected array changes and\n        //the dropdown should remove that item\n        if($select.refreshItems){\n          $select.refreshItems();\n        }\n        if($select.sizeSearchInput){\n          $select.sizeSearchInput();\n        }\n      };\n\n      // Remove item from multiple select\n      ctrl.removeChoice = function(index){\n\n        // if the choice is locked, don't remove it\n        if($select.isLocked(null, index)) return false;\n\n        var removedChoice = $select.selected[index];\n\n        var locals = {};\n        locals[$select.parserResult.itemName] = removedChoice;\n\n        $select.selected.splice(index, 1);\n        ctrl.activeMatchIndex = -1;\n        $select.sizeSearchInput();\n\n        // Give some time for scope propagation.\n        $timeout(function(){\n          $select.onRemoveCallback($scope, {\n            $item: removedChoice,\n            $model: $select.parserResult.modelMapper($scope, locals)\n          });\n        });\n\n        ctrl.updateModel();\n\n        return true;\n      };\n\n      ctrl.getPlaceholder = function(){\n        //Refactor single?\n        if($select.selected && $select.selected.length) return;\n        return $select.placeholder;\n      };\n\n\n    }],\n    controllerAs: '$selectMultiple',\n\n    link: function(scope, element, attrs, ctrls) {\n\n      var $select = ctrls[0];\n      var ngModel = scope.ngModel = ctrls[1];\n      var $selectMultiple = scope.$selectMultiple;\n\n      //$select.selected = raw selected objects (ignoring any property binding)\n\n      $select.multiple = true;\n\n      //Input that will handle focus\n      $select.focusInput = $select.searchInput;\n\n      //Properly check for empty if set to multiple\n      ngModel.$isEmpty = function(value) {\n        return !value || value.length === 0;\n      };\n\n      //From view --> model\n      ngModel.$parsers.unshift(function () {\n        var locals = {},\n            result,\n            resultMultiple = [];\n        for (var j = $select.selected.length - 1; j >= 0; j--) {\n          locals = {};\n          locals[$select.parserResult.itemName] = $select.selected[j];\n          result = $select.parserResult.modelMapper(scope, locals);\n          resultMultiple.unshift(result);\n        }\n        return resultMultiple;\n      });\n\n      // From model --> view\n      ngModel.$formatters.unshift(function (inputValue) {\n        var data = $select.parserResult && $select.parserResult.source (scope, { $select : {search:''}}), //Overwrite $search\n            locals = {},\n            result;\n        if (!data) return inputValue;\n        var resultMultiple = [];\n        var checkFnMultiple = function(list, value){\n          if (!list || !list.length) return;\n          for (var p = list.length - 1; p >= 0; p--) {\n            locals[$select.parserResult.itemName] = list[p];\n            result = $select.parserResult.modelMapper(scope, locals);\n            if($select.parserResult.trackByExp){\n                var propsItemNameMatches = /(\\w*)\\./.exec($select.parserResult.trackByExp);\n                var matches = /\\.([^\\s]+)/.exec($select.parserResult.trackByExp);\n                if(propsItemNameMatches && propsItemNameMatches.length > 0 && propsItemNameMatches[1] == $select.parserResult.itemName){\n                  if(matches && matches.length>0 && result[matches[1]] == value[matches[1]]){\n                      resultMultiple.unshift(list[p]);\n                      return true;\n                  }\n                }\n            }\n            if (angular.equals(result,value)){\n              resultMultiple.unshift(list[p]);\n              return true;\n            }\n          }\n          return false;\n        };\n        if (!inputValue) return resultMultiple; //If ngModel was undefined\n        for (var k = inputValue.length - 1; k >= 0; k--) {\n          //Check model array of currently selected items\n          if (!checkFnMultiple($select.selected, inputValue[k])){\n            //Check model array of all items available\n            if (!checkFnMultiple(data, inputValue[k])){\n              //If not found on previous lists, just add it directly to resultMultiple\n              resultMultiple.unshift(inputValue[k]);\n            }\n          }\n        }\n        return resultMultiple;\n      });\n\n      //Watch for external model changes\n      scope.$watchCollection(function(){ return ngModel.$modelValue; }, function(newValue, oldValue) {\n        if (oldValue != newValue){\n          //update the view value with fresh data from items, if there is a valid model value\n          if(angular.isDefined(ngModel.$modelValue)) {\n            ngModel.$modelValue = null; //Force scope model value and ngModel value to be out of sync to re-run formatters\n          }\n          $selectMultiple.refreshComponent();\n        }\n      });\n\n      ngModel.$render = function() {\n        // Make sure that model value is array\n        if(!angular.isArray(ngModel.$viewValue)){\n          // Have tolerance for null or undefined values\n          if (isNil(ngModel.$viewValue)){\n            ngModel.$viewValue = [];\n          } else {\n            throw uiSelectMinErr('multiarr', \"Expected model value to be array but got '{0}'\", ngModel.$viewValue);\n          }\n        }\n        $select.selected = ngModel.$viewValue;\n        $selectMultiple.refreshComponent();\n        scope.$evalAsync(); //To force $digest\n      };\n\n      scope.$on('uis:select', function (event, item) {\n        if($select.selected.length >= $select.limit) {\n          return;\n        }\n        $select.selected.push(item);\n        var locals = {};\n        locals[$select.parserResult.itemName] = item;\n\n        $timeout(function(){\n          $select.onSelectCallback(scope, {\n            $item: item,\n            $model: $select.parserResult.modelMapper(scope, locals)\n          });\n        });\n        $selectMultiple.updateModel();\n      });\n\n      scope.$on('uis:activate', function () {\n        $selectMultiple.activeMatchIndex = -1;\n      });\n\n      scope.$watch('$select.disabled', function(newValue, oldValue) {\n        // As the search input field may now become visible, it may be necessary to recompute its size\n        if (oldValue && !newValue) $select.sizeSearchInput();\n      });\n\n      $select.searchInput.on('keydown', function(e) {\n        var key = e.which;\n        scope.$apply(function() {\n          var processed = false;\n          // var tagged = false; //Checkme\n          if(KEY.isHorizontalMovement(key)){\n            processed = _handleMatchSelection(key);\n          }\n          if (processed  && key != KEY.TAB) {\n            //TODO Check si el tab selecciona aun correctamente\n            //Crear test\n            e.preventDefault();\n            e.stopPropagation();\n          }\n        });\n      });\n      function _getCaretPosition(el) {\n        if(angular.isNumber(el.selectionStart)) return el.selectionStart;\n        // selectionStart is not supported in IE8 and we don't want hacky workarounds so we compromise\n        else return el.value.length;\n      }\n      // Handles selected options in \"multiple\" mode\n      function _handleMatchSelection(key){\n        var caretPosition = _getCaretPosition($select.searchInput[0]),\n            length = $select.selected.length,\n            // none  = -1,\n            first = 0,\n            last  = length-1,\n            curr  = $selectMultiple.activeMatchIndex,\n            next  = $selectMultiple.activeMatchIndex+1,\n            prev  = $selectMultiple.activeMatchIndex-1,\n            newIndex = curr;\n\n        if(caretPosition > 0 || ($select.search.length && key == KEY.RIGHT)) return false;\n\n        $select.close();\n\n        function getNewActiveMatchIndex(){\n          switch(key){\n            case KEY.LEFT:\n              // Select previous/first item\n              if(~$selectMultiple.activeMatchIndex) return prev;\n              // Select last item\n              else return last;\n              break;\n            case KEY.RIGHT:\n              // Open drop-down\n              if(!~$selectMultiple.activeMatchIndex || curr === last){\n                $select.activate();\n                return false;\n              }\n              // Select next/last item\n              else return next;\n              break;\n            case KEY.BACKSPACE:\n              // Remove selected item and select previous/first\n              if(~$selectMultiple.activeMatchIndex){\n                if($selectMultiple.removeChoice(curr)) {\n                  return prev;\n                } else {\n                  return curr;\n                }\n\n              } else {\n                // If nothing yet selected, select last item\n                return last;\n              }\n              break;\n            case KEY.DELETE:\n              // Remove selected item and select next item\n              if(~$selectMultiple.activeMatchIndex){\n                $selectMultiple.removeChoice($selectMultiple.activeMatchIndex);\n                return curr;\n              }\n              else return false;\n          }\n        }\n\n        newIndex = getNewActiveMatchIndex();\n\n        if(!$select.selected.length || newIndex === false) $selectMultiple.activeMatchIndex = -1;\n        else $selectMultiple.activeMatchIndex = Math.min(last,Math.max(first,newIndex));\n\n        return true;\n      }\n\n      $select.searchInput.on('keyup', function(e) {\n\n        if ( ! KEY.isVerticalMovement(e.which) ) {\n          scope.$evalAsync( function () {\n            $select.activeIndex = $select.taggingLabel === false ? -1 : 0;\n          });\n        }\n        // Push a \"create new\" item into array if there is a search string\n        if ( $select.tagging.isActivated && $select.search.length > 0 ) {\n\n          // return early with these keys\n          if (e.which === KEY.TAB || KEY.isControl(e) || KEY.isFunctionKey(e) || e.which === KEY.ESC || KEY.isVerticalMovement(e.which) ) {\n            return;\n          }\n          // always reset the activeIndex to the first item when tagging\n          $select.activeIndex = $select.taggingLabel === false ? -1 : 0;\n          // taggingLabel === false bypasses all of this\n          if ($select.taggingLabel === false) return;\n\n          var items = angular.copy( $select.items );\n          var stashArr = angular.copy( $select.items );\n          var newItem;\n          var item;\n          var hasTag = false;\n          var dupeIndex = -1;\n          var tagItems;\n          var tagItem;\n\n          // case for object tagging via transform `$select.tagging.fct` function\n          if ( $select.tagging.fct !== undefined) {\n            tagItems = $select.$filter('filter')(items,{'isTag': true});\n            if ( tagItems.length > 0 ) {\n              tagItem = tagItems[0];\n            }\n            // remove the first element, if it has the `isTag` prop we generate a new one with each keyup, shaving the previous\n            if ( items.length > 0 && tagItem ) {\n              hasTag = true;\n              items = items.slice(1,items.length);\n              stashArr = stashArr.slice(1,stashArr.length);\n            }\n            newItem = $select.tagging.fct($select.search);\n            // verify the new tag doesn't match the value of a possible selection choice or an already selected item.\n            if (\n              stashArr.some(function (origItem) {\n                 return angular.equals(origItem, newItem);\n              }) ||\n              $select.selected.some(function (origItem) {\n                return angular.equals(origItem, newItem);\n              })\n            ) {\n              scope.$evalAsync(function () {\n                $select.activeIndex = 0;\n                $select.items = items;\n              });\n              return;\n            }\n            if (newItem) newItem.isTag = true;\n          // handle newItem string and stripping dupes in tagging string context\n          } else {\n            // find any tagging items already in the $select.items array and store them\n            tagItems = $select.$filter('filter')(items,function (item) {\n              return item.match($select.taggingLabel);\n            });\n            if ( tagItems.length > 0 ) {\n              tagItem = tagItems[0];\n            }\n            item = items[0];\n            // remove existing tag item if found (should only ever be one tag item)\n            if ( item !== undefined && items.length > 0 && tagItem ) {\n              hasTag = true;\n              items = items.slice(1,items.length);\n              stashArr = stashArr.slice(1,stashArr.length);\n            }\n            newItem = $select.search+' '+$select.taggingLabel;\n            if ( _findApproxDupe($select.selected, $select.search) > -1 ) {\n              return;\n            }\n            // verify the the tag doesn't match the value of an existing item from\n            // the searched data set or the items already selected\n            if ( _findCaseInsensitiveDupe(stashArr.concat($select.selected)) ) {\n              // if there is a tag from prev iteration, strip it / queue the change\n              // and return early\n              if ( hasTag ) {\n                items = stashArr;\n                scope.$evalAsync( function () {\n                  $select.activeIndex = 0;\n                  $select.items = items;\n                });\n              }\n              return;\n            }\n            if ( _findCaseInsensitiveDupe(stashArr) ) {\n              // if there is a tag from prev iteration, strip it\n              if ( hasTag ) {\n                $select.items = stashArr.slice(1,stashArr.length);\n              }\n              return;\n            }\n          }\n          if ( hasTag ) dupeIndex = _findApproxDupe($select.selected, newItem);\n          // dupe found, shave the first item\n          if ( dupeIndex > -1 ) {\n            items = items.slice(dupeIndex+1,items.length-1);\n          } else {\n            items = [];\n            if (newItem) items.push(newItem);\n            items = items.concat(stashArr);\n          }\n          scope.$evalAsync( function () {\n            $select.activeIndex = 0;\n            $select.items = items;\n\n            if ($select.isGrouped) {\n              // update item references in groups, so that indexOf will work after angular.copy\n              var itemsWithoutTag = newItem ? items.slice(1) : items;\n              $select.setItemsFn(itemsWithoutTag);\n              if (newItem) {\n                // add tag item as a new group\n                $select.items.unshift(newItem);\n                $select.groups.unshift({name: '', items: [newItem], tagging: true});\n              }\n            }\n          });\n        }\n      });\n      function _findCaseInsensitiveDupe(arr) {\n        if ( arr === undefined || $select.search === undefined ) {\n          return false;\n        }\n        var hasDupe = arr.filter( function (origItem) {\n          if ( $select.search.toUpperCase() === undefined || origItem === undefined ) {\n            return false;\n          }\n          return origItem.toUpperCase() === $select.search.toUpperCase();\n        }).length > 0;\n\n        return hasDupe;\n      }\n      function _findApproxDupe(haystack, needle) {\n        var dupeIndex = -1;\n        if(angular.isArray(haystack)) {\n          var tempArr = angular.copy(haystack);\n          for (var i = 0; i <tempArr.length; i++) {\n            // handle the simple string version of tagging\n            if ( $select.tagging.fct === undefined ) {\n              // search the array for the match\n              if ( tempArr[i]+' '+$select.taggingLabel === needle ) {\n              dupeIndex = i;\n              }\n            // handle the object tagging implementation\n            } else {\n              var mockObj = tempArr[i];\n              if (angular.isObject(mockObj)) {\n                mockObj.isTag = true;\n              }\n              if ( angular.equals(mockObj, needle) ) {\n                dupeIndex = i;\n              }\n            }\n          }\n        }\n        return dupeIndex;\n      }\n\n      $select.searchInput.on('blur', function() {\n        $timeout(function() {\n          $selectMultiple.activeMatchIndex = -1;\n        });\n      });\n\n    }\n  };\n}]);\n\nuis.directive('uiSelectNoChoice',\n    ['uiSelectConfig', function (uiSelectConfig) {\n        return {\n            restrict: 'EA',\n            require: '^uiSelect',\n            replace: true,\n            transclude: true,\n            templateUrl: function (tElement) {\n                // Needed so the uiSelect can detect the transcluded content\n                tElement.addClass('ui-select-no-choice');\n      \n                // Gets theme attribute from parent (ui-select)\n                var theme = tElement.parent().attr('theme') || uiSelectConfig.theme;\n                return theme + '/no-choice.tpl.html';\n            }\n        };\n    }]);\n\nuis.directive('uiSelectSingle', ['$timeout','$compile', function($timeout, $compile) {\n  return {\n    restrict: 'EA',\n    require: ['^uiSelect', '^ngModel'],\n    link: function(scope, element, attrs, ctrls) {\n\n      var $select = ctrls[0];\n      var ngModel = ctrls[1];\n\n      //From view --> model\n      ngModel.$parsers.unshift(function (inputValue) {\n        // Keep original value for undefined and null\n        if (isNil(inputValue)) {\n          return inputValue;\n        }\n\n        var locals = {},\n            result;\n        locals[$select.parserResult.itemName] = inputValue;\n        result = $select.parserResult.modelMapper(scope, locals);\n        return result;\n      });\n\n      //From model --> view\n      ngModel.$formatters.unshift(function (inputValue) {\n        // Keep original value for undefined and null\n        if (isNil(inputValue)) {\n          return inputValue;\n        }\n\n        var data = $select.parserResult && $select.parserResult.source (scope, { $select : {search:''}}), //Overwrite $search\n            locals = {},\n            result;\n        if (data){\n          var checkFnSingle = function(d){\n            locals[$select.parserResult.itemName] = d;\n            result = $select.parserResult.modelMapper(scope, locals);\n            return result === inputValue;\n          };\n          //If possible pass same object stored in $select.selected\n          if ($select.selected && checkFnSingle($select.selected)) {\n            return $select.selected;\n          }\n          for (var i = data.length - 1; i >= 0; i--) {\n            if (checkFnSingle(data[i])) return data[i];\n          }\n        }\n        return inputValue;\n      });\n\n      //Update viewValue if model change\n      scope.$watch('$select.selected', function(newValue) {\n        if (ngModel.$viewValue !== newValue) {\n          ngModel.$setViewValue(newValue);\n        }\n      });\n\n      ngModel.$render = function() {\n        $select.selected = ngModel.$viewValue;\n      };\n\n      scope.$on('uis:select', function (event, item) {\n        $select.selected = item;\n        var locals = {};\n        locals[$select.parserResult.itemName] = item;\n\n        $timeout(function() {\n          $select.onSelectCallback(scope, {\n            $item: item,\n            $model: isNil(item) ? item : $select.parserResult.modelMapper(scope, locals)\n          });\n        });\n      });\n\n      scope.$on('uis:close', function (event, skipFocusser) {\n        $timeout(function(){\n          $select.focusser.prop('disabled', false);\n          if (!skipFocusser) $select.focusser[0].focus();\n        },0,false);\n      });\n\n      scope.$on('uis:activate', function () {\n        focusser.prop('disabled', true); //Will reactivate it on .close()\n      });\n\n      //Idea from: https://github.com/ivaynberg/select2/blob/79b5bf6db918d7560bdd959109b7bcfb47edaf43/select2.js#L1954\n      var focusser = angular.element(\"<input ng-disabled='$select.disabled' class='ui-select-focusser ui-select-offscreen' type='text' id='{{ $select.focusserId }}' aria-label='{{ $select.focusserTitle }}' aria-haspopup='true' role='button' />\");\n      $compile(focusser)(scope);\n      $select.focusser = focusser;\n\n      //Input that will handle focus\n      $select.focusInput = focusser;\n\n      element.parent().append(focusser);\n      focusser.bind(\"focus\", function(){\n        scope.$evalAsync(function(){\n          $select.focus = true;\n        });\n      });\n      focusser.bind(\"blur\", function(){\n        scope.$evalAsync(function(){\n          $select.focus = false;\n        });\n      });\n      focusser.bind(\"keydown\", function(e){\n\n        if (e.which === KEY.BACKSPACE && $select.backspaceReset !== false) {\n          e.preventDefault();\n          e.stopPropagation();\n          $select.select(undefined);\n          scope.$apply();\n          return;\n        }\n\n        if (e.which === KEY.TAB || KEY.isControl(e) || KEY.isFunctionKey(e) || e.which === KEY.ESC) {\n          return;\n        }\n\n        if (e.which == KEY.DOWN  || e.which == KEY.UP || e.which == KEY.ENTER || e.which == KEY.SPACE){\n          e.preventDefault();\n          e.stopPropagation();\n          $select.activate();\n        }\n\n        scope.$digest();\n      });\n\n      focusser.bind(\"keyup input\", function(e){\n\n        if (e.which === KEY.TAB || KEY.isControl(e) || KEY.isFunctionKey(e) || e.which === KEY.ESC || e.which == KEY.ENTER || e.which === KEY.BACKSPACE) {\n          return;\n        }\n\n        $select.activate(focusser.val()); //User pressed some regular key, so we pass it to the search input\n        focusser.val('');\n        scope.$digest();\n\n      });\n\n\n    }\n  };\n}]);\n\n// Make multiple matches sortable\nuis.directive('uiSelectSort', ['$timeout', 'uiSelectConfig', 'uiSelectMinErr', function($timeout, uiSelectConfig, uiSelectMinErr) {\n  return {\n    require: ['^^uiSelect', '^ngModel'],\n    link: function(scope, element, attrs, ctrls) {\n      if (scope[attrs.uiSelectSort] === null) {\n        throw uiSelectMinErr('sort', 'Expected a list to sort');\n      }\n\n      var $select = ctrls[0];\n      var $ngModel = ctrls[1];\n\n      var options = angular.extend({\n          axis: 'horizontal'\n        },\n        scope.$eval(attrs.uiSelectSortOptions));\n\n      var axis = options.axis;\n      var draggingClassName = 'dragging';\n      var droppingClassName = 'dropping';\n      var droppingBeforeClassName = 'dropping-before';\n      var droppingAfterClassName = 'dropping-after';\n\n      scope.$watch(function(){\n        return $select.sortable;\n      }, function(newValue){\n        if (newValue) {\n          element.attr('draggable', true);\n        } else {\n          element.removeAttr('draggable');\n        }\n      });\n\n      element.on('dragstart', function(event) {\n        element.addClass(draggingClassName);\n\n        (event.dataTransfer || event.originalEvent.dataTransfer).setData('text', scope.$index.toString());\n      });\n\n      element.on('dragend', function() {\n        removeClass(draggingClassName);\n      });\n\n      var move = function(from, to) {\n        /*jshint validthis: true */\n        this.splice(to, 0, this.splice(from, 1)[0]);\n      };\n\n      var removeClass = function(className) {\n        angular.forEach($select.$element.querySelectorAll('.' + className), function(el){\n          angular.element(el).removeClass(className);\n        });\n      };\n\n      var dragOverHandler = function(event) {\n        event.preventDefault();\n\n        var offset = axis === 'vertical' ? event.offsetY || event.layerY || (event.originalEvent ? event.originalEvent.offsetY : 0) : event.offsetX || event.layerX || (event.originalEvent ? event.originalEvent.offsetX : 0);\n\n        if (offset < (this[axis === 'vertical' ? 'offsetHeight' : 'offsetWidth'] / 2)) {\n          removeClass(droppingAfterClassName);\n          element.addClass(droppingBeforeClassName);\n\n        } else {\n          removeClass(droppingBeforeClassName);\n          element.addClass(droppingAfterClassName);\n        }\n      };\n\n      var dropTimeout;\n\n      var dropHandler = function(event) {\n        event.preventDefault();\n\n        var droppedItemIndex = parseInt((event.dataTransfer || event.originalEvent.dataTransfer).getData('text'), 10);\n\n        // prevent event firing multiple times in firefox\n        $timeout.cancel(dropTimeout);\n        dropTimeout = $timeout(function() {\n          _dropHandler(droppedItemIndex);\n        }, 20);\n      };\n\n      var _dropHandler = function(droppedItemIndex) {\n        var theList = scope.$eval(attrs.uiSelectSort);\n        var itemToMove = theList[droppedItemIndex];\n        var newIndex = null;\n\n        if (element.hasClass(droppingBeforeClassName)) {\n          if (droppedItemIndex < scope.$index) {\n            newIndex = scope.$index - 1;\n          } else {\n            newIndex = scope.$index;\n          }\n        } else {\n          if (droppedItemIndex < scope.$index) {\n            newIndex = scope.$index;\n          } else {\n            newIndex = scope.$index + 1;\n          }\n        }\n\n        move.apply(theList, [droppedItemIndex, newIndex]);\n\n        $ngModel.$setViewValue(Date.now());\n\n        scope.$apply(function() {\n          scope.$emit('uiSelectSort:change', {\n            array: theList,\n            item: itemToMove,\n            from: droppedItemIndex,\n            to: newIndex\n          });\n        });\n\n        removeClass(droppingClassName);\n        removeClass(droppingBeforeClassName);\n        removeClass(droppingAfterClassName);\n\n        element.off('drop', dropHandler);\n      };\n\n      element.on('dragenter', function() {\n        if (element.hasClass(draggingClassName)) {\n          return;\n        }\n\n        element.addClass(droppingClassName);\n\n        element.on('dragover', dragOverHandler);\n        element.on('drop', dropHandler);\n      });\n\n      element.on('dragleave', function(event) {\n        if (event.target != element) {\n          return;\n        }\n\n        removeClass(droppingClassName);\n        removeClass(droppingBeforeClassName);\n        removeClass(droppingAfterClassName);\n\n        element.off('dragover', dragOverHandler);\n        element.off('drop', dropHandler);\n      });\n    }\n  };\n}]);\n\nuis.directive('uisOpenClose', ['$parse', '$timeout', function ($parse, $timeout) {\n  return {\n    restrict: 'A',\n    require: 'uiSelect',\n    link: function (scope, element, attrs, $select) {\n      $select.onOpenCloseCallback = $parse(attrs.uisOpenClose);\n\n      scope.$watch('$select.open', function (isOpen, previousState) {\n        if (isOpen !== previousState) {\n          $timeout(function () {\n            $select.onOpenCloseCallback(scope, {\n              isOpen: isOpen\n            });\n          });\n        }\n      });\n    }\n  };\n}]);\n\n/**\n * Parses \"repeat\" attribute.\n *\n * Taken from AngularJS ngRepeat source code\n * See https://github.com/angular/angular.js/blob/v1.2.15/src/ng/directive/ngRepeat.js#L211\n *\n * Original discussion about parsing \"repeat\" attribute instead of fully relying on ng-repeat:\n * https://github.com/angular-ui/ui-select/commit/5dd63ad#commitcomment-5504697\n */\n\nuis.service('uisRepeatParser', ['uiSelectMinErr','$parse', function(uiSelectMinErr, $parse) {\n  var self = this;\n\n  /**\n   * Example:\n   * expression = \"address in addresses | filter: {street: $select.search} track by $index\"\n   * itemName = \"address\",\n   * source = \"addresses | filter: {street: $select.search}\",\n   * trackByExp = \"$index\",\n   */\n  self.parse = function(expression) {\n\n\n    var match;\n    //var isObjectCollection = /\\(\\s*([\\$\\w][\\$\\w]*)\\s*,\\s*([\\$\\w][\\$\\w]*)\\s*\\)/.test(expression);\n    // If an array is used as collection\n\n    // if (isObjectCollection){\n    // 000000000000000000000000000000111111111000000000000000222222222222220033333333333333333333330000444444444444444444000000000000000055555555555000000000000000000000066666666600000000\n    match = expression.match(/^\\s*(?:([\\s\\S]+?)\\s+as\\s+)?(?:([\\$\\w][\\$\\w]*)|(?:\\(\\s*([\\$\\w][\\$\\w]*)\\s*,\\s*([\\$\\w][\\$\\w]*)\\s*\\)))\\s+in\\s+(\\s*[\\s\\S]+?)?(?:\\s+track\\s+by\\s+([\\s\\S]+?))?\\s*$/);\n\n    // 1 Alias\n    // 2 Item\n    // 3 Key on (key,value)\n    // 4 Value on (key,value)\n    // 5 Source expression (including filters)\n    // 6 Track by\n\n    if (!match) {\n      throw uiSelectMinErr('iexp', \"Expected expression in form of '_item_ in _collection_[ track by _id_]' but got '{0}'.\",\n              expression);\n    }\n    \n    var source = match[5], \n        filters = '';\n\n    // When using (key,value) ui-select requires filters to be extracted, since the object\n    // is converted to an array for $select.items \n    // (in which case the filters need to be reapplied)\n    if (match[3]) {\n      // Remove any enclosing parenthesis\n      source = match[5].replace(/(^\\()|(\\)$)/g, '');\n      // match all after | but not after ||\n      var filterMatch = match[5].match(/^\\s*(?:[\\s\\S]+?)(?:[^\\|]|\\|\\|)+([\\s\\S]*)\\s*$/);\n      if(filterMatch && filterMatch[1].trim()) {\n        filters = filterMatch[1];\n        source = source.replace(filters, '');\n      }      \n    }\n\n    return {\n      itemName: match[4] || match[2], // (lhs) Left-hand side,\n      keyName: match[3], //for (key, value) syntax\n      source: $parse(source),\n      filters: filters,\n      trackByExp: match[6],\n      modelMapper: $parse(match[1] || match[4] || match[2]),\n      repeatExpression: function (grouped) {\n        var expression = this.itemName + ' in ' + (grouped ? '$group.items' : '$select.items');\n        if (this.trackByExp) {\n          expression += ' track by ' + this.trackByExp;\n        }\n        return expression;\n      } \n    };\n\n  };\n\n  self.getGroupNgRepeatExpression = function() {\n    return '$group in $select.groups track by $group.name';\n  };\n\n}]);\n\n}());\nangular.module(\"ui.select\").run([\"$templateCache\", function($templateCache) {$templateCache.put(\"bootstrap/choices.tpl.html\",\"<ul class=\\\"ui-select-choices ui-select-choices-content ui-select-dropdown dropdown-menu\\\" ng-show=\\\"$select.open && $select.items.length > 0\\\"><li class=\\\"ui-select-choices-group\\\" id=\\\"ui-select-choices-{{ $select.generatedId }}\\\"><div class=\\\"divider\\\" ng-show=\\\"$select.isGrouped && $group.name && $index > 0\\\"></div><div ng-show=\\\"$select.isGrouped && $group.name\\\" class=\\\"ui-select-choices-group-label dropdown-header\\\" ng-bind=\\\"$group.name\\\"></div><div ng-attr-id=\\\"ui-select-choices-row-{{ $select.generatedId }}-{{$index}}\\\" class=\\\"ui-select-choices-row\\\" ng-class=\\\"{active: $select.isActive(this), disabled: $select.isDisabled(this)}\\\" role=\\\"option\\\"><span class=\\\"ui-select-choices-row-inner\\\"></span></div></li></ul>\");\n$templateCache.put(\"bootstrap/match-multiple.tpl.html\",\"<span class=\\\"ui-select-match\\\"><span ng-repeat=\\\"$item in $select.selected track by $index\\\"><span class=\\\"ui-select-match-item btn btn-default btn-xs\\\" tabindex=\\\"-1\\\" type=\\\"button\\\" ng-disabled=\\\"$select.disabled\\\" ng-click=\\\"$selectMultiple.activeMatchIndex = $index;\\\" ng-class=\\\"{\\'btn-primary\\':$selectMultiple.activeMatchIndex === $index, \\'select-locked\\':$select.isLocked(this, $index)}\\\" ui-select-sort=\\\"$select.selected\\\"><span class=\\\"close ui-select-match-close\\\" ng-hide=\\\"$select.disabled\\\" ng-click=\\\"$selectMultiple.removeChoice($index)\\\">&nbsp;&times;</span> <span uis-transclude-append=\\\"\\\"></span></span></span></span>\");\n$templateCache.put(\"bootstrap/match.tpl.html\",\"<div class=\\\"ui-select-match\\\" ng-hide=\\\"$select.open && $select.searchEnabled\\\" ng-disabled=\\\"$select.disabled\\\" ng-class=\\\"{\\'btn-default-focus\\':$select.focus}\\\"><span tabindex=\\\"-1\\\" class=\\\"btn btn-default form-control ui-select-toggle\\\" aria-label=\\\"{{ $select.baseTitle }} activate\\\" ng-disabled=\\\"$select.disabled\\\" ng-click=\\\"$select.activate()\\\" style=\\\"outline: 0;\\\"><span ng-show=\\\"$select.isEmpty()\\\" class=\\\"ui-select-placeholder text-muted\\\">{{$select.placeholder}}</span> <span ng-hide=\\\"$select.isEmpty()\\\" class=\\\"ui-select-match-text pull-left\\\" ng-class=\\\"{\\'ui-select-allow-clear\\': $select.allowClear && !$select.isEmpty()}\\\" ng-transclude=\\\"\\\"></span> <i class=\\\"caret pull-right\\\" ng-click=\\\"$select.toggle($event)\\\"></i> <a ng-show=\\\"$select.allowClear && !$select.isEmpty() && ($select.disabled !== true)\\\" aria-label=\\\"{{ $select.baseTitle }} clear\\\" style=\\\"margin-right: 10px\\\" ng-click=\\\"$select.clear($event)\\\" class=\\\"btn btn-xs btn-link pull-right\\\"><i class=\\\"glyphicon glyphicon-remove\\\" aria-hidden=\\\"true\\\"></i></a></span></div>\");\n$templateCache.put(\"bootstrap/no-choice.tpl.html\",\"<ul class=\\\"ui-select-no-choice dropdown-menu\\\" ng-show=\\\"$select.items.length == 0\\\"><li ng-transclude=\\\"\\\"></li></ul>\");\n$templateCache.put(\"bootstrap/select-multiple.tpl.html\",\"<div class=\\\"ui-select-container ui-select-multiple ui-select-bootstrap dropdown form-control\\\" ng-class=\\\"{open: $select.open}\\\"><div><div class=\\\"ui-select-match\\\"></div><input type=\\\"search\\\" autocomplete=\\\"off\\\" autocorrect=\\\"off\\\" autocapitalize=\\\"off\\\" spellcheck=\\\"false\\\" class=\\\"ui-select-search input-xs\\\" placeholder=\\\"{{$selectMultiple.getPlaceholder()}}\\\" ng-disabled=\\\"$select.disabled\\\" ng-click=\\\"$select.activate()\\\" ng-model=\\\"$select.search\\\" role=\\\"combobox\\\" aria-expanded=\\\"{{$select.open}}\\\" aria-label=\\\"{{$select.baseTitle}}\\\" ng-class=\\\"{\\'spinner\\': $select.refreshing}\\\" ondrop=\\\"return false;\\\"></div><div class=\\\"ui-select-choices\\\"></div><div class=\\\"ui-select-no-choice\\\"></div></div>\");\n$templateCache.put(\"bootstrap/select.tpl.html\",\"<div class=\\\"ui-select-container ui-select-bootstrap dropdown\\\" ng-class=\\\"{open: $select.open}\\\"><div class=\\\"ui-select-match\\\"></div><span ng-show=\\\"$select.open && $select.refreshing && $select.spinnerEnabled\\\" class=\\\"ui-select-refreshing {{$select.spinnerClass}}\\\"></span> <input type=\\\"search\\\" autocomplete=\\\"off\\\" tabindex=\\\"-1\\\" aria-expanded=\\\"true\\\" aria-label=\\\"{{ $select.baseTitle }}\\\" aria-owns=\\\"ui-select-choices-{{ $select.generatedId }}\\\" class=\\\"form-control ui-select-search\\\" ng-class=\\\"{ \\'ui-select-search-hidden\\' : !$select.searchEnabled }\\\" placeholder=\\\"{{$select.placeholder}}\\\" ng-model=\\\"$select.search\\\" ng-show=\\\"$select.open\\\"><div class=\\\"ui-select-choices\\\"></div><div class=\\\"ui-select-no-choice\\\"></div></div>\");\n$templateCache.put(\"select2/choices.tpl.html\",\"<ul tabindex=\\\"-1\\\" class=\\\"ui-select-choices ui-select-choices-content select2-results\\\"><li class=\\\"ui-select-choices-group\\\" ng-class=\\\"{\\'select2-result-with-children\\': $select.choiceGrouped($group) }\\\"><div ng-show=\\\"$select.choiceGrouped($group)\\\" class=\\\"ui-select-choices-group-label select2-result-label\\\" ng-bind=\\\"$group.name\\\"></div><ul id=\\\"ui-select-choices-{{ $select.generatedId }}\\\" ng-class=\\\"{\\'select2-result-sub\\': $select.choiceGrouped($group), \\'select2-result-single\\': !$select.choiceGrouped($group) }\\\"><li role=\\\"option\\\" ng-attr-id=\\\"ui-select-choices-row-{{ $select.generatedId }}-{{$index}}\\\" class=\\\"ui-select-choices-row\\\" ng-class=\\\"{\\'select2-highlighted\\': $select.isActive(this), \\'select2-disabled\\': $select.isDisabled(this)}\\\"><div class=\\\"select2-result-label ui-select-choices-row-inner\\\"></div></li></ul></li></ul>\");\n$templateCache.put(\"select2/match-multiple.tpl.html\",\"<span class=\\\"ui-select-match\\\"><li class=\\\"ui-select-match-item select2-search-choice\\\" ng-repeat=\\\"$item in $select.selected track by $index\\\" ng-class=\\\"{\\'select2-search-choice-focus\\':$selectMultiple.activeMatchIndex === $index, \\'select2-locked\\':$select.isLocked(this, $index)}\\\" ui-select-sort=\\\"$select.selected\\\"><span uis-transclude-append=\\\"\\\"></span> <a href=\\\"javascript:;\\\" class=\\\"ui-select-match-close select2-search-choice-close\\\" ng-click=\\\"$selectMultiple.removeChoice($index)\\\" tabindex=\\\"-1\\\"></a></li></span>\");\n$templateCache.put(\"select2/match.tpl.html\",\"<a class=\\\"select2-choice ui-select-match\\\" ng-class=\\\"{\\'select2-default\\': $select.isEmpty()}\\\" ng-click=\\\"$select.toggle($event)\\\" aria-label=\\\"{{ $select.baseTitle }} select\\\"><span ng-show=\\\"$select.isEmpty()\\\" class=\\\"select2-chosen\\\">{{$select.placeholder}}</span> <span ng-hide=\\\"$select.isEmpty()\\\" class=\\\"select2-chosen\\\" ng-transclude=\\\"\\\"></span> <abbr ng-if=\\\"$select.allowClear && !$select.isEmpty()\\\" class=\\\"select2-search-choice-close\\\" ng-click=\\\"$select.clear($event)\\\"></abbr> <span class=\\\"select2-arrow ui-select-toggle\\\"><b></b></span></a>\");\n$templateCache.put(\"select2/no-choice.tpl.html\",\"<div class=\\\"ui-select-no-choice dropdown\\\" ng-show=\\\"$select.items.length == 0\\\"><div class=\\\"dropdown-content\\\"><div data-selectable=\\\"\\\" ng-transclude=\\\"\\\"></div></div></div>\");\n$templateCache.put(\"select2/select-multiple.tpl.html\",\"<div class=\\\"ui-select-container ui-select-multiple select2 select2-container select2-container-multi\\\" ng-class=\\\"{\\'select2-container-active select2-dropdown-open open\\': $select.open, \\'select2-container-disabled\\': $select.disabled}\\\"><ul class=\\\"select2-choices\\\"><span class=\\\"ui-select-match\\\"></span><li class=\\\"select2-search-field\\\"><input type=\\\"search\\\" autocomplete=\\\"off\\\" autocorrect=\\\"off\\\" autocapitalize=\\\"off\\\" spellcheck=\\\"false\\\" role=\\\"combobox\\\" aria-expanded=\\\"true\\\" aria-owns=\\\"ui-select-choices-{{ $select.generatedId }}\\\" aria-label=\\\"{{ $select.baseTitle }}\\\" aria-activedescendant=\\\"ui-select-choices-row-{{ $select.generatedId }}-{{ $select.activeIndex }}\\\" class=\\\"select2-input ui-select-search\\\" placeholder=\\\"{{$selectMultiple.getPlaceholder()}}\\\" ng-disabled=\\\"$select.disabled\\\" ng-hide=\\\"$select.disabled\\\" ng-model=\\\"$select.search\\\" ng-click=\\\"$select.activate()\\\" style=\\\"width: 34px;\\\" ondrop=\\\"return false;\\\"></li></ul><div class=\\\"ui-select-dropdown select2-drop select2-with-searchbox select2-drop-active\\\" ng-class=\\\"{\\'select2-display-none\\': !$select.open || $select.items.length === 0}\\\"><div class=\\\"ui-select-choices\\\"></div></div></div>\");\n$templateCache.put(\"select2/select.tpl.html\",\"<div class=\\\"ui-select-container select2 select2-container\\\" ng-class=\\\"{\\'select2-container-active select2-dropdown-open open\\': $select.open, \\'select2-container-disabled\\': $select.disabled, \\'select2-container-active\\': $select.focus, \\'select2-allowclear\\': $select.allowClear && !$select.isEmpty()}\\\"><div class=\\\"ui-select-match\\\"></div><div class=\\\"ui-select-dropdown select2-drop select2-with-searchbox select2-drop-active\\\" ng-class=\\\"{\\'select2-display-none\\': !$select.open}\\\"><div class=\\\"search-container\\\" ng-class=\\\"{\\'ui-select-search-hidden\\':!$select.searchEnabled, \\'select2-search\\':$select.searchEnabled}\\\"><input type=\\\"search\\\" autocomplete=\\\"off\\\" autocorrect=\\\"off\\\" autocapitalize=\\\"off\\\" spellcheck=\\\"false\\\" ng-class=\\\"{\\'select2-active\\': $select.refreshing}\\\" role=\\\"combobox\\\" aria-expanded=\\\"true\\\" aria-owns=\\\"ui-select-choices-{{ $select.generatedId }}\\\" aria-label=\\\"{{ $select.baseTitle }}\\\" class=\\\"ui-select-search select2-input\\\" ng-model=\\\"$select.search\\\"></div><div class=\\\"ui-select-choices\\\"></div><div class=\\\"ui-select-no-choice\\\"></div></div></div>\");\n$templateCache.put(\"selectize/choices.tpl.html\",\"<div ng-show=\\\"$select.open\\\" class=\\\"ui-select-choices ui-select-dropdown selectize-dropdown\\\" ng-class=\\\"{\\'single\\': !$select.multiple, \\'multi\\': $select.multiple}\\\"><div class=\\\"ui-select-choices-content selectize-dropdown-content\\\"><div class=\\\"ui-select-choices-group optgroup\\\"><div ng-show=\\\"$select.isGrouped && $group.name\\\" class=\\\"ui-select-choices-group-label optgroup-header\\\" ng-bind=\\\"$group.name\\\"></div><div role=\\\"option\\\" class=\\\"ui-select-choices-row\\\" ng-class=\\\"{active: $select.isActive(this), disabled: $select.isDisabled(this)}\\\"><div class=\\\"option ui-select-choices-row-inner\\\" data-selectable=\\\"\\\"></div></div></div></div></div>\");\n$templateCache.put(\"selectize/match-multiple.tpl.html\",\"<div class=\\\"ui-select-match\\\" data-value=\\\"\\\" ng-repeat=\\\"$item in $select.selected track by $index\\\" ng-click=\\\"$selectMultiple.activeMatchIndex = $index;\\\" ng-class=\\\"{\\'active\\':$selectMultiple.activeMatchIndex === $index}\\\" ui-select-sort=\\\"$select.selected\\\"><span class=\\\"ui-select-match-item\\\" ng-class=\\\"{\\'select-locked\\':$select.isLocked(this, $index)}\\\"><span uis-transclude-append=\\\"\\\"></span> <span class=\\\"remove ui-select-match-close\\\" ng-hide=\\\"$select.disabled\\\" ng-click=\\\"$selectMultiple.removeChoice($index)\\\">&times;</span></span></div>\");\n$templateCache.put(\"selectize/match.tpl.html\",\"<div ng-hide=\\\"$select.searchEnabled && ($select.open || $select.isEmpty())\\\" class=\\\"ui-select-match\\\"><span ng-show=\\\"!$select.searchEnabled && ($select.isEmpty() || $select.open)\\\" class=\\\"ui-select-placeholder text-muted\\\">{{$select.placeholder}}</span> <span ng-hide=\\\"$select.isEmpty() || $select.open\\\" ng-transclude=\\\"\\\"></span></div>\");\n$templateCache.put(\"selectize/no-choice.tpl.html\",\"<div class=\\\"ui-select-no-choice selectize-dropdown\\\" ng-show=\\\"$select.items.length == 0\\\"><div class=\\\"selectize-dropdown-content\\\"><div data-selectable=\\\"\\\" ng-transclude=\\\"\\\"></div></div></div>\");\n$templateCache.put(\"selectize/select-multiple.tpl.html\",\"<div class=\\\"ui-select-container selectize-control multi plugin-remove_button\\\" ng-class=\\\"{\\'open\\': $select.open}\\\"><div class=\\\"selectize-input\\\" ng-class=\\\"{\\'focus\\': $select.open, \\'disabled\\': $select.disabled, \\'selectize-focus\\' : $select.focus}\\\" ng-click=\\\"$select.open && !$select.searchEnabled ? $select.toggle($event) : $select.activate()\\\"><div class=\\\"ui-select-match\\\"></div><input type=\\\"search\\\" autocomplete=\\\"off\\\" tabindex=\\\"-1\\\" class=\\\"ui-select-search\\\" ng-class=\\\"{\\'ui-select-search-hidden\\':!$select.searchEnabled}\\\" placeholder=\\\"{{$selectMultiple.getPlaceholder()}}\\\" ng-model=\\\"$select.search\\\" ng-disabled=\\\"$select.disabled\\\" aria-expanded=\\\"{{$select.open}}\\\" aria-label=\\\"{{ $select.baseTitle }}\\\" ondrop=\\\"return false;\\\"></div><div class=\\\"ui-select-choices\\\"></div><div class=\\\"ui-select-no-choice\\\"></div></div>\");\n$templateCache.put(\"selectize/select.tpl.html\",\"<div class=\\\"ui-select-container selectize-control single\\\" ng-class=\\\"{\\'open\\': $select.open}\\\"><div class=\\\"selectize-input\\\" ng-class=\\\"{\\'focus\\': $select.open, \\'disabled\\': $select.disabled, \\'selectize-focus\\' : $select.focus}\\\" ng-click=\\\"$select.open && !$select.searchEnabled ? $select.toggle($event) : $select.activate()\\\"><div class=\\\"ui-select-match\\\"></div><input type=\\\"search\\\" autocomplete=\\\"off\\\" tabindex=\\\"-1\\\" class=\\\"ui-select-search ui-select-toggle\\\" ng-class=\\\"{\\'ui-select-search-hidden\\':!$select.searchEnabled}\\\" ng-click=\\\"$select.toggle($event)\\\" placeholder=\\\"{{$select.placeholder}}\\\" ng-model=\\\"$select.search\\\" ng-hide=\\\"!$select.isEmpty() && !$select.open\\\" ng-disabled=\\\"$select.disabled\\\" aria-label=\\\"{{ $select.baseTitle }}\\\"></div><div class=\\\"ui-select-choices\\\"></div><div class=\\\"ui-select-no-choice\\\"></div></div>\");}]);","Magezon_Builder/vendor/angular-ui-codemirror/ui-codemirror.js":"define([\n  'jquery',\n  'angular',\n  'mgzcodemirror'\n], function($, angular, CodeMirror) {\n'use strict';\nwindow.mgzCodeMirror = CodeMirror;\n\n/**\n * Binds a CodeMirror widget to a <textarea> element.\n */\nangular.module('ui.codemirror', [])\n  .constant('uiCodemirrorConfig', {})\n  .directive('uiCodemirror', uiCodemirrorDirective);\n\n/**\n * @ngInject\n */\nfunction uiCodemirrorDirective($timeout, uiCodemirrorConfig) {\n\n  return {\n    restrict: 'EA',\n    require: '?ngModel',\n    compile: function compile() {\n\n      // Require CodeMirror\n      if (angular.isUndefined(window.mgzCodeMirror)) {\n        throw new Error('ui-codemirror needs CodeMirror to work... (o rly?)');\n      }\n\n      return postLink;\n    }\n  };\n\n  function postLink(scope, iElement, iAttrs, ngModel) {\n\n    var codemirrorOptions = angular.extend(\n      { value: iElement.text() },\n      uiCodemirrorConfig.codemirror || {},\n      scope.$eval(iAttrs.uiCodemirror),\n      scope.$eval(iAttrs.uiCodemirrorOpts)\n    );\n\n    var codemirror = newCodemirrorEditor(iElement, codemirrorOptions);\n\n    configOptionsWatcher(\n      codemirror,\n      iAttrs.uiCodemirror || iAttrs.uiCodemirrorOpts,\n      scope\n    );\n\n    configNgModelLink(codemirror, ngModel, scope);\n\n    configUiRefreshAttribute(codemirror, iAttrs.uiRefresh, scope);\n\n    // Allow access to the CodeMirror instance through a broadcasted event\n    // eg: $broadcast('CodeMirror', function(cm){...});\n    scope.$on('CodeMirror', function(event, callback) {\n      if (angular.isFunction(callback)) {\n        callback(codemirror);\n      } else {\n        throw new Error('the CodeMirror event requires a callback function');\n      }\n    });\n\n    // onLoad callback\n    if (angular.isFunction(codemirrorOptions.onLoad)) {\n      codemirrorOptions.onLoad(codemirror);\n    }\n  }\n\n  function newCodemirrorEditor(iElement, codemirrorOptions) {\n    var codemirrot;\n\n    if (iElement[0].tagName === 'TEXTAREA') {\n      // Might bug but still ...\n      codemirrot = window.mgzCodeMirror.fromTextArea(iElement[0], codemirrorOptions);\n    } else {\n      iElement.html('');\n      codemirrot = new window.mgzCodeMirror(function(cm_el) {\n        iElement.append(cm_el);\n      }, codemirrorOptions);\n    }\n\n    return codemirrot;\n  }\n\n  function configOptionsWatcher(codemirrot, uiCodemirrorAttr, scope) {\n    if (!uiCodemirrorAttr) { return; }\n\n    var codemirrorDefaultsKeys = Object.keys(window.mgzCodeMirror.defaults);\n    scope.$watch(uiCodemirrorAttr, updateOptions, true);\n    function updateOptions(newValues, oldValue) {\n      if (!angular.isObject(newValues)) { return; }\n      codemirrorDefaultsKeys.forEach(function(key) {\n        if (newValues.hasOwnProperty(key)) {\n\n          if (oldValue && newValues[key] === oldValue[key]) {\n            return;\n          }\n\n          codemirrot.setOption(key, newValues[key]);\n        }\n      });\n    }\n  }\n\n  function configNgModelLink(codemirror, ngModel, scope) {\n    if (!ngModel) { return; }\n    // CodeMirror expects a string, so make sure it gets one.\n    // This does not change the model.\n    ngModel.$formatters.push(function(value) {\n      if (angular.isUndefined(value) || value === null) {\n        return '';\n      } else if (angular.isObject(value) || angular.isArray(value)) {\n        throw new Error('ui-codemirror cannot use an object or an array as a model');\n      }\n      return value;\n    });\n\n\n    // Override the ngModelController $render method, which is what gets called when the model is updated.\n    // This takes care of the synchronizing the codeMirror element with the underlying model, in the case that it is changed by something else.\n    ngModel.$render = function() {\n      //Code mirror expects a string so make sure it gets one\n      //Although the formatter have already done this, it can be possible that another formatter returns undefined (for example the required directive)\n      var safeViewValue = ngModel.$viewValue || '';\n      codemirror.setValue(safeViewValue);\n    };\n\n\n    // Keep the ngModel in sync with changes from CodeMirror\n    codemirror.on('change', function(instance) {\n      var newValue = instance.getValue();\n      if (newValue !== ngModel.$viewValue) {\n        scope.$evalAsync(function() {\n          ngModel.$setViewValue(newValue);\n        });\n      }\n    });\n  }\n\n  function configUiRefreshAttribute(codeMirror, uiRefreshAttr, scope) {\n    if (!uiRefreshAttr) { return; }\n\n    scope.$watch(uiRefreshAttr, function(newVal, oldVal) {\n      // Skip the initial watch firing\n      if (newVal !== oldVal) {\n        $timeout(function() {\n          codeMirror.refresh();\n        });\n      }\n    });\n  }\n\n}\nuiCodemirrorDirective.$inject = [\"$timeout\", \"uiCodemirrorConfig\"];\n\n});","Magezon_Builder/vendor/ng-stats/ng-stats.min.js":"//! ng-stats version 2.5.4 built with \u2665 by Kent C. Dodds <kent@doddsfamily.us> (http://kent.doddsfamily.us), Viper Bailey <jinxidoru@gmail.com> (http://jinxidoru.blogspot.com), Daniel Lamb <dlamb.open.source@gmail.com> (http://daniellmb.com) (\u00f3 \u00ec_\u00ed)=\u00f3\u00f2=(\u00ec_\u00ed \u00f2)\n!function(t,e){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=e(require(\"angular\")):\"function\"==typeof define&&define.amd?define([\"angular\"],e):\"object\"==typeof exports?exports.showAngularStats=e(require(\"angular\")):t.showAngularStats=e(t.angular)}(this,function(t){return function(t){function e(o){if(n[o])return n[o].exports;var r=n[o]={exports:{},id:o,loaded:!1};return t[o].call(r.exports,r,r.exports,e),r.loaded=!0,r.exports}var n={};return e.m=t,e.c=n,e.p=\"\",e(0)}([function(t,e,n){\"use strict\";function o(t){return t&&t.__esModule?t:{\"default\":t}}function r(){if(!P){P=!0;var t=Object.getPrototypeOf(l()),e=t.$digest;t.$digest=function(){var t=U();e.apply(this,arguments);var n=U()-t;h(s(),n)}}}function i(){return\"undefined\"!=typeof chrome&&\"undefined\"!=typeof chrome.storage&&\"undefined\"!=typeof chrome.storage.local}function a(t){window.self.angular&&l()?c(t):setTimeout(function(){a(t)},200)}function u(t){return t!==!1&&t.autoload||(sessionStorage.removeItem(L),localStorage.removeItem(L),t!==!1)?(t.position=t.position||\"top-left\",t=T.extend({htmlId:null,rootScope:void 0,digestTimeThreshold:16,watchCountThreshold:2e3,autoload:!1,trackDigest:!1,trackWatches:!1,logDigest:!1,logWatches:!1,styles:{position:\"fixed\",background:\"black\",borderBottom:\"1px solid #666\",borderRight:\"1px solid #666\",color:\"#666\",fontFamily:\"Courier\",width:130,zIndex:9999,textAlign:\"right\",top:-1===t.position.indexOf(\"top\")?null:0,bottom:-1===t.position.indexOf(\"bottom\")?null:0,right:-1===t.position.indexOf(\"right\")?null:0,left:-1===t.position.indexOf(\"left\")?null:0}},t||{}),t.rootScope&&(D=t.rootScope),t):void 0}function c(t){function e(e,n,o){var r=e.charAt(0).toUpperCase()+e.slice(1);t[\"track\"+r]&&(l[e]=[],n[\"track + capThingToTrack\"]=function(t){o&&l[e][l.length-1]===t||(l[e][l.length-1]=t,l[e].push(t))})}function n(e,n,o){var r=e.charAt(0).toUpperCase()+e.slice(1);if(t[\"log\"+r]){var a;n[\"log\"+r]=function(t){if(!o||a!==t){a=t;var n=i(e,t);n?console.log(\"%c\"+e+\":\",n,t):console.log(e+\":\",t)}}}}function o(t,e){return t>e?\"red\":t>.7*e?\"orange\":\"green\"}function i(e,n){var r;return\"digest\"===e?r=\"color:\"+o(n,t.digestTimeThreshold):\"watches\"===e&&(r=\"color:\"+o(n,t.watchCountThreshold)),r}function a(e,n){var r=n||A,i=o(r,t.digestTimeThreshold);R=p(e)?R:e;var a=o(R,t.watchCountThreshold);if(A=p(n)?A:n,h.text(R).css({color:a}),v.text(A.toFixed(2)).css({color:i}),n){var u=m.getContext(\"2d\");f>0&&(f=0,u.fillStyle=\"#333\",u.fillRect(w.width-1,0,1,w.height)),u.fillStyle=i,u.fillRect(w.width-1,Math.max(0,w.height-r),2,2)}}function c(){if(s.active){setTimeout(c,250);var t=m.getContext(\"2d\"),e=t.getImageData(1,0,w.width-1,w.height);t.putImageData(e,0,0),t.fillStyle=f++>2?\"black\":\"#333\",t.fillRect(w.width-1,0,1,w.height)}}t=void 0!==t?t:{};var l={listeners:E};if(O&&(O.$el&&O.$el.remove(),O.active=!1,O=null),t=u(t)){r();var s=O={active:!0};if(t.autoload)if(\"localStorage\"===t.autoload)localStorage.setItem(L,JSON.stringify(t));else{if(\"sessionStorage\"!==t.autoload&&\"boolean\"!=typeof t.autoload)throw new Error(\"Invalid value for autoload: \"+t.autoload+' can only be \"localStorage\" \"sessionStorage\" or boolean.');sessionStorage.setItem(L,JSON.stringify(t))}var d=T.element(document.body),f=0,g=t.htmlId?' id=\"'+t.htmlId+'\"':\"\";s.$el=T.element(\"<div\"+g+\"><canvas></canvas><div><span></span> | <span></span></div></div>\").css(t.styles),d.append(s.$el);var h=s.$el.find(\"span\"),v=h.next(),w={width:130,height:40},m=s.$el.find(\"canvas\").attr(w)[0];return E.digestLength.ngStatsAddToCanvas=function(t){a(null,t)},E.watchCount.ngStatsAddToCanvas=function(t){a(t)},e(\"digest\",E.digestLength),e(\"watches\",E.watchCount,!0),n(\"digest\",E.digestLength),n(\"watches\",E.watchCount,!0),c(),D.$$phase||D.$digest(),l}}function l(){if(D)return D;var t=document.querySelector(q);return t?D=T.element(t).scope().$root:null}function s(){clearTimeout(k);var t=U();return t-I>300?(I=t,R=v()):k=setTimeout(function(){h(s())},350),R}function d(t){var e=f(t);return v(e)}function f(t){t=T.element(t);var e=t.scope();return e||(t=T.element(t.querySelector(q)),e=t.scope()),e}function g(t){return t&&t.$$watchers?t.$$watchers:[]}function h(t,e){p(t)||T.forEach(E.watchCount,function(e){e(t)}),p(e)||T.forEach(E.digestLength,function(t){t(e)})}function p(t){return null===t||void 0===t}function v(t){var e=0;return w(t,function(t){e+=g(t).length}),e}function w(t,e){if(\"function\"==typeof t&&(e=t,t=null),t=t||l(),t=C(t)){var n=e(t);return n===!1?n:S(t,e)}}function m(t,e){for(var n;(t=t.$$nextSibling)&&(n=e(t),n!==!1)&&(n=S(t,e),n!==!1););return n}function S(t,e){for(var n;(t=t.$$childHead)&&(n=e(t),n!==!1)&&(n=m(t,e),n!==!1););return n}function y(t){var e=null;return w(function(n){return n.$id===t?(e=n,!1):void 0}),e}function C(t){return x(t)&&(t=y(t)),t}function x(t){return\"string\"==typeof t||\"number\"==typeof t}Object.defineProperty(e,\"__esModule\",{value:!0});var $=n(1),b=o($),T=b[\"default\"];T.version||(T=window.angular),e[\"default\"]=c;var D,L=\"showAngularStats_autoload\",O=null,U=window.self.performance&&window.self.performance.now?function(){return window.self.performance.now()}:function(){return Date.now()},I=U(),k=null,R=s()||0,A=0,q=\".ng-scope, .ng-isolate-scope\",P=!1,E={watchCount:{},digestLength:{}},j=sessionStorage[L]||!i()&&localStorage[L];j&&a(JSON.parse(j)),T.module(\"angularStats\",[]).directive(\"angularStats\",function(){function t(t){for(var e=t[0];e.parentElement;)e=e.parentElement;return e}var e=1;return{scope:{digestLength:\"@\",watchCount:\"@\",watchCountRoot:\"@\",onDigestLengthUpdate:\"&?\",onWatchCountUpdate:\"&?\"},link:function(n,o,i){function a(){if(i.hasOwnProperty(\"digestLength\")){var t=o;i.digestLength&&(t=T.element(o[0].querySelector(i.digestLength))),E.digestLength[\"ngStatsDirective\"+f]=function(e){window.dirDigestNode=t[0],t.text((e||0).toFixed(2))}}}function u(){if(i.hasOwnProperty(\"watchCount\")){var e,r=o;if(n.watchCount&&(r=T.element(o[0].querySelector(i.watchCount))),n.watchCountRoot)if(\"this\"===n.watchCountRoot)e=o;else{var a;if(a=i.hasOwnProperty(\"watchCountOfChild\")?o[0]:t(o),e=T.element(a.querySelector(n.watchCountRoot)),!e.length)throw new Error(\"no element at selector: \"+n.watchCountRoot)}E.watchCount[\"ngStatsDirective\"+f]=function(t){var n=t;e&&(n=d(e)),r.text(n)}}}function c(){i.hasOwnProperty(\"onWatchCountUpdate\")&&(E.watchCount[\"ngStatsDirectiveUpdate\"+f]=function(t){n.onWatchCountUpdate({watchCount:t})})}function l(){i.hasOwnProperty(\"onDigestLengthUpdate\")&&(E.digestLength[\"ngStatsDirectiveUpdate\"+f]=function(t){n.onDigestLengthUpdate({digestLength:t})})}function s(){delete E.digestLength[\"ngStatsDirectiveUpdate\"+f],delete E.watchCount[\"ngStatsDirectiveUpdate\"+f],delete E.digestLength[\"ngStatsDirective\"+f],delete E.watchCount[\"ngStatsDirective\"+f]}r();var f=e++;a(),u(),c(),l(),n.$on(\"$destroy\",s)}}}),t.exports=e[\"default\"]},function(e,n){e.exports=t}])});","Magezon_Builder/vendor/fotorama/fotorama.js":"/*!\n * Fotorama 4.6.4 | http://fotorama.io/license/\n */\nfotoramaVersion=\"4.6.4\",function(a,b,c,d,e){\"use strict\";function f(a){var b=\"bez_\"+d.makeArray(arguments).join(\"_\").replace(\".\",\"p\");if(\"function\"!=typeof d.easing[b]){var c=function(a,b){var c=[null,null],d=[null,null],e=[null,null],f=function(f,g){return e[g]=3*a[g],d[g]=3*(b[g]-a[g])-e[g],c[g]=1-e[g]-d[g],f*(e[g]+f*(d[g]+f*c[g]))},g=function(a){return e[0]+a*(2*d[0]+3*c[0]*a)},h=function(a){for(var b,c=a,d=0;++d<14&&(b=f(c,0)-a,!(Math.abs(b)<.001));)c-=b/g(c);return c};return function(a){return f(h(a),1)}};d.easing[b]=function(b,d,e,f,g){return f*c([a[0],a[1]],[a[2],a[3]])(d/g)+e}}return b}function g(){}function h(a,b,c){return Math.max(isNaN(b)?-1/0:b,Math.min(isNaN(c)?1/0:c,a))}function i(a){return a.match(/ma/)&&a.match(/-?\\d+(?!d)/g)[a.match(/3d/)?12:4]}function j(a){return Ic?+i(a.css(\"transform\")):+a.css(\"left\").replace(\"px\",\"\")}function k(a){var b={};return Ic?b.transform=\"translate3d(\"+a+\"px,0,0)\":b.left=a,b}function l(a){return{\"transition-duration\":a+\"ms\"}}function m(a,b){return isNaN(a)?b:a}function n(a,b){return m(+String(a).replace(b||\"px\",\"\"))}function o(a){return/%$/.test(a)?n(a,\"%\"):e}function p(a,b){return m(o(a)/100*b,n(a))}function q(a){return(!isNaN(n(a))||!isNaN(n(a,\"%\")))&&a}function r(a,b,c,d){return(a-(d||0))*(b+(c||0))}function s(a,b,c,d){return-Math.round(a/(b+(c||0))-(d||0))}function t(a){var b=a.data();if(!b.tEnd){var c=a[0],d={WebkitTransition:\"webkitTransitionEnd\",MozTransition:\"transitionend\",OTransition:\"oTransitionEnd otransitionend\",msTransition:\"MSTransitionEnd\",transition:\"transitionend\"};T(c,d[uc.prefixed(\"transition\")],function(a){b.tProp&&a.propertyName.match(b.tProp)&&b.onEndFn()}),b.tEnd=!0}}function u(a,b,c,d){var e,f=a.data();f&&(f.onEndFn=function(){e||(e=!0,clearTimeout(f.tT),c())},f.tProp=b,clearTimeout(f.tT),f.tT=setTimeout(function(){f.onEndFn()},1.5*d),t(a))}function v(a,b){if(a.length){var c=a.data();Ic?(a.css(l(0)),c.onEndFn=g,clearTimeout(c.tT)):a.stop();var d=w(b,function(){return j(a)});return a.css(k(d)),d}}function w(){for(var a,b=0,c=arguments.length;c>b&&(a=b?arguments[b]():arguments[b],\"number\"!=typeof a);b++);return a}function x(a,b){return Math.round(a+(b-a)/1.5)}function y(){return y.p=y.p||(\"https:\"===c.protocol?\"https://\":\"http://\"),y.p}function z(a){var c=b.createElement(\"a\");return c.href=a,c}function A(a,b){if(\"string\"!=typeof a)return a;a=z(a);var c,d;if(a.host.match(/youtube\\.com/)&&a.search){if(c=a.search.split(\"v=\")[1]){var e=c.indexOf(\"&\");-1!==e&&(c=c.substring(0,e)),d=\"youtube\"}}else a.host.match(/youtube\\.com|youtu\\.be/)?(c=a.pathname.replace(/^\\/(embed\\/|v\\/)?/,\"\").replace(/\\/.*/,\"\"),d=\"youtube\"):a.host.match(/vimeo\\.com/)&&(d=\"vimeo\",c=a.pathname.replace(/^\\/(video\\/)?/,\"\").replace(/\\/.*/,\"\"));return c&&d||!b||(c=a.href,d=\"custom\"),c?{id:c,type:d,s:a.search.replace(/^\\?/,\"\"),p:y()}:!1}function B(a,b,c){var e,f,g=a.video;return\"youtube\"===g.type?(f=y()+\"img.youtube.com/vi/\"+g.id+\"/default.jpg\",e=f.replace(/\\/default.jpg$/,\"/hqdefault.jpg\"),a.thumbsReady=!0):\"vimeo\"===g.type?d.ajax({url:y()+\"vimeo.com/api/v2/video/\"+g.id+\".json\",dataType:\"jsonp\",success:function(d){a.thumbsReady=!0,C(b,{img:d[0].thumbnail_large,thumb:d[0].thumbnail_small},a.i,c)}}):a.thumbsReady=!0,{img:e,thumb:f}}function C(a,b,c,e){for(var f=0,g=a.length;g>f;f++){var h=a[f];if(h.i===c&&h.thumbsReady){var i={videoReady:!0};i[Xc]=i[Zc]=i[Yc]=!1,e.splice(f,1,d.extend({},h,i,b));break}}}function D(a){function b(a,b,e){var f=a.children(\"img\").eq(0),g=a.attr(\"href\"),h=a.attr(\"src\"),i=f.attr(\"src\"),j=b.video,k=e?A(g,j===!0):!1;k?g=!1:k=j,c(a,f,d.extend(b,{video:k,img:b.img||g||h||i,thumb:b.thumb||i||h||g}))}function c(a,b,c){var e=c.thumb&&c.img!==c.thumb,f=n(c.width||a.attr(\"width\")),g=n(c.height||a.attr(\"height\"));d.extend(c,{width:f,height:g,thumbratio:S(c.thumbratio||n(c.thumbwidth||b&&b.attr(\"width\")||e||f)/n(c.thumbheight||b&&b.attr(\"height\")||e||g))})}var e=[];return a.children().each(function(){var a=d(this),f=R(d.extend(a.data(),{id:a.attr(\"id\")}));if(a.is(\"a, img\"))b(a,f,!0);else{if(a.is(\":empty\"))return;c(a,null,d.extend(f,{html:this,_html:a.html()}))}e.push(f)}),e}function E(a){return 0===a.offsetWidth&&0===a.offsetHeight}function F(a){return!d.contains(b.documentElement,a)}function G(a,b,c,d){return G.i||(G.i=1,G.ii=[!0]),d=d||G.i,\"undefined\"==typeof G.ii[d]&&(G.ii[d]=!0),a()?b():G.ii[d]&&setTimeout(function(){G.ii[d]&&G(a,b,c,d)},c||100),G.i++}function H(a){c.replace(c.protocol+\"//\"+c.host+c.pathname.replace(/^\\/?/,\"/\")+c.search+\"#\"+a)}function I(a,b,c,d){var e=a.data(),f=e.measures;if(f&&(!e.l||e.l.W!==f.width||e.l.H!==f.height||e.l.r!==f.ratio||e.l.w!==b.w||e.l.h!==b.h||e.l.m!==c||e.l.p!==d)){var g=f.width,i=f.height,j=b.w/b.h,k=f.ratio>=j,l=\"scaledown\"===c,m=\"contain\"===c,n=\"cover\"===c,o=$(d);k&&(l||m)||!k&&n?(g=h(b.w,0,l?g:1/0),i=g/f.ratio):(k&&n||!k&&(l||m))&&(i=h(b.h,0,l?i:1/0),g=i*f.ratio),a.css({width:g,height:i,left:p(o.x,b.w-g),top:p(o.y,b.h-i)}),e.l={W:f.width,H:f.height,r:f.ratio,w:b.w,h:b.h,m:c,p:d}}return!0}function J(a,b){var c=a[0];c.styleSheet?c.styleSheet.cssText=b:a.html(b)}function K(a,b,c){return b===c?!1:b>=a?\"left\":a>=c?\"right\":\"left right\"}function L(a,b,c,d){if(!c)return!1;if(!isNaN(a))return a-(d?0:1);for(var e,f=0,g=b.length;g>f;f++){var h=b[f];if(h.id===a){e=f;break}}return e}function M(a,b,c){c=c||{},a.each(function(){var a,e=d(this),f=e.data();f.clickOn||(f.clickOn=!0,d.extend(cb(e,{onStart:function(b){a=b,(c.onStart||g).call(this,b)},onMove:c.onMove||g,onTouchEnd:c.onTouchEnd||g,onEnd:function(c){c.moved||b.call(this,a)}}),{noMove:!0}))})}function N(a,b){return'<div class=\"'+a+'\">'+(b||\"\")+\"</div>\"}function O(a){for(var b=a.length;b;){var c=Math.floor(Math.random()*b--),d=a[b];a[b]=a[c],a[c]=d}return a}function P(a){return\"[object Array]\"==Object.prototype.toString.call(a)&&d.map(a,function(a){return d.extend({},a)})}function Q(a,b,c){a.scrollLeft(b||0).scrollTop(c||0)}function R(a){if(a){var b={};return d.each(a,function(a,c){b[a.toLowerCase()]=c}),b}}function S(a){if(a){var b=+a;return isNaN(b)?(b=a.split(\"/\"),+b[0]/+b[1]||e):b}}function T(a,b,c,d){b&&(a.addEventListener?a.addEventListener(b,c,!!d):a.attachEvent(\"on\"+b,c))}function U(a){return!!a.getAttribute(\"disabled\")}function V(a){return{tabindex:-1*a+\"\",disabled:a}}function W(a,b){T(a,\"keyup\",function(c){U(a)||13==c.keyCode&&b.call(a,c)})}function X(a,b){T(a,\"focus\",a.onfocusin=function(c){b.call(a,c)},!0)}function Y(a,b){a.preventDefault?a.preventDefault():a.returnValue=!1,b&&a.stopPropagation&&a.stopPropagation()}function Z(a){return a?\">\":\"<\"}function $(a){return a=(a+\"\").split(/\\s+/),{x:q(a[0])||bd,y:q(a[1])||bd}}function _(a,b){var c=a.data(),e=Math.round(b.pos),f=function(){c.sliding=!1,(b.onEnd||g)()};\"undefined\"!=typeof b.overPos&&b.overPos!==b.pos&&(e=b.overPos,f=function(){_(a,d.extend({},b,{overPos:b.pos,time:Math.max(Qc,b.time/2)}))});var h=d.extend(k(e),b.width&&{width:b.width});c.sliding=!0,Ic?(a.css(d.extend(l(b.time),h)),b.time>10?u(a,\"transform\",f,b.time):f()):a.stop().animate(h,b.time,_c,f)}function ab(a,b,c,e,f,h){var i=\"undefined\"!=typeof h;if(i||(f.push(arguments),Array.prototype.push.call(arguments,f.length),!(f.length>1))){a=a||d(a),b=b||d(b);var j=a[0],k=b[0],l=\"crossfade\"===e.method,m=function(){if(!m.done){m.done=!0;var a=(i||f.shift())&&f.shift();a&&ab.apply(this,a),(e.onEnd||g)(!!a)}},n=e.time/(h||1);c.removeClass(Rb+\" \"+Qb),a.stop().addClass(Rb),b.stop().addClass(Qb),l&&k&&a.fadeTo(0,0),a.fadeTo(l?n:0,1,l&&m),b.fadeTo(n,0,m),j&&l||k||m()}}function bb(a){var b=(a.touches||[])[0]||a;a._x=b.pageX,a._y=b.clientY,a._now=d.now()}function cb(a,c){function e(a){return m=d(a.target),u.checked=p=q=s=!1,k||u.flow||a.touches&&a.touches.length>1||a.which>1||ed&&ed.type!==a.type&&gd||(p=c.select&&m.is(c.select,t))?p:(o=\"touchstart\"===a.type,q=m.is(\"a, a *\",t),n=u.control,r=u.noMove||u.noSwipe||n?16:u.snap?0:4,bb(a),l=ed=a,fd=a.type.replace(/down|start/,\"move\").replace(/Down/,\"Move\"),(c.onStart||g).call(t,a,{control:n,$target:m}),k=u.flow=!0,void((!o||u.go)&&Y(a)))}function f(a){if(a.touches&&a.touches.length>1||Nc&&!a.isPrimary||fd!==a.type||!k)return k&&h(),void(c.onTouchEnd||g)();bb(a);var b=Math.abs(a._x-l._x),d=Math.abs(a._y-l._y),e=b-d,f=(u.go||u.x||e>=0)&&!u.noSwipe,i=0>e;o&&!u.checked?(k=f)&&Y(a):(Y(a),(c.onMove||g).call(t,a,{touch:o})),!s&&Math.sqrt(Math.pow(b,2)+Math.pow(d,2))>r&&(s=!0),u.checked=u.checked||f||i}function h(a){(c.onTouchEnd||g)();var b=k;u.control=k=!1,b&&(u.flow=!1),!b||q&&!u.checked||(a&&Y(a),gd=!0,clearTimeout(hd),hd=setTimeout(function(){gd=!1},1e3),(c.onEnd||g).call(t,{moved:s,$target:m,control:n,touch:o,startEvent:l,aborted:!a||\"MSPointerCancel\"===a.type}))}function i(){u.flow||setTimeout(function(){u.flow=!0},10)}function j(){u.flow&&setTimeout(function(){u.flow=!1},Pc)}var k,l,m,n,o,p,q,r,s,t=a[0],u={};return Nc?(T(t,\"MSPointerDown\",e),T(b,\"MSPointerMove\",f),T(b,\"MSPointerCancel\",h),T(b,\"MSPointerUp\",h)):(T(t,\"touchstart\",e),T(t,\"touchmove\",f),T(t,\"touchend\",h),T(b,\"touchstart\",i),T(b,\"touchend\",j),T(b,\"touchcancel\",j),Ec.on(\"scroll\",j),a.on(\"mousedown\",e),Fc.on(\"mousemove\",f).on(\"mouseup\",h)),a.on(\"click\",\"a\",function(a){u.checked&&Y(a)}),u}function db(a,b){function c(c,d){A=!0,j=l=c._x,q=c._now,p=[[q,j]],m=n=D.noMove||d?0:v(a,(b.getPos||g)()),(b.onStart||g).call(B,c)}function e(a,b){s=D.min,t=D.max,u=D.snap,w=a.altKey,A=z=!1,y=b.control,y||C.sliding||c(a)}function f(d,e){D.noSwipe||(A||c(d),l=d._x,p.push([d._now,l]),n=m-(j-l),o=K(n,s,t),s>=n?n=x(n,s):n>=t&&(n=x(n,t)),D.noMove||(a.css(k(n)),z||(z=!0,e.touch||Nc||a.addClass(ec)),(b.onMove||g).call(B,d,{pos:n,edge:o})))}function i(e){if(!D.noSwipe||!e.moved){A||c(e.startEvent,!0),e.touch||Nc||a.removeClass(ec),r=d.now();for(var f,i,j,k,o,q,v,x,y,z=r-Pc,C=null,E=Qc,F=b.friction,G=p.length-1;G>=0;G--){if(f=p[G][0],i=Math.abs(f-z),null===C||j>i)C=f,k=p[G][1];else if(C===z||i>j)break;j=i}v=h(n,s,t);var H=k-l,I=H>=0,J=r-C,K=J>Pc,L=!K&&n!==m&&v===n;u&&(v=h(Math[L?I?\"floor\":\"ceil\":\"round\"](n/u)*u,s,t),s=t=v),L&&(u||v===n)&&(y=-(H/J),E*=h(Math.abs(y),b.timeLow,b.timeHigh),o=Math.round(n+y*E/F),u||(v=o),(!I&&o>t||I&&s>o)&&(q=I?s:t,x=o-q,u||(v=q),x=h(v+.03*x,q-50,q+50),E=Math.abs((n-x)/(y/F)))),E*=w?10:1,(b.onEnd||g).call(B,d.extend(e,{moved:e.moved||K&&u,pos:n,newPos:v,overPos:x,time:E}))}}var j,l,m,n,o,p,q,r,s,t,u,w,y,z,A,B=a[0],C=a.data(),D={};return D=d.extend(cb(b.$wrap,d.extend({},b,{onStart:e,onMove:f,onEnd:i})),D)}function eb(a,b){var c,e,f,h=a[0],i={prevent:{}};return T(h,Oc,function(a){var h=a.wheelDeltaY||-1*a.deltaY||0,j=a.wheelDeltaX||-1*a.deltaX||0,k=Math.abs(j)&&!Math.abs(h),l=Z(0>j),m=e===l,n=d.now(),o=Pc>n-f;e=l,f=n,k&&i.ok&&(!i.prevent[l]||c)&&(Y(a,!0),c&&m&&o||(b.shift&&(c=!0,clearTimeout(i.t),i.t=setTimeout(function(){c=!1},Rc)),(b.onEnd||g)(a,b.shift?l:j)))}),i}function fb(){d.each(d.Fotorama.instances,function(a,b){b.index=a})}function gb(a){d.Fotorama.instances.push(a),fb()}function hb(a){d.Fotorama.instances.splice(a.index,1),fb()}var ib=\"fotorama\",jb=\"fullscreen\",kb=ib+\"__wrap\",lb=kb+\"--css2\",mb=kb+\"--css3\",nb=kb+\"--video\",ob=kb+\"--fade\",pb=kb+\"--slide\",qb=kb+\"--no-controls\",rb=kb+\"--no-shadows\",sb=kb+\"--pan-y\",tb=kb+\"--rtl\",ub=kb+\"--only-active\",vb=kb+\"--no-captions\",wb=kb+\"--toggle-arrows\",xb=ib+\"__stage\",yb=xb+\"__frame\",zb=yb+\"--video\",Ab=xb+\"__shaft\",Bb=ib+\"__grab\",Cb=ib+\"__pointer\",Db=ib+\"__arr\",Eb=Db+\"--disabled\",Fb=Db+\"--prev\",Gb=Db+\"--next\",Hb=ib+\"__nav\",Ib=Hb+\"-wrap\",Jb=Hb+\"__shaft\",Kb=Hb+\"--dots\",Lb=Hb+\"--thumbs\",Mb=Hb+\"__frame\",Nb=Mb+\"--dot\",Ob=Mb+\"--thumb\",Pb=ib+\"__fade\",Qb=Pb+\"-front\",Rb=Pb+\"-rear\",Sb=ib+\"__shadow\",Tb=Sb+\"s\",Ub=Tb+\"--left\",Vb=Tb+\"--right\",Wb=ib+\"__active\",Xb=ib+\"__select\",Yb=ib+\"--hidden\",Zb=ib+\"--fullscreen\",$b=ib+\"__fullscreen-icon\",_b=ib+\"__error\",ac=ib+\"__loading\",bc=ib+\"__loaded\",cc=bc+\"--full\",dc=bc+\"--img\",ec=ib+\"__grabbing\",fc=ib+\"__img\",gc=fc+\"--full\",hc=ib+\"__dot\",ic=ib+\"__thumb\",jc=ic+\"-border\",kc=ib+\"__html\",lc=ib+\"__video\",mc=lc+\"-play\",nc=lc+\"-close\",oc=ib+\"__caption\",pc=ib+\"__caption__wrap\",qc=ib+\"__spinner\",rc='\" tabindex=\"0\" role=\"button',sc=d&&d.fn.jquery.split(\".\");if(!sc||sc[0]<1||1==sc[0]&&sc[1]<8)throw\"Fotorama requires jQuery 1.8 or later and will not run without it.\";var tc={},uc=function(a,b,c){function d(a){r.cssText=a}function e(a,b){return typeof a===b}function f(a,b){return!!~(\"\"+a).indexOf(b)}function g(a,b){for(var d in a){var e=a[d];if(!f(e,\"-\")&&r[e]!==c)return\"pfx\"==b?e:!0}return!1}function h(a,b,d){for(var f in a){var g=b[a[f]];if(g!==c)return d===!1?a[f]:e(g,\"function\")?g.bind(d||b):g}return!1}function i(a,b,c){var d=a.charAt(0).toUpperCase()+a.slice(1),f=(a+\" \"+u.join(d+\" \")+d).split(\" \");return e(b,\"string\")||e(b,\"undefined\")?g(f,b):(f=(a+\" \"+v.join(d+\" \")+d).split(\" \"),h(f,b,c))}var j,k,l,m=\"2.6.2\",n={},o=b.documentElement,p=\"modernizr\",q=b.createElement(p),r=q.style,s=({}.toString,\" -webkit- -moz- -o- -ms- \".split(\" \")),t=\"Webkit Moz O ms\",u=t.split(\" \"),v=t.toLowerCase().split(\" \"),w={},x=[],y=x.slice,z=function(a,c,d,e){var f,g,h,i,j=b.createElement(\"div\"),k=b.body,l=k||b.createElement(\"body\");if(parseInt(d,10))for(;d--;)h=b.createElement(\"div\"),h.id=e?e[d]:p+(d+1),j.appendChild(h);return f=[\"&#173;\",'<style id=\"s',p,'\">',a,\"</style>\"].join(\"\"),j.id=p,(k?j:l).innerHTML+=f,l.appendChild(j),k||(l.style.background=\"\",l.style.overflow=\"hidden\",i=o.style.overflow,o.style.overflow=\"hidden\",o.appendChild(l)),g=c(j,a),k?j.parentNode.removeChild(j):(l.parentNode.removeChild(l),o.style.overflow=i),!!g},A={}.hasOwnProperty;l=e(A,\"undefined\")||e(A.call,\"undefined\")?function(a,b){return b in a&&e(a.constructor.prototype[b],\"undefined\")}:function(a,b){return A.call(a,b)},Function.prototype.bind||(Function.prototype.bind=function(a){var b=this;if(\"function\"!=typeof b)throw new TypeError;var c=y.call(arguments,1),d=function(){if(this instanceof d){var e=function(){};e.prototype=b.prototype;var f=new e,g=b.apply(f,c.concat(y.call(arguments)));return Object(g)===g?g:f}return b.apply(a,c.concat(y.call(arguments)))};return d}),w.csstransforms3d=function(){var a=!!i(\"perspective\");return a};for(var B in w)l(w,B)&&(k=B.toLowerCase(),n[k]=w[B](),x.push((n[k]?\"\":\"no-\")+k));return n.addTest=function(a,b){if(\"object\"==typeof a)for(var d in a)l(a,d)&&n.addTest(d,a[d]);else{if(a=a.toLowerCase(),n[a]!==c)return n;b=\"function\"==typeof b?b():b,\"undefined\"!=typeof enableClasses&&enableClasses&&(o.className+=\" \"+(b?\"\":\"no-\")+a),n[a]=b}return n},d(\"\"),q=j=null,n._version=m,n._prefixes=s,n._domPrefixes=v,n._cssomPrefixes=u,n.testProp=function(a){return g([a])},n.testAllProps=i,n.testStyles=z,n.prefixed=function(a,b,c){return b?i(a,b,c):i(a,\"pfx\")},n}(a,b),vc={ok:!1,is:function(){return!1},request:function(){},cancel:function(){},event:\"\",prefix:\"\"},wc=\"webkit moz o ms khtml\".split(\" \");if(\"undefined\"!=typeof b.cancelFullScreen)vc.ok=!0;else for(var xc=0,yc=wc.length;yc>xc;xc++)if(vc.prefix=wc[xc],\"undefined\"!=typeof b[vc.prefix+\"CancelFullScreen\"]){vc.ok=!0;break}vc.ok&&(vc.event=vc.prefix+\"fullscreenchange\",vc.is=function(){switch(this.prefix){case\"\":return b.fullScreen;case\"webkit\":return b.webkitIsFullScreen;default:return b[this.prefix+\"FullScreen\"]}},vc.request=function(a){return\"\"===this.prefix?a.requestFullScreen():a[this.prefix+\"RequestFullScreen\"]()},vc.cancel=function(){return\"\"===this.prefix?b.cancelFullScreen():b[this.prefix+\"CancelFullScreen\"]()});var zc,Ac={lines:12,length:5,width:2,radius:7,corners:1,rotate:15,color:\"rgba(128, 128, 128, .75)\",hwaccel:!0},Bc={top:\"auto\",left:\"auto\",className:\"\"};!function(a,b){zc=b()}(this,function(){function a(a,c){var d,e=b.createElement(a||\"div\");for(d in c)e[d]=c[d];return e}function c(a){for(var b=1,c=arguments.length;c>b;b++)a.appendChild(arguments[b]);return a}function d(a,b,c,d){var e=[\"opacity\",b,~~(100*a),c,d].join(\"-\"),f=.01+c/d*100,g=Math.max(1-(1-a)/b*(100-f),a),h=m.substring(0,m.indexOf(\"Animation\")).toLowerCase(),i=h&&\"-\"+h+\"-\"||\"\";return o[e]||(p.insertRule(\"@\"+i+\"keyframes \"+e+\"{0%{opacity:\"+g+\"}\"+f+\"%{opacity:\"+a+\"}\"+(f+.01)+\"%{opacity:1}\"+(f+b)%100+\"%{opacity:\"+a+\"}100%{opacity:\"+g+\"}}\",p.cssRules.length),o[e]=1),e}function f(a,b){var c,d,f=a.style;for(b=b.charAt(0).toUpperCase()+b.slice(1),d=0;d<n.length;d++)if(c=n[d]+b,f[c]!==e)return c;return f[b]!==e?b:void 0}function g(a,b){for(var c in b)a.style[f(a,c)||c]=b[c];return a}function h(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)a[d]===e&&(a[d]=c[d])}return a}function i(a){for(var b={x:a.offsetLeft,y:a.offsetTop};a=a.offsetParent;)b.x+=a.offsetLeft,b.y+=a.offsetTop;return b}function j(a,b){return\"string\"==typeof a?a:a[b%a.length]}function k(a){return\"undefined\"==typeof this?new k(a):void(this.opts=h(a||{},k.defaults,q))}function l(){function b(b,c){return a(\"<\"+b+' xmlns=\"urn:schemas-microsoft.com:vml\" class=\"spin-vml\">',c)}p.addRule(\".spin-vml\",\"behavior:url(#default#VML)\"),k.prototype.lines=function(a,d){function e(){return g(b(\"group\",{coordsize:k+\" \"+k,coordorigin:-i+\" \"+-i}),{width:k,height:k})}function f(a,f,h){c(m,c(g(e(),{rotation:360/d.lines*a+\"deg\",left:~~f}),c(g(b(\"roundrect\",{arcsize:d.corners}),{width:i,height:d.width,left:d.radius,top:-d.width>>1,filter:h}),b(\"fill\",{color:j(d.color,a),opacity:d.opacity}),b(\"stroke\",{opacity:0}))))}var h,i=d.length+d.width,k=2*i,l=2*-(d.width+d.length)+\"px\",m=g(e(),{position:\"absolute\",top:l,left:l});if(d.shadow)for(h=1;h<=d.lines;h++)f(h,-2,\"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)\");for(h=1;h<=d.lines;h++)f(h);return c(a,m)},k.prototype.opacity=function(a,b,c,d){var e=a.firstChild;d=d.shadow&&d.lines||0,e&&b+d<e.childNodes.length&&(e=e.childNodes[b+d],e=e&&e.firstChild,e=e&&e.firstChild,e&&(e.opacity=c))}}var m,n=[\"webkit\",\"Moz\",\"ms\",\"O\"],o={},p=function(){var d=a(\"style\",{type:\"text/css\"});return c(b.getElementsByTagName(\"head\")[0],d),d.sheet||d.styleSheet}(),q={lines:12,length:7,width:5,radius:10,rotate:0,corners:1,color:\"#000\",direction:1,speed:1,trail:100,opacity:.25,fps:20,zIndex:2e9,className:\"spinner\",top:\"auto\",left:\"auto\",position:\"relative\"};k.defaults={},h(k.prototype,{spin:function(b){this.stop();var c,d,e=this,f=e.opts,h=e.el=g(a(0,{className:f.className}),{position:f.position,width:0,zIndex:f.zIndex}),j=f.radius+f.length+f.width;if(b&&(b.insertBefore(h,b.firstChild||null),d=i(b),c=i(h),g(h,{left:(\"auto\"==f.left?d.x-c.x+(b.offsetWidth>>1):parseInt(f.left,10)+j)+\"px\",top:(\"auto\"==f.top?d.y-c.y+(b.offsetHeight>>1):parseInt(f.top,10)+j)+\"px\"})),h.setAttribute(\"role\",\"progressbar\"),e.lines(h,e.opts),!m){var k,l=0,n=(f.lines-1)*(1-f.direction)/2,o=f.fps,p=o/f.speed,q=(1-f.opacity)/(p*f.trail/100),r=p/f.lines;!function s(){l++;for(var a=0;a<f.lines;a++)k=Math.max(1-(l+(f.lines-a)*r)%p*q,f.opacity),e.opacity(h,a*f.direction+n,k,f);e.timeout=e.el&&setTimeout(s,~~(1e3/o))}()}return e},stop:function(){var a=this.el;return a&&(clearTimeout(this.timeout),a.parentNode&&a.parentNode.removeChild(a),this.el=e),this},lines:function(b,e){function f(b,c){return g(a(),{position:\"absolute\",width:e.length+e.width+\"px\",height:e.width+\"px\",background:b,boxShadow:c,transformOrigin:\"left\",transform:\"rotate(\"+~~(360/e.lines*i+e.rotate)+\"deg) translate(\"+e.radius+\"px,0)\",borderRadius:(e.corners*e.width>>1)+\"px\"})}for(var h,i=0,k=(e.lines-1)*(1-e.direction)/2;i<e.lines;i++)h=g(a(),{position:\"absolute\",top:1+~(e.width/2)+\"px\",transform:e.hwaccel?\"translate3d(0,0,0)\":\"\",opacity:e.opacity,animation:m&&d(e.opacity,e.trail,k+i*e.direction,e.lines)+\" \"+1/e.speed+\"s linear infinite\"}),e.shadow&&c(h,g(f(\"#000\",\"0 0 4px #000\"),{top:\"2px\"})),c(b,c(h,f(j(e.color,i),\"0 0 1px rgba(0,0,0,.1)\")));return b},opacity:function(a,b,c){b<a.childNodes.length&&(a.childNodes[b].style.opacity=c)}});var r=g(a(\"group\"),{behavior:\"url(#default#VML)\"});return!f(r,\"transform\")&&r.adj?l():m=f(r,\"animation\"),k});var Cc,Dc,Ec=d(a),Fc=d(b),Gc=\"quirks\"===c.hash.replace(\"#\",\"\"),Hc=uc.csstransforms3d,Ic=Hc&&!Gc,Jc=Hc||\"CSS1Compat\"===b.compatMode,Kc=vc.ok,Lc=navigator.userAgent.match(/Android|webOS|iPhone|iPad|iPod|BlackBerry|Windows Phone/i),Mc=!Ic||Lc,Nc=navigator.msPointerEnabled,Oc=\"onwheel\"in b.createElement(\"div\")?\"wheel\":b.onmousewheel!==e?\"mousewheel\":\"DOMMouseScroll\",Pc=250,Qc=300,Rc=1400,Sc=5e3,Tc=2,Uc=64,Vc=500,Wc=333,Xc=\"$stageFrame\",Yc=\"$navDotFrame\",Zc=\"$navThumbFrame\",$c=\"auto\",_c=f([.1,0,.25,1]),ad=99999,bd=\"50%\",cd={width:null,minwidth:null,maxwidth:\"100%\",height:null,minheight:null,maxheight:null,ratio:null,margin:Tc,glimpse:0,fit:\"contain\",position:bd,thumbposition:bd,nav:\"dots\",navposition:\"bottom\",navwidth:null,thumbwidth:Uc,thumbheight:Uc,thumbmargin:Tc,thumbborderwidth:Tc,thumbfit:\"cover\",allowfullscreen:!1,transition:\"slide\",clicktransition:null,transitionduration:Qc,captions:!0,hash:!1,startindex:0,loop:!1,autoplay:!1,stopautoplayontouch:!0,keyboard:!1,arrows:!0,click:!0,swipe:!0,trackpad:!1,enableifsingleframe:!1,controlsonstart:!0,shuffle:!1,direction:\"ltr\",shadows:!0,spinner:null},dd={left:!0,right:!0,down:!1,up:!1,space:!1,home:!1,end:!1};G.stop=function(a){G.ii[a]=!1};var ed,fd,gd,hd;jQuery.Fotorama=function(a,e){function f(){d.each(yd,function(a,b){if(!b.i){b.i=me++;var c=A(b.video,!0);if(c){var d={};b.video=c,b.img||b.thumb?b.thumbsReady=!0:d=B(b,yd,ie),C(yd,{img:d.img,thumb:d.thumb},b.i,ie)}}})}function g(a){return Zd[a]||ie.fullScreen}function i(a){var b=\"keydown.\"+ib,c=ib+je,d=\"keydown.\"+c,f=\"resize.\"+c+\" orientationchange.\"+c;a?(Fc.on(d,function(a){var b,c;Cd&&27===a.keyCode?(b=!0,md(Cd,!0,!0)):(ie.fullScreen||e.keyboard&&!ie.index)&&(27===a.keyCode?(b=!0,ie.cancelFullScreen()):a.shiftKey&&32===a.keyCode&&g(\"space\")||37===a.keyCode&&g(\"left\")||38===a.keyCode&&g(\"up\")?c=\"<\":32===a.keyCode&&g(\"space\")||39===a.keyCode&&g(\"right\")||40===a.keyCode&&g(\"down\")?c=\">\":36===a.keyCode&&g(\"home\")?c=\"<<\":35===a.keyCode&&g(\"end\")&&(c=\">>\")),(b||c)&&Y(a),c&&ie.show({index:c,slow:a.altKey,user:!0})}),ie.index||Fc.off(b).on(b,\"textarea, input, select\",function(a){!Dc.hasClass(jb)&&a.stopPropagation()}),Ec.on(f,ie.resize)):(Fc.off(d),Ec.off(f))}function j(b){b!==j.f&&(b?(a.html(\"\").addClass(ib+\" \"+ke).append(qe).before(oe).before(pe),gb(ie)):(qe.detach(),oe.detach(),pe.detach(),a.html(ne.urtext).removeClass(ke),hb(ie)),i(b),j.f=b)}function m(){yd=ie.data=yd||P(e.data)||D(a),zd=ie.size=yd.length,!xd.ok&&e.shuffle&&O(yd),f(),Je=y(Je),zd&&j(!0)}function o(){var a=2>zd&&!e.enableifsingleframe||Cd;Me.noMove=a||Sd,Me.noSwipe=a||!e.swipe,!Wd&&se.toggleClass(Bb,!e.click&&!Me.noMove&&!Me.noSwipe),Nc&&qe.toggleClass(sb,!Me.noSwipe)}function t(a){a===!0&&(a=\"\"),e.autoplay=Math.max(+a||Sc,1.5*Vd)}function u(){function a(a,c){b[a?\"add\":\"remove\"].push(c)}ie.options=e=R(e),Sd=\"crossfade\"===e.transition||\"dissolve\"===e.transition,Md=e.loop&&(zd>2||Sd&&(!Wd||\"slide\"!==Wd)),Vd=+e.transitionduration||Qc,Yd=\"rtl\"===e.direction,Zd=d.extend({},e.keyboard&&dd,e.keyboard);var b={add:[],remove:[]};zd>1||e.enableifsingleframe?(Nd=e.nav,Pd=\"top\"===e.navposition,b.remove.push(Xb),we.toggle(!!e.arrows)):(Nd=!1,we.hide()),Rb(),Bd=new zc(d.extend(Ac,e.spinner,Bc,{direction:Yd?-1:1})),Gc(),Hc(),e.autoplay&&t(e.autoplay),Td=n(e.thumbwidth)||Uc,Ud=n(e.thumbheight)||Uc,Ne.ok=Pe.ok=e.trackpad&&!Mc,o(),ed(e,[Le]),Od=\"thumbs\"===Nd,Od?(lc(zd,\"navThumb\"),Ad=Be,he=Zc,J(oe,d.Fotorama.jst.style({w:Td,h:Ud,b:e.thumbborderwidth,m:e.thumbmargin,s:je,q:!Jc})),ye.addClass(Lb).removeClass(Kb)):\"dots\"===Nd?(lc(zd,\"navDot\"),Ad=Ae,he=Yc,ye.addClass(Kb).removeClass(Lb)):(Nd=!1,ye.removeClass(Lb+\" \"+Kb)),Nd&&(Pd?xe.insertBefore(re):xe.insertAfter(re),wc.nav=!1,wc(Ad,ze,\"nav\")),Qd=e.allowfullscreen,Qd?(De.prependTo(re),Rd=Kc&&\"native\"===Qd):(De.detach(),Rd=!1),a(Sd,ob),a(!Sd,pb),a(!e.captions,vb),a(Yd,tb),a(\"always\"!==e.arrows,wb),Xd=e.shadows&&!Mc,a(!Xd,rb),qe.addClass(b.add.join(\" \")).removeClass(b.remove.join(\" \")),Ke=d.extend({},e)}function x(a){return 0>a?(zd+a%zd)%zd:a>=zd?a%zd:a}function y(a){return h(a,0,zd-1)}function z(a){return Md?x(a):y(a)}function E(a){return a>0||Md?a-1:!1}function U(a){return zd-1>a||Md?a+1:!1}function $(){Me.min=Md?-1/0:-r(zd-1,Le.w,e.margin,Fd),Me.max=Md?1/0:-r(0,Le.w,e.margin,Fd),Me.snap=Le.w+e.margin}function bb(){Oe.min=Math.min(0,Le.nw-ze.width()),Oe.max=0,ze.toggleClass(Bb,!(Oe.noMove=Oe.min===Oe.max))}function cb(a,b,c){if(\"number\"==typeof a){a=new Array(a);var e=!0}return d.each(a,function(a,d){if(e&&(d=a),\"number\"==typeof d){var f=yd[x(d)];if(f){var g=\"$\"+b+\"Frame\",h=f[g];c.call(this,a,d,f,h,g,h&&h.data())}}})}function fb(a,b,c,d){(!$d||\"*\"===$d&&d===Ld)&&(a=q(e.width)||q(a)||Vc,b=q(e.height)||q(b)||Wc,ie.resize({width:a,ratio:e.ratio||c||a/b},0,d!==Ld&&\"*\"))}function Pb(a,b,c,f,g,h){cb(a,b,function(a,i,j,k,l,m){function n(a){var b=x(i);fd(a,{index:b,src:w,frame:yd[b]})}function o(){t.remove(),d.Fotorama.cache[w]=\"error\",j.html&&\"stage\"===b||!y||y===w?(!w||j.html||r?\"stage\"===b&&(k.trigger(\"f:load\").removeClass(ac+\" \"+_b).addClass(bc),n(\"load\"),fb()):(k.trigger(\"f:error\").removeClass(ac).addClass(_b),n(\"error\")),m.state=\"error\",!(zd>1&&yd[i]===j)||j.html||j.deleted||j.video||r||(j.deleted=!0,ie.splice(i,1))):(j[v]=w=y,Pb([i],b,c,f,g,!0))}function p(){d.Fotorama.measures[w]=u.measures=d.Fotorama.measures[w]||{width:s.width,height:s.height,ratio:s.width/s.height},fb(u.measures.width,u.measures.height,u.measures.ratio,i),t.off(\"load error\").addClass(fc+(r?\" \"+gc:\"\")).prependTo(k),I(t,(d.isFunction(c)?c():c)||Le,f||j.fit||e.fit,g||j.position||e.position),d.Fotorama.cache[w]=m.state=\"loaded\",setTimeout(function(){k.trigger(\"f:load\").removeClass(ac+\" \"+_b).addClass(bc+\" \"+(r?cc:dc)),\"stage\"===b?n(\"load\"):(j.thumbratio===$c||!j.thumbratio&&e.thumbratio===$c)&&(j.thumbratio=u.measures.ratio,vd())},0)}function q(){var a=10;G(function(){return!fe||!a--&&!Mc},function(){p()})}if(k){var r=ie.fullScreen&&j.full&&j.full!==j.img&&!m.$full&&\"stage\"===b;if(!m.$img||h||r){var s=new Image,t=d(s),u=t.data();m[r?\"$full\":\"$img\"]=t;var v=\"stage\"===b?r?\"full\":\"img\":\"thumb\",w=j[v],y=r?null:j[\"stage\"===b?\"thumb\":\"img\"];if(\"navThumb\"===b&&(k=m.$wrap),!w)return void o();d.Fotorama.cache[w]?!function z(){\"error\"===d.Fotorama.cache[w]?o():\"loaded\"===d.Fotorama.cache[w]?setTimeout(q,0):setTimeout(z,100)}():(d.Fotorama.cache[w]=\"*\",t.on(\"load\",q).on(\"error\",o)),m.state=\"\",s.src=w}}})}function Qb(a){Ie.append(Bd.spin().el).appendTo(a)}function Rb(){Ie.detach(),Bd&&Bd.stop()}function Sb(){var a=Dd[Xc];a&&!a.data().state&&(Qb(a),a.on(\"f:load f:error\",function(){a.off(\"f:load f:error\"),Rb()}))}function ec(a){W(a,sd),X(a,function(){setTimeout(function(){Q(ye)},0),Rc({time:Vd,guessIndex:d(this).data().eq,minMax:Oe})})}function lc(a,b){cb(a,b,function(a,c,e,f,g,h){if(!f){f=e[g]=qe[g].clone(),h=f.data(),h.data=e;var i=f[0];\"stage\"===b?(e.html&&d('<div class=\"'+kc+'\"></div>').append(e._html?d(e.html).removeAttr(\"id\").html(e._html):e.html).appendTo(f),e.caption&&d(N(oc,N(pc,e.caption))).appendTo(f),e.video&&f.addClass(zb).append(Fe.clone()),X(i,function(){setTimeout(function(){Q(re)},0),pd({index:h.eq,user:!0})}),te=te.add(f)):\"navDot\"===b?(ec(i),Ae=Ae.add(f)):\"navThumb\"===b&&(ec(i),h.$wrap=f.children(\":first\"),Be=Be.add(f),e.video&&h.$wrap.append(Fe.clone()))}})}function sc(a,b,c,d){return a&&a.length&&I(a,b,c,d)}function tc(a){cb(a,\"stage\",function(a,b,c,f,g,h){if(f){var i=x(b),j=c.fit||e.fit,k=c.position||e.position;h.eq=i,Re[Xc][i]=f.css(d.extend({left:Sd?0:r(b,Le.w,e.margin,Fd)},Sd&&l(0))),F(f[0])&&(f.appendTo(se),md(c.$video)),sc(h.$img,Le,j,k),sc(h.$full,Le,j,k)}})}function uc(a,b){if(\"thumbs\"===Nd&&!isNaN(a)){var c=-a,f=-a+Le.nw;Be.each(function(){var a=d(this),g=a.data(),h=g.eq,i=function(){return{h:Ud,w:g.w}},j=i(),k=yd[h]||{},l=k.thumbfit||e.thumbfit,m=k.thumbposition||e.thumbposition;j.w=g.w,g.l+g.w<c||g.l>f||sc(g.$img,j,l,m)||b&&Pb([h],\"navThumb\",i,l,m)})}}function wc(a,b,c){if(!wc[c]){var f=\"nav\"===c&&Od,g=0;b.append(a.filter(function(){for(var a,b=d(this),c=b.data(),e=0,f=yd.length;f>e;e++)if(c.data===yd[e]){a=!0,c.eq=e;break}return a||b.remove()&&!1}).sort(function(a,b){return d(a).data().eq-d(b).data().eq}).each(function(){if(f){var a=d(this),b=a.data(),c=Math.round(Ud*b.data.thumbratio)||Td;b.l=g,b.w=c,a.css({width:c}),g+=c+e.thumbmargin}})),wc[c]=!0}}function xc(a){return a-Se>Le.w/3}function yc(a){return!(Md||Je+a&&Je-zd+a||Cd)}function Gc(){var a=yc(0),b=yc(1);ue.toggleClass(Eb,a).attr(V(a)),ve.toggleClass(Eb,b).attr(V(b))}function Hc(){Ne.ok&&(Ne.prevent={\"<\":yc(0),\">\":yc(1)})}function Lc(a){var b,c,d=a.data();return Od?(b=d.l,c=d.w):(b=a.position().left,c=a.width()),{c:b+c/2,min:-b+10*e.thumbmargin,max:-b+Le.w-c-10*e.thumbmargin}}function Oc(a){var b=Dd[he].data();_(Ce,{time:1.2*a,pos:b.l,width:b.w-2*e.thumbborderwidth})}function Rc(a){var b=yd[a.guessIndex][he];if(b){var c=Oe.min!==Oe.max,d=a.minMax||c&&Lc(Dd[he]),e=c&&(a.keep&&Rc.l?Rc.l:h((a.coo||Le.nw/2)-Lc(b).c,d.min,d.max)),f=c&&h(e,Oe.min,Oe.max),g=1.1*a.time;_(ze,{time:g,pos:f||0,onEnd:function(){uc(f,!0)}}),ld(ye,K(f,Oe.min,Oe.max)),Rc.l=e}}function Tc(){_c(he),Qe[he].push(Dd[he].addClass(Wb))}function _c(a){for(var b=Qe[a];b.length;)b.shift().removeClass(Wb)}function bd(a){var b=Re[a];d.each(Ed,function(a,c){delete b[x(c)]}),d.each(b,function(a,c){delete b[a],c.detach()})}function cd(a){Fd=Gd=Je;var b=Dd[Xc];b&&(_c(Xc),Qe[Xc].push(b.addClass(Wb)),a||ie.show.onEnd(!0),v(se,0,!0),bd(Xc),tc(Ed),$(),bb())}function ed(a,b){a&&d.each(b,function(b,c){c&&d.extend(c,{width:a.width||c.width,height:a.height,minwidth:a.minwidth,maxwidth:a.maxwidth,minheight:a.minheight,maxheight:a.maxheight,ratio:S(a.ratio)})})}function fd(b,c){a.trigger(ib+\":\"+b,[ie,c])}function gd(){clearTimeout(hd.t),fe=1,e.stopautoplayontouch?ie.stopAutoplay():ce=!0}function hd(){fe&&(e.stopautoplayontouch||(id(),jd()),hd.t=setTimeout(function(){fe=0},Qc+Pc))}function id(){ce=!(!Cd&&!de)}function jd(){if(clearTimeout(jd.t),G.stop(jd.w),!e.autoplay||ce)return void(ie.autoplay&&(ie.autoplay=!1,fd(\"stopautoplay\")));ie.autoplay||(ie.autoplay=!0,fd(\"startautoplay\"));var a=Je,b=Dd[Xc].data();jd.w=G(function(){return b.state||a!==Je},function(){jd.t=setTimeout(function(){if(!ce&&a===Je){var b=Kd,c=yd[b][Xc].data();jd.w=G(function(){return c.state||b!==Kd},function(){ce||b!==Kd||ie.show(Md?Z(!Yd):Kd)})}},e.autoplay)})}function kd(){ie.fullScreen&&(ie.fullScreen=!1,Kc&&vc.cancel(le),Dc.removeClass(jb),Cc.removeClass(jb),a.removeClass(Zb).insertAfter(pe),Le=d.extend({},ee),md(Cd,!0,!0),rd(\"x\",!1),ie.resize(),Pb(Ed,\"stage\"),Q(Ec,ae,_d),fd(\"fullscreenexit\"))}function ld(a,b){Xd&&(a.removeClass(Ub+\" \"+Vb),b&&!Cd&&a.addClass(b.replace(/^|\\s/g,\" \"+Tb+\"--\")))}function md(a,b,c){b&&(qe.removeClass(nb),Cd=!1,o()),a&&a!==Cd&&(a.remove(),fd(\"unloadvideo\")),c&&(id(),jd())}function nd(a){qe.toggleClass(qb,a)}function od(a){if(!Me.flow){var b=a?a.pageX:od.x,c=b&&!yc(xc(b))&&e.click;od.p!==c&&re.toggleClass(Cb,c)&&(od.p=c,od.x=b)}}function pd(a){clearTimeout(pd.t),e.clicktransition&&e.clicktransition!==e.transition?setTimeout(function(){var b=e.transition;ie.setOptions({transition:e.clicktransition}),Wd=b,pd.t=setTimeout(function(){ie.show(a)},10)},0):ie.show(a)}function qd(a,b){var c=a.target,f=d(c);f.hasClass(mc)?ie.playVideo():c===Ee?ie.toggleFullScreen():Cd?c===He&&md(Cd,!0,!0):b?nd():e.click&&pd({index:a.shiftKey||Z(xc(a._x)),slow:a.altKey,user:!0})}function rd(a,b){Me[a]=Oe[a]=b}function sd(a){var b=d(this).data().eq;pd({index:b,slow:a.altKey,user:!0,coo:a._x-ye.offset().left})}function td(a){pd({index:we.index(this)?\">\":\"<\",slow:a.altKey,user:!0})}function ud(a){X(a,function(){setTimeout(function(){Q(re)},0),nd(!1)})}function vd(){if(m(),u(),!vd.i){vd.i=!0;var a=e.startindex;(a||e.hash&&c.hash)&&(Ld=L(a||c.hash.replace(/^#/,\"\"),yd,0===ie.index||a,a)),Je=Fd=Gd=Hd=Ld=z(Ld)||0}if(zd){if(wd())return;Cd&&md(Cd,!0),Ed=[],bd(Xc),vd.ok=!0,ie.show({index:Je,time:0}),ie.resize()}else ie.destroy()}function wd(){return!wd.f===Yd?(wd.f=Yd,Je=zd-1-Je,ie.reverse(),!0):void 0}function xd(){xd.ok||(xd.ok=!0,fd(\"ready\"))}Cc=d(\"html\"),Dc=d(\"body\");var yd,zd,Ad,Bd,Cd,Dd,Ed,Fd,Gd,Hd,Id,Jd,Kd,Ld,Md,Nd,Od,Pd,Qd,Rd,Sd,Td,Ud,Vd,Wd,Xd,Yd,Zd,$d,_d,ae,be,ce,de,ee,fe,ge,he,ie=this,je=d.now(),ke=ib+je,le=a[0],me=1,ne=a.data(),oe=d(\"<style></style>\"),pe=d(N(Yb)),qe=d(N(kb)),re=d(N(xb)).appendTo(qe),se=(re[0],d(N(Ab)).appendTo(re)),te=d(),ue=d(N(Db+\" \"+Fb+rc)),ve=d(N(Db+\" \"+Gb+rc)),we=ue.add(ve).appendTo(re),xe=d(N(Ib)),ye=d(N(Hb)).appendTo(xe),ze=d(N(Jb)).appendTo(ye),Ae=d(),Be=d(),Ce=(se.data(),ze.data(),d(N(jc)).appendTo(ze)),De=d(N($b+rc)),Ee=De[0],Fe=d(N(mc)),Ge=d(N(nc)).appendTo(re),He=Ge[0],Ie=d(N(qc)),Je=!1,Ke={},Le={},Me={},Ne={},Oe={},Pe={},Qe={},Re={},Se=0,Te=[];\nqe[Xc]=d(N(yb)),qe[Zc]=d(N(Mb+\" \"+Ob+rc,N(ic))),qe[Yc]=d(N(Mb+\" \"+Nb+rc,N(hc))),Qe[Xc]=[],Qe[Zc]=[],Qe[Yc]=[],Re[Xc]={},qe.addClass(Ic?mb:lb).toggleClass(qb,!e.controlsonstart),ne.fotorama=this,ie.startAutoplay=function(a){return ie.autoplay?this:(ce=de=!1,t(a||e.autoplay),jd(),this)},ie.stopAutoplay=function(){return ie.autoplay&&(ce=de=!0,jd()),this},ie.show=function(a){var b;\"object\"!=typeof a?(b=a,a={}):b=a.index,b=\">\"===b?Gd+1:\"<\"===b?Gd-1:\"<<\"===b?0:\">>\"===b?zd-1:b,b=isNaN(b)?L(b,yd,!0):b,b=\"undefined\"==typeof b?Je||0:b,ie.activeIndex=Je=z(b),Id=E(Je),Jd=U(Je),Kd=x(Je+(Yd?-1:1)),Ed=[Je,Id,Jd],Gd=Md?b:Je;var c=Math.abs(Hd-Gd),d=w(a.time,function(){return Math.min(Vd*(1+(c-1)/12),2*Vd)}),f=a.overPos;a.slow&&(d*=10);var g=Dd;ie.activeFrame=Dd=yd[Je];var i=g===Dd&&!a.user;md(Cd,Dd.i!==yd[x(Fd)].i),lc(Ed,\"stage\"),tc(Mc?[Gd]:[Gd,E(Gd),U(Gd)]),rd(\"go\",!0),i||fd(\"show\",{user:a.user,time:d}),ce=!0;var j=ie.show.onEnd=function(b){if(!j.ok){if(j.ok=!0,b||cd(!0),i||fd(\"showend\",{user:a.user}),!b&&Wd&&Wd!==e.transition)return ie.setOptions({transition:Wd}),void(Wd=!1);Sb(),Pb(Ed,\"stage\"),rd(\"go\",!1),Hc(),od(),id(),jd()}};if(Sd){var k=Dd[Xc],l=Je!==Hd?yd[Hd][Xc]:null;ab(k,l,te,{time:d,method:e.transition,onEnd:j},Te)}else _(se,{pos:-r(Gd,Le.w,e.margin,Fd),overPos:f,time:d,onEnd:j});if(Gc(),Nd){Tc();var m=y(Je+h(Gd-Hd,-1,1));Rc({time:d,coo:m!==Je&&a.coo,guessIndex:\"undefined\"!=typeof a.coo?m:Je,keep:i}),Od&&Oc(d)}return be=\"undefined\"!=typeof Hd&&Hd!==Je,Hd=Je,e.hash&&be&&!ie.eq&&H(Dd.id||Je+1),this},ie.requestFullScreen=function(){return Qd&&!ie.fullScreen&&(_d=Ec.scrollTop(),ae=Ec.scrollLeft(),Q(Ec),rd(\"x\",!0),ee=d.extend({},Le),a.addClass(Zb).appendTo(Dc.addClass(jb)),Cc.addClass(jb),md(Cd,!0,!0),ie.fullScreen=!0,Rd&&vc.request(le),ie.resize(),Pb(Ed,\"stage\"),Sb(),fd(\"fullscreenenter\")),this},ie.cancelFullScreen=function(){return Rd&&vc.is()?vc.cancel(b):kd(),this},ie.toggleFullScreen=function(){return ie[(ie.fullScreen?\"cancel\":\"request\")+\"FullScreen\"]()},T(b,vc.event,function(){!yd||vc.is()||Cd||kd()}),ie.resize=function(a){if(!yd)return this;var b=arguments[1]||0,c=arguments[2];ed(ie.fullScreen?{width:\"100%\",maxwidth:null,minwidth:null,height:\"100%\",maxheight:null,minheight:null}:R(a),[Le,c||ie.fullScreen||e]);var d=Le.width,f=Le.height,g=Le.ratio,i=Ec.height()-(Nd?ye.height():0);return q(d)&&(qe.addClass(ub).css({width:d,minWidth:Le.minwidth||0,maxWidth:Le.maxwidth||ad}),d=Le.W=Le.w=qe.width(),Le.nw=Nd&&p(e.navwidth,d)||d,e.glimpse&&(Le.w-=Math.round(2*(p(e.glimpse,d)||0))),se.css({width:Le.w,marginLeft:(Le.W-Le.w)/2}),f=p(f,i),f=f||g&&d/g,f&&(d=Math.round(d),f=Le.h=Math.round(h(f,p(Le.minheight,i),p(Le.maxheight,i))),re.stop().animate({width:d,height:f},b,function(){qe.removeClass(ub)}),cd(),Nd&&(ye.stop().animate({width:Le.nw},b),Rc({guessIndex:Je,time:b,keep:!0}),Od&&wc.nav&&Oc(b)),$d=c||!0,xd())),Se=re.offset().left,this},ie.setOptions=function(a){return d.extend(e,a),vd(),this},ie.shuffle=function(){return yd&&O(yd)&&vd(),this},ie.destroy=function(){return ie.cancelFullScreen(),ie.stopAutoplay(),yd=ie.data=null,j(),Ed=[],bd(Xc),vd.ok=!1,this},ie.playVideo=function(){var a=Dd,b=a.video,c=Je;return\"object\"==typeof b&&a.videoReady&&(Rd&&ie.fullScreen&&ie.cancelFullScreen(),G(function(){return!vc.is()||c!==Je},function(){c===Je&&(a.$video=a.$video||d(d.Fotorama.jst.video(b)),a.$video.appendTo(a[Xc]),qe.addClass(nb),Cd=a.$video,o(),we.blur(),De.blur(),fd(\"loadvideo\"))})),this},ie.stopVideo=function(){return md(Cd,!0,!0),this},re.on(\"mousemove\",od),Me=db(se,{onStart:gd,onMove:function(a,b){ld(re,b.edge)},onTouchEnd:hd,onEnd:function(a){ld(re);var b=(Nc&&!ge||a.touch)&&e.arrows&&\"always\"!==e.arrows;if(a.moved||b&&a.pos!==a.newPos&&!a.control){var c=s(a.newPos,Le.w,e.margin,Fd);ie.show({index:c,time:Sd?Vd:a.time,overPos:a.overPos,user:!0})}else a.aborted||a.control||qd(a.startEvent,b)},timeLow:1,timeHigh:1,friction:2,select:\".\"+Xb+\", .\"+Xb+\" *\",$wrap:re}),Oe=db(ze,{onStart:gd,onMove:function(a,b){ld(ye,b.edge)},onTouchEnd:hd,onEnd:function(a){function b(){Rc.l=a.newPos,id(),jd(),uc(a.newPos,!0)}if(a.moved)a.pos!==a.newPos?(ce=!0,_(ze,{time:a.time,pos:a.newPos,overPos:a.overPos,onEnd:b}),uc(a.newPos),Xd&&ld(ye,K(a.newPos,Oe.min,Oe.max))):b();else{var c=a.$target.closest(\".\"+Mb,ze)[0];c&&sd.call(c,a.startEvent)}},timeLow:.5,timeHigh:2,friction:5,$wrap:ye}),Ne=eb(re,{shift:!0,onEnd:function(a,b){gd(),hd(),ie.show({index:b,slow:a.altKey})}}),Pe=eb(ye,{onEnd:function(a,b){gd(),hd();var c=v(ze)+.25*b;ze.css(k(h(c,Oe.min,Oe.max))),Xd&&ld(ye,K(c,Oe.min,Oe.max)),Pe.prevent={\"<\":c>=Oe.max,\">\":c<=Oe.min},clearTimeout(Pe.t),Pe.t=setTimeout(function(){Rc.l=c,uc(c,!0)},Pc),uc(c)}}),qe.hover(function(){setTimeout(function(){fe||nd(!(ge=!0))},0)},function(){ge&&nd(!(ge=!1))}),M(we,function(a){Y(a),td.call(this,a)},{onStart:function(){gd(),Me.control=!0},onTouchEnd:hd}),we.each(function(){W(this,function(a){td.call(this,a)}),ud(this)}),W(Ee,ie.toggleFullScreen),ud(Ee),d.each(\"load push pop shift unshift reverse sort splice\".split(\" \"),function(a,b){ie[b]=function(){return yd=yd||[],\"load\"!==b?Array.prototype[b].apply(yd,arguments):arguments[0]&&\"object\"==typeof arguments[0]&&arguments[0].length&&(yd=P(arguments[0])),vd(),ie}}),vd()},d.fn.fotorama=function(b){return this.each(function(){var c=this,e=d(this),f=e.data(),g=f.fotorama;g?g.setOptions(b,!0):G(function(){return!E(c)},function(){f.urtext=e.html(),new d.Fotorama(e,d.extend({},cd,a.fotoramaDefaults,b,f))})})},d.Fotorama.instances=[],d.Fotorama.cache={},d.Fotorama.measures={},d=d||{},d.Fotorama=d.Fotorama||{},d.Fotorama.jst=d.Fotorama.jst||{},d.Fotorama.jst.style=function(a){{var b,c=\"\";tc.escape}return c+=\".fotorama\"+(null==(b=a.s)?\"\":b)+\" .fotorama__nav--thumbs .fotorama__nav__frame{\\npadding:\"+(null==(b=a.m)?\"\":b)+\"px;\\nheight:\"+(null==(b=a.h)?\"\":b)+\"px}\\n.fotorama\"+(null==(b=a.s)?\"\":b)+\" .fotorama__thumb-border{\\nheight:\"+(null==(b=a.h-a.b*(a.q?0:2))?\"\":b)+\"px;\\nborder-width:\"+(null==(b=a.b)?\"\":b)+\"px;\\nmargin-top:\"+(null==(b=a.m)?\"\":b)+\"px}\"},d.Fotorama.jst.video=function(a){function b(){c+=d.call(arguments,\"\")}var c=\"\",d=(tc.escape,Array.prototype.join);return c+='<div class=\"fotorama__video\"><iframe src=\"',b((\"youtube\"==a.type?a.p+\"youtube.com/embed/\"+a.id+\"?autoplay=1\":\"vimeo\"==a.type?a.p+\"player.vimeo.com/video/\"+a.id+\"?autoplay=1&badge=0\":a.id)+(a.s&&\"custom\"!=a.type?\"&\"+a.s:\"\")),c+='\" frameborder=\"0\" allowfullscreen></iframe></div>\\n'},d(function(){d(\".\"+ib+':not([data-auto=\"false\"])').fotorama()})}(window,document,location,\"undefined\"!=typeof jQuery&&jQuery);"}
}});
